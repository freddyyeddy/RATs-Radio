!function(F,g,l){function d(){var a=F.L;b.noConflict=function(){return F.L=a,this};F.L=b}var b={version:"1.0.3"};"object"==typeof module&&"object"==typeof module.exports?module.exports=b:"function"==typeof define&&define.amd&&define(b);"undefined"!=typeof F&&d();b.Util={extend:function(a){var c,e;var f=1;for(e=arguments.length;f<e;f++){var b=arguments[f];for(c in b)a[c]=b[c]}return a},create:Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}(),bind:function(a,
c){var e=Array.prototype.slice;if(a.bind)return a.bind.apply(a,e.call(arguments,1));var f=e.call(arguments,2);return function(){return a.apply(c,f.length?f.concat(e.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++b.Util.lastId,a._leaflet_id},lastId:0,throttle:function(a,c,e){var f,b,n,m;return m=function(){f=!1;b&&(n.apply(e,b),b=!1)},n=function(){f?b=arguments:(a.apply(e,arguments),setTimeout(m,c),f=!0)}},wrapNum:function(a,c,e){var f=c[1];c=c[0];var b=f-c;return a===
f&&e?a:((a-c)%b+b)%b+c},falseFn:function(){return!1},formatNum:function(a,c){var e=Math.pow(10,c||5);return Math.round(a*e)/e},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return b.Util.trim(a).split(/\s+/)},setOptions:function(a,c){a.hasOwnProperty("options")||(a.options=a.options?b.Util.create(a.options):{});for(var e in c)a.options[e]=c[e];return a.options},getParamString:function(a,c,e){var f=[],b;for(b in a)f.push(encodeURIComponent(e?b.toUpperCase():
b)+"="+encodeURIComponent(a[b]));return(c&&-1!==c.indexOf("?")?"&":"?")+f.join("&")},template:function(a,c){return a.replace(b.Util.templateRe,function(a,f){var e=c[f];if(e===l)throw Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(c)),e})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,c){for(var e=0;e<a.length;e++)if(a[e]===c)return e;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};
(function(){function a(a){return F["webkit"+a]||F["moz"+a]||F["ms"+a]}function c(a){var c=+new Date,f=Math.max(0,16-(c-e));return e=c+f,F.setTimeout(a,f)}var e=0,f=F.requestAnimationFrame||a("RequestAnimationFrame")||c,k=F.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||function(a){F.clearTimeout(a)};b.Util.requestAnimFrame=function(a,e,k){return k&&f===c?void a.call(e):f.call(F,b.bind(a,e))};b.Util.cancelAnimFrame=function(a){a&&k.call(F,a)}})();b.extend=b.Util.extend;
b.bind=b.Util.bind;b.stamp=b.Util.stamp;b.setOptions=b.Util.setOptions;b.Class=function(){};b.Class.extend=function(a){var c=function(){this.initialize&&this.initialize.apply(this,arguments);this.callInitHooks()},e=c.__super__=this.prototype,f=b.Util.create(e);f.constructor=c;c.prototype=f;for(var k in this)this.hasOwnProperty(k)&&"prototype"!==k&&(c[k]=this[k]);return a.statics&&(b.extend(c,a.statics),delete a.statics),a.includes&&(b.Util.extend.apply(null,[f].concat(a.includes)),delete a.includes),
f.options&&(a.options=b.Util.extend(b.Util.create(f.options),a.options)),b.extend(f,a),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){e.callInitHooks&&e.callInitHooks.call(this);this._initHooksCalled=!0;for(var a=0,c=f._initHooks.length;a<c;a++)f._initHooks[a].call(this)}},c};b.Class.include=function(a){return b.extend(this.prototype,a),this};b.Class.mergeOptions=function(a){return b.extend(this.prototype.options,a),this};b.Class.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,
1);return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push("function"==typeof a?a:function(){this[a].apply(this,c)}),this};b.Evented=b.Class.extend({on:function(a,c,e){if("object"==typeof a)for(var f in a)this._on(f,a[f],c);else{a=b.Util.splitWords(a);f=0;for(var k=a.length;f<k;f++)this._on(a[f],c,e)}return this},off:function(a,c,e){if(a)if("object"==typeof a)for(var f in a)this._off(f,a[f],c);else{a=b.Util.splitWords(a);f=0;for(var k=a.length;f<k;f++)this._off(a[f],
c,e)}else delete this._events;return this},_on:function(a,c,e){this._events=this._events||{};var f=this._events[a];f||(f=[],this._events[a]=f);e===this&&(e=l);a={fn:c,ctx:e};for(var b=0,n=f.length;b<n;b++)if(f[b].fn===c&&f[b].ctx===e)return;f.push(a)},_off:function(a,c,e){var f,k;if(this._events&&(f=this._events[a])){if(!c){var n=0;for(k=f.length;n<k;n++)f[n].fn=b.Util.falseFn;return void delete this._events[a]}if(e===this&&(e=l),f)for(n=0,k=f.length;n<k;n++){var m=f[n];if(m.ctx===e&&m.fn===c)return m.fn=
b.Util.falseFn,this._firingCount&&(this._events[a]=f=f.slice()),void f.splice(n,1)}}},fire:function(a,c,e){if(!this.listens(a,e))return this;c=b.Util.extend({},c,{type:a,target:this});if(this._events&&(a=this._events[a])){this._firingCount=this._firingCount+1||1;for(var f=0,k=a.length;f<k;f++){var n=a[f];n.fn.call(n.ctx||this,c)}this._firingCount--}return e&&this._propagateEvent(c),this},listens:function(a,c){var e=this._events&&this._events[a];if(e&&e.length)return!0;if(c)for(var f in this._eventParents)if(this._eventParents[f].listens(a,
c))return!0;return!1},once:function(a,c,e){if("object"==typeof a){for(var f in a)this.once(f,a[f],c);return this}var k=b.bind(function(){this.off(a,c,e).off(a,k,e)},this);return this.on(a,c,e).on(a,k,e)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[b.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[b.stamp(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,
b.extend({layer:a.target},a),!0)}});var h=b.Evented.prototype;h.addEventListener=h.on;h.removeEventListener=h.clearAllEventListeners=h.off;h.addOneTimeEventListener=h.once;h.fireEvent=h.fire;h.hasEventListeners=h.listens;b.Mixin={Events:h};(function(){var a=navigator.userAgent.toLowerCase(),c=g.documentElement,e="ActiveXObject"in F,f=-1!==a.indexOf("webkit"),k=-1!==a.indexOf("phantom"),n=-1!==a.search("android [23]"),m=-1!==a.indexOf("chrome"),h=-1!==a.indexOf("gecko")&&!f&&!F.opera&&!e,d=0===navigator.platform.indexOf("Win"),
q="undefined"!=typeof orientation||-1!==a.indexOf("mobile"),t=!F.PointerEvent&&F.MSPointerEvent,w=F.PointerEvent||t,v=e&&"transition"in c.style,y="WebKitCSSMatrix"in F&&"m11"in new F.WebKitCSSMatrix&&!n,A="MozPerspective"in c.style,c="OTransition"in c.style,z=!F.L_NO_TOUCH&&(w||"ontouchstart"in F||F.DocumentTouch&&g instanceof F.DocumentTouch);b.Browser={ie:e,ielt9:e&&!g.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in g),webkit:f,gecko:h,android:-1!==a.indexOf("android"),android23:n,
chrome:m,safari:!m&&-1!==a.indexOf("safari"),win:d,ie3d:v,webkit3d:y,gecko3d:A,opera12:c,any3d:!F.L_DISABLE_3D&&(v||y||A)&&!c&&!k,mobile:q,mobileWebkit:q&&f,mobileWebkit3d:q&&y,mobileOpera:q&&F.opera,mobileGecko:q&&h,touch:!!z,msPointer:!!t,pointer:!!w,retina:1<(F.devicePixelRatio||F.screen.deviceXDPI/F.screen.logicalXDPI)}})();b.Point=function(a,c,e){this.x=e?Math.round(a):a;this.y=e?Math.round(c):c};b.Point.prototype={clone:function(){return new b.Point(this.x,this.y)},add:function(a){return this.clone()._add(b.point(a))},
_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(b.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new b.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new b.Point(this.x/
a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(a){a=b.point(a);var c=a.x-this.x;a=a.y-this.y;return Math.sqrt(c*c+a*a)},equals:function(a){return a=
b.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=b.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b.Util.formatNum(this.x)+", "+b.Util.formatNum(this.y)+")"}};b.point=function(a,c,e){return a instanceof b.Point?a:b.Util.isArray(a)?new b.Point(a[0],a[1]):a===l||null===a?a:"object"==typeof a&&"x"in a&&"y"in a?new b.Point(a.x,a.y):new b.Point(a,c,e)};b.Bounds=function(a,c){if(a)for(var e=c?[a,c]:a,f=0,b=e.length;f<b;f++)this.extend(e[f])};
b.Bounds.prototype={extend:function(a){return a=b.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new b.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new b.Point(this.min.x,this.max.y)},getTopRight:function(){return new b.Point(this.max.x,this.min.y)},
getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,e;return a="number"==typeof a[0]||a instanceof b.Point?b.point(a):b.bounds(a),a instanceof b.Bounds?(c=a.min,e=a.max):c=e=a,c.x>=this.min.x&&e.x<=this.max.x&&c.y>=this.min.y&&e.y<=this.max.y},intersects:function(a){a=b.bounds(a);var c=this.min,e=this.max,f=a.min;a=a.max;var k=a.y>=c.y&&f.y<=e.y;return a.x>=c.x&&f.x<=e.x&&k},overlaps:function(a){a=b.bounds(a);var c=this.min,e=this.max,f=a.min;a=a.max;var k=a.y>c.y&&f.y<
e.y;return a.x>c.x&&f.x<e.x&&k},isValid:function(){return!(!this.min||!this.max)}};b.bounds=function(a,c){return!a||a instanceof b.Bounds?a:new b.Bounds(a,c)};b.Transformation=function(a,c,e,f){this._a=a;this._b=c;this._c=e;this._d=f};b.Transformation.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new b.Point((a.x/c-this._b)/this._a,(a.y/
c-this._d)/this._c)}};b.DomUtil={get:function(a){return"string"==typeof a?g.getElementById(a):a},getStyle:function(a,c){var e=a.style[c]||a.currentStyle&&a.currentStyle[c];e&&"auto"!==e||!g.defaultView||(e=(e=g.defaultView.getComputedStyle(a,null))?e[c]:null);return"auto"===e?null:e},create:function(a,c,e){a=g.createElement(a);return a.className=c||"",e&&e.appendChild(a),a},remove:function(a){var c=a.parentNode;c&&c.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},
toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var c=a.parentNode;c.insertBefore(a,c.firstChild)},hasClass:function(a,c){if(a.classList!==l)return a.classList.contains(c);var e=b.DomUtil.getClass(a);return 0<e.length&&(new RegExp("(^|\\s)"+c+"(\\s|$)")).test(e)},addClass:function(a,c){if(a.classList!==l)for(var e=b.Util.splitWords(c),f=0,k=e.length;f<k;f++)a.classList.add(e[f]);else b.DomUtil.hasClass(a,c)||(e=b.DomUtil.getClass(a),b.DomUtil.setClass(a,(e?e+" ":"")+c))},removeClass:function(a,
c){a.classList!==l?a.classList.remove(c):b.DomUtil.setClass(a,b.Util.trim((" "+b.DomUtil.getClass(a)+" ").replace(" "+c+" "," ")))},setClass:function(a,c){a.className.baseVal===l?a.className=c:a.className.baseVal=c},getClass:function(a){return a.className.baseVal===l?a.className:a.className.baseVal},setOpacity:function(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&b.DomUtil._setOpacityIE(a,c)},_setOpacityIE:function(a,c){var e=!1;try{e=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(f){if(1===
c)return}c=Math.round(100*c);e?(e.Enabled=100!==c,e.Opacity=c):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+c+")"},testProp:function(a){for(var c=g.documentElement.style,e=0;e<a.length;e++)if(a[e]in c)return a[e];return!1},setTransform:function(a,c,e){c=c||new b.Point(0,0);a.style[b.DomUtil.TRANSFORM]=(b.Browser.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(e?" scale("+e+")":"")},setPosition:function(a,c){a._leaflet_pos=c;b.Browser.any3d?b.DomUtil.setTransform(a,
c):(a.style.left=c.x+"px",a.style.top=c.y+"px")},getPosition:function(a){return a._leaflet_pos||new b.Point(0,0)}};(function(){b.DomUtil.TRANSFORM=b.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var a=b.DomUtil.TRANSITION=b.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(b.DomUtil.TRANSITION_END="webkitTransition"===a||"OTransition"===a?a+"End":"transitionend","onselectstart"in g)b.DomUtil.disableTextSelection=
function(){b.DomEvent.on(F,"selectstart",b.DomEvent.preventDefault)},b.DomUtil.enableTextSelection=function(){b.DomEvent.off(F,"selectstart",b.DomEvent.preventDefault)};else{var c=b.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);b.DomUtil.disableTextSelection=function(){if(c){var a=g.documentElement.style;this._userSelect=a[c];a[c]="none"}};b.DomUtil.enableTextSelection=function(){c&&(g.documentElement.style[c]=this._userSelect,delete this._userSelect)}}b.DomUtil.disableImageDrag=
function(){b.DomEvent.on(F,"dragstart",b.DomEvent.preventDefault)};b.DomUtil.enableImageDrag=function(){b.DomEvent.off(F,"dragstart",b.DomEvent.preventDefault)};b.DomUtil.preventOutline=function(a){for(;-1===a.tabIndex;)a=a.parentNode;a&&a.style&&(b.DomUtil.restoreOutline(),this._outlineElement=a,this._outlineStyle=a.style.outline,a.style.outline="none",b.DomEvent.on(F,"keydown",b.DomUtil.restoreOutline,this))};b.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=
this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,b.DomEvent.off(F,"keydown",b.DomUtil.restoreOutline,this))}})();b.LatLng=function(a,c,e){if(isNaN(a)||isNaN(c))throw Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a;this.lng=+c;e!==l&&(this.alt=+e)};b.LatLng.prototype={equals:function(a,c){if(!a)return!1;a=b.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(c===l?1E-9:c)},toString:function(a){return"LatLng("+b.Util.formatNum(this.lat,a)+
", "+b.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return b.CRS.Earth.distance(this,b.latLng(a))},wrap:function(){return b.CRS.Earth.wrapLatLng(this)},toBounds:function(a){a=180*a/40075017;var c=a/Math.cos(Math.PI/180*this.lat);return b.latLngBounds([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new b.LatLng(this.lat,this.lng,this.alt)}};b.latLng=function(a,c,e){return a instanceof b.LatLng?a:b.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new b.LatLng(a[0],
a[1],a[2]):2===a.length?new b.LatLng(a[0],a[1]):null:a===l||null===a?a:"object"==typeof a&&"lat"in a?new b.LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===l?null:new b.LatLng(a,c,e)};b.LatLngBounds=function(a,c){if(a)for(var e=c?[a,c]:a,f=0,b=e.length;f<b;f++)this.extend(e[f])};b.LatLngBounds.prototype={extend:function(a){var c,e=this._southWest,f=this._northEast;if(a instanceof b.LatLng)var k=c=a;else{if(!(a instanceof b.LatLngBounds))return a?this.extend(b.latLng(a)||b.latLngBounds(a)):this;if(c=
a._southWest,k=a._northEast,!c||!k)return this}return e||f?(e.lat=Math.min(c.lat,e.lat),e.lng=Math.min(c.lng,e.lng),f.lat=Math.max(k.lat,f.lat),f.lng=Math.max(k.lng,f.lng)):(this._southWest=new b.LatLng(c.lat,c.lng),this._northEast=new b.LatLng(k.lat,k.lng)),this},pad:function(a){var c=this._southWest,e=this._northEast,f=Math.abs(c.lat-e.lat)*a;a*=Math.abs(c.lng-e.lng);return new b.LatLngBounds(new b.LatLng(c.lat-f,c.lng-a),new b.LatLng(e.lat+f,e.lng+a))},getCenter:function(){return new b.LatLng((this._southWest.lat+
this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new b.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new b.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},
contains:function(a){a="number"==typeof a[0]||a instanceof b.LatLng||"lat"in a?b.latLng(a):b.latLngBounds(a);var c,e,f=this._southWest,k=this._northEast;return a instanceof b.LatLngBounds?(c=a.getSouthWest(),e=a.getNorthEast()):c=e=a,c.lat>=f.lat&&e.lat<=k.lat&&c.lng>=f.lng&&e.lng<=k.lng},intersects:function(a){a=b.latLngBounds(a);var c=this._southWest,e=this._northEast,f=a.getSouthWest();a=a.getNorthEast();var k=a.lng>=c.lng&&f.lng<=e.lng;return a.lat>=c.lat&&f.lat<=e.lat&&k},overlaps:function(a){a=
b.latLngBounds(a);var c=this._southWest,e=this._northEast,f=a.getSouthWest();a=a.getNorthEast();var k=a.lng>c.lng&&f.lng<e.lng;return a.lat>c.lat&&f.lat<e.lat&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join()},equals:function(a){return!!a&&(a=b.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}};b.latLngBounds=function(a,c){return a instanceof
b.LatLngBounds?a:new b.LatLngBounds(a,c)};b.Projection={};b.Projection.LonLat={project:function(a){return new b.Point(a.lng,a.lat)},unproject:function(a){return new b.LatLng(a.y,a.x)},bounds:b.bounds([-180,-90],[180,90])};b.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,e=this.MAX_LATITUDE,e=Math.sin(Math.max(Math.min(e,a.lat),-e)*c);return new b.Point(this.R*a.lng*c,this.R*Math.log((1+e)/(1-e))/2)},unproject:function(a){var c=180/Math.PI;
return new b.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=6378137*Math.PI;return b.bounds([-a,-a],[a,a])}()};b.CRS={latLngToPoint:function(a,c){var e=this.projection.project(a),f=this.scale(c);return this.transformation._transform(e,f)},pointToLatLng:function(a,c){var e=this.scale(c),e=this.transformation.untransform(a,e);return this.projection.unproject(e)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},
scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,e=this.scale(a);a=this.transformation.transform(c.min,e);c=this.transformation.transform(c.max,e);return b.bounds(a,c)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?b.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,e=this.wrapLat?b.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat;return b.latLng(e,c,a.alt)},wrapLatLngBounds:function(a){var c=
a.getCenter(),e=this.wrapLatLng(c),f=c.lat-e.lat,c=c.lng-e.lng;if(0===f&&0===c)return a;e=a.getSouthWest();a=a.getNorthEast();e=b.latLng({lat:e.lat-f,lng:e.lng-c});f=b.latLng({lat:a.lat-f,lng:a.lng-c});return new b.LatLngBounds(e,f)}};b.CRS.Simple=b.extend({},b.CRS,{projection:b.Projection.LonLat,transformation:new b.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var e=c.lng-a.lng,f=c.lat-a.lat;return Math.sqrt(e*
e+f*f)},infinite:!0});b.CRS.Earth=b.extend({},b.CRS,{wrapLng:[-180,180],R:6371E3,distance:function(a,c){var e=Math.PI/180,f=a.lat*e,b=c.lat*e;return this.R*Math.acos(Math.min(Math.sin(f)*Math.sin(b)+Math.cos(f)*Math.cos(b)*Math.cos((c.lng-a.lng)*e),1))}});b.CRS.EPSG3857=b.extend({},b.CRS.Earth,{code:"EPSG:3857",projection:b.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*b.Projection.SphericalMercator.R);return new b.Transformation(a,.5,-a,.5)}()});b.CRS.EPSG900913=b.extend({},
b.CRS.EPSG3857,{code:"EPSG:900913"});b.CRS.EPSG4326=b.extend({},b.CRS.Earth,{code:"EPSG:4326",projection:b.Projection.LonLat,transformation:new b.Transformation(1/180,1,-1/180,.5)});b.Map=b.Evented.extend({options:{crs:b.CRS.EPSG3857,center:l,zoom:l,minZoom:l,maxZoom:l,layers:[],maxBounds:l,renderer:l,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=b.setOptions(this,c);this._initContainer(a);
this._initLayout();this._onResize=b.bind(this._onResize,this);this._initEvents();c.maxBounds&&this.setMaxBounds(c.maxBounds);c.zoom!==l&&(this._zoom=this._limitZoom(c.zoom));c.center&&c.zoom!==l&&this.setView(b.latLng(c.center),c.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=!0;this.callInitHooks();(this._zoomAnimated=b.DomUtil.TRANSITION&&b.Browser.any3d&&!b.Browser.mobileOpera&&this.options.zoomAnimation)&&(this._createAnimProxy(),b.DomEvent.on(this._proxy,
b.DomUtil.TRANSITION_END,this._catchTransitionEnd,this));this._addLayers(this.options.layers)},setView:function(a,c,e){if(c=c===l?this._zoom:this._limitZoom(c),a=this._limitCenter(b.latLng(a),c,this.options.maxBounds),e=e||{},this._stop(),this._loaded&&!e.reset&&!0!==e)if(e.animate!==l&&(e.zoom=b.extend({animate:e.animate},e.zoom),e.pan=b.extend({animate:e.animate,duration:e.duration},e.pan)),this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,e.zoom):this._tryAnimatedPan(a,e.pan))return clearTimeout(this._sizeTimer),
this;return this._resetView(a,c),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(b.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(b.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,e){var f=this.getZoomScale(c),k=this.getSize().divideBy(2);a=(a instanceof b.Point?a:this.latLngToContainerPoint(a)).subtract(k).multiplyBy(1-
1/f);k=this.containerPointToLatLng(k.add(a));return this.setView(k,c,{zoom:e})},_getBoundsCenterZoom:function(a,c){c=c||{};a=a.getBounds?a.getBounds():b.latLngBounds(a);var e=b.point(c.paddingTopLeft||c.padding||[0,0]),f=b.point(c.paddingBottomRight||c.padding||[0,0]),k=this.getBoundsZoom(a,!1,e.add(f)),k="number"==typeof c.maxZoom?Math.min(c.maxZoom,k):k,e=f.subtract(e).divideBy(2),f=this.project(a.getSouthWest(),k),n=this.project(a.getNorthEast(),k);return{center:this.unproject(f.add(n).divideBy(2).add(e),
k),zoom:k}},fitBounds:function(a,c){if(a=b.latLngBounds(a),!a.isValid())throw Error("Bounds are not valid.");var e=this._getBoundsCenterZoom(a,c);return this.setView(e.center,e.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=b.point(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(!0!==c.animate&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),
this.getZoom()),this;if(this._panAnim||(this._panAnim=new b.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),!1!==c.animate){b.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var e=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,e,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,e){function f(a){a=(y*y-v*v+(a?
-1:1)*B*B*A*A)/(2*(a?y:v)*B*A);a=Math.sqrt(a*a+1)-a;return 1E-9>a?-18:Math.log(a)}function k(a){return(Math.exp(a)+Math.exp(-a))/2}function n(a){return v*(k(x)/k(x+z*a))}function m(a){var c=v,e=k(x);a=x+z*a;a=(Math.exp(a)-Math.exp(-a))/2/k(a);return c*(e*a-(Math.exp(x)-Math.exp(-x))/2)/B}function h(){var e=(Date.now()-E)/D,f=(1-Math.pow(1-e,1.5))*C;1>=e?(this._flyToFrame=b.Util.requestAnimFrame(h,this),this._move(this.unproject(d.add(q.subtract(d).multiplyBy(m(f)/A)),g),this.getScaleZoom(v/n(f),g),
{flyTo:!0})):this._move(a,c)._moveEnd(!0)}if(e=e||{},!1===e.animate||!b.Browser.any3d)return this.setView(a,c,e);this._stop();var d=this.project(this.getCenter()),q=this.project(a),t=this.getSize(),g=this._zoom;a=b.latLng(a);c=c===l?g:c;var v=Math.max(t.x,t.y),y=v*this.getZoomScale(g,c),A=q.distanceTo(d)||1,z=1.42,B=z*z,x=f(0),E=Date.now(),C=(f(1)-x)/z,D=e.duration?1E3*e.duration:800*C;return this._moveStart(!0),h.call(this),this},flyToBounds:function(a,c){var e=this._getBoundsCenterZoom(a,c);return this.flyTo(e.center,
e.zoom,c)},setMaxBounds:function(a){return a=b.latLngBounds(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=
a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var e=this.getCenter(),f=this._limitCenter(e,this._zoom,b.latLngBounds(a));return e.equals(f)||this.panTo(f,c),this._enforcingBounds=!1,this},invalidateSize:function(a){if(!this._loaded)return this;a=b.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0;this._lastCenter=null;var e=this.getSize(),f=c.divideBy(2).round(),k=e.divideBy(2).round(),
f=f.subtract(k);return f.x||f.y?(a.animate&&a.pan?this.panBy(f):(a.pan&&this._rawPanBy(f),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(b.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:e})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=b.extend({timeout:1E4,watch:!1},a),!("geolocation"in
navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=b.bind(this._handleGeolocationResponse,this),e=b.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,e,a):navigator.geolocation.getCurrentPosition(c,e,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=
!1),this},_handleGeolocationError:function(a){var c=a.code;a=a.message||(1===c?"permission denied":2===c?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:c,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(a){var c=new b.LatLng(a.coords.latitude,a.coords.longitude),e=c.toBounds(a.coords.accuracy),f=this._locateOptions;if(f.setView){var k=this.getBoundsZoom(e);this.setView(c,f.maxZoom?Math.min(k,f.maxZoom):
k)}var c={latlng:c,bounds:e,timestamp:a.timestamp},n;for(n in a.coords)"number"==typeof a.coords[n]&&(c[n]=a.coords[n]);this.fire("locationfound",c)},addHandler:function(a,c){if(!c)return this;var e=this[a]=new c(this);return this._handlers.push(e),this.options[a]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(c){this._containerId=
this._container._leaflet_id=l}b.DomUtil.remove(this._mapPane);this._clearControlPos&&this._clearControlPos();this._clearHandlers();this._loaded&&this.fire("unload");for(var a in this._layers)this._layers[a].remove();return this},createPane:function(a,c){var e="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),e=b.DomUtil.create("div",e,c||this._mapPane);return a&&(this._panes[a]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},
getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),a=this.unproject(a.getTopRight());return new b.LatLngBounds(c,a)},getMinZoom:function(){return this.options.minZoom===l?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===l?this._layersMaxZoom===l?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,e){a=b.latLngBounds(a);e=b.point(e||[0,0]);var f=this.getZoom()||
0,k=this.getMinZoom(),n=this.getMaxZoom(),m=a.getNorthWest();a=a.getSouthEast();e=this.getSize().subtract(e);m=b.bounds(this.project(a,f),this.project(m,f)).getSize();a=b.Browser.any3d?this.options.zoomSnap:1;return f=this.getScaleZoom(Math.min(e.x/m.x,e.y/m.y),f),a&&(f=a/100*Math.round(f/(a/100)),f=c?Math.ceil(f/a)*a:Math.floor(f/a)*a),Math.max(k,Math.min(n,f))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new b.Point(this._container.clientWidth||0,this._container.clientHeight||
0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var e=this._getTopLeftPoint(a,c);return new b.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===l?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,
c){var e=this.options.crs;return c=c===l?this._zoom:c,e.scale(a)/e.scale(c)},getScaleZoom:function(a,c){var e=this.options.crs;c=c===l?this._zoom:c;e=e.zoom(a*e.scale(c));return isNaN(e)?1/0:e},project:function(a,c){return c=c===l?this._zoom:c,this.options.crs.latLngToPoint(b.latLng(a),c)},unproject:function(a,c){return c=c===l?this._zoom:c,this.options.crs.pointToLatLng(b.point(a),c)},layerPointToLatLng:function(a){a=b.point(a).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(b.latLng(a))._round()._subtract(this.getPixelOrigin())},
wrapLatLng:function(a){return this.options.crs.wrapLatLng(b.latLng(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(b.latLngBounds(a))},distance:function(a,c){return this.options.crs.distance(b.latLng(a),b.latLng(c))},containerPointToLayerPoint:function(a){return b.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return b.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=this.containerPointToLayerPoint(b.point(a));return this.layerPointToLatLng(a)},
latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(b.latLng(a)))},mouseEventToContainerPoint:function(a){return b.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=this._container=b.DomUtil.get(a);if(!a)throw Error("Map container not found.");
if(a._leaflet_id)throw Error("Map container is already initialized.");b.DomEvent.addListener(a,"scroll",this._onScroll,this);this._containerId=b.Util.stamp(a)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&b.Browser.any3d;b.DomUtil.addClass(a,"leaflet-container"+(b.Browser.touch?" leaflet-touch":"")+(b.Browser.retina?" leaflet-retina":"")+(b.Browser.ielt9?" leaflet-oldie":"")+(b.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":
""));var c=b.DomUtil.getStyle(a,"position");"absolute"!==c&&"relative"!==c&&"fixed"!==c&&(a.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);b.DomUtil.setPosition(this._mapPane,new b.Point(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");
this.createPane("popupPane");this.options.markerZoomAnimation||(b.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),b.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c){b.DomUtil.setPosition(this._mapPane,new b.Point(0,0));var e=!this._loaded;this._loaded=!0;c=this._limitZoom(c);this.fire("viewprereset");var f=this._zoom!==c;this._moveStart(f)._move(a,c)._moveEnd(f);this.fire("viewreset");e&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},
_move:function(a,c,e){c===l&&(c=this._zoom);var f=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(f||e&&e.pinch)&&this.fire("zoom",e),this.fire("move",e)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return b.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){b.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-
this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");},_initEvents:function(a){b.DomEvent&&(this._targets={},this._targets[b.stamp(this._container)]=this,a=a?"off":"on",b.DomEvent[a](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&b.DomEvent[a](F,
"resize",this._onResize,this),b.Browser.any3d&&this.options.transform3DLimit&&this[a]("moveend",this._onMoveEnd))},_onResize:function(){b.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=b.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),
this.getZoom())},_findEventTargets:function(a,c){for(var e,f=[],k="mouseout"===c||"mouseover"===c,n=a.target||a.srcElement,m=!1;n;){if(e=this._targets[b.stamp(n)],e&&("click"===c||"preclick"===c)&&!a._simulated&&this._draggableMoved(e)){m=!0;break}if(e&&e.listens(c,!0)){if(k&&!b.DomEvent._isExternalTarget(n,a))break;if(f.push(e),k)break}if(n===this._container)break;n=n.parentNode}return f.length||m||k||!b.DomEvent._isExternalTarget(n,a)||(f=[this]),f},_handleDOMEvent:function(a){if(this._loaded&&
!b.DomEvent._skipped(a)){var c="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===c&&b.DomUtil.preventOutline(a.target||a.srcElement);this._fireDOMEvent(a,c)}},_fireDOMEvent:function(a,c,e){if("click"===a.type){var f=b.Util.extend({},a);f.type="preclick";this._fireDOMEvent(f,f.type,e)}if(!a._stopped&&(e=(e||[]).concat(this._findEventTargets(a,c)),e.length)){var k=e[0];"contextmenu"===c&&k.listens(c,!0)&&b.DomEvent.preventDefault(a);f={originalEvent:a};if("keypress"!==a.type){var n=k instanceof
b.Marker;f.containerPoint=n?this.latLngToContainerPoint(k.getLatLng()):this.mouseEventToContainerPoint(a);f.layerPoint=this.containerPointToLayerPoint(f.containerPoint);f.latlng=n?k.getLatLng():this.layerPointToLatLng(f.layerPoint)}for(a=0;a<e.length&&!(e[a].fire(c,f,!0),f.originalEvent._stopped||e[a].options.nonBubblingEvents&&-1!==b.Util.indexOf(e[a].options.nonBubblingEvents,c));a++);}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||
this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return b.DomUtil.getPosition(this._mapPane)||new b.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){return(a&&c!==l?this._getNewPixelOrigin(a,c):this.getPixelOrigin()).subtract(this._getMapPanePos())},
_getNewPixelOrigin:function(a,c){var e=this.getSize()._divideBy(2);return this.project(a,c)._subtract(e)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,e){e=this._getNewPixelOrigin(e,c);return this.project(a,c)._subtract(e)},_latLngBoundsToNewLayerBounds:function(a,c,e){e=this._getNewPixelOrigin(e,c);return b.bounds([this.project(a.getSouthWest(),c)._subtract(e),this.project(a.getNorthWest(),c)._subtract(e),this.project(a.getSouthEast(),c)._subtract(e),this.project(a.getNorthEast(),
c)._subtract(e)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,e){if(!e)return a;var f=this.project(a,c),k=this.getSize().divideBy(2),k=new b.Bounds(f.subtract(k),f.add(k));e=this._getBoundsOffset(k,e,c);return e.round().equals([0,0])?a:this.unproject(f.add(e),c)},_limitOffset:function(a,c){if(!c)return a;var e=this.getPixelBounds(),
e=new b.Bounds(e.min.add(a),e.max.add(a));return a.add(this._getBoundsOffset(e,c))},_getBoundsOffset:function(a,c,e){e=b.bounds(this.project(c.getNorthEast(),e),this.project(c.getSouthWest(),e));c=e.min.subtract(a.min);e=e.max.subtract(a.max);a=this._rebound(c.x,-e.x);c=this._rebound(c.y,-e.y);return new b.Point(a,c)},_rebound:function(a,c){return 0<a+c?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),e=this.getMaxZoom(),f=b.Browser.any3d?
this.options.zoomSnap:1;return f&&(a=Math.round(a/f)*f),Math.max(c,Math.min(e,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){b.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(a,c){var e=this._getCenterOffset(a)._floor();return!(!0!==(c&&c.animate)&&!this.getSize().contains(e))&&(this.panBy(e,c),!0)},_createAnimProxy:function(){var a=this._proxy=b.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");
this._panes.mapPane.appendChild(a);this.on("zoomanim",function(c){var e=b.DomUtil.TRANSFORM,f=a.style[e];b.DomUtil.setTransform(a,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1));f===a.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this);this.on("load moveend",function(){var c=this.getCenter(),e=this.getZoom();b.DomUtil.setTransform(a,this.project(c,e),this.getZoomScale(e,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&0<=a.propertyName.indexOf("transform")&&
this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,e){if(this._animatingZoom)return!0;if(e=e||{},!this._zoomAnimated||!1===e.animate||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(c),f=this._getCenterOffset(a)._divideBy(1-1/f);return!(!0!==e.animate&&!this.getSize().contains(f))&&(b.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(a,
c,!0)},this),!0)},_animateZoom:function(a,c,e,f){e&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,b.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"));this.fire("zoomanim",{center:a,zoom:c,noUpdate:f});setTimeout(b.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(b.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),b.Util.requestAnimFrame(function(){this._moveEnd(!0)},
this))}});b.map=function(a,c){return new b.Map(a,c)};b.Layer=b.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[b.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[b.stamp(a)],
this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var e=this.getEvents();c.on(e,this);this.once("remove",function(){c.off(e,this)},this)}this.onAdd(c);this.getAttribution&&c.attributionControl&&c.attributionControl.addAttribution(this.getAttribution());this.fire("add");c.fire("layeradd",{layer:this})}}});b.Map.include({addLayer:function(a){var c=b.stamp(a);return this._layers[c]?
this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=b.stamp(a);return this._layers[c]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&b.stamp(a)in this._layers},eachLayer:function(a,
c){for(var e in this._layers)a.call(c,this._layers[e]);return this},_addLayers:function(a){a=a?b.Util.isArray(a)?a:[a]:[];for(var c=0,e=a.length;c<e;c++)this.addLayer(a[c])},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){a=b.stamp(a);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-(1/0),e=this._getZoomSpan(),
f;for(f in this._zoomBoundLayers)var b=this._zoomBoundLayers[f].options,a=b.minZoom===l?a:Math.min(a,b.minZoom),c=b.maxZoom===l?c:Math.max(c,b.maxZoom);this._layersMaxZoom=c===-(1/0)?l:c;this._layersMinZoom=a===1/0?l:a;e!==this._getZoomSpan()&&this.fire("zoomlevelschange");this.options.maxZoom===l&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom);this.options.minZoom===l&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});
b.DomEvent={on:function(a,c,e,f){if("object"==typeof c)for(var k in c)this._on(a,k,c[k],e);else{c=b.Util.splitWords(c);k=0;for(var n=c.length;k<n;k++)this._on(a,c[k],e,f)}return this},off:function(a,c,e,f){if("object"==typeof c)for(var k in c)this._off(a,k,c[k],e);else{c=b.Util.splitWords(c);k=0;for(var n=c.length;k<n;k++)this._off(a,c[k],e,f)}return this},_on:function(a,c,e,f){var k=c+b.stamp(e)+(f?"_"+b.stamp(f):"");if(a._leaflet_events&&a._leaflet_events[k])return this;var n=function(c){return e.call(f||
a,c||F.event)},m=n;return b.Browser.pointer&&0===c.indexOf("touch")?this.addPointerListener(a,c,n,k):!b.Browser.touch||"dblclick"!==c||!this.addDoubleTapListener||b.Browser.pointer&&b.Browser.chrome?"addEventListener"in a?"mousewheel"===c?a.addEventListener("onwheel"in a?"wheel":"mousewheel",n,!1):"mouseenter"===c||"mouseleave"===c?(n=function(c){c=c||F.event;b.DomEvent._isExternalTarget(a,c)&&m(c)},a.addEventListener("mouseenter"===c?"mouseover":"mouseout",n,!1)):("click"===c&&b.Browser.android&&
(n=function(a){return b.DomEvent._filterClick(a,m)}),a.addEventListener(c,n,!1)):"attachEvent"in a&&a.attachEvent("on"+c,n):this.addDoubleTapListener(a,n,k),a._leaflet_events=a._leaflet_events||{},a._leaflet_events[k]=n,this},_off:function(a,c,e,f){e=c+b.stamp(e)+(f?"_"+b.stamp(f):"");return(f=a._leaflet_events&&a._leaflet_events[e])?(b.Browser.pointer&&0===c.indexOf("touch")?this.removePointerListener(a,c,e):b.Browser.touch&&"dblclick"===c&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,
e):"removeEventListener"in a?"mousewheel"===c?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",f,!1):a.removeEventListener("mouseenter"===c?"mouseover":"mouseleave"===c?"mouseout":c,f,!1):"detachEvent"in a&&a.detachEvent("on"+c,f),a._leaflet_events[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,b.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return b.DomEvent.on(a,
"mousewheel",b.DomEvent.stopPropagation)},disableClickPropagation:function(a){var c=b.DomEvent.stopPropagation;return b.DomEvent.on(a,b.Draggable.START.join(" "),c),b.DomEvent.on(a,{click:b.DomEvent._fakeStop,dblclick:c})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return b.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,c){if(!c)return new b.Point(a.clientX,a.clientY);var e=c.getBoundingClientRect();return new b.Point(a.clientX-
e.left-c.clientLeft,a.clientY-e.top-c.clientTop)},_wheelPxFactor:b.Browser.win&&b.Browser.chrome?2:b.Browser.gecko?F.devicePixelRatio:1,getWheelDelta:function(a){return b.Browser.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/b.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&32765>Math.abs(a.detail)?20*-a.detail:a.detail?a.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(a){b.DomEvent._skipEvents[a.type]=
!0},_skipped:function(a){var c=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,c},_isExternalTarget:function(a,c){var e=c.relatedTarget;if(!e)return!0;try{for(;e&&e!==a;)e=e.parentNode}catch(f){return!1}return e!==a},_filterClick:function(a,c){var e=a.timeStamp||a.originalEvent&&a.originalEvent.timeStamp,f=b.DomEvent._lastClick&&e-b.DomEvent._lastClick;return f&&100<f&&500>f||a.target._simulatedClick&&!a._simulated?void b.DomEvent.stop(a):(b.DomEvent._lastClick=e,void c(a))}};b.DomEvent.addListener=
b.DomEvent.on;b.DomEvent.removeListener=b.DomEvent.off;b.PosAnimation=b.Evented.extend({run:function(a,c,e,f){this.stop();this._el=a;this._inProgress=!0;this._duration=e||.25;this._easeOutPower=1/Math.max(f||.5,.2);this._startPos=b.DomUtil.getPosition(a);this._offset=c.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b.Util.requestAnimFrame(this._animate,this);
this._step()},_step:function(a){var c=+new Date-this._startTime,e=1E3*this._duration;c<e?this._runFrame(this._easeOut(c/e),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var e=this._startPos.add(this._offset.multiplyBy(a));c&&e._round();b.DomUtil.setPosition(this._el,e);this.fire("step")},_complete:function(){b.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}});b.Projection.Mercator={R:6378137,
R_MINOR:6356752.314245179,bounds:b.bounds([-2.003750834279E7,-1.549657073972E7],[2.003750834279E7,1.876465623138E7]),project:function(a){var c=Math.PI/180,e=this.R,f=a.lat*c,k=this.R_MINOR/e,k=Math.sqrt(1-k*k),n=k*Math.sin(f);return f=-e*Math.log(Math.max(Math.tan(Math.PI/4-f/2)/Math.pow((1-n)/(1+n),k/2),1E-10)),new b.Point(a.lng*c*e,f)},unproject:function(a){var c,e=180/Math.PI,f=this.R,k=this.R_MINOR/f,k=Math.sqrt(1-k*k),n=Math.exp(-a.y/f),m=Math.PI/2-2*Math.atan(n),h=0;for(c=.1;15>h&&1E-7<Math.abs(c);h++)c=
k*Math.sin(m),c=Math.pow((1-c)/(1+c),k/2),c=Math.PI/2-2*Math.atan(n*c)-m,m+=c;return new b.LatLng(m*e,a.x*e/f)}};b.CRS.EPSG3395=b.extend({},b.CRS.Earth,{code:"EPSG:3395",projection:b.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*b.Projection.Mercator.R);return new b.Transformation(a,.5,-a,.5)}()});b.GridLayer=b.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:b.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:l,noWrap:!1,pane:"tilePane",
className:"",keepBuffer:2},initialize:function(a){b.setOptions(this,a)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles();b.DomUtil.remove(this._container);a._removeZoomLimit(this);this._tileZoom=this._container=null},bringToFront:function(){return this._map&&(b.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&
(b.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,
moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return g.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof b.Point?a:new b.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==l&&null!==this.options.zIndex&&(this._container.style.zIndex=
this.options.zIndex)},_setAutoZIndex:function(a){for(var c,e=this.getPane().children,f=-a(-(1/0),1/0),b=0,n=e.length;b<n;b++)c=e[b].style.zIndex,e[b]!==this._container&&c&&(f=a(f,+c));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!b.Browser.ielt9){b.DomUtil.setOpacity(this._container,this.options.opacity);var a=+new Date,c=!1,e=!1,f;for(f in this._tiles){var k=this._tiles[f];if(k.current&&k.loaded){var n=Math.min(1,(a-k.loaded)/200);b.DomUtil.setOpacity(k.el,
n);1>n?c=!0:(k.active&&(e=!0),k.active=!0)}}e&&!this._noPrune&&this._pruneTiles();c&&(b.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=b.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=b.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;
if(a===l)return l;for(var e in this._levels)this._levels[e].el.children.length||e===a?this._levels[e].el.style.zIndex=c-Math.abs(a-e):(b.DomUtil.remove(this._levels[e].el),this._removeTilesAtZoom(e),delete this._levels[e]);e=this._levels[a];var f=this._map;return e||(e=this._levels[a]={},e.el=b.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),e.el.style.zIndex=c,e.origin=f.project(f.unproject(f.getPixelOrigin()),a).round(),e.zoom=a,this._setZoomTransform(e,f.getCenter(),
f.getZoom()),b.Util.falseFn(e.el.offsetWidth)),this._level=e,e},_pruneTiles:function(){if(this._map){var a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles){var e=this._tiles[a];e.retain=e.current}for(a in this._tiles)if(e=this._tiles[a],e.current&&!e.active)c=e.coords,this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2);for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===
a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)b.DomUtil.remove(this._levels[a].el),delete this._levels[a];this._removeAllTiles();this._tileZoom=null},_retainParent:function(a,c,e,f){a=Math.floor(a/2);c=Math.floor(c/2);--e;var k=new b.Point(+a,+c);k.z=+e;k=this._tileCoordsToKey(k);return(k=this._tiles[k])&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),e>f&&this._retainParent(a,c,e,f))},_retainChildren:function(a,
c,e,f){for(var k=2*a;k<2*a+2;k++)for(var n=2*c;n<2*c+2;n++){var m=new b.Point(k,n);m.z=e+1;m=this._tileCoordsToKey(m);(m=this._tiles[m])&&m.active?m.retain=!0:(m&&m.loaded&&(m.retain=!0),e+1<f&&this._retainChildren(k,n,e+1,f))}},_resetView:function(a){a=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,c,e,f){var b=Math.round(c);(this.options.maxZoom!==l&&b>this.options.maxZoom||
this.options.minZoom!==l&&b<this.options.minZoom)&&(b=l);var n=this.options.updateWhenZooming&&b!==this._tileZoom;f&&!n||(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==l&&this._update(a),e||this._pruneTiles(),this._noPrune=!!e);this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var e in this._levels)this._setZoomTransform(this._levels[e],a,c)},_setZoomTransform:function(a,c,e){var f=this._map.getZoomScale(e,a.zoom);c=a.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(c,
e)).round();b.Browser.any3d?b.DomUtil.setTransform(a.el,c,f):b.DomUtil.setPosition(a.el,c)},_resetGrid:function(){var a=this._map,c=a.options.crs,e=this._tileSize=this.getTileSize(),f=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b));this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],f).x/e.x),Math.ceil(a.project([0,c.wrapLng[1]],f).x/e.y)];this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],
0],f).y/e.x),Math.ceil(a.project([c.wrapLat[1],0],f).y/e.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var c=this._map,e=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),e=c.getZoomScale(e,this._tileZoom);a=c.project(a,this._tileZoom).floor();c=c.getSize().divideBy(2*e);return new b.Bounds(a.subtract(c),a.add(c))},_update:function(a){var c=this._map;if(c){var e=c.getZoom();if(a===l&&(a=c.getCenter()),this._tileZoom!==
l){var c=this._getTiledPixelBounds(a),f=this._pxBoundsToTileRange(c),k=f.getCenter(),c=[],n=this.options.keepBuffer,n=new b.Bounds(f.getBottomLeft().subtract([n,-n]),f.getTopRight().add([n,-n]));for(h in this._tiles){var m=this._tiles[h].coords;m.z===this._tileZoom&&n.contains(b.point(m.x,m.y))||(this._tiles[h].current=!1)}if(1<Math.abs(e-this._tileZoom))return void this._setView(a,e);for(e=f.min.y;e<=f.max.y;e++)for(a=f.min.x;a<=f.max.x;a++){var h=new b.Point(a,e);if(h.z=this._tileZoom,this._isValidTile(h))(n=
this._tiles[this._tileCoordsToKey(h)])?n.current=!0:c.push(h)}if(c.sort(function(a,c){return a.distanceTo(k)-c.distanceTo(k)}),0!==c.length){this._loading||(this._loading=!0,this.fire("loading"));f=g.createDocumentFragment();for(a=0;a<c.length;a++)this._addTile(c[a],f);this._level.el.appendChild(f)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var e=this._globalTileRange;if(!c.wrapLng&&(a.x<e.min.x||a.x>e.max.x)||!c.wrapLat&&(a.y<e.min.y||a.y>e.max.y))return!1}if(!this.options.bounds)return!0;
a=this._tileCoordsToBounds(a);return b.latLngBounds(this.options.bounds).overlaps(a)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(a){var c=this._map,e=this.getTileSize(),f=a.scaleBy(e),e=f.add(e),f=c.unproject(f,a.z);a=c.unproject(e,a.z);a=new b.LatLngBounds(f,a);return this.options.noWrap||c.wrapLatLngBounds(a),a},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){a=a.split(":");var c=new b.Point(+a[0],
+a[1]);return c.z=+a[2],c},_removeTile:function(a){var c=this._tiles[a];c&&(b.DomUtil.remove(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){b.DomUtil.addClass(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px";a.style.height=c.y+"px";a.onselectstart=b.Util.falseFn;a.onmousemove=b.Util.falseFn;b.Browser.ielt9&&1>this.options.opacity&&b.DomUtil.setOpacity(a,this.options.opacity);b.Browser.android&&!b.Browser.android23&&
(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,c){var e=this._getTilePos(a),f=this._tileCoordsToKey(a),k=this.createTile(this._wrapCoords(a),b.bind(this._tileReady,this,a));this._initTile(k);2>this.createTile.length&&b.Util.requestAnimFrame(b.bind(this._tileReady,this,a,null,k));b.DomUtil.setPosition(k,e);this._tiles[f]={el:k,coords:a,current:!0};c.appendChild(k);this.fire("tileloadstart",{tile:k,coords:a})},_tileReady:function(a,c,e){this._map&&(c&&this.fire("tileerror",{error:c,
tile:e,coords:a}),e=this._tileCoordsToKey(a),(e=this._tiles[e])&&(e.loaded=+new Date,this._map._fadeAnimated?(b.DomUtil.setOpacity(e.el,0),b.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=b.Util.requestAnimFrame(this._updateOpacity,this)):(e.active=!0,this._pruneTiles()),c||(b.DomUtil.addClass(e.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:e.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),b.Browser.ielt9||!this._map._fadeAnimated?b.Util.requestAnimFrame(this._pruneTiles,
this):setTimeout(b.bind(this._pruneTiles,this),250))))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new b.Point(this._wrapX?b.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?b.Util.wrapNum(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new b.Bounds(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;
return!0}});b.gridLayer=function(a){return new b.GridLayer(a)};b.TileLayer=b.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,c){this._url=a;c=b.setOptions(this,c);c.detectRetina&&b.Browser.retina&&0<c.maxZoom&&(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom++):(c.zoomOffset++,c.maxZoom--),c.minZoom=Math.max(0,c.minZoom));
"string"==typeof c.subdomains&&(c.subdomains=c.subdomains.split(""));b.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url=a,c||this.redraw(),this},createTile:function(a,c){var e=g.createElement("img");return b.DomEvent.on(e,"load",b.bind(this._tileOnLoad,this,c,e)),b.DomEvent.on(e,"error",b.bind(this._tileOnError,this,c,e)),this.options.crossOrigin&&(e.crossOrigin=""),e.alt="",e.setAttribute("role","presentation"),e.src=this.getTileUrl(a),e},getTileUrl:function(a){var c=
{r:b.Browser.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};this._map&&!this._map.options.crs.infinite&&(a=this._globalTileRange.max.y-a.y,this.options.tms&&(c.y=a),c["-y"]=a);return b.Util.template(this._url,b.extend(c,this.options))},_tileOnLoad:function(a,c){b.Browser.ielt9?setTimeout(b.bind(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,e){var f=this.options.errorTileUrl;f&&c.src!==f&&(c.src=f);a(e,c)},getTileSize:function(){var a=this._map,c=b.GridLayer.prototype.getTileSize.call(this),
e=this._tileZoom+this.options.zoomOffset,f=this.options.minNativeZoom,k=this.options.maxNativeZoom;return null!==f&&e<f?c.divideBy(a.getZoomScale(f,e)).round():null!==k&&e>k?c.divideBy(a.getZoomScale(k,e)).round():c},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,e=this.options.zoomOffset,f=this.options.minNativeZoom,b=this.options.maxNativeZoom;return this.options.zoomReverse&&(a=c-a),a+=e,null!==f&&a<f?f:null!==b&&a>b?b:a},_getSubdomain:function(a){return this.options.subdomains[Math.abs(a.x+
a.y)%this.options.subdomains.length]},_abortLoading:function(){var a,c;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=b.Util.falseFn,c.onerror=b.Util.falseFn,c.complete||(c.src=b.Util.emptyImageUrl,b.DomUtil.remove(c)))}});b.tileLayer=function(a,c){return new b.TileLayer(a,c)};b.TileLayer.WMS=b.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},
initialize:function(a,c){this._url=a;var e=b.extend({},this.defaultWmsParams),f;for(f in c)f in this.options||(e[f]=c[f]);c=b.setOptions(this,c);e.width=e.height=c.tileSize*(c.detectRetina&&b.Browser.retina?2:1);this.wmsParams=e},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code;b.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToBounds(a),
e=this._crs.project(c.getNorthWest()),c=this._crs.project(c.getSouthEast()),e=(1.3<=this._wmsVersion&&this._crs===b.CRS.EPSG4326?[c.y,e.x,e.y,c.x]:[e.x,c.y,c.x,e.y]).join(",");a=b.TileLayer.prototype.getTileUrl.call(this,a);return a+b.Util.getParamString(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+e},setParams:function(a,c){return b.extend(this.wmsParams,a),c||this.redraw(),this}});b.tileLayer.wms=function(a,c){return new b.TileLayer.WMS(a,c)};b.ImageOverlay=
b.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(a,c,e){this._url=a;this._bounds=b.latLngBounds(c);b.setOptions(this,e)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity());this.options.interactive&&(b.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image));this.getPane().appendChild(this._image);this._reset()},onRemove:function(){b.DomUtil.remove(this._image);this.options.interactive&&
this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&b.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&b.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),
this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=b.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=b.Util.falseFn;a.onmousemove=b.Util.falseFn;a.onload=b.bind(this.fire,this,"load");this.options.crossOrigin&&(a.crossOrigin="");a.src=
this._url;a.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom);a=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;b.DomUtil.setTransform(this._image,a,c)},_reset:function(){var a=this._image,c=new b.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),e=c.getSize();b.DomUtil.setPosition(a,c.min);a.style.width=e.x+"px";a.style.height=e.y+"px"},_updateOpacity:function(){b.DomUtil.setOpacity(this._image,
this.options.opacity)}});b.imageOverlay=function(a,c,e){return new b.ImageOverlay(a,c,e)};b.Icon=b.Class.extend({initialize:function(a){b.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var e=this._getIconUrl(a);if(!e){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}e=this._createImg(e,c&&"IMG"===c.tagName?c:null);return this._setIconStyles(e,
a),e},_setIconStyles:function(a,c){var e=this.options,f=e[c+"Size"];"number"==typeof f&&(f=[f,f]);var f=b.point(f),k=b.point("shadow"===c&&e.shadowAnchor||e.iconAnchor||f&&f.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(e.className||"");k&&(a.style.marginLeft=-k.x+"px",a.style.marginTop=-k.y+"px");f&&(a.style.width=f.x+"px",a.style.height=f.y+"px")},_createImg:function(a,c){return c=c||g.createElement("img"),c.src=a,c},_getIconUrl:function(a){return b.Browser.retina&&this.options[a+"RetinaUrl"]||
this.options[a+"Url"]}});b.icon=function(a){return new b.Icon(a)};b.Icon.Default=b.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return b.Icon.Default.imagePath||(b.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||b.Icon.Default.imagePath)+b.Icon.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=
b.DomUtil.create("div","leaflet-default-icon-path",g.body),c=b.DomUtil.getStyle(a,"background-image")||b.DomUtil.getStyle(a,"backgroundImage");return g.body.removeChild(a),0===c.indexOf("url")?c.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}});b.Marker=b.Layer.extend({options:{icon:new b.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover",
"mouseout","contextmenu"]},initialize:function(a,c){b.setOptions(this,c);this._latlng=b.latLng(a)},onAdd:function(a){(this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation)&&a.on("zoomanim",this._animateZoom,this);this._initIcon();this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks());this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this);this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,
viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=b.latLng(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=
this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),e=a.icon.createIcon(this._icon),f=!1;e!==this._icon&&(this._icon&&this._removeIcon(),f=!0,a.title&&(e.title=a.title),a.alt&&(e.alt=a.alt));b.DomUtil.addClass(e,c);a.keyboard&&(e.tabIndex="0");this._icon=e;a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var e=a.icon.createShadow(this._shadow),
k=!1;e!==this._shadow&&(this._removeShadow(),k=!0);e&&(b.DomUtil.addClass(e,c),e.alt="");this._shadow=e;1>a.opacity&&this._updateOpacity();f&&this.getPane().appendChild(this._icon);this._initInteraction();e&&k&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex});b.DomUtil.remove(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&
b.DomUtil.remove(this._shadow);this._shadow=null},_setPos:function(a){b.DomUtil.setPosition(this._icon,a);this._shadow&&b.DomUtil.setPosition(this._shadow,a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(b.DomUtil.addClass(this._icon,"leaflet-interactive"),
this.addInteractiveTarget(this._icon),b.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable());this.dragging=new b.Handler.MarkerDrag(this);a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;b.DomUtil.setOpacity(this._icon,a);this._shadow&&b.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},
_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}});b.marker=function(a,c){return new b.Marker(a,c)};b.DivIcon=b.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){a=a&&"DIV"===a.tagName?a:g.createElement("div");var c=this.options;if(a.innerHTML=!1!==c.html?c.html:"",c.bgPos)c=b.point(c.bgPos),
a.style.backgroundPosition=-c.x+"px "+-c.y+"px";return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});b.divIcon=function(a){return new b.DivIcon(a)};b.DivOverlay=b.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,c){b.setOptions(this,a);this._source=c},onAdd:function(a){this._zoomAnimated=a._zoomAnimated;this._container||this._initLayout();a._fadeAnimated&&b.DomUtil.setOpacity(this._container,0);clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);
this.update();a._fadeAnimated&&b.DomUtil.setOpacity(this._container,1);this.bringToFront()},onRemove:function(a){a._fadeAnimated?(b.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(b.bind(b.DomUtil.remove,b.DomUtil,this._container),200)):b.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=b.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=
a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&
b.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&b.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var a=this._contentNode,c="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof c)a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),
c=b.point(this.options.offset),e=this._getAnchor();this._zoomAnimated?b.DomUtil.setPosition(this._container,a.add(e)):c=c.add(a).add(e);a=this._containerBottom=-c.y;c=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=a+"px";this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});b.Popup=b.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,
5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){b.DivOverlay.prototype.onAdd.call(this,a);a.fire("popupopen",{popup:this});this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof b.Path||this._source.on("preclick",b.DomEvent.stopPropagation))},onRemove:function(a){b.DivOverlay.prototype.onRemove.call(this,a);a.fire("popupclose",{popup:this});this._source&&(this._source.fire("popupclose",{popup:this},
!0),this._source instanceof b.Path||this._source.off("preclick",b.DomEvent.stopPropagation))},getEvents:function(){var a=b.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a=this._container=b.DomUtil.create("div","leaflet-popup "+(this.options.className||
"")+" leaflet-zoom-animated");if(this.options.closeButton){var c=this._closeButton=b.DomUtil.create("a","leaflet-popup-close-button",a);c.href="#close";c.innerHTML="&#215;";b.DomEvent.on(c,"click",this._onCloseButtonClick,this)}c=this._wrapper=b.DomUtil.create("div","leaflet-popup-content-wrapper",a);this._contentNode=b.DomUtil.create("div","leaflet-popup-content",c);b.DomEvent.disableClickPropagation(c).disableScrollPropagation(this._contentNode).on(c,"contextmenu",b.DomEvent.stopPropagation);this._tipContainer=
b.DomUtil.create("div","leaflet-popup-tip-container",a);this._tip=b.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="";c.whiteSpace="nowrap";var e=a.offsetWidth,e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth);c.width=e+1+"px";c.whiteSpace="";c.height="";var e=a.offsetHeight,f=this.options.maxHeight;f&&e>f?(c.height=f+"px",b.DomUtil.addClass(a,"leaflet-popup-scrolled")):b.DomUtil.removeClass(a,
"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);var c=this._getAnchor();b.DomUtil.setPosition(this._container,a.add(c))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var a=this._map,c=parseInt(b.DomUtil.getStyle(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+c,e=this._containerWidth,f=new b.Point(this._containerLeft,
-c-this._containerBottom);f._add(b.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(f),k=b.point(this.options.autoPanPadding),n=b.point(this.options.autoPanPaddingTopLeft||k),k=b.point(this.options.autoPanPaddingBottomRight||k),m=a.getSize(),h=0,d=0;f.x+e+k.x>m.x&&(h=f.x+e-m.x+k.x);0>f.x-h-n.x&&(h=f.x-n.x);f.y+c+k.y>m.y&&(d=f.y+c-m.y+k.y);0>f.y-d-n.y&&(d=f.y-n.y);(h||d)&&a.fire("autopanstart").panBy([h,d])}},_onCloseButtonClick:function(a){this._close();b.DomEvent.stop(a)},
_getAnchor:function(){return b.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});b.popup=function(a,c){return new b.Popup(a,c)};b.Map.mergeOptions({closePopupOnClick:!0});b.Map.include({openPopup:function(a,c,e){return a instanceof b.Popup||(a=(new b.Popup(e)).setContent(a)),c&&a.setLatLng(c),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||
(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}});b.Layer.include({bindPopup:function(a,c){return a instanceof b.Popup?(b.setOptions(a,c),this._popup=a,a._source=this):(this._popup&&!c||(this._popup=new b.Popup(c,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),
this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,c){if(a instanceof b.Layer||(c=a,a=this),a instanceof b.FeatureGroup)for(var e in this._layers){a=this._layers[e];break}return c||(c=a.getCenter?a.getCenter():a.getLatLng()),this._popup&&this._map&&(this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,c)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():
this.openPopup(a)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var c=a.layer||a.target;if(this._popup&&this._map)return b.DomEvent.stop(a),c instanceof b.Path?void this.openPopup(a.layer||a.target,a.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===c?this.closePopup():this.openPopup(c,a.latlng))},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});
b.Tooltip=b.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){b.DivOverlay.prototype.onAdd.call(this,a);this.setOpacity(this.options.opacity);a.fire("tooltipopen",{tooltip:this});this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){b.DivOverlay.prototype.onRemove.call(this,a);a.fire("tooltipclose",{tooltip:this});this._source&&this._source.fire("tooltipclose",{tooltip:this},
!0)},getEvents:function(){var a=b.DivOverlay.prototype.getEvents.call(this);return b.Browser.touch&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=b.DomUtil.create("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c=this._map,e=this._container,
f=c.latLngToContainerPoint(c.getCenter()),c=c.layerPointToContainerPoint(a),k=this.options.direction,n=e.offsetWidth,m=e.offsetHeight,h=b.point(this.options.offset),d=this._getAnchor();"top"===k?a=a.add(b.point(-n/2+h.x,-m+h.y+d.y,!0)):"bottom"===k?a=a.subtract(b.point(n/2-h.x,-h.y,!0)):"center"===k?a=a.subtract(b.point(n/2+h.x,m/2-d.y+h.y,!0)):"right"===k||"auto"===k&&c.x<f.x?(k="right",a=a.add(b.point(h.x+d.x,d.y-m/2+h.y,!0))):(k="left",a=a.subtract(b.point(n+d.x-h.x,m/2-d.y-h.y,!0)));b.DomUtil.removeClass(e,
"leaflet-tooltip-right");b.DomUtil.removeClass(e,"leaflet-tooltip-left");b.DomUtil.removeClass(e,"leaflet-tooltip-top");b.DomUtil.removeClass(e,"leaflet-tooltip-bottom");b.DomUtil.addClass(e,"leaflet-tooltip-"+k);b.DomUtil.setPosition(e,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a;this._container&&b.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,
a.zoom,a.center);this._setPosition(a)},_getAnchor:function(){return b.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});b.tooltip=function(a,c){return new b.Tooltip(a,c)};b.Map.include({openTooltip:function(a,c,e){return a instanceof b.Tooltip||(a=(new b.Tooltip(e)).setContent(a)),c&&a.setLatLng(c),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}});b.Layer.include({bindTooltip:function(a,
c){return a instanceof b.Tooltip?(b.setOptions(a,c),this._tooltip=a,a._source=this):(this._tooltip&&!c||(this._tooltip=b.tooltip(c,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var c={remove:this.closeTooltip,
move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),b.Browser.touch&&(c.click=this._openTooltip));this[a?"off":"on"](c);this._tooltipHandlersAdded=!a}},openTooltip:function(a,c){if(a instanceof b.Layer||(c=a,a=this),a instanceof b.FeatureGroup)for(var e in this._layers){a=this._layers[e];break}return c||(c=a.getCenter?a.getCenter():a.getLatLng()),this._tooltip&&
this._map&&(this._tooltip._source=a,this._tooltip.update(),this._map.openTooltip(this._tooltip,c),this._tooltip.options.interactive&&this._tooltip._container&&(b.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(b.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),
this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){var c=a.layer||a.target;this._tooltip&&this._map&&this.openTooltip(c,this._tooltip.options.sticky?a.latlng:l)},_moveTooltip:function(a){var c,e,f=a.latlng;this._tooltip.options.sticky&&
a.originalEvent&&(c=this._map.mouseEventToContainerPoint(a.originalEvent),e=this._map.containerPointToLayerPoint(c),f=this._map.layerPointToLatLng(e));this._tooltip.setLatLng(f)}});b.LayerGroup=b.Layer.extend({initialize:function(a){this._layers={};var c;if(a){var e=0;for(c=a.length;e<c;e++)this.addLayer(a[e])}},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);return this._map&&
this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var c,e=Array.prototype.slice.call(arguments,1);for(c in this._layers){var f=this._layers[c];f[a]&&f[a].apply(f,e)}return this},onAdd:function(a){for(var c in this._layers)a.addLayer(this._layers[c])},onRemove:function(a){for(var c in this._layers)a.removeLayer(this._layers[c])},
eachLayer:function(a,c){for(var e in this._layers)a.call(c,this._layers[e]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],c;for(c in this._layers)a.push(this._layers[c]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return b.stamp(a)}});b.layerGroup=function(a){return new b.LayerGroup(a)};b.FeatureGroup=b.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),b.LayerGroup.prototype.addLayer.call(this,
a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),b.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new b.LatLngBounds,c;for(c in this._layers){var e=this._layers[c];
a.extend(e.getBounds?e.getBounds():e.getLatLng())}return a}});b.featureGroup=function(a){return new b.FeatureGroup(a)};b.Renderer=b.Layer.extend({options:{padding:.1},initialize:function(a){b.setOptions(this,a);b.stamp(this);this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&b.DomUtil.addClass(this._container,"leaflet-zoom-animated"));this.getPane().appendChild(this._container);this._update();this.on("update",this._updatePaths,this)},onRemove:function(){b.DomUtil.remove(this._container);
this.off("update",this._updatePaths,this)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var e=this._map.getZoomScale(c,this._zoom),f=b.DomUtil.getPosition(this._container),k=this._map.getSize().multiplyBy(.5+
this.options.padding),n=this._map.project(this._center,c),n=this._map.project(a,c).subtract(n),f=k.multiplyBy(-e).add(f).add(k).subtract(n);b.Browser.any3d?b.DomUtil.setTransform(this._container,f,e):b.DomUtil.setPosition(this._container,f)},_reset:function(){this._update();this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},
_update:function(){var a=this.options.padding,c=this._map.getSize(),e=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new b.Bounds(e,e.add(c.multiplyBy(1+2*a)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}});b.Map.include({getRenderer:function(a){a=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this.options.preferCanvas&&b.canvas()||b.svg()),this.hasLayer(a)||this.addLayer(a),
a},_getPaneRenderer:function(a){if("overlayPane"===a||a===l)return!1;var c=this._paneRenderers[a];return c===l&&(c=b.SVG&&b.svg({pane:a})||b.Canvas&&b.canvas({pane:a}),this._paneRenderers[a]=c),c}});b.Path=b.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);
this._reset();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return b.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project();
this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(b.Browser.touch?10:0)}});b.LineUtil={simplify:function(a,c){if(!c||!a.length)return a.slice();var e=c*c;return a=this._reducePoints(a,e),this._simplifyDP(a,e)},pointToSegmentDistance:function(a,c,e){return Math.sqrt(this._sqClosestPointOnSegment(a,c,e,!0))},closestPointOnSegment:function(a,c,e){return this._sqClosestPointOnSegment(a,c,e)},_simplifyDP:function(a,c){var e=a.length,f=new (typeof Uint8Array!=
l+""?Uint8Array:Array)(e);f[0]=f[e-1]=1;this._simplifyDPStep(a,f,c,0,e-1);var b,n=[];for(b=0;b<e;b++)f[b]&&n.push(a[b]);return n},_simplifyDPStep:function(a,c,e,f,b){var k,m,h=0;for(m=f+1;m<=b-1;m++){var d=this._sqClosestPointOnSegment(a[m],a[f],a[b],!0);d>h&&(k=m,h=d)}h>e&&(c[k]=1,this._simplifyDPStep(a,c,e,f,k),this._simplifyDPStep(a,c,e,k,b))},_reducePoints:function(a,c){for(var e=[a[0]],f=1,b=0,n=a.length;f<n;f++)this._sqDist(a[f],a[b])>c&&(e.push(a[f]),b=f);return b<n-1&&e.push(a[n-1]),e},clipSegment:function(a,
c,e,f,b){var k=f?this._lastCode:this._getBitCode(a,e),m=this._getBitCode(c,e);for(this._lastCode=m;;){if(!(k|m))return[a,c];if(k&m)return!1;f=k||m;var h=this._getEdgeIntersection(a,c,f,e,b);var d=this._getBitCode(h,e);f===k?(a=h,k=d):(c=h,m=d)}},_getEdgeIntersection:function(a,c,e,f,k){var n,m,h=c.x-a.x;c=c.y-a.y;var d=f.min;f=f.max;return 8&e?(n=a.x+h*(f.y-a.y)/c,m=f.y):4&e?(n=a.x+h*(d.y-a.y)/c,m=d.y):2&e?(n=f.x,m=a.y+c*(f.x-a.x)/h):1&e&&(n=d.x,m=a.y+c*(d.x-a.x)/h),new b.Point(n,m,k)},_getBitCode:function(a,
c){var e=0;return a.x<c.min.x?e|=1:a.x>c.max.x&&(e|=2),a.y<c.min.y?e|=4:a.y>c.max.y&&(e|=8),e},_sqDist:function(a,c){var e=c.x-a.x,f=c.y-a.y;return e*e+f*f},_sqClosestPointOnSegment:function(a,c,e,f){var k,n=c.x;c=c.y;var m=e.x-n,h=e.y-c,d=m*m+h*h;return 0<d&&(k=((a.x-n)*m+(a.y-c)*h)/d,1<k?(n=e.x,c=e.y):0<k&&(n+=m*k,c+=h*k)),m=a.x-n,h=a.y-c,f?m*m+h*h:new b.Point(n,c)}};b.Polyline=b.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){b.setOptions(this,c);this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},
setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c,e,f=1/0,k=null,n=b.LineUtil._sqClosestPointOnSegment,m=0,h=this._parts.length;m<h;m++)for(var d=this._parts[m],q=1,t=d.length;q<t;q++){c=d[q-1];e=d[q];var g=n(a,c,e,!0);g<f&&(f=g,k=n(a,c,e))}return k&&(k.distance=Math.sqrt(f)),k},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");var a,c,e,f,b,n,m,h=this._rings[0],
d=h.length;if(!d)return null;for(c=a=0;a<d-1;a++)c+=h[a].distanceTo(h[a+1])/2;if(0===c)return this._map.layerPointToLatLng(h[0]);for(f=a=0;a<d-1;a++)if(b=h[a],n=h[a+1],e=b.distanceTo(n),f+=e,f>c)return m=(f-c)/e,this._map.layerPointToLatLng([n.x-m*(n.x-b.x),n.y-m*(n.y-b.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=b.latLng(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new b.LatLngBounds;this._latlngs=
this._convertLatLngs(a)},_defaultShape:function(){return b.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],e=b.Polyline._flat(a),f=0,k=a.length;f<k;f++)e?(c[f]=b.latLng(a[f]),this._bounds.extend(c[f])):c[f]=this._convertLatLngs(a[f]);return c},_project:function(){var a=new b.Bounds;this._rings=[];this._projectLatlngs(this._latlngs,this._rings,a);var c=this._clickTolerance(),c=new b.Point(c,c);this._bounds.isValid()&&a.isValid()&&(a.min._subtract(c),
a.max._add(c),this._pxBounds=a)},_projectLatlngs:function(a,c,e){var f,k=a.length;if(a[0]instanceof b.LatLng){var n=[];for(f=0;f<k;f++)n[f]=this._map.latLngToLayerPoint(a[f]),e.extend(n[f]);c.push(n)}else for(f=0;f<k;f++)this._projectLatlngs(a[f],c,e)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var c,e,f,k,n=this._parts;var m=c=0;for(e=this._rings.length;c<e;c++){var h=
this._rings[c];var d=0;for(f=h.length;d<f-1;d++)(k=b.LineUtil.clipSegment(h[d],h[d+1],a,d,!0))&&(n[m]=n[m]||[],n[m].push(k[0]),k[1]===h[d+1]&&d!==f-2||(n[m].push(k[1]),m++))}}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,e=0,f=a.length;e<f;e++)a[e]=b.LineUtil.simplify(a[e],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}});b.polyline=function(a,c){return new b.Polyline(a,
c)};b.Polyline._flat=function(a){return!b.Util.isArray(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]};b.PolyUtil={};b.PolyUtil.clipPolygon=function(a,c,e){var f,k,n,m,h=[1,4,2,8],d=b.LineUtil;var q=0;for(n=a.length;q<n;q++)a[q]._code=d._getBitCode(a[q],c);for(k=0;4>k;k++){var t=h[k];var g=[];q=0;n=a.length;for(f=n-1;q<n;f=q++){var v=a[q];f=a[f];v._code&t?f._code&t||(m=d._getEdgeIntersection(f,v,t,c,e),m._code=d._getBitCode(m,c),g.push(m)):(f._code&t&&(m=d._getEdgeIntersection(f,v,t,
c,e),m._code=d._getBitCode(m,c),g.push(m)),g.push(v))}a=g}return a};b.Polygon=b.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");var a,c,e,f,b,n=this._rings[0],m=n.length;if(!m)return null;var h=c=e=f=0;for(a=m-1;h<m;a=h++){var d=n[h];a=n[a];var q=d.y*a.x-a.y*d.x;e+=(d.x+a.x)*q;f+=(d.y+a.y)*q;c+=3*q}return b=0===c?n[0]:[e/c,f/c],this._map.layerPointToLatLng(b)},
_convertLatLngs:function(a){a=b.Polyline.prototype._convertLatLngs.call(this,a);var c=a.length;return 2<=c&&a[0]instanceof b.LatLng&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(a){b.Polyline.prototype._setLatLngs.call(this,a);b.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return b.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,c=new b.Point(c,c);if(a=
new b.Bounds(a.min.subtract(c),a.max.add(c)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var e=0,f=this._rings.length;e<f;e++)c=b.PolyUtil.clipPolygon(this._rings[e],a,!0),c.length&&this._parts.push(c)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}});b.polygon=function(a,c){return new b.Polygon(a,c)};b.Rectangle=b.Polygon.extend({initialize:function(a,c){b.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),
c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=b.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});b.rectangle=function(a,c){return new b.Rectangle(a,c)};b.CircleMarker=b.Path.extend({options:{fill:!0,radius:10},initialize:function(a,c){b.setOptions(this,c);this._latlng=b.latLng(a);this._radius=this.options.radius},setLatLng:function(a){return this._latlng=b.latLng(a),this.redraw(),this.fire("move",
{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return b.Path.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,e=this._clickTolerance(),a=[a+e,
c+e];this._pxBounds=new b.Bounds(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}});b.circleMarker=function(a,c){return new b.CircleMarker(a,c)};b.Circle=b.CircleMarker.extend({initialize:function(a,c,e){if("number"==typeof c&&(c=b.extend({},e,{radius:c})),b.setOptions(this,c),this._latlng=b.latLng(a),isNaN(this.options.radius))throw Error("Circle radius cannot be NaN");
this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new b.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:b.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,e=this._map,f=e.options.crs;if(f.distance===b.CRS.Earth.distance){var k=
Math.PI/180,f=this._mRadius/b.CRS.Earth.R/k,n=e.project([c+f,a]),m=e.project([c-f,a]),m=n.add(m).divideBy(2),h=e.unproject(m).lat,k=Math.acos((Math.cos(f*k)-Math.sin(c*k)*Math.sin(h*k))/(Math.cos(c*k)*Math.cos(h*k)))/k;(isNaN(k)||0===k)&&(k=f/Math.cos(Math.PI/180*c));this._point=m.subtract(e.getPixelOrigin());this._radius=isNaN(k)?0:Math.max(Math.round(m.x-e.project([h,a-k]).x),1);this._radiusY=Math.max(Math.round(m.y-n.y),1)}else a=f.unproject(f.project(this._latlng).subtract([this._mRadius,0])),
this._point=e.latLngToLayerPoint(this._latlng),this._radius=this._point.x-e.latLngToLayerPoint(a).x;this._updateBounds()}});b.circle=function(a,c,e){return new b.Circle(a,c,e)};b.SVG=b.Renderer.extend({getEvents:function(){var a=b.Renderer.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=b.SVG.create("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=b.SVG.create("g");this._container.appendChild(this._rootGroup)},
_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){b.Renderer.prototype._update.call(this);var a=this._bounds,c=a.getSize(),e=this._container;this._svgSize&&this._svgSize.equals(c)||(this._svgSize=c,e.setAttribute("width",c.x),e.setAttribute("height",c.y));b.DomUtil.setPosition(e,a.min);e.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" "));this.fire("update")}},_initPath:function(a){var c=a._path=b.SVG.create("path");a.options.className&&
b.DomUtil.addClass(c,a.options.className);a.options.interactive&&b.DomUtil.addClass(c,"leaflet-interactive");this._updateStyle(a);this._layers[b.stamp(a)]=a},_addPath:function(a){this._rootGroup.appendChild(a._path);a.addInteractiveTarget(a._path)},_removePath:function(a){b.DomUtil.remove(a._path);a.removeInteractiveTarget(a._path);delete this._layers[b.stamp(a)]},_updatePath:function(a){a._project();a._update()},_updateStyle:function(a){var c=a._path;a=a.options;c&&(a.stroke?(c.setAttribute("stroke",
a.color),c.setAttribute("stroke-opacity",a.opacity),c.setAttribute("stroke-width",a.weight),c.setAttribute("stroke-linecap",a.lineCap),c.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?c.setAttribute("stroke-dasharray",a.dashArray):c.removeAttribute("stroke-dasharray"),a.dashOffset?c.setAttribute("stroke-dashoffset",a.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),a.fill?(c.setAttribute("fill",a.fillColor||a.color),c.setAttribute("fill-opacity",a.fillOpacity),
c.setAttribute("fill-rule",a.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,b.SVG.pointsToPath(a._parts,c))},_updateCircle:function(a){var c=a._point,e=a._radius,f="a"+e+","+(a._radiusY||e)+" 0 1,0 ",c=a._empty()?"M0 0":"M"+(c.x-e)+","+c.y+f+2*e+",0 "+f+2*-e+",0 ";this._setPath(a,c)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){b.DomUtil.toFront(a._path)},_bringToBack:function(a){b.DomUtil.toBack(a._path)}});b.extend(b.SVG,
{create:function(a){return g.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(a,c){var e,f,k="";var n=0;for(e=a.length;n<e;n++){var m=a[n];var h=0;for(f=m.length;h<f;h++){var d=m[h];k+=(h?"L":"M")+d.x+" "+d.y}k+=c?b.Browser.svg?"z":"x":""}return k||"M0 0"}});b.Browser.svg=!(!g.createElementNS||!b.SVG.create("svg").createSVGRect);b.svg=function(a){return b.Browser.svg||b.Browser.vml?new b.SVG(a):null};b.Browser.vml=!b.Browser.svg&&function(){try{var a=g.createElement("div");a.innerHTML=
'<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(e){return!1}}();b.SVG.include(b.Browser.vml?{_initContainer:function(){this._container=b.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(b.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=b.SVG.create("shape");b.DomUtil.addClass(c,"leaflet-vml-shape "+(this.options.className||""));c.coordsize=
"1 1";a._path=b.SVG.create("path");c.appendChild(a._path);this._updateStyle(a);this._layers[b.stamp(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c);a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;b.DomUtil.remove(c);a.removeInteractiveTarget(c);delete this._layers[b.stamp(a)]},_updateStyle:function(a){var c=a._stroke,e=a._fill,f=a.options,k=a._container;k.stroked=!!f.stroke;k.filled=!!f.fill;f.stroke?(c||(c=a._stroke=b.SVG.create("stroke")),
k.appendChild(c),c.weight=f.weight+"px",c.color=f.color,c.opacity=f.opacity,f.dashArray?c.dashStyle=b.Util.isArray(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=f.lineCap.replace("butt","flat"),c.joinstyle=f.lineJoin):c&&(k.removeChild(c),a._stroke=null);f.fill?(e||(e=a._fill=b.SVG.create("fill")),k.appendChild(e),e.color=f.fillColor||f.color,e.opacity=f.fillOpacity):e&&(k.removeChild(e),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),
e=Math.round(a._radius),f=Math.round(a._radiusY||e);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+e+","+f+" 0,23592600")},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){b.DomUtil.toFront(a._container)},_bringToBack:function(a){b.DomUtil.toBack(a._container)}}:{});b.Browser.vml&&(b.SVG.create=function(){try{return g.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return g.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return g.createElement("<"+
a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}());b.Canvas=b.Renderer.extend({getEvents:function(){var a=b.Renderer.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){b.Renderer.prototype.onAdd.call(this);this._draw()},_initContainer:function(){var a=this._container=g.createElement("canvas");b.DomEvent.on(a,"mousemove",b.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",
this._onClick,this).on(a,"mouseout",this._handleMouseOut,this);this._ctx=a.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var a in this._layers){var c=this._layers[a];c._update()}this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={};b.Renderer.prototype._update.call(this);var a=this._bounds,c=this._container,e=a.getSize(),f=b.Browser.retina?2:1;b.DomUtil.setPosition(c,a.min);c.width=f*e.x;c.height=
f*e.y;c.style.width=e.x+"px";c.style.height=e.y+"px";b.Browser.retina&&this._ctx.scale(2,2);this._ctx.translate(-a.min.x,-a.min.y);this.fire("update")}},_reset:function(){b.Renderer.prototype._reset.call(this);this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a);this._layers[b.stamp(a)]=a;a=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a);this._drawLast=a;this._drawFirst=this._drawFirst||
this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,e=c.next,c=c.prev;e?e.prev=c:this._drawLast=c;c?c.next=e:this._drawFirst=e;delete a._order;delete this._layers[b.stamp(a)];this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a);a._project();a._update();this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a);this._requestRedraw(a)},_updateDashArray:function(a){if(a.options.dashArray){var c,e=a.options.dashArray.split(","),
f=[];for(c=0;c<e.length;c++)f.push(Number(e[c]));a.options._dashArray=f}},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||b.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(a){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new b.Bounds;this._redrawBounds.extend(a._pxBounds.min.subtract([c,c]));this._redrawBounds.extend(a._pxBounds.max.add([c,c]))},_redraw:function(){this._redrawRequest=null;this._redrawBounds&&
(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil());this._clear();this._draw();this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath();this._ctx.rect(a.min.x,a.min.y,c.x,c.y);this._ctx.clip()}this._drawing=!0;for(var e=this._drawFirst;e;e=
e.next)c=e.layer,(!a||c._pxBounds&&c._pxBounds.intersects(a))&&c._updatePath();this._drawing=!1;this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var e,f,b=a._parts,n=b.length,m=this._ctx;if(n){this._drawnLayers[a._leaflet_id]=a;m.beginPath();m.setLineDash&&m.setLineDash(a.options&&a.options._dashArray||[]);for(e=0;e<n;e++){var h=0;for(f=b[e].length;h<f;h++){var d=b[e][h];m[h?"lineTo":"moveTo"](d.x,d.y)}c&&m.closePath()}this._fillStroke(m,a)}}},_updateCircle:function(a){if(this._drawing&&
!a._empty()){var c=a._point,e=this._ctx,f=a._radius,b=(a._radiusY||f)/f;this._drawnLayers[a._leaflet_id]=a;1!==b&&(e.save(),e.scale(1,b));e.beginPath();e.arc(c.x,c.y/b,f,0,2*Math.PI,!1);1!==b&&e.restore();this._fillStroke(e,a)}},_fillStroke:function(a,c){var e=c.options;e.fill&&(a.globalAlpha=e.fillOpacity,a.fillStyle=e.fillColor||e.color,a.fill(e.fillRule||"evenodd"));e.stroke&&0!==e.weight&&(a.globalAlpha=e.opacity,a.lineWidth=e.weight,a.strokeStyle=e.color,a.lineCap=e.lineCap,a.lineJoin=e.lineJoin,
a.stroke())},_onClick:function(a){for(var c,e,f=this._map.mouseEventToLayerPoint(a),k=this._drawFirst;k;k=k.next)c=k.layer,c.options.interactive&&c._containsPoint(f)&&!this._map._draggableMoved(c)&&(e=c);e&&(b.DomEvent._fakeStop(a),this._fireEvent([e],a))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(b.DomUtil.removeClass(this._container,
"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,c){for(var e,f,k=this._drawFirst;k;k=k.next)e=k.layer,e.options.interactive&&e._containsPoint(c)&&(f=e);f!==this._hoveredLayer&&(this._handleMouseOut(a),f&&(b.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([f],a,"mouseover"),this._hoveredLayer=f));this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(a,c,e){this._map._fireDOMEvent(c,e||
c.type,a)},_bringToFront:function(a){var c=a._order,e=c.next,f=c.prev;e&&(e.prev=f,f?f.next=e:e&&(this._drawFirst=e),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a))},_bringToBack:function(a){var c=a._order,e=c.next,f=c.prev;f&&(f.next=e,e?e.prev=f:f&&(this._drawLast=f),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a))}});b.Browser.canvas=!!g.createElement("canvas").getContext;b.canvas=function(a){return b.Browser.canvas?
new b.Canvas(a):null};b.Polyline.prototype._containsPoint=function(a,c){var e,f,k=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;var h=0;for(f=this._parts.length;h<f;h++){var m=this._parts[h];var d=0;var u=m.length;for(e=u-1;d<u;e=d++)if((c||0!==d)&&b.LineUtil.pointToSegmentDistance(a,m[e],m[d])<=k)return!0}return!1};b.Polygon.prototype._containsPoint=function(a){var c,e,f=!1;if(!this._pxBounds.contains(a))return!1;var k=0;for(e=this._parts.length;k<e;k++){var h=this._parts[k];var m=
0;var d=h.length;for(c=d-1;m<d;c=m++){var u=h[m];c=h[c];u.y>a.y!=c.y>a.y&&a.x<(c.x-u.x)*(a.y-u.y)/(c.y-u.y)+u.x&&(f=!f)}}return f||b.Polyline.prototype._containsPoint.call(this,a,!0)};b.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()};b.GeoJSON=b.FeatureGroup.extend({initialize:function(a,c){b.setOptions(this,c);this._layers={};a&&this.addData(a)},addData:function(a){var c,e=b.Util.isArray(a)?a:a.features;if(e){a=0;for(c=e.length;a<
c;a++){var f=e[a];(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f)}return this}e=this.options;return e.filter&&!e.filter(a)?this:(c=b.GeoJSON.geometryToLayer(a,e))?(c.feature=b.GeoJSON.asFeature(a),c.defaultOptions=c.options,this.resetStyle(c),e.onEachFeature&&e.onEachFeature(a,c),this.addLayer(c)):this},resetStyle:function(a){return a.options=b.Util.extend({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,
a)},this)},_setLayerStyle:function(a,c){"function"==typeof c&&(c=c(a.feature));a.setStyle&&a.setStyle(c)}});b.extend(b.GeoJSON,{geometryToLayer:function(a,c){var e,f,k="Feature"===a.type?a.geometry:a,h=k?k.coordinates:null,m=[],d=c&&c.pointToLayer,u=c&&c.coordsToLatLng||this.coordsToLatLng;if(!h&&!k)return null;switch(k.type){case "Point":return e=u(h),d?d(a,e):new b.Marker(e);case "MultiPoint":var q=0;for(f=h.length;q<f;q++)e=u(h[q]),m.push(d?d(a,e):new b.Marker(e));return new b.FeatureGroup(m);
case "LineString":case "MultiLineString":return q=this.coordsToLatLngs(h,"LineString"===k.type?0:1,u),new b.Polyline(q,c);case "Polygon":case "MultiPolygon":return q=this.coordsToLatLngs(h,"Polygon"===k.type?1:2,u),new b.Polygon(q,c);case "GeometryCollection":q=0;for(f=k.geometries.length;q<f;q++)(e=this.geometryToLayer({geometry:k.geometries[q],type:"Feature",properties:a.properties},c))&&m.push(e);return new b.FeatureGroup(m);default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new b.LatLng(a[1],
a[0],a[2])},coordsToLatLngs:function(a,c,e){for(var f,b=[],h=0,m=a.length;h<m;h++)f=c?this.coordsToLatLngs(a[h],c-1,e):(e||this.coordsToLatLng)(a[h]),b.push(f);return b},latLngToCoords:function(a){return a.alt!==l?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,c,e){for(var f=[],k=0,h=a.length;k<h;k++)f.push(c?b.GeoJSON.latLngsToCoords(a[k],c-1,e):b.GeoJSON.latLngToCoords(a[k]));return!c&&e&&f.push(f[0]),f},getFeature:function(a,c){return a.feature?b.extend({},a.feature,{geometry:c}):
b.GeoJSON.asFeature(c)},asFeature:function(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}});h={toGeoJSON:function(){return b.GeoJSON.getFeature(this,{type:"Point",coordinates:b.GeoJSON.latLngToCoords(this.getLatLng())})}};b.Marker.include(h);b.Circle.include(h);b.CircleMarker.include(h);b.Polyline.prototype.toGeoJSON=function(){var a=!b.Polyline._flat(this._latlngs),c=b.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return b.GeoJSON.getFeature(this,
{type:(a?"Multi":"")+"LineString",coordinates:c})};b.Polygon.prototype.toGeoJSON=function(){var a=!b.Polyline._flat(this._latlngs),c=a&&!b.Polyline._flat(this._latlngs[0]),e=b.GeoJSON.latLngsToCoords(this._latlngs,c?2:a?1:0,!0);return a||(e=[e]),b.GeoJSON.getFeature(this,{type:(c?"Multi":"")+"Polygon",coordinates:e})};b.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON().geometry.coordinates)}),b.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},
toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var c="GeometryCollection"===a,e=[];return this.eachLayer(function(a){a.toGeoJSON&&(a=a.toGeoJSON(),e.push(c?a.geometry:b.GeoJSON.asFeature(a)))}),c?b.GeoJSON.getFeature(this,{geometries:e,type:"GeometryCollection"}):{type:"FeatureCollection",features:e}}});b.geoJSON=function(a,c){return new b.GeoJSON(a,c)};b.geoJson=b.geoJSON;b.Draggable=b.Evented.extend({options:{clickTolerance:3},
statics:{START:b.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,c,e){this._element=a;this._dragStartTarget=c||a;this._preventOutline=e},enable:function(){this._enabled||(b.DomEvent.on(this._dragStartTarget,b.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},
disable:function(){this._enabled&&(b.Draggable._dragging===this&&this.finishDrag(),b.DomEvent.off(this._dragStartTarget,b.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!(b.DomUtil.hasClass(this._element,"leaflet-zoom-anim")||b.Draggable._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(b.Draggable._dragging=this,this._preventOutline&&b.DomUtil.preventOutline(this._element),b.DomUtil.disableImageDrag(),
b.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var c=a.touches?a.touches[0]:a;this._startPoint=new b.Point(c.clientX,c.clientY);b.DomEvent.on(g,b.Draggable.MOVE[a.type],this._onMove,this).on(g,b.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated&&this._enabled){if(a.touches&&1<a.touches.length)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,c=(new b.Point(c.clientX,c.clientY)).subtract(this._startPoint);(c.x||c.y)&&(Math.abs(c.x)+
Math.abs(c.y)<this.options.clickTolerance||(b.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=b.DomUtil.getPosition(this._element).subtract(c),b.DomUtil.addClass(g.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,F.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),b.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=
!0,b.Util.cancelAnimFrame(this._animRequest),this._lastEvent=a,this._animRequest=b.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a);b.DomUtil.setPosition(this._element,this._newPos);this.fire("drag",a)},_onUp:function(a){!a._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){b.DomUtil.removeClass(g.body,"leaflet-dragging");this._lastTarget&&(b.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),
this._lastTarget=null);for(var a in b.Draggable.MOVE)b.DomEvent.off(g,b.Draggable.MOVE[a],this._onMove,this).off(g,b.Draggable.END[a],this._onUp,this);b.DomUtil.enableImageDrag();b.DomUtil.enableTextSelection();this._moved&&this._moving&&(b.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1;b.Draggable._dragging=!1}});b.Handler=b.Class.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:
(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});b.Map.mergeOptions({dragging:!0,inertia:!b.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});b.Map.Drag=b.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new b.Draggable(a._mapPane,a._container);this._draggable.on({down:this._onDown,
dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}b.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){b.DomUtil.removeClass(this._map._container,"leaflet-grab");
b.DomUtil.removeClass(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=b.latLngBounds(this._map.options.maxBounds);this._offsetLimit=b.bounds(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),
this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(e);this._times.push(c);50<c-this._times[0]&&
(this._positions.shift(),this._times.shift())}this._map.fire("move",a).fire("drag",a)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&
(a.x=this._viscousLimit(a.x,c.min.x));a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y));a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x));a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y));this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),e=this._initialWorldOffset,f=this._draggable._newPos.x,b=(f-c+e)%a+c-e,a=(f+c+e)%a-c-e,e=Math.abs(b+e)<Math.abs(a+e)?b:a;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=
e},_onDragEnd:function(a){var c=this._map,e=c.options,f=!e.inertia||2>this._times.length;if(c.fire("dragend",a),f)c.fire("moveend");else{a=this._lastPos.subtract(this._positions[0]);var k=e.easeLinearity,f=a.multiplyBy(k/((this._lastTime-this._times[0])/1E3)),h=f.distanceTo([0,0]);a=Math.min(e.inertiaMaxSpeed,h);var f=f.multiplyBy(a/h),m=a/(e.inertiaDeceleration*k),d=f.multiplyBy(-m/2).round();d.x||d.y?(d=c._limitOffset(d,c.options.maxBounds),b.Util.requestAnimFrame(function(){c.panBy(d,{duration:m,
easeLinearity:k,noMoveStart:!0,animate:!0})})):c.fire("moveend")}}});b.Map.addInitHook("addHandler","dragging",b.Map.Drag);b.Map.mergeOptions({doubleClickZoom:!0});b.Map.DoubleClickZoom=b.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,e=c.getZoom(),f=c.options.zoomDelta,e=a.originalEvent.shiftKey?e-f:e+f;"center"===c.options.doubleClickZoom?
c.setZoom(e):c.setZoomAround(a.containerPoint,e)}});b.Map.addInitHook("addHandler","doubleClickZoom",b.Map.DoubleClickZoom);b.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});b.Map.ScrollWheelZoom=b.Handler.extend({addHooks:function(){b.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){b.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=b.DomEvent.getWheelDelta(a),
e=this._map.options.wheelDebounceTime;this._delta+=c;this._lastMousePos=this._map.mouseEventToContainerPoint(a);this._startTime||(this._startTime=+new Date);c=Math.max(e-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(b.bind(this._performZoom,this),c);b.DomEvent.stop(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),e=this._map.options.zoomSnap||0;a._stop();var f=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,
e=e?Math.ceil(f/e)*e:f,e=a._limitZoom(c+(0<this._delta?e:-e))-c;this._delta=0;this._startTime=null;e&&("center"===a.options.scrollWheelZoom?a.setZoom(c+e):a.setZoomAround(this._lastMousePos,c+e))}});b.Map.addInitHook("addHandler","scrollWheelZoom",b.Map.ScrollWheelZoom);b.extend(b.DomEvent,{_touchstart:b.Browser.msPointer?"MSPointerDown":b.Browser.pointer?"pointerdown":"touchstart",_touchend:b.Browser.msPointer?"MSPointerUp":b.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,
c,e){function f(a){if(b.Browser.pointer){if(!b.Browser.edge||"mouse"===a.pointerType)return;var c=b.DomEvent._pointersCount}else c=a.touches.length;if(!(1<c)){c=Date.now();var e=c-(h||c);m=a.touches?a.touches[0]:a;d=0<e&&e<=u;h=c}}function k(a){if(d&&!m.cancelBubble){if(b.Browser.pointer){if(!b.Browser.edge||"mouse"===a.pointerType)return;var e,f={};for(e in m)a=m[e],f[e]=a&&a.bind?a.bind(m):a;m=f}m.type="dblclick";c(m);h=null}}var h,m,d=!1,u=250,q=this._touchstart,t=this._touchend;return a["_leaflet_"+
q+e]=f,a["_leaflet_"+t+e]=k,a["_leaflet_dblclick"+e]=c,a.addEventListener(q,f,!1),a.addEventListener(t,k,!1),a.addEventListener("dblclick",c,!1),this},removeDoubleTapListener:function(a,c){var e=a["_leaflet_"+this._touchend+c],f=a["_leaflet_dblclick"+c];return a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+c],!1),a.removeEventListener(this._touchend,e,!1),b.Browser.edge||a.removeEventListener("dblclick",f,!1),this}});b.extend(b.DomEvent,{POINTER_DOWN:b.Browser.msPointer?"MSPointerDown":
"pointerdown",POINTER_MOVE:b.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:b.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:b.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(a,c,e,f){return"touchstart"===c?this._addPointerStart(a,e,f):"touchmove"===c?this._addPointerMove(a,e,f):"touchend"===c&&this._addPointerEnd(a,e,f),this},removePointerListener:function(a,c,e){e=a["_leaflet_"+
c+e];return"touchstart"===c?a.removeEventListener(this.POINTER_DOWN,e,!1):"touchmove"===c?a.removeEventListener(this.POINTER_MOVE,e,!1):"touchend"===c&&(a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)),this},_addPointerStart:function(a,c,e){var f=b.bind(function(a){if("mouse"!==a.pointerType&&a.MSPOINTER_TYPE_MOUSE&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE){if(!(0>this.TAG_WHITE_LIST.indexOf(a.target.tagName)))return;b.DomEvent.preventDefault(a)}this._handlePointer(a,
c)},this);(a["_leaflet_touchstart"+e]=f,a.addEventListener(this.POINTER_DOWN,f,!1),this._pointerDocListener)||(a=b.bind(this._globalPointerUp,this),g.documentElement.addEventListener(this.POINTER_DOWN,b.bind(this._globalPointerDown,this),!0),g.documentElement.addEventListener(this.POINTER_MOVE,b.bind(this._globalPointerMove,this),!0),g.documentElement.addEventListener(this.POINTER_UP,a,!0),g.documentElement.addEventListener(this.POINTER_CANCEL,a,!0),this._pointerDocListener=!0)},_globalPointerDown:function(a){this._pointers[a.pointerId]=
a;this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId];this._pointersCount--},_handlePointer:function(a,c){a.touches=[];for(var e in this._pointers)a.touches.push(this._pointers[e]);a.changedTouches=[a];c(a)},_addPointerMove:function(a,c,e){var f=b.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&this._handlePointer(a,c)},
this);a["_leaflet_touchmove"+e]=f;a.addEventListener(this.POINTER_MOVE,f,!1)},_addPointerEnd:function(a,c,e){var f=b.bind(function(a){this._handlePointer(a,c)},this);a["_leaflet_touchend"+e]=f;a.addEventListener(this.POINTER_UP,f,!1);a.addEventListener(this.POINTER_CANCEL,f,!1)}});b.Map.mergeOptions({touchZoom:b.Browser.touch&&!b.Browser.android23,bounceAtZoomLimits:!0});b.Map.TouchZoom=b.Handler.extend({addHooks:function(){b.DomUtil.addClass(this._map._container,"leaflet-touch-zoom");b.DomEvent.on(this._map._container,
"touchstart",this._onTouchStart,this)},removeHooks:function(){b.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom");b.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var e=c.mouseEventToContainerPoint(a.touches[0]),f=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2);this._startLatLng=c.containerPointToLatLng(this._centerPoint);
"center"!==c.options.touchZoom&&(this._pinchStartLatLng=c.containerPointToLatLng(e.add(f)._divideBy(2)));this._startDist=e.distanceTo(f);this._startZoom=c.getZoom();this._moved=!1;this._zooming=!0;c._stop();b.DomEvent.on(g,"touchmove",this._onTouchMove,this).on(g,"touchend",this._onTouchEnd,this);b.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var c=this._map,e=c.mouseEventToContainerPoint(a.touches[0]),f=c.mouseEventToContainerPoint(a.touches[1]),
k=e.distanceTo(f)/this._startDist;if(this._zoom=c.getScaleZoom(k,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&1>k||this._zoom>c.getMaxZoom()&&1<k)&&(this._zoom=c._limitZoom(this._zoom)),"center"===c.options.touchZoom){if(this._center=this._startLatLng,1===k)return}else{e=e._add(f)._divideBy(2)._subtract(this._centerPoint);if(1===k&&0===e.x&&0===e.y)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(e),this._zoom)}this._moved||(c._moveStart(!0),
this._moved=!0);b.Util.cancelAnimFrame(this._animRequest);c=b.bind(c._move,c,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=b.Util.requestAnimFrame(c,this,!0);b.DomEvent.preventDefault(a)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,b.Util.cancelAnimFrame(this._animRequest),b.DomEvent.off(g,"touchmove",this._onTouchMove).off(g,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),
!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}});b.Map.addInitHook("addHandler","touchZoom",b.Map.TouchZoom);b.Map.mergeOptions({tap:!0,tapTolerance:15});b.Map.Tap=b.Handler.extend({addHooks:function(){b.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){b.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(b.DomEvent.preventDefault(a),
this._fireClick=!0,1<a.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0];a=c.target;this._startPos=this._newPos=new b.Point(c.clientX,c.clientY);a.tagName&&"a"===a.tagName.toLowerCase()&&b.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(b.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1E3);this._simulateEvent("mousedown",c);b.DomEvent.on(g,{touchmove:this._onMove,touchend:this._onUp},
this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),b.DomEvent.off(g,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){a=a.changedTouches[0];var c=a.target;c&&c.tagName&&"a"===c.tagName.toLowerCase()&&b.DomUtil.removeClass(c,"leaflet-active");this._simulateEvent("mouseup",a);this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){a=
a.touches[0];this._newPos=new b.Point(a.clientX,a.clientY);this._simulateEvent("mousemove",a)},_simulateEvent:function(a,c){var e=g.createEvent("MouseEvents");e._simulated=!0;c.target._simulatedClick=!0;e.initMouseEvent(a,!0,!0,F,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null);c.target.dispatchEvent(e)}});b.Browser.touch&&!b.Browser.pointer&&b.Map.addInitHook("addHandler","tap",b.Map.Tap);b.Map.mergeOptions({boxZoom:!0});b.Map.BoxZoom=b.Handler.extend({initialize:function(a){this._map=
a;this._container=a._container;this._pane=a._panes.overlayPane},addHooks:function(){b.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){b.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){return!(!a.shiftKey||1!==a.which&&1!==a.button)&&(this._resetState(),b.DomUtil.disableTextSelection(),b.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),
void b.DomEvent.on(g,{contextmenu:b.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=b.DomUtil.create("div","leaflet-zoom-box",this._container),b.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart"));this._point=this._map.mouseEventToContainerPoint(a);a=new b.Bounds(this._point,this._startPoint);var c=a.getSize();b.DomUtil.setPosition(this._box,a.min);this._box.style.width=
c.x+"px";this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(b.DomUtil.remove(this._box),b.DomUtil.removeClass(this._container,"leaflet-crosshair"));b.DomUtil.enableTextSelection();b.DomUtil.enableImageDrag();b.DomEvent.off(g,{contextmenu:b.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){1!==a.which&&1!==a.button||(this._finish(),!this._moved)||(setTimeout(b.bind(this._resetState,this),0),a=new b.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),
this._map.containerPointToLatLng(this._point)),this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a}))},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});b.Map.addInitHook("addHandler","boxZoom",b.Map.BoxZoom);b.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80});b.Map.Keyboard=b.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a;this._setPanDelta(a.options.keyboardPanDelta);this._setZoomDelta(a.options.zoomDelta)},
addHooks:function(){var a=this._map._container;0>=a.tabIndex&&(a.tabIndex="0");b.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();b.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=
g.body,c=g.documentElement,e=a.scrollTop||c.scrollTop,a=a.scrollLeft||c.scrollLeft;this._map._container.focus();F.scrollTo(a,e)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanDelta:function(a){var c,e=this._panKeys={},f=this.keyCodes;var b=0;for(c=f.left.length;b<c;b++)e[f.left[b]]=[-1*a,0];b=0;for(c=f.right.length;b<c;b++)e[f.right[b]]=[a,0];b=0;for(c=f.down.length;b<c;b++)e[f.down[b]]=[0,a];b=0;for(c=f.up.length;b<
c;b++)e[f.up[b]]=[0,-1*a]},_setZoomDelta:function(a){var c,e=this._zoomKeys={},f=this.keyCodes;var b=0;for(c=f.zoomIn.length;b<c;b++)e[f.zoomIn[b]]=a;b=0;for(c=f.zoomOut.length;b<c;b++)e[f.zoomOut[b]]=-a},_addHooks:function(){b.DomEvent.on(g,"keydown",this._onKeyDown,this)},_removeHooks:function(){b.DomEvent.off(g,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode;var e=this._map;if(c in this._panKeys){if(e._panAnim&&e._panAnim._inProgress)return;
c=this._panKeys[c];a.shiftKey&&(c=b.point(c).multiplyBy(3));e.panBy(c);e.options.maxBounds&&e.panInsideBounds(e.options.maxBounds)}else if(c in this._zoomKeys)e.setZoom(e.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else{if(27!==c)return;e.closePopup()}b.DomEvent.stop(a)}}});b.Map.addInitHook("addHandler","keyboard",b.Map.Keyboard);b.Handler.MarkerDrag=b.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new b.Draggable(a,
a,!0));this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable();b.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable();this._marker._icon&&b.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();
this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(a){var c=this._marker,e=c._shadow,f=b.DomUtil.getPosition(c._icon),k=c._map.layerPointToLatLng(f);e&&b.DomUtil.setPosition(e,f);c._latlng=k;a.latlng=k;a.oldLatLng=this._oldLatLng;c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",a)}});b.Control=b.Class.extend({options:{position:"topright"},initialize:function(a){b.setOptions(this,a)},getPosition:function(){return this.options.position},
setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove();this._map=a;var c=this._container=this.onAdd(a),e=this.getPosition();a=a._controlCorners[e];return b.DomUtil.addClass(c,"leaflet-control"),-1!==e.indexOf("bottom")?a.insertBefore(c,a.firstChild):a.appendChild(c),this},remove:function(){return this._map?(b.DomUtil.remove(this._container),this.onRemove&&
this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&0<a.screenX&&0<a.screenY&&this._map.getContainer().focus()}});b.control=function(a){return new b.Control(a)};b.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function a(a,h){c[a+h]=b.DomUtil.create("div",e+a+" "+e+h,f)}var c=this._controlCorners={},e="leaflet-",f=this._controlContainer=b.DomUtil.create("div",e+"control-container",
this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){b.DomUtil.remove(this._controlContainer)}});b.Control.Zoom=b.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var c=b.DomUtil.create("div","leaflet-control-zoom leaflet-bar"),e=this.options;return this._zoomInButton=this._createButton(e.zoomInText,e.zoomInTitle,"leaflet-control-zoom-in",c,this._zoomIn),
this._zoomOutButton=this._createButton(e.zoomOutText,e.zoomOutTitle,"leaflet-control-zoom-out",c,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&
this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,e,f,k){e=b.DomUtil.create("a",e,f);return e.innerHTML=a,e.href="#",e.title=c,e.setAttribute("role","button"),e.setAttribute("aria-label",c),b.DomEvent.on(e,"mousedown dblclick",b.DomEvent.stopPropagation).on(e,"click",b.DomEvent.stop).on(e,"click",k,this).on(e,"click",
this._refocusOnMap,this),e},_updateDisabled:function(){var a=this._map;b.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");b.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");(this._disabled||a._zoom===a.getMinZoom())&&b.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");(this._disabled||a._zoom===a.getMaxZoom())&&b.DomUtil.addClass(this._zoomInButton,"leaflet-disabled")}});b.Map.mergeOptions({zoomControl:!0});b.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=
new b.Control.Zoom,this.addControl(this.zoomControl))});b.control.zoom=function(a){return new b.Control.Zoom(a)};b.Control.Attribution=b.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){b.setOptions(this,a);this._attributions={}},onAdd:function(a){a.attributionControl=this;this._container=b.DomUtil.create("div","leaflet-control-attribution");b.DomEvent&&b.DomEvent.disableClickPropagation(this._container);
for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=
[];for(c in this._attributions)this._attributions[c]&&a.push(c);var c=[];this.options.prefix&&c.push(this.options.prefix);a.length&&c.push(a.join(", "));this._container.innerHTML=c.join(" | ")}}});b.Map.mergeOptions({attributionControl:!0});b.Map.addInitHook(function(){this.options.attributionControl&&(new b.Control.Attribution).addTo(this)});b.control.attribution=function(a){return new b.Control.Attribution(a)};b.Control.Scale=b.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,
imperial:!0},onAdd:function(a){var c=b.DomUtil.create("div","leaflet-control-scale"),e=this.options;return this._addScales(e,"leaflet-control-scale-line",c),a.on(e.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,e){a.metric&&(this._mScale=b.DomUtil.create("div",c,e));a.imperial&&(this._iScale=b.DomUtil.create("div",c,e))},_update:function(){var a=
this._map,c=a.getSize().y/2,a=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(a)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a);this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a);this._updateScale(this._mScale,1E3>c?c+" m":c/1E3+" km",c/a)},_updateImperial:function(a){var c,e,f;a*=3.2808399;5280<a?(c=a/5280,e=this._getRoundNum(c),this._updateScale(this._iScale,
e+" mi",e/c)):(f=this._getRoundNum(a),this._updateScale(this._iScale,f+" ft",f/a))},_updateScale:function(a,c,e){a.style.width=Math.round(this.options.maxWidth*e)+"px";a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1);a/=c;return a=10<=a?10:5<=a?5:3<=a?3:2<=a?2:1,c*a}});b.control.scale=function(a){return new b.Control.Scale(a)};b.Control.Layers=b.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,
c,e,f){return e<f?-1:f<e?1:0}},initialize:function(a,c,e){b.setOptions(this,e);this._layers=[];this._lastZIndex=0;this._handlingClick=!1;for(var f in a)this._addLayer(a[f],f);for(f in c)this._addLayer(c[f],f,!0)},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",
this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);a=this._getLayer(b.stamp(a));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){b.DomUtil.addClass(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;
var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._form.clientHeight?(b.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):b.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return b.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a=this._container=b.DomUtil.create("div","leaflet-control-layers"),c=this.options.collapsed;
a.setAttribute("aria-haspopup",!0);b.DomEvent.disableClickPropagation(a);b.Browser.touch||b.DomEvent.disableScrollPropagation(a);var e=this._form=b.DomUtil.create("form","leaflet-control-layers-list");c&&(this._map.on("click",this.collapse,this),b.Browser.android||b.DomEvent.on(a,{mouseenter:this.expand,mouseleave:this.collapse},this));var f=this._layersLink=b.DomUtil.create("a","leaflet-control-layers-toggle",a);f.href="#";f.title="Layers";b.Browser.touch?b.DomEvent.on(f,"click",b.DomEvent.stop).on(f,
"click",this.expand,this):b.DomEvent.on(f,"focus",this.expand,this);b.DomEvent.on(e,"click",function(){setTimeout(b.bind(this._onInputClick,this),0)},this);c||this.expand();this._baseLayersList=b.DomUtil.create("div","leaflet-control-layers-base",e);this._separator=b.DomUtil.create("div","leaflet-control-layers-separator",e);this._overlaysList=b.DomUtil.create("div","leaflet-control-layers-overlays",e);a.appendChild(e)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&
b.stamp(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,e){a.on("add remove",this._onLayerChange,this);this._layers.push({layer:a,name:c,overlay:e});this.options.sortLayers&&this._layers.sort(b.bind(function(a,c){return this.options.sortFunction(a.layer,c.layer,a.name,c.name)},this));this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;b.DomUtil.empty(this._baseLayersList);b.DomUtil.empty(this._overlaysList);
var a,c=0;for(a=0;a<this._layers.length;a++){var e=this._layers[a];this._addItem(e);var f=f||e.overlay;var k=k||!e.overlay;c+=e.overlay?0:1}return this.options.hideSingleBase&&(k=k&&1<c,this._baseLayersList.style.display=k?"":"none"),this._separator.style.display=f&&k?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(b.stamp(a.target));(a=c.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null)&&this._map.fire(a,
c)},_createRadioElement:function(a,c){var e='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",f=g.createElement("div");return f.innerHTML=e,f.firstChild},_addItem:function(a){var c,e=g.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(c=g.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f):c=this._createRadioElement("leaflet-base-layers",f);c.layerId=b.stamp(a.layer);b.DomEvent.on(c,
"click",this._onInputClick,this);f=g.createElement("span");f.innerHTML=" "+a.name;var k=g.createElement("div");e.appendChild(k);k.appendChild(c);k.appendChild(f);return(a.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var a=this._form.getElementsByTagName("input"),c=[],e=[];this._handlingClick=!0;for(var f=a.length-1;0<=f;f--){var b=a[f];var h=this._getLayer(b.layerId).layer;var m=this._map.hasLayer(h);b.checked&&!m?c.push(h):
!b.checked&&m&&e.push(h)}for(f=0;f<e.length;f++)this._map.removeLayer(e[f]);for(f=0;f<c.length;f++)this._map.addLayer(c[f]);this._handlingClick=!1;this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,c,e=this._form.getElementsByTagName("input"),f=this._map.getZoom(),b=e.length-1;0<=b;b--)a=e[b],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==l&&f<c.options.minZoom||c.options.maxZoom!==l&&f>c.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});
b.control.layers=function(a,c,e){return new b.Control.Layers(a,c,e)}}(window,document);/*
 jQuery Mobile 1.4.5 | Git HEADhash: 68e55e7 <> 2014-10-31T17:33:30Z | (c) 2010, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(F,g,l){"function"==typeof define&&define.amd?define(["jquery"],function(d){return l(d,F,g),d.mobile}):l(F.jQuery,F,g)}(this,document,function(F,g,l){F.mobile={};!0;(function(d,b){function h(c,e){var f,b,k,h=c.nodeName.toLowerCase();return"area"===h?(f=c.parentNode,b=f.name,c.href&&b&&"map"===f.nodeName.toLowerCase()?(k=d("img[usemap=#"+b+"]")[0],!!k&&a(k)):!1):(/input|select|textarea|button|object/.test(h)?!c.disabled:"a"===h?c.href||e:e)&&a(c)}function a(a){return d.expr.filters.visible(a)&&
!d(a).parents().addBack().filter(function(){return"hidden"===d.css(this,"visibility")}).length}var c=0,e=/^ui-id-\d+$/;d.ui=d.ui||{};d.extend(d.ui,{version:"c0ab71056b936627e8a7821f03c044aec6280a40",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});d.fn.extend({focus:function(a){return function(c,e){return"number"==typeof c?this.each(function(){var a=this;setTimeout(function(){d(a).focus();
e&&e.call(a)},c)}):a.apply(this,arguments)}}(d.fn.focus),scrollParent:function(){var a;return a=d.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.css(this,"position"))&&/(auto|scroll)/.test(d.css(this,"overflow")+d.css(this,"overflow-y")+d.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(d.css(this,"overflow")+d.css(this,"overflow-y")+d.css(this,
"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?d(this[0].ownerDocument||l):a},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){e.test(this.id)&&d(this).removeAttr("id")})}});d.extend(d.expr[":"],{data:d.expr.createPseudo?d.expr.createPseudo(function(a){return function(c){return!!d.data(c,a)}}):function(a,c,e){return!!d.data(a,e[3])},focusable:function(a){return h(a,!isNaN(d.attr(a,"tabindex")))},
tabbable:function(a){var c=d.attr(a,"tabindex"),e=isNaN(c);return(e||0<=c)&&h(a,!e)}});d("<a>").outerWidth(1).jquery||d.each(["Width","Height"],function(a,c){function e(a,c,e,b){return d.each(f,function(){c-=parseFloat(d.css(a,"padding"+this))||0;e&&(c-=parseFloat(d.css(a,"border"+this+"Width"))||0);b&&(c-=parseFloat(d.css(a,"margin"+this))||0)}),c}var f="Width"===c?["Left","Right"]:["Top","Bottom"],k=c.toLowerCase(),h={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,
outerHeight:d.fn.outerHeight};d.fn["inner"+c]=function(a){return a===b?h["inner"+c].call(this):this.each(function(){d(this).css(k,e(this,a)+"px")})};d.fn["outer"+c]=function(a,f){return"number"!=typeof a?h["outer"+c].call(this,a):this.each(function(){d(this).css(k,e(this,a,!0,f)+"px")})}});d.fn.addBack||(d.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});d("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(d.fn.removeData=function(a){return function(c){return arguments.length?
a.call(this,d.camelCase(c)):a.call(this)}}(d.fn.removeData));d.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());d.support.selectstart="onselectstart"in l.createElement("div");d.fn.extend({disableSelection:function(){return this.bind((d.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(a){if(a!==b)return this.css("zIndex",a);if(this.length){var c,
e;for(a=d(this[0]);a.length&&a[0]!==l;){if(c=a.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(e=parseInt(a.css("zIndex"),10),!isNaN(e)&&0!==e))return e;a=a.parent()}}return 0}});d.ui.plugin={add:function(a,c,e){var f;a=d.ui[a].prototype;for(f in e)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([c,e[f]])},call:function(a,c,e,b){if((c=a.plugins[c])&&(b||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(b=0;b<c.length;b++)a.options[c[b][0]]&&c[b][1].apply(a.element,
e)}}})(F);(function(d,b){var h=function(a,c){var e=a.parent(),f=[],b=function(){var a=d(this),a=d.mobile.toolbar&&a.data("mobile-toolbar")?a.toolbar("option"):{position:a.attr("data-"+d.mobile.ns+"position"),updatePagePadding:!1!==a.attr("data-"+d.mobile.ns+"update-page-padding")};return!("fixed"===a.position&&!0===a.updatePagePadding)},h=e.children(":jqmData(role='header')").filter(b),m=a.children(":jqmData(role='header')"),e=e.children(":jqmData(role='footer')").filter(b),b=a.children(":jqmData(role='footer')");
return 0===m.length&&0<h.length&&(f=f.concat(h.toArray())),0===b.length&&0<e.length&&(f=f.concat(e.toArray())),d.each(f,function(a,e){c-=d(e).outerHeight()}),Math.max(0,c)};d.extend(d.mobile,{window:d(b),document:d(l),keyCode:d.ui.keyCode,behaviors:{},silentScroll:function(a){"number"!==d.type(a)&&(a=d.mobile.defaultHomeScroll);d.event.special.scrollstart.enabled=!1;setTimeout(function(){b.scrollTo(0,a);d.mobile.document.trigger("silentscroll",{x:0,y:a})},20);setTimeout(function(){d.event.special.scrollstart.enabled=
!0},150)},getClosestBaseUrl:function(a){a=d(a).closest(".ui-page").jqmData("url");var c=d.mobile.path.documentBase.hrefNoHash;return d.mobile.dynamicBaseEnabled&&a&&d.mobile.path.isPath(a)||(a=c),d.mobile.path.makeUrlAbsolute(a,c)},removeActiveLinkClass:function(a){!d.mobile.activeClickedLink||d.mobile.activeClickedLink.closest("."+d.mobile.activePageClass).length&&!a||d.mobile.activeClickedLink.removeClass(d.mobile.activeBtnClass);d.mobile.activeClickedLink=null},getInheritedTheme:function(a,c){for(var e,
f,b=a[0],h="",m=/ui-(bar|body|overlay)-([a-z])\b/;b&&(e=b.className||"",!(e&&(f=m.exec(e))&&(h=f[2])));)b=b.parentNode;return h||c||"a"},enhanceable:function(a){return this.haveParents(a,"enhance")},hijackable:function(a){return this.haveParents(a,"ajax")},haveParents:function(a,c){if(!d.mobile.ignoreContentEnabled)return a;var e,f,b,h=a.length,m=d();for(f=0;h>f;f++){var r=a.eq(f);var u=!1;for(e=a[f];e;){if(b=e.getAttribute?e.getAttribute("data-"+d.mobile.ns+c):"","false"===b){u=!0;break}e=e.parentNode}u||
(m=m.add(r))}return m},getScreenHeight:function(){return b.innerHeight||d.mobile.window.height()},resetActivePageHeight:function(a){var c=d("."+d.mobile.activePageClass),e=c.height(),f=c.outerHeight(!0);a=h(c,"number"==typeof a?a:d.mobile.getScreenHeight());c.css("min-height","");c.height()<a&&c.css("min-height",a-(f-e))},loading:function(){var a=this.loading._widget||d(d.mobile.loader.prototype.defaultHtml).loader(),c=a.loader.apply(a,arguments);return this.loading._widget=a,c}});d.addDependents=
function(a,c){var e=d(a),f=e.jqmData("dependents")||d();e.jqmData("dependents",d(f).add(c))};d.fn.extend({removeWithDependents:function(){d.removeWithDependents(this)},enhanceWithin:function(){var a,c={},e=d.mobile.page.prototype.keepNativeSelector(),f=this;d.mobile.nojs&&d.mobile.nojs(this);d.mobile.links&&d.mobile.links(this);d.mobile.degradeInputsWithin&&d.mobile.degradeInputsWithin(this);d.fn.buttonMarkup&&this.find(d.fn.buttonMarkup.initSelector).not(e).jqmEnhanceable().buttonMarkup();d.fn.fieldcontain&&
this.find(":jqmData(role='fieldcontain')").not(e).jqmEnhanceable().fieldcontain();d.each(d.mobile.widgets,function(a,b){if(b.initSelector){var k=d.mobile.enhanceable(f.find(b.initSelector));0<k.length&&(k=k.not(e));0<k.length&&(c[b.prototype.widgetName]=k)}});for(a in c)c[a][a]();return this},addDependents:function(a){d.addDependents(this,a)},getEncodedText:function(){return d("<a>").text(this.text()).html()},jqmEnhanceable:function(){return d.mobile.enhanceable(this)},jqmHijackable:function(){return d.mobile.hijackable(this)}});
d.removeWithDependents=function(a){a=d(a);(a.jqmData("dependents")||d()).remove();a.remove()};d.addDependents=function(a,c){var e=d(a),f=e.jqmData("dependents")||d();e.jqmData("dependents",d(f).add(c))};d.find.matches=function(a,c){return d.find(a,null,null,c)};d.find.matchesSelector=function(a,c){return 0<d.find(c,null,null,[a]).length}})(F,this);F.extend(F.mobile,{version:"1.4.5",subPageUrlKey:"ui-page",hideUrlBar:!0,keepNative:":jqmData(role='none'), :jqmData(role='nojs')",activePageClass:"ui-page-active",
activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:0,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"a",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,buttonMarkup:{hoverDelay:200},dynamicBaseEnabled:!0,pageContainer:F(),allowCrossDomainPages:!1,dialogHashKey:"&ui-state=dialog"});
(function(d,b){var h=0,a=Array.prototype.slice,c=d.cleanData;d.cleanData=function(a){for(var e,b=0;null!=(e=a[b]);b++)try{d(e).triggerHandler("remove")}catch(n){}c(a)};d.widget=function(a,c,b){var e,f,k,h,q={},g=a.split(".")[0];return a=a.split(".")[1],e=g+"-"+a,b||(b=c,c=d.Widget),d.expr[":"][e.toLowerCase()]=function(a){return!!d.data(a,e)},d[g]=d[g]||{},f=d[g][a],k=d[g][a]=function(a,c){return this._createWidget?void(arguments.length&&this._createWidget(a,c)):new k(a,c)},d.extend(k,f,{version:b.version,
_proto:d.extend({},b),_childConstructors:[]}),h=new c,h.options=d.widget.extend({},h.options),d.each(b,function(a,e){return d.isFunction(e)?void(q[a]=function(){var f=function(){return c.prototype[a].apply(this,arguments)},b=function(e){return c.prototype[a].apply(this,e)};return function(){var a,c=this._super,k=this._superApply;return this._super=f,this._superApply=b,a=e.apply(this,arguments),this._super=c,this._superApply=k,a}}()):void(q[a]=e)}),k.prototype=d.widget.extend(h,{widgetEventPrefix:f?
h.widgetEventPrefix||a:a},q,{constructor:k,namespace:g,widgetName:a,widgetFullName:e}),f?(d.each(f._childConstructors,function(a,c){var e=c.prototype;d.widget(e.namespace+"."+e.widgetName,k,c._proto)}),delete f._childConstructors):c._childConstructors.push(k),d.widget.bridge(a,k),k};d.widget.extend=function(c){for(var e,k,h=a.call(arguments,1),m=0,r=h.length;r>m;m++)for(e in h[m])k=h[m][e],h[m].hasOwnProperty(e)&&k!==b&&(c[e]=d.isPlainObject(k)?d.isPlainObject(c[e])?d.widget.extend({},c[e],k):d.widget.extend({},
k):k);return c};d.widget.bridge=function(c,f){var e=f.prototype.widgetFullName||c;d.fn[c]=function(k){var m="string"==typeof k,h=a.call(arguments,1),n=this;return k=!m&&h.length?d.widget.extend.apply(null,[k].concat(h)):k,this.each(m?function(){var a,f=d.data(this,e);return"instance"===k?(n=f,!1):f?d.isFunction(f[k])&&"_"!==k.charAt(0)?(a=f[k].apply(f,h),a!==f&&a!==b?(n=a&&a.jquery?n.pushStack(a.get()):a,!1):void 0):d.error("no such method '"+k+"' for "+c+" widget instance"):d.error("cannot call methods on "+
c+" prior to initialization; attempted to call method '"+k+"'")}:function(){var a=d.data(this,e);a?a.option(k||{})._init():d.data(this,e,new f(k,this))}),n}};d.Widget=function(){};d.Widget._childConstructors=[];d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,c){c=d(c||this.defaultElement||this)[0];this.element=d(c);this.uuid=h++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=d.widget.extend({},
this.options,this._getCreateOptions(),a);this.bindings=d();this.hoverable=d();this.focusable=d();c!==this&&(d.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=d(c.style?c.ownerDocument:c.document||c),this.window=d(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,
_init:d.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(a,
c){var e,f,m=a;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof a)if(m={},e=a.split("."),a=e.shift(),e.length){var h=m[a]=d.widget.extend({},this.options[a]);for(f=0;f<e.length-1;f++)h[e[f]]=h[e[f]]||{},h=h[e[f]];if(a=e.pop(),c===b)return h[a]===b?null:h[a];h[a]=c}else{if(c===b)return this.options[a]===b?null:this.options[a];m[a]=c}return this._setOptions(m),this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,c){return this.options[a]=
c,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(a,c,b){var e,f=this;"boolean"!=typeof a&&(b=c,c=a,a=!1);b?(c=e=d(c),this.bindings=this.bindings.add(c)):(b=c,c=this.element,e=this.widget());d.each(b,function(b,k){function h(){return a||!0!==
f.options.disabled&&!d(this).hasClass("ui-state-disabled")?("string"==typeof k?f[k]:k).apply(f,arguments):void 0}"string"!=typeof k&&(h.guid=k.guid=k.guid||h.guid||d.guid++);var m=b.match(/^(\w+)\s*(.*)$/),n=m[1]+f.eventNamespace;(m=m[2])?e.delegate(m,n,h):c.bind(n,h)})},_off:function(a,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(c).undelegate(c)},_delay:function(a,c){var e=this;return setTimeout(function(){return("string"==typeof a?e[a]:a).apply(e,arguments)},
c||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){d(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){d(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){d(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){d(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,b){var e,f=this.options[a];if(b=b||{},c=d.Event(c),
c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c.target=this.element[0],a=c.originalEvent)for(e in a)e in c||(c[e]=a[e]);return this.element.trigger(c,b),!(d.isFunction(f)&&!1===f.apply(this.element[0],[c].concat(b))||c.isDefaultPrevented())}};d.each({show:"fadeIn",hide:"fadeOut"},function(a,c){d.Widget.prototype["_"+a]=function(e,b,f){"string"==typeof b&&(b={effect:b});var k=b?!0===b||"number"==typeof b?c:b.effect||c:a;b=b||{};"number"==typeof b&&(b={duration:b});var h=
!d.isEmptyObject(b);b.complete=f;b.delay&&e.delay(b.delay);h&&d.effects&&d.effects.effect[k]?e[a](b):k!==a&&e[k]?e[k](b.duration,b.easing,f):e.queue(function(c){d(this)[a]();f&&f.call(e[0]);c()})}})})(F);(function(d,b,h){var a={},c=d.find,e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,f=/:jqmData\(([^)]*)\)/g;d.extend(d.mobile,{ns:"",getAttribute:function(a,c){var b;(a=a.jquery?a[0]:a)&&a.getAttribute&&(b=a.getAttribute("data-"+d.mobile.ns+c));try{b="true"===b?!0:"false"===b?!1:"null"===b?null:+b+""===b?+b:e.test(b)?
JSON.parse(b):b}catch(r){}return b},nsNormalizeDict:a,nsNormalize:function(c){return a[c]||(a[c]=d.camelCase(d.mobile.ns+c))},closestPageData:function(a){return a.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")}});d.fn.jqmData=function(a,c){var e;return"undefined"!=typeof a&&(a&&(a=d.mobile.nsNormalize(a)),e=2>arguments.length||c===h?this.data(a):this.data(a,c)),e};d.jqmData=function(a,c,e){var b;return"undefined"!=typeof c&&(b=d.data(a,c?d.mobile.nsNormalize(c):c,e)),
b};d.fn.jqmRemoveData=function(a){return this.removeData(d.mobile.nsNormalize(a))};d.jqmRemoveData=function(a,c){return d.removeData(a,d.mobile.nsNormalize(c))};d.find=function(a,e,b,h){return-1<a.indexOf(":jqmData")&&(a=a.replace(f,"[data-"+(d.mobile.ns||"")+"$1]")),c.call(this,a,e,b,h)};d.extend(d.find,c)})(F,this);(function(d){var b=/[A-Z]/g,h=function(a){return"-"+a.toLowerCase()};d.extend(d.Widget.prototype,{_getCreateOptions:function(){var a,c=this.element[0],e={};if(!d.mobile.getAttribute(c,
"defaults"))for(a in this.options){var f=d.mobile.getAttribute(c,a.replace(b,h));null!=f&&(e[a]=f)}return e}});d.mobile.widget=d.Widget})(F);(function(d){var b=d("html");d.widget("mobile.loader",{options:{theme:"a",textVisible:!1,html:"",text:"loading"},defaultHtml:"<div class='ui-loader'><span class='ui-icon-loading'></span><h1></h1></div>",fakeFixLoader:function(){var b=d("."+d.mobile.activeBtnClass).first();this.element.css({top:d.support.scrollTop&&this.window.scrollTop()+this.window.height()/
2||b.length&&b.offset().top||100})},checkLoaderPosition:function(){var b=this.element.offset(),a=this.window.scrollTop(),c=d.mobile.getScreenHeight();(b.top<a||b.top-a>c)&&(this.element.addClass("ui-loader-fakefix"),this.fakeFixLoader(),this.window.unbind("scroll",this.checkLoaderPosition).bind("scroll",d.proxy(this.fakeFixLoader,this)))},resetHtml:function(){this.element.html(d(this.defaultHtml).html())},show:function(h,a,c){var e;this.resetHtml();"object"===d.type(h)?(e=d.extend({},this.options,
h),h=e.theme):(e=this.options,h=h||e.theme);var f=a||(!1===e.text?"":e.text);b.addClass("ui-loading");this.element.attr("class","ui-loader ui-corner-all ui-body-"+h+" ui-loader-"+(e.textVisible||a||h.text?"verbose":"default")+(e.textonly||c?" ui-loader-textonly":""));e.html?this.element.html(e.html):this.element.find("h1").text(f);this.element.appendTo(d(d.mobile.pagecontainer?":mobile-pagecontainer":"body"));this.checkLoaderPosition();this.window.bind("scroll",d.proxy(this.checkLoaderPosition,this))},
hide:function(){b.removeClass("ui-loading");this.options.text&&this.element.removeClass("ui-loader-fakefix");this.window.unbind("scroll",this.fakeFixLoader);this.window.unbind("scroll",this.checkLoaderPosition)}})})(F,this);(function(d,b,h){function a(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var c=d.event.special,e=l.documentMode,f="onhashchange"in b&&(e===h||7<e);d.fn.hashchange=function(a){return a?this.bind("hashchange",a):this.trigger("hashchange")};d.fn.hashchange.delay=
50;c.hashchange=d.extend(c.hashchange,{setup:function(){return f?!1:void d(k.start)},teardown:function(){return f?!1:void d(k.stop)}});var k=function(){function c(){var f=a(),k=w(u);f!==u?(g(u=f,k),d(b).trigger("hashchange")):k!==u&&(location.href=location.href.replace(/#.*/,"")+k);e=setTimeout(c,d.fn.hashchange.delay)}var e,k={},u=a(),q=function(a){return a},g=q,w=q;return k.start=function(){e||c()},k.stop=function(){e&&clearTimeout(e);e=h},b.attachEvent&&!b.addEventListener&&!f&&function(){var e,
b;k.start=function(){e||(b=d.fn.hashchange.src,b=b&&b+a(),e=d('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){b||g(a());c()}).attr("src",b||"javascript:0").insertAfter("body")[0].contentWindow,l.onpropertychange=function(){try{"title"===event.propertyName&&(e.document.title=l.title)}catch(A){}})};k.stop=q;w=function(){return a(e.location.href)};g=function(a,c){var b=e.document,f=d.fn.hashchange.domain;a!==c&&(b.title=l.title,b.open(),f&&b.write('<script>document.domain="'+f+
'"\x3c/script>'),b.close(),e.location.hash=a)}}(),k}()})(F,this);(function(d){g.matchMedia=g.matchMedia||function(b){var h,a=b.documentElement,c=a.firstElementChild||a.firstChild,e=b.createElement("body"),f=b.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(b){return f.innerHTML='&shy;<style media="'+b+'"> #mq-test-1 { width: 42px; }</style>',a.insertBefore(e,c),h=42===f.offsetWidth,a.removeChild(e),{matches:h,
media:b}}}(l);d.mobile.media=function(b){return g.matchMedia(b).matches}})(F);(function(d){var b={touch:"ontouchend"in l};d.mobile.support=d.mobile.support||{};d.extend(d.support,b);d.extend(d.mobile.support,b)})(F);F.extend(F.support,{orientation:"orientation"in g&&"onorientationchange"in g});(function(d,b){function h(a){var f,k=a.charAt(0).toUpperCase()+a.substr(1);a=(a+" "+e.join(k+" ")+k).split(" ");for(f in a)if(c[a[f]]!==b)return!0}var a=d("<body>").prependTo("html"),c=a[0].style,e=["Webkit",
"Moz","O"];var f="palmGetResource"in g;var k=g.operamini&&"[object OperaMini]"==={}.toString.call(g.operamini),n=g.blackberry&&!h("-webkit-transform");d.extend(d.mobile,{browser:{}});d.mobile.browser.oldIE=function(){var a=3,c=l.createElement("div"),e=c.all||[];do c.innerHTML="\x3c!--[if gt IE "+ ++a+"]><br><![endif]--\x3e";while(e[0]);return 4<a?a:!a}();d.extend(d.support,{pushState:"pushState"in history&&"replaceState"in history&&!(0<=g.navigator.userAgent.indexOf("Firefox")&&g.top!==g)&&-1===g.navigator.userAgent.search(/CriOS/),
mediaquery:d.mobile.media("only all"),cssPseudoElement:!!h("content"),touchOverflow:!!h("overflowScrolling"),cssTransform3d:function(){var c,f=d.mobile.media("(-"+e.join("-transform-3d),(-")+"-transform-3d),(transform-3d)");if(f)return!!f;var k=l.createElement("div");var h={MozTransform:"-moz-transform",transform:"transform"};a.append(k);for(c in h)k.style[c]!==b&&(k.style[c]="translate3d( 100px, 1px, 1px )",f=g.getComputedStyle(k).getPropertyValue(h[c]));return!!f&&"none"!==f}(),boxShadow:!!h("boxShadow")&&
!n,fixedPosition:function(){var a=navigator.userAgent,c=navigator.platform,e=a.match(/AppleWebKit\/([0-9]+)/),e=!!e&&e[1],b=a.match(/Fennec\/([0-9]+)/),b=!!b&&b[1],f=a.match(/Opera Mobi\/([0-9]+)/),k=!!f&&f[1];return(-1<c.indexOf("iPhone")||-1<c.indexOf("iPad")||-1<c.indexOf("iPod"))&&e&&534>e||g.operamini&&"[object OperaMini]"==={}.toString.call(g.operamini)||f&&7458>k||-1<a.indexOf("Android")&&e&&533>e||b&&6>b||"palmGetResource"in g&&e&&534>e||-1<a.indexOf("MeeGo")&&-1<a.indexOf("NokiaBrowser/8.5.0")?
!1:!0}(),scrollTop:("pageXOffset"in g||"scrollTop"in l.documentElement||"scrollTop"in a[0])&&!f&&!k,dynamicBaseTag:function(){var c,e,b=location.protocol+"//"+location.host+location.pathname+"ui-dir/",f=d("head base"),k=null,h="";return f.length?h=f.attr("href"):f=k=d("<base>",{href:b}).appendTo("head"),c=d("<a href='testurl' />").prependTo(a),e=c[0].href,f[0].href=h||location.pathname,k&&k.remove(),0===e.indexOf(b)}(),cssPointerEvents:function(){var a,c=l.createElement("x"),e=l.documentElement,b=
g.getComputedStyle;return"pointerEvents"in c.style?(c.style.pointerEvents="auto",c.style.pointerEvents="x",e.appendChild(c),a=b&&"auto"===b(c,"").pointerEvents,e.removeChild(c),!!a):!1}(),boundingRect:"undefined"!=typeof l.createElement("div").getBoundingClientRect,inlineSVG:function(){var a=!(!g.document.createElementNS||!g.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||g.opera&&-1===navigator.userAgent.indexOf("Chrome")),c=function(c){c&&a||d("html").addClass("ui-nosvg")},
e=new g.Image;e.onerror=function(){c(!1)};e.onload=function(){c(1===e.width&&1===e.height)};e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}});a.remove();f=function(){var a=g.navigator.userAgent;return-1<a.indexOf("Nokia")&&(-1<a.indexOf("Symbian/3")||-1<a.indexOf("Series60/5"))&&-1<a.indexOf("AppleWebKit")&&a.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}();d.mobile.gradeA=function(){return(d.support.mediaquery&&d.support.cssPseudoElement||d.mobile.browser.oldIE&&8<=
d.mobile.browser.oldIE)&&(d.support.boundingRect||null!==d.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/))};d.mobile.ajaxBlacklist=g.blackberry&&!g.WebKitPoint||k||f;f&&d(function(){d("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")});d.support.boxShadow||d("html").addClass("ui-noboxshadow")})(F);(function(d,b){var h,a=d.mobile.window,c=function(){};d.event.special.beforenavigate={setup:function(){a.on("navigate",c)},teardown:function(){a.off("navigate",c)}};d.event.special.navigate=
h={bound:!1,pushStateEnabled:!0,originalEventName:b,isPushStateEnabled:function(){return d.support.pushState&&!0===d.mobile.pushStateEnabled&&this.isHashChangeEnabled()},isHashChangeEnabled:function(){return!0===d.mobile.hashListeningEnabled},popstate:function(c){var e=new d.Event("navigate"),b=new d.Event("beforenavigate"),h=c.originalEvent.state||{};b.originalEvent=c;a.trigger(b);b.isDefaultPrevented()||(c.historyState&&d.extend(h,c.historyState),e.originalEvent=c,setTimeout(function(){a.trigger(e,
{state:h})},0))},hashchange:function(c){var e=new d.Event("navigate"),b=new d.Event("beforenavigate");b.originalEvent=c;a.trigger(b);b.isDefaultPrevented()||(e.originalEvent=c,a.trigger(e,{state:c.hashchangeState||{}}))},setup:function(){h.bound||(h.bound=!0,h.isPushStateEnabled()?(h.originalEventName="popstate",a.bind("popstate.navigate",h.popstate)):h.isHashChangeEnabled()&&(h.originalEventName="hashchange",a.bind("hashchange.navigate",h.hashchange)))}}})(F);(function(d,b){var h;d.mobile.path=h=
{uiStateKey:"&ui-state",urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(a){var c=this.parseUrl(a||location.href);a=a?c:location;var b=c.hash;return b="#"===b?"":b,a.protocol+c.doubleSlash+a.host+(""!==a.protocol&&"/"!==a.pathname.substring(0,1)?"/":"")+a.pathname+a.search+b},getDocumentUrl:function(a){return a?d.extend({},h.documentUrl):
h.documentUrl.href},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(a){if("object"===d.type(a))return a;a=h.urlParseRE.exec(a||"")||[];return{href:a[0]||"",hrefNoHash:a[1]||"",hrefNoSearch:a[2]||"",domain:a[3]||"",protocol:a[4]||"",doubleSlash:a[5]||"",authority:a[6]||"",username:a[8]||"",password:a[9]||"",host:a[10]||"",hostname:a[11]||"",port:a[12]||"",pathname:a[13]||"",directory:a[14]||"",filename:a[15]||"",search:a[16]||"",hash:a[17]||""}},makePathAbsolute:function(a,
e){var c,b;if(a&&"/"===a.charAt(0))return a;a=a||"";var h=(e=e?e.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"")?e.split("/"):[];var m=a.split("/");for(c=0;c<m.length;c++)switch(b=m[c]){case ".":break;case "..":h.length&&h.pop();break;default:h.push(b)}return"/"+h.join("/")},isSameDomain:function(a,e){return h.parseUrl(a).domain.toLowerCase()===h.parseUrl(e).domain.toLowerCase()},isRelativeUrl:function(a){return""===h.parseUrl(a).protocol},isAbsoluteUrl:function(a){return""!==h.parseUrl(a).protocol},makeUrlAbsolute:function(a,
e){if(!h.isRelativeUrl(a))return a;e===b&&(e=this.documentBase);var c=h.parseUrl(a),k=h.parseUrl(e),n=c.protocol||k.protocol,m=c.protocol?c.doubleSlash:c.doubleSlash||k.doubleSlash,d=c.authority||k.authority,u=""!==c.pathname,q=h.makePathAbsolute(c.pathname||k.filename,k.pathname);return n+m+d+q+(c.search||!u&&k.search||"")+c.hash},addSearchParams:function(a,e){var c=h.parseUrl(a),b="object"==typeof e?d.param(e):e,n=c.search||"?";return c.hrefNoSearch+n+("?"!==n.charAt(n.length-1)?"&":"")+b+(c.hash||
"")},convertUrlToDataUrl:function(a){var c=a;a=h.parseUrl(a);return h.isEmbeddedPage(a)?c=a.hash.split("&ui-state=dialog")[0].replace(/^#/,"").replace(/\?.*$/,""):h.isSameDomain(a,this.documentBase)&&(c=a.hrefNoHash.replace(this.documentBase.domain,"").split("&ui-state=dialog")[0]),g.decodeURIComponent(c)},get:function(a){return a===b&&(a=h.parseLocation().hash),h.stripHash(a).replace(/[^\/]*\.[^\/*]+$/,"")},set:function(a){location.hash=a},isPath:function(a){return/\//.test(a)},clean:function(a){return a.replace(this.documentBase.domain,
"")},stripHash:function(a){return a.replace(/^#/,"")},stripQueryParams:function(a){return a.replace(/\?.*$/,"")},cleanHash:function(a){return h.stripHash(a.replace(/\?.*$/,"").replace("&ui-state=dialog",""))},isHashValid:function(a){return/^#[^#]+$/.test(a)},isExternal:function(a){a=h.parseUrl(a);return!(!a.protocol||a.domain.toLowerCase()===this.documentUrl.domain.toLowerCase())},hasProtocol:function(a){return/^(:?\w+:)/.test(a)},isEmbeddedPage:function(a){a=h.parseUrl(a);return""!==a.protocol?!this.isPath(a.hash)&&
a.hash&&(a.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&a.hrefNoHash===this.documentBase.hrefNoHash):/^#/.test(a.href)},squash:function(a,e){var c,b,n,m,d,u=this.isPath(a),q=this.parseUrl(a),g=q.hash,w="";return e||(u?e=h.getLocation():(d=h.getDocumentUrl(!0),e=h.isPath(d.hash)?h.squash(d.href):d.href)),b=u?h.stripHash(a):a,b=h.isPath(q.hash)?h.stripHash(q.hash):b,m=b.indexOf(this.uiStateKey),-1<m&&(w=b.slice(m),b=b.slice(0,m)),c=h.makeUrlAbsolute(b,e),n=this.parseUrl(c).search,
u?((h.isPath(g)||0===g.replace("#","").indexOf(this.uiStateKey))&&(g=""),w&&-1===g.indexOf(this.uiStateKey)&&(g+=w),-1===g.indexOf("#")&&""!==g&&(g="#"+g),c=h.parseUrl(c),c=c.protocol+c.doubleSlash+c.host+c.pathname+n+g):c+=-1<c.indexOf("#")?w:"#"+w,c},isPreservableHash:function(a){return 0===a.replace("#","").indexOf(this.uiStateKey)},hashToSelector:function(a){var c="#"===a.substring(0,1);return c&&(a=a.substring(1)),(c?"#":"")+a.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1")},getFilePath:function(a){return a&&
a.split("&ui-state=dialog")[0]},isFirstPageUrl:function(a){a=h.parseUrl(h.makeUrlAbsolute(a,this.documentBase));var c=d.mobile.firstPage,c=c&&c[0]?c[0].id:b;return(a.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&a.hrefNoHash===this.documentBase.hrefNoHash)&&(!a.hash||"#"===a.hash||c&&a.hash.replace(/^#/,"")===c)},isPermittedCrossDomainRequest:function(a,e){return d.mobile.allowCrossDomainPages&&("file:"===a.protocol||"content:"===a.protocol)&&-1!==e.search(/^https?:/)}};h.documentUrl=
h.parseLocation();var a=d("head").find("base");h.documentBase=a.length?h.parseUrl(h.makeUrlAbsolute(a.attr("href"),h.documentUrl.href)):h.documentUrl;h.documentBaseDiffers=h.documentUrl.hrefNoHash!==h.documentBase.hrefNoHash;h.getDocumentBase=function(a){return a?d.extend({},h.documentBase):h.documentBase.href};d.extend(d.mobile,{getDocumentUrl:h.getDocumentUrl,getDocumentBase:h.getDocumentBase})})(F);(function(d,b){d.mobile.History=function(b,a){this.stack=b||[];this.activeIndex=a||0};d.extend(d.mobile.History.prototype,
{getActive:function(){return this.stack[this.activeIndex]},getLast:function(){return this.stack[this.previousIndex]},getNext:function(){return this.stack[this.activeIndex+1]},getPrev:function(){return this.stack[this.activeIndex-1]},add:function(b,a){a=a||{};this.getNext()&&this.clearForward();a.hash&&-1===a.hash.indexOf("#")&&(a.hash="#"+a.hash);a.url=b;this.stack.push(a);this.activeIndex=this.stack.length-1},clearForward:function(){this.stack=this.stack.slice(0,this.activeIndex+1)},find:function(b,
a,c){a=a||this.stack;var e,f,k,h=a.length;for(f=0;h>f&&(e=a[f],decodeURIComponent(b)!==decodeURIComponent(e.url)&&decodeURIComponent(b)!==decodeURIComponent(e.hash)||(k=f,!c));f++);return k},closest:function(h){var a,c=this.activeIndex;return a=this.find(h,this.stack.slice(0,c)),a===b&&(a=this.find(h,this.stack.slice(c),!0),a=a===b?a:a+c),a},direct:function(h){var a=this.closest(h.url),c=this.activeIndex;a!==b&&(this.activeIndex=a,this.previousIndex=c);c>a?(h.present||h.back||d.noop)(this.getActive(),
"back"):a>c?(h.present||h.forward||d.noop)(this.getActive(),"forward"):a===b&&h.missing&&h.missing(this.getActive())}})})(F);(function(d){var b=d.mobile.path,h=location.href;d.mobile.Navigator=function(a){this.history=a;this.ignoreInitialHashChange=!0;d.mobile.window.bind({"popstate.history":d.proxy(this.popstate,this),"hashchange.history":d.proxy(this.hashchange,this)})};d.extend(d.mobile.Navigator.prototype,{squash:function(a,c){var e,f,k=b.isPath(a)?b.stripHash(a):a;return f=b.squash(a),e=d.extend({hash:k,
url:f},c),g.history.replaceState(e,e.title||l.title,f),e},hash:function(a,c){var e,f,k,h;return e=b.parseUrl(a),f=b.parseLocation(),f.pathname+f.search===e.pathname+e.search?k=e.hash?e.hash:e.pathname+e.search:b.isPath(a)?(h=b.parseUrl(c),k=h.pathname+h.search+(b.isPreservableHash(h.hash)?h.hash.replace("#",""):"")):k=a,k},go:function(a,c,e){var f,k=d.event.special.navigate.isPushStateEnabled();var h=b.squash(a);var m=this.hash(a,h);e&&m!==b.stripHash(b.parseLocation().hash)&&(this.preventNextHashChange=
e);this.preventHashAssignPopState=!0;g.location.hash=m;this.preventHashAssignPopState=!1;c=d.extend({url:h,hash:m,title:l.title},c);k&&(f=new d.Event("popstate"),f.originalEvent={type:"popstate",state:null},this.squash(a,c),e||(this.ignorePopState=!0,d.mobile.window.trigger(f)));this.history.add(c.url,c)},popstate:function(a){var c,e;if(d.event.special.navigate.isPushStateEnabled())return this.preventHashAssignPopState?(this.preventHashAssignPopState=!1,void a.stopImmediatePropagation()):this.ignorePopState?
void(this.ignorePopState=!1):!a.originalEvent.state&&1===this.history.stack.length&&this.ignoreInitialHashChange&&(this.ignoreInitialHashChange=!1,location.href===h)?void a.preventDefault():(c=b.parseLocation().hash,!a.originalEvent.state&&c?(e=this.squash(c),this.history.add(e.url,e),void(a.historyState=e)):void this.history.direct({url:(a.originalEvent.state||{}).url||c,present:function(c,e){a.historyState=d.extend({},c);a.historyState.direction=e}}))},hashchange:function(a){if(d.event.special.navigate.isHashChangeEnabled()&&
!d.event.special.navigate.isPushStateEnabled()){if(this.preventNextHashChange)return this.preventNextHashChange=!1,void a.stopImmediatePropagation();var c=this.history;var e=b.parseLocation().hash;this.history.direct({url:e,present:function(c,e){a.hashchangeState=d.extend({},c);a.hashchangeState.direction=e},missing:function(){c.add(e,{hash:e,title:l.title})}})}}})})(F);(function(d){d.mobile.navigate=function(b,a,c){d.mobile.navigate.navigator.go(b,a,c)};d.mobile.navigate.history=new d.mobile.History;
d.mobile.navigate.navigator=new d.mobile.Navigator(d.mobile.navigate.history);var b=d.mobile.path.parseLocation();d.mobile.navigate.history.add(b.href,{hash:b.hash})})(F);(function(d,b){var h={animation:{},transition:{}},a=l.createElement("a"),c=["","webkit-","moz-","o-"];d.each(["animation","transition"],function(e,f){var k=0===e?f+"-name":f;d.each(c,function(c,e){return a.style[d.camelCase(e+k)]!==b?(h[f].prefix=e,!1):void 0});h[f].duration=d.camelCase(h[f].prefix+f+"-duration");h[f].event=d.camelCase(h[f].prefix+
f+"-end");""===h[f].prefix&&(h[f].event=h[f].event.toLowerCase())});d.support.cssTransitions=h.transition.prefix!==b;d.support.cssAnimations=h.animation.prefix!==b;d(a).remove();d.fn.animationComplete=function(a,c,k){var e,f,r=this,u=function(){clearTimeout(e);a.apply(this,arguments)},q=c&&"animation"!==c?"transition":"animation";return d.support.cssTransitions&&"transition"===q||d.support.cssAnimations&&"animation"===q?(k===b&&(d(this).context!==l&&(f=3E3*parseFloat(d(this).css(h[q].duration))),
(0===f||f===b||isNaN(f))&&(f=d.fn.animationComplete.defaultDuration)),e=setTimeout(function(){d(r).off(h[q].event,u);a.apply(r)},f),d(this).one(h[q].event,u)):(setTimeout(d.proxy(a,this),0),d(this))};d.fn.animationComplete.defaultDuration=1E3})(F);(function(d,b,h,a){function c(a){for(;a&&"undefined"!=typeof a.originalEvent;)a=a.originalEvent;return a}function e(a){for(var c,e,b={};a;){c=d.data(a,A);for(e in c)c[e]&&(b[e]=b.hasVirtualBinding=!0);a=a.parentNode}return b}function f(){D&&(clearTimeout(D),
D=0);D=setTimeout(function(){U=D=0;J.length=0;I=!1;N=!0},d.vmouse.resetTimerDuration)}function k(e,b,f){var k;if(!(k=f&&f[e])){if(f=!f)a:{f=b.target;for(var h;f;){if(h=d.data(f,A),h&&(!e||h[e]))break a;f=f.parentNode}f=null}k=f}if(k){var m=b;var n,r,u,q;h=m.type;if(m=d.Event(m),m.type=e,n=m.originalEvent,e=d.event.props,-1<h.search(/^(mouse|click)/)&&(e=l),n)for(f=e.length,g;f;){var g=e[--f];m[g]=n[g]}if(-1<h.search(/mouse(down|up)|click/)&&!m.which&&(m.which=1),-1!==h.search(/^touch/)&&(r=c(n),h=
r.touches,u=r.changedTouches,q=h&&h.length?h[0]:u&&u.length?u[0]:a))for(n=0,r=x.length;r>n;n++)g=x[n],m[g]=q[g];d(b.target).trigger(m)}return m}function n(a){var c,e=d.data(a.target,z);I||U&&U===e||(c=k("v"+a.type,a),c&&(c.isDefaultPrevented()&&a.preventDefault(),c.isPropagationStopped()&&a.stopPropagation(),c.isImmediatePropagationStopped()&&a.stopImmediatePropagation()))}function m(a){var b;if((b=c(a).touches)&&1===b.length){var f=a.target;b=e(f);b.hasVirtualBinding&&(U=F++,d.data(f,z,U),D&&(clearTimeout(D),
D=0),K=N=!1,f=c(a).touches[0],G=f.pageX,H=f.pageY,k("vmouseover",a,b),k("vmousedown",a,b))}}function r(a){N||(K||k("vmousecancel",a,e(a.target)),K=!0,f())}function u(a){if(!N){var b=c(a).touches[0],h=K,m=d.vmouse.moveDistanceThreshold,n=e(a.target);(K=K||Math.abs(b.pageX-G)>m||Math.abs(b.pageY-H)>m)&&!h&&k("vmousecancel",a,n);k("vmousemove",a,n);f()}}function q(a){if(!N){N=!0;var b,h,m=e(a.target);k("vmouseup",a,m);K||(b=k("vclick",a,m),b&&b.isDefaultPrevented()&&(h=c(a).changedTouches[0],J.push({touchID:U,
x:h.clientX,y:h.clientY}),I=!0));k("vmouseout",a,m);K=!1;f()}}function g(a){var c;if(a=d.data(a,A))for(c in a)if(a[c])return!0;return!1}function w(){}function v(a){var c=a.substr(1);return{setup:function(){g(this)||d.data(this,A,{});d.data(this,A)[a]=!0;C[a]=(C[a]||0)+1;1===C[a]&&M.bind(c,n);d(this).bind(c,w);P&&(C.touchstart=(C.touchstart||0)+1,1===C.touchstart&&M.bind("touchstart",m).bind("touchend",q).bind("touchmove",u).bind("scroll",r))},teardown:function(){--C[a];C[a]||M.unbind(c,n);P&&(--C.touchstart,
C.touchstart||M.unbind("touchstart",m).unbind("touchmove",u).unbind("touchend",q).unbind("scroll",r));var e=d(this),b=d.data(this,A);b&&(b[a]=!1);e.unbind(c,w);g(this)||e.removeData(A)}}}var y,A="virtualMouseBindings",z="virtualTouchID",B="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),x="clientX clientY pageX pageY screenX screenY".split(" "),l=d.event.props.concat(d.event.mouseHooks?d.event.mouseHooks.props:[]),C={},D=0,G=0,H=0,K=!1,J=[],I=!1,N=!1,P="addEventListener"in
h,M=d(h),F=1,U=0;d.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(b=0;b<B.length;b++)d.event.special[B[b]]=v(B[b]);P&&h.addEventListener("click",function(a){var c,e,b,f=J.length,k=a.target;if(f){var h=a.clientX;var m=a.clientY;y=d.vmouse.clickDistanceThreshold;for(c=k;c;){for(e=0;f>e;e++)if(b=J[e],c===k&&Math.abs(b.x-h)<y&&Math.abs(b.y-m)<y||d.data(c,z)===b.touchID)return a.preventDefault(),void a.stopPropagation();c=c.parentNode}}},!0)})(F,g,l);(function(d,
b,h){function a(a,c,e,b){var f=e.type;e.type=c;b?d.event.trigger(e,h,a):d.event.dispatch.call(a,e);e.type=f}var c=d(l),e=d.mobile.support.touch,f=e?"touchstart":"mousedown",k=e?"touchend":"mouseup",n=e?"touchmove":"mousemove";d.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(a,c){d.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)};d.attrFn&&(d.attrFn[c]=!0)});d.event.special.scrollstart={enabled:!0,setup:function(){function c(c,
b){e=b;a(f,e?"scrollstart":"scrollstop",c)}var e,b,f=this;d(f).bind("touchmove scroll",function(a){d.event.special.scrollstart.enabled&&(e||c(a,!0),clearTimeout(b),b=setTimeout(function(){c(a,!1)},50))})},teardown:function(){d(this).unbind("touchmove scroll")}};d.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var e=this,b=d(e),f=!1;b.bind("vmousedown",function(k){function h(){clearTimeout(u)}function m(){h();b.unbind("vclick",n).unbind("vmouseup",h);c.unbind("vmousecancel",
m)}function n(c){m();f||r!==c.target?f&&c.preventDefault():a(e,"tap",c)}if(f=!1,k.which&&1!==k.which)return!1;var r=k.target;b.bind("vmouseup",h).bind("vclick",n);c.bind("vmousecancel",m);var u=setTimeout(function(){d.event.special.tap.emitTapOnTaphold||(f=!0);a(e,"taphold",d.Event("taphold",{target:r}))},d.event.special.tap.tapholdThreshold)})},teardown:function(){d(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");c.unbind("vmousecancel")}};d.event.special.swipe={scrollSupressionThreshold:30,
durationThreshold:1E3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(a){var c=b.pageXOffset,e=b.pageYOffset,f=a.clientX,k=a.clientY;return 0===a.pageY&&Math.floor(k)>Math.floor(a.pageY)||0===a.pageX&&Math.floor(f)>Math.floor(a.pageX)?(f-=c,k-=e):(k<a.pageY-e||f<a.pageX-c)&&(f=a.pageX-c,k=a.pageY-e),{x:f,y:k}},start:function(a){var c=d.event.special.swipe.getLocation(a.originalEvent.touches?a.originalEvent.touches[0]:a);return{time:(new Date).getTime(),coords:[c.x,
c.y],origin:d(a.target)}},stop:function(a){a=d.event.special.swipe.getLocation(a.originalEvent.touches?a.originalEvent.touches[0]:a);return{time:(new Date).getTime(),coords:[a.x,a.y]}},handleSwipe:function(c,e,b,f){if(e.time-c.time<d.event.special.swipe.durationThreshold&&Math.abs(c.coords[0]-e.coords[0])>d.event.special.swipe.horizontalDistanceThreshold&&Math.abs(c.coords[1]-e.coords[1])<d.event.special.swipe.verticalDistanceThreshold){var k=c.coords[0]>e.coords[0]?"swipeleft":"swiperight";return a(b,
"swipe",d.Event("swipe",{target:f,swipestart:c,swipestop:e}),!0),a(b,k,d.Event(k,{target:f,swipestart:c,swipestop:e}),!0),!0}return!1},eventInProgress:!1,setup:function(){var a,e=this,b=d(e),h={};(a=d.data(this,"mobile-events"))||(a={length:0},d.data(this,"mobile-events",a));a.length++;a.swipe=h;h.start=function(a){if(!d.event.special.swipe.eventInProgress){d.event.special.swipe.eventInProgress=!0;var b,f=d.event.special.swipe.start(a),m=a.target,r=!1;h.move=function(a){f&&!a.isDefaultPrevented()&&
(b=d.event.special.swipe.stop(a),r||(r=d.event.special.swipe.handleSwipe(f,b,e,m),r&&(d.event.special.swipe.eventInProgress=!1)),Math.abs(f.coords[0]-b.coords[0])>d.event.special.swipe.scrollSupressionThreshold&&a.preventDefault())};h.stop=function(){r=!0;d.event.special.swipe.eventInProgress=!1;c.off(n,h.move);h.move=null};c.on(n,h.move).one(k,h.stop)}};b.on(f,h.start)},teardown:function(){var a,e;(a=d.data(this,"mobile-events"))&&(e=a.swipe,delete a.swipe,a.length--,0===a.length&&d.removeData(this,
"mobile-events"));e&&(e.start&&d(this).off(f,e.start),e.move&&c.off(n,e.move),e.stop&&c.off(k,e.stop))}};d.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(a,c){d.event.special[a]={setup:function(){d(this).bind(c,d.noop)},teardown:function(){d(this).unbind(c)}}})})(F,this);(function(d){d.event.special.throttledresize={setup:function(){d(this).bind("resize",c)},teardown:function(){d(this).unbind("resize",c)}};var b,h,a,c=function(){h=(new Date).getTime();
a=h-e;250<=a?(e=h,d(this).trigger("throttledresize")):(b&&clearTimeout(b),b=setTimeout(c,250-a))},e=0})(F);(function(d,b){function h(){var e=a();e!==c&&(c=e,m.trigger(r))}var a,c,e,f,k,n,m=d(b),r="orientationchange",u={0:!0,180:!0};d.support.orientation&&(k=b.innerWidth||m.width(),n=b.innerHeight||m.height(),e=k>n&&50<k-n,f=u[b.orientation],(e&&f||!e&&!f)&&(u={"-90":!0,90:!0}));d.event.special.orientationchange=d.extend({},d.event.special.orientationchange,{setup:function(){return d.support.orientation&&
!d.event.special.orientationchange.disabled?!1:(c=a(),void m.bind("throttledresize",h))},teardown:function(){return d.support.orientation&&!d.event.special.orientationchange.disabled?!1:void m.unbind("throttledresize",h)},add:function(c){var e=c.handler;c.handler=function(c){return c.orientation=a(),e.apply(this,arguments)}}});d.event.special.orientationchange.orientation=a=function(){var a=!0,c=l.documentElement;return a=d.support.orientation?u[b.orientation]:c&&1.1>c.clientWidth/c.clientHeight,
a?"portrait":"landscape"};d.fn[r]=function(a){return a?this.bind(r,a):this.trigger(r)};d.attrFn&&(d.attrFn[r]=!0)})(F,this);(function(d){var b=d("head").children("base"),h={element:b.length?b:d("<base>",{href:d.mobile.path.documentBase.hrefNoHash}).prependTo(d("head")),linkSelector:"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",set:function(a){d.mobile.dynamicBaseEnabled&&d.support.dynamicBaseTag&&h.element.attr("href",d.mobile.path.makeUrlAbsolute(a,d.mobile.path.documentBase))},
rewrite:function(a,c){var e=d.mobile.path.get(a);c.find(h.linkSelector).each(function(a,c){var b=d(c).is("[href]")?"href":d(c).is("[src]")?"src":"action",f=d.mobile.path.parseLocation(),k=d(c).attr(b),k=k.replace(f.protocol+f.doubleSlash+f.host+f.pathname,"");/^(\w+:|#|\/)/.test(k)||d(c).attr(b,e+k)})},reset:function(){h.element.attr("href",d.mobile.path.documentBase.hrefNoSearch)}};d.mobile.base=h})(F);(function(d,b){d.mobile.widgets={};var h=d.widget,a=d.mobile.keepNative;d.widget=function(a){return function(){var c=
a.apply(this,arguments),f=c.prototype.widgetName;return c.initSelector=c.prototype.initSelector!==b?c.prototype.initSelector:":jqmData(role='"+f+"')",d.mobile.widgets[f]=c,c}}(d.widget);d.extend(d.widget,h);d.mobile.document.on("create",function(a){d(a.target).enhanceWithin()});d.widget("mobile.page",{options:{theme:"a",domCache:!1,keepNativeDefault:d.mobile.keepNative,contentTheme:null,enhanced:!1},_createWidget:function(){d.Widget.prototype._createWidget.apply(this,arguments);this._trigger("init")},
_create:function(){return!1===this._trigger("beforecreate")?!1:(this.options.enhanced||this._enhance(),this._on(this.element,{pagebeforehide:"removeContainerBackground",pagebeforeshow:"_handlePageBeforeShow"}),this.element.enhanceWithin(),void("dialog"===d.mobile.getAttribute(this.element[0],"role")&&d.mobile.dialog&&this.element.dialog()))},_enhance:function(){var a="data-"+d.mobile.ns,e=this;this.options.role&&this.element.attr("data-"+d.mobile.ns+"role",this.options.role);this.element.attr("tabindex",
"0").addClass("ui-page ui-page-theme-"+this.options.theme);this.element.find("["+a+"role='content']").each(function(){var c=d(this),k=this.getAttribute(a+"theme")||b;e.options.contentTheme=k||e.options.contentTheme||e.options.dialog&&e.options.theme||"dialog"===e.element.jqmData("role")&&e.options.theme;c.addClass("ui-content");e.options.contentTheme&&c.addClass("ui-body-"+e.options.contentTheme);c.attr("role","main").addClass("ui-content")})},bindRemove:function(a){var c=this.element;!c.data("mobile-page").options.domCache&&
c.is(":jqmData(external-page='true')")&&c.bind("pagehide.remove",a||function(a,c){if(!c.samePage){var e=d(this),b=new d.Event("pageremove");e.trigger(b);b.isDefaultPrevented()||e.removeWithDependents()}})},_setOptions:function(a){a.theme!==b&&this.element.removeClass("ui-page-theme-"+this.options.theme).addClass("ui-page-theme-"+a.theme);a.contentTheme!==b&&this.element.find("[data-"+d.mobile.ns+"='content']").removeClass("ui-body-"+this.options.contentTheme).addClass("ui-body-"+a.contentTheme)},
_handlePageBeforeShow:function(){this.setContainerBackground()},removeContainerBackground:function(){this.element.closest(":mobile-pagecontainer").pagecontainer({theme:"none"})},setContainerBackground:function(a){this.element.parent().pagecontainer({theme:a||this.options.theme})},keepNativeSelector:function(){var c=this.options,e=d.trim(c.keepNative||""),b=d.trim(d.mobile.keepNative),c=d.trim(c.keepNativeDefault),b=a===b?"":b,c=""===b?c:"";return(e?[e]:[]).concat(b?[b]:[]).concat(c?[c]:[]).join(", ")}})})(F);
(function(d,b){d.widget("mobile.pagecontainer",{options:{theme:"a"},initSelector:!1,_create:function(){this._trigger("beforecreate");this.setLastScrollEnabled=!0;this._on(this.window,{navigate:"_disableRecordScroll",scrollstop:"_delayedRecordScroll"});this._on(this.window,{navigate:"_filterNavigateEvents"});this._on({pagechange:"_afterContentChange"});this.window.one("navigate",d.proxy(function(){this.setLastScrollEnabled=!0},this))},_setOptions:function(a){a.theme!==b&&"none"!==a.theme?this.element.removeClass("ui-overlay-"+
this.options.theme).addClass("ui-overlay-"+a.theme):a.theme!==b&&this.element.removeClass("ui-overlay-"+this.options.theme);this._super(a)},_disableRecordScroll:function(){this.setLastScrollEnabled=!1},_enableRecordScroll:function(){this.setLastScrollEnabled=!0},_afterContentChange:function(){this.setLastScrollEnabled=!0;this._off(this.window,"scrollstop");this._on(this.window,{scrollstop:"_delayedRecordScroll"})},_recordScroll:function(){if(this.setLastScrollEnabled){var a,e,b,k=this._getActiveHistory();
k&&(a=this._getScroll(),e=this._getMinScroll(),b=this._getDefaultScroll(),k.lastScroll=e>a?b:a)}},_delayedRecordScroll:function(){setTimeout(d.proxy(this,"_recordScroll"),100)},_getScroll:function(){return this.window.scrollTop()},_getMinScroll:function(){return d.mobile.minScrollBack},_getDefaultScroll:function(){return d.mobile.defaultHomeScroll},_filterNavigateEvents:function(a,e){var c;a.originalEvent&&a.originalEvent.isDefaultPrevented()||(c=-1<a.originalEvent.type.indexOf("hashchange")?e.state.hash:
e.state.url,c||(c=this._getHash()),c&&"#"!==c&&0!==c.indexOf("#"+d.mobile.path.uiStateKey)||(c=location.href),this._handleNavigate(c,e.state))},_getHash:function(){return d.mobile.path.parseLocation().hash},getActivePage:function(){return this.activePage},_getInitialContent:function(){return d.mobile.firstPage},_getHistory:function(){return d.mobile.navigate.history},_getActiveHistory:function(){return this._getHistory().getActive()},_getDocumentBase:function(){return d.mobile.path.documentBase},
back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(a){if(d.mobile.hashListeningEnabled)g.history.go(a);else{var c=d.mobile.navigate.history.activeIndex,b=c+parseInt(a,10),k=d.mobile.navigate.history.stack[b].url;d.mobile.navigate.history.activeIndex=b;d.mobile.navigate.history.previousIndex=c;this.change(k,{direction:1<=a?"forward":"back",changeHash:!1,fromHashChange:!0})}},_handleDestination:function(a){return"string"===d.type(a)&&(a=d.mobile.path.stripHash(a)),a&&(this._getHistory(),
a=d.mobile.path.isPath(a)?a:d.mobile.path.makeUrlAbsolute("#"+a,this._getDocumentBase())),a||this._getInitialContent()},_transitionFromHistory:function(a,e){var c=this._getHistory();return(c="back"===a?c.getLast():c.getActive())&&c.transition||e},_handleDialog:function(a,e){var c,b,h=this.getActivePage();return h&&!h.data("mobile-dialog")?("back"===e.direction?this.back():this.forward(),!1):(c=e.pageUrl,b=this._getActiveHistory(),d.extend(a,{role:b.role,transition:this._transitionFromHistory(e.direction,
a.transition),reverse:"back"===e.direction}),c)},_handleNavigate:function(a,e){var c=d.mobile.path.stripHash(a),b=this._getHistory(),h=0===b.stack.length?"none":this._transitionFromHistory(e.direction),m={changeHash:!1,fromHashChange:!0,reverse:"back"===e.direction};d.extend(m,e,{transition:h});0<b.activeIndex&&-1<c.indexOf(d.mobile.dialogHashKey)&&(c=this._handleDialog(m,e),!1===c)||this._changeContent(this._handleDestination(c),m)},_changeContent:function(a,e){d.mobile.changePage(a,e)},_getBase:function(){return d.mobile.base},
_getNs:function(){return d.mobile.ns},_enhance:function(a,e){return a.page({role:e})},_include:function(a,e){a.appendTo(this.element);this._enhance(a,e.role);a.page("bindRemove")},_find:function(a){var c,b=this._createFileUrl(a);a=this._createDataUrl(a);var k=this._getInitialContent();return c=this.element.children("[data-"+this._getNs()+"url='"+d.mobile.path.hashToSelector(a)+"']"),0===c.length&&a&&!d.mobile.path.isPath(a)&&(c=this.element.children(d.mobile.path.hashToSelector("#"+a)).attr("data-"+
this._getNs()+"url",a).jqmData("url",a)),0===c.length&&d.mobile.path.isFirstPageUrl(b)&&k&&k.parent().length&&(c=d(k)),c},_getLoader:function(){return d.mobile.loading()},_showLoading:function(a,e,b,k){this._loadMsg||(this._loadMsg=setTimeout(d.proxy(function(){this._getLoader().loader("show",e,b,k);this._loadMsg=0},this),a))},_hideLoading:function(){clearTimeout(this._loadMsg);this._loadMsg=0;this._getLoader().loader("hide")},_showError:function(){this._hideLoading();this._showLoading(0,d.mobile.pageLoadErrorMessageTheme,
d.mobile.pageLoadErrorMessage,!0);setTimeout(d.proxy(this,"_hideLoading"),1500)},_parse:function(a,e){var c,b=d("<div></div>");return b.get(0).innerHTML=a,c=b.find(":jqmData(role='page'), :jqmData(role='dialog')").first(),c.length||(c=d("<div data-"+this._getNs()+"role='page'>"+(a.split(/<\/?body[^>]*>/gim)[1]||"")+"</div>")),c.attr("data-"+this._getNs()+"url",this._createDataUrl(e)).attr("data-"+this._getNs()+"external-page",!0),c},_setLoadedTitle:function(a,e){var c=e.match(/<title[^>]*>([^<]*)/)&&
RegExp.$1;c&&!a.jqmData("title")&&(c=d("<div>"+c+"</div>").text(),a.jqmData("title",c))},_isRewritableBaseTag:function(){return d.mobile.dynamicBaseEnabled&&!d.support.dynamicBaseTag},_createDataUrl:function(a){return d.mobile.path.convertUrlToDataUrl(a)},_createFileUrl:function(a){return d.mobile.path.getFilePath(a)},_triggerWithDeprecated:function(a,e,b){var c=d.Event("page"+a),f=d.Event(this.widgetName+a);return(b||this.element).trigger(c,e),this._trigger(a,f,e),{deprecatedEvent:c,event:f}},_loadSuccess:function(a,
e,f,k){var c=this._createFileUrl(a);return d.proxy(function(h,n,u){var m=new RegExp("(<[^>]+\\bdata-"+this._getNs()+"role=[\"']?page[\"']?[^>]*>)");var r=new RegExp("\\bdata-"+this._getNs()+"url=[\"']?([^\"'>]*)[\"']?");m.test(h)&&RegExp.$1&&r.test(RegExp.$1)&&RegExp.$1&&(c=d.mobile.path.getFilePath(d("<div>"+RegExp.$1+"</div>").text()),c=this.window[0].encodeURIComponent(c));f.prefetch===b&&this._getBase().set(c);m=this._parse(h,c);this._setLoadedTitle(m,h);e.xhr=u;e.textStatus=n;e.page=m;e.content=
m;e.toPage=m;this._triggerWithDeprecated("load",e).event.isDefaultPrevented()||(this._isRewritableBaseTag()&&m&&this._getBase().rewrite(c,m),this._include(m,f),f.showLoadMsg&&this._hideLoading(),k.resolve(a,f,m))},this)},_loadDefaults:{type:"get",data:b,reloadPage:!1,reload:!1,role:b,showLoadMsg:!1,loadMsgDelay:50},load:function(a,e){var c,k,h,m,r=e&&e.deferred||d.Deferred(),u=d.extend({},this._loadDefaults,e,e&&e.reload===b&&e.reloadPage!==b?{reload:e.reloadPage}:{}),g=null,t=d.mobile.path.makeUrlAbsolute(a,
this._findBaseWithDefault());return u.data&&"get"===u.type&&(t=d.mobile.path.addSearchParams(t,u.data),u.data=b),u.data&&"post"===u.type&&(u.reload=!0),c=this._createFileUrl(t),k=this._createDataUrl(t),g=this._find(t),0===g.length&&d.mobile.path.isEmbeddedPage(c)&&!d.mobile.path.isFirstPageUrl(c)?(r.reject(t,u),r.promise()):(this._getBase().reset(),g.length&&!u.reload?(this._enhance(g,u.role),r.resolve(t,u,g),u.prefetch||this._getBase().set(a),r.promise()):(m={url:a,absUrl:t,toPage:a,prevPage:e?e.fromPage:
b,dataUrl:k,deferred:r,options:u},h=this._triggerWithDeprecated("beforeload",m),h.deprecatedEvent.isDefaultPrevented()||h.event.isDefaultPrevented()?r.promise():(u.showLoadMsg&&this._showLoading(u.loadMsgDelay),u.prefetch===b&&this._getBase().reset(),d.mobile.allowCrossDomainPages||d.mobile.path.isSameDomain(d.mobile.path.documentUrl,t)?(d.ajax({url:c,type:u.type,data:u.data,contentType:u.contentType,dataType:"html",success:this._loadSuccess(t,m,u,r),error:this._loadError(t,m,u,r)}),r.promise()):
(r.reject(t,u),r.promise()))))},_loadError:function(a,e,b,k){return d.proxy(function(c,f,h){this._getBase().set(d.mobile.path.get());e.xhr=c;e.textStatus=f;e.errorThrown=h;c=this._triggerWithDeprecated("loadfailed",e);c.deprecatedEvent.isDefaultPrevented()||c.event.isDefaultPrevented()||(b.showLoadMsg&&this._showError(),k.reject(a,b))},this)},_getTransitionHandler:function(a){return a=d.mobile._maybeDegradeTransition(a),d.mobile.transitionHandlers[a]||d.mobile.defaultTransitionHandler},_triggerCssTransitionEvents:function(a,
e,b){var c=!1;b=b||"";e&&(a[0]===e[0]&&(c=!0),this._triggerWithDeprecated(b+"hide",{nextPage:a,toPage:a,prevPage:e,samePage:c},e));this._triggerWithDeprecated(b+"show",{prevPage:e||d(""),toPage:a},a)},_cssTransition:function(a,e,b){var c=b.transition,f=b.reverse,h=b.deferred;this._triggerCssTransitionEvents(a,e,"before");this._hideLoading();b=(new (this._getTransitionHandler(c))(c,f,a,e)).transition();b.done(d.proxy(function(){this._triggerCssTransitionEvents(a,e)},this));b.done(function(){h.resolve.apply(h,
arguments)})},_releaseTransitionLock:function(){a=!1;0<h.length&&d.mobile.changePage.apply(null,h.pop())},_removeActiveLinkClass:function(a){d.mobile.removeActiveLinkClass(a)},_loadUrl:function(c,e,b){b.target=c;b.deferred=d.Deferred();this.load(c,b);b.deferred.done(d.proxy(function(c,b,f){a=!1;b.absUrl=e.absUrl;this.transition(f,e,b)},this));b.deferred.fail(d.proxy(function(){this._removeActiveLinkClass(!0);this._releaseTransitionLock();this._triggerWithDeprecated("changefailed",e)},this))},_triggerPageBeforeChange:function(a,
e,b){var c;return e.prevPage=this.activePage,d.extend(e,{toPage:a,options:b}),e.absUrl="string"===d.type(a)?d.mobile.path.makeUrlAbsolute(a,this._findBaseWithDefault()):b.absUrl,c=this._triggerWithDeprecated("beforechange",e),c.event.isDefaultPrevented()||c.deprecatedEvent.isDefaultPrevented()?!1:!0},change:function(c,e){if(a)return void h.unshift(arguments);var b=d.extend({},d.mobile.changePage.defaults,e),k={};b.fromPage=b.fromPage||this.activePage;this._triggerPageBeforeChange(c,k,b)&&(c=k.toPage,
"string"===d.type(c)?(a=!0,this._loadUrl(c,k,b)):this.transition(c,k,b))},transition:function(c,e,f){var k,n,m,r,u,g,t,w,v,y;if(a)return void h.unshift([c,f]);if(this._triggerPageBeforeChange(c,e,f)&&(e.prevPage=f.fromPage,m=this._triggerWithDeprecated("beforetransition",e),!m.deprecatedEvent.isDefaultPrevented()&&!m.event.isDefaultPrevented())){if(a=!0,c[0]!==d.mobile.firstPage[0]||f.dataUrl||(f.dataUrl=d.mobile.path.documentUrl.hrefNoHash),k=f.fromPage,n=f.dataUrl&&d.mobile.path.convertUrlToDataUrl(f.dataUrl)||
c.jqmData("url"),m=n,d.mobile.path.getFilePath(n),r=d.mobile.navigate.history.getActive(),u=0===d.mobile.navigate.history.activeIndex,g=0,t=l.title,w=("dialog"===f.role||"dialog"===c.jqmData("role"))&&!0!==c.jqmData("dialog"),k&&k[0]===c[0]&&!f.allowSamePageTransition)return a=!1,this._triggerWithDeprecated("transition",e),this._triggerWithDeprecated("change",e),void(f.fromHashChange&&d.mobile.navigate.history.direct({url:n}));c.page({role:f.role});f.fromHashChange&&(g="back"===f.direction?-1:1);
try{l.activeElement&&"body"!==l.activeElement.nodeName.toLowerCase()?d(l.activeElement).blur():d("input:focus, textarea:focus, select:focus").blur()}catch(z){}var A=!1;w&&r&&(r.url&&-1<r.url.indexOf(d.mobile.dialogHashKey)&&this.activePage&&!this.activePage.hasClass("ui-dialog")&&0<d.mobile.navigate.history.activeIndex&&(f.changeHash=!1,A=!0),n=r.url||"",n+=!A&&-1<n.indexOf("#")?d.mobile.dialogHashKey:"#"+d.mobile.dialogHashKey);(v=r?c.jqmData("title")||c.children(":jqmData(role='header')").find(".ui-title").text():
t)&&t===l.title&&(t=v);c.jqmData("title")||c.jqmData("title",t);f.transition=f.transition||(g&&!u?r.transition:b)||(w?d.mobile.defaultDialogTransition:d.mobile.defaultPageTransition);!g&&A&&(d.mobile.navigate.history.getActive().pageUrl=m);n&&!f.fromHashChange&&(!d.mobile.path.isPath(n)&&0>n.indexOf("#")&&(n="#"+n),y={transition:f.transition,title:t,pageUrl:m,role:f.role},!1!==f.changeHash&&d.mobile.hashListeningEnabled?d.mobile.navigate(this.window[0].encodeURI(n),y,!0):c[0]!==d.mobile.firstPage[0]&&
d.mobile.navigate.history.add(n,y));l.title=t;this.activePage=d.mobile.activePage=c;f.reverse=f.reverse||0>g;n=d.Deferred();this._cssTransition(c,k,{transition:f.transition,reverse:f.reverse,deferred:n});n.done(d.proxy(function(a,b,k,h,m){d.mobile.removeActiveLinkClass();f.duplicateCachedPage&&f.duplicateCachedPage.remove();m||d.mobile.focusPage(c);this._releaseTransitionLock();this._triggerWithDeprecated("transition",e);this._triggerWithDeprecated("change",e)},this))}},_findBaseWithDefault:function(){return this.activePage&&
d.mobile.getClosestBaseUrl(this.activePage)||d.mobile.path.documentBase.hrefNoHash}});d.mobile.navreadyDeferred=d.Deferred();var h=[],a=!1})(F);(function(d,b){function h(a){for(;a&&("string"!=typeof a.nodeName||"a"!==a.nodeName.toLowerCase());)a=a.parentNode;return a}var a=d.Deferred(),c=d.Deferred(),e=function(){c.resolve();c=null},f=d.mobile.path.documentUrl,k=null;d.mobile.loadPage=function(a,c){var e;return c=c||{},e=c.pageContainer||d.mobile.pageContainer,c.deferred=d.Deferred(),e.pagecontainer("load",
a,c),c.deferred.promise()};d.mobile.back=function(){var a=g.navigator;this.phonegapNavigationEnabled&&a&&a.app&&a.app.backHistory?a.app.backHistory():d.mobile.pageContainer.pagecontainer("back")};d.mobile.focusPage=function(a){var c=a.find("[autofocus]"),e=a.find(".ui-title:eq(0)");return c.length?void c.focus():void(e.length?e.focus():a.focus())};d.mobile._maybeDegradeTransition=d.mobile._maybeDegradeTransition||function(a){return a};d.mobile.changePage=function(a,c){d.mobile.pageContainer.pagecontainer("change",
a,c)};d.mobile.changePage.defaults={transition:b,reverse:!1,changeHash:!0,fromHashChange:!1,role:b,duplicateCachedPage:b,pageContainer:b,showLoadMsg:!0,dataUrl:b,fromPage:b,allowSamePageTransition:!1};d.mobile._registerInternalEvents=function(){var a=function(a,c){var e,b,h,m,n=!0;return!d.mobile.ajaxEnabled||a.is(":jqmData(ajax='false')")||!a.jqmHijackable().length||a.attr("target")?!1:(e=k&&k.attr("formaction")||a.attr("action"),m=(a.attr("method")||"get").toLowerCase(),e||(e=d.mobile.getClosestBaseUrl(a),
"get"===m&&(e=d.mobile.path.parseUrl(e).hrefNoSearch),e===d.mobile.path.documentBase.hrefNoHash&&(e=f.hrefNoSearch)),e=d.mobile.path.makeUrlAbsolute(e,d.mobile.getClosestBaseUrl(a)),d.mobile.path.isExternal(e)&&!d.mobile.path.isPermittedCrossDomainRequest(f,e)?!1:(c||(b=a.serializeArray(),k&&k[0].form===a[0]&&(h=k.attr("name"),h&&(d.each(b,function(a,c){return c.name===h?(h="",!1):void 0}),h&&b.push({name:h,value:k.attr("value")}))),n={url:e,options:{type:m,data:d.param(b),transition:a.jqmData("transition"),
reverse:"reverse"===a.jqmData("direction"),reloadPage:!0}}),n))};d.mobile.document.delegate("form","submit",function(c){var e;c.isDefaultPrevented()||(e=a(d(this)),e&&(d.mobile.changePage(e.url,e.options),c.preventDefault()))});d.mobile.document.bind("vclick",function(c){var e,b=c.target,f=!1;if(!(1<c.which)&&d.mobile.linkBindingEnabled){if(k=d(b),d.data(b,"mobile-button")){if(!a(d(b).closest("form"),!0))return;b.parentNode&&(b=b.parentNode)}else if((b=h(b),!b||"#"===d.mobile.path.parseUrl(b.getAttribute("href")||
"#").hash)||!d(b).jqmHijackable().length)return;~b.className.indexOf("ui-link-inherit")?b.parentNode&&(e=d.data(b.parentNode,"buttonElements")):e=d.data(b,"buttonElements");e?b=e.outer:f=!0;c=d(b);f&&(c=c.closest(".ui-btn"));0<c.length&&!c.hasClass("ui-state-disabled")&&(d.mobile.removeActiveLinkClass(!0),d.mobile.activeClickedLink=c,d.mobile.activeClickedLink.addClass(d.mobile.activeBtnClass))}});d.mobile.document.bind("click",function(a){if(d.mobile.linkBindingEnabled&&!a.isDefaultPrevented()){var c,
e,k;var m=h(a.target);var n=d(m),v=function(){g.setTimeout(function(){d.mobile.removeActiveLinkClass(!0)},200)};if(d.mobile.activeClickedLink&&d.mobile.activeClickedLink[0]===a.target.parentNode&&v(),m&&!(1<a.which)&&n.jqmHijackable().length){if(n.is(":jqmData(rel='back')"))return d.mobile.back(),!1;if(c=d.mobile.getClosestBaseUrl(n),e=d.mobile.path.makeUrlAbsolute(n.attr("href")||"#",c),!d.mobile.ajaxEnabled&&!d.mobile.path.isEmbeddedPage(e))return void v();if(!(-1===e.search("#")||d.mobile.path.isExternal(e)&&
d.mobile.path.isAbsoluteUrl(e))){if(e=e.replace(/[^#]*#/,""),!e)return void a.preventDefault();e=d.mobile.path.isPath(e)?d.mobile.path.makeUrlAbsolute(e,c):d.mobile.path.makeUrlAbsolute("#"+e,f.hrefNoHash)}if(k=n.is("[rel='external']")||n.is(":jqmData(ajax='false')")||n.is("[target]"),k||d.mobile.path.isExternal(e)&&!d.mobile.path.isPermittedCrossDomainRequest(f,e))return void v();c=n.jqmData("transition");k="reverse"===n.jqmData("direction")||n.jqmData("back");m=n.attr("data-"+d.mobile.ns+"rel")||
b;d.mobile.changePage(e,{transition:c,reverse:k,role:m,link:n});a.preventDefault()}}});d.mobile.document.delegate(".ui-page","pageshow.prefetch",function(){var a=[];d(this).find("a:jqmData(prefetch)").each(function(){var c=d(this),e=c.attr("href");e&&-1===d.inArray(e,a)&&(a.push(e),d.mobile.loadPage(e,{role:c.attr("data-"+d.mobile.ns+"rel"),prefetch:!0}))})});d.mobile.pageContainer.pagecontainer();d.mobile.document.bind("pageshow",function(){c?c.done(d.mobile.resetActivePageHeight):d.mobile.resetActivePageHeight()});
d.mobile.window.bind("throttledresize",d.mobile.resetActivePageHeight)};d(function(){a.resolve()});"complete"===l.readyState?e():d.mobile.window.load(e);d.when(a,d.mobile.navreadyDeferred).done(function(){d.mobile._registerInternalEvents()})})(F);(function(d,b){d.mobile.Transition=function(){this.init.apply(this,arguments)};d.extend(d.mobile.Transition.prototype,{toPreClass:" ui-page-pre-in",init:function(b,a,c,e){d.extend(this,{name:b,reverse:a,$to:c,$from:e,deferred:new d.Deferred})},cleanFrom:function(){this.$from.removeClass(d.mobile.activePageClass+
" out in reverse "+this.name).height("")},beforeDoneIn:function(){},beforeDoneOut:function(){},beforeStartOut:function(){},doneIn:function(){this.beforeDoneIn();this.$to.removeClass("out in reverse "+this.name).height("");this.toggleViewportClass();d.mobile.window.scrollTop()!==this.toScroll&&this.scrollPage();this.sequential||this.$to.addClass(d.mobile.activePageClass);this.deferred.resolve(this.name,this.reverse,this.$to,this.$from,!0)},doneOut:function(b,a,c,e){this.beforeDoneOut();this.startIn(b,
a,c,e)},hideIn:function(b){this.$to.css("z-index",-10);b.call(this);this.$to.css("z-index","")},scrollPage:function(){d.event.special.scrollstart.enabled=!1;(d.mobile.hideUrlBar||this.toScroll!==d.mobile.defaultHomeScroll)&&b.scrollTo(0,this.toScroll);setTimeout(function(){d.event.special.scrollstart.enabled=!0},150)},startIn:function(b,a,c,e){this.hideIn(function(){this.$to.addClass(d.mobile.activePageClass+this.toPreClass);e||d.mobile.focusPage(this.$to);this.$to.height(b+this.toScroll);c||this.scrollPage()});
this.$to.removeClass(this.toPreClass).addClass(this.name+" in "+a);c?this.doneIn():this.$to.animationComplete(d.proxy(function(){this.doneIn()},this))},startOut:function(b,a,c){this.beforeStartOut(b,a,c);this.$from.height(b+d.mobile.window.scrollTop()).addClass(this.name+" out"+a)},toggleViewportClass:function(){d.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+this.name)},transition:function(){var b,a=this.reverse?" reverse":"",c=d.mobile.getScreenHeight(),e=!1!==d.mobile.maxTransitionWidth&&
d.mobile.window.width()>d.mobile.maxTransitionWidth;return this.toScroll=d.mobile.navigate.history.getActive().lastScroll||d.mobile.defaultHomeScroll,b=!d.support.cssTransitions||!d.support.cssAnimations||e||!this.name||"none"===this.name||Math.max(d.mobile.window.scrollTop(),this.toScroll)>d.mobile.getMaxScrollForTransition(),this.toggleViewportClass(),this.$from&&!b?this.startOut(c,a,b):this.doneOut(c,a,b,!0),this.deferred.promise()}})})(F,this);(function(d){d.mobile.SerialTransition=function(){this.init.apply(this,
arguments)};d.extend(d.mobile.SerialTransition.prototype,d.mobile.Transition.prototype,{sequential:!0,beforeDoneOut:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(b,h,a){this.$from.animationComplete(d.proxy(function(){this.doneOut(b,h,a)},this))}})})(F);(function(d){d.mobile.ConcurrentTransition=function(){this.init.apply(this,arguments)};d.extend(d.mobile.ConcurrentTransition.prototype,d.mobile.Transition.prototype,{sequential:!1,beforeDoneIn:function(){this.$from&&this.cleanFrom()},
beforeStartOut:function(b,h,a){this.doneOut(b,h,a)}})})(F);(function(d){d.mobile.transitionHandlers={sequential:d.mobile.SerialTransition,simultaneous:d.mobile.ConcurrentTransition};d.mobile.defaultTransitionHandler=d.mobile.transitionHandlers.sequential;d.mobile.transitionFallbacks={};d.mobile._maybeDegradeTransition=function(b){return b&&!d.support.cssTransform3d&&d.mobile.transitionFallbacks[b]&&(b=d.mobile.transitionFallbacks[b]),b};d.mobile.getMaxScrollForTransition=d.mobile.getMaxScrollForTransition||
function(){return 3*d.mobile.getScreenHeight()}})(F);F.mobile.transitionFallbacks.flip="fade";F.mobile.transitionFallbacks.flow="fade";F.mobile.transitionFallbacks.pop="fade";(function(d){d.mobile.transitionHandlers.slide=d.mobile.transitionHandlers.simultaneous;d.mobile.transitionFallbacks.slide="fade"})(F,this);F.mobile.transitionFallbacks.slidedown="fade";F.mobile.transitionFallbacks.slidefade="fade";F.mobile.transitionFallbacks.slideup="fade";F.mobile.transitionFallbacks.turn="fade";(function(d){d.mobile.degradeInputs=
{color:!1,date:!1,datetime:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:"number",search:"text",tel:!1,time:!1,url:!1,week:!1};d.mobile.page.prototype.options.degradeInputs=d.mobile.degradeInputs;d.mobile.degradeInputsWithin=function(b){b=d(b);b.find("input").not(d.mobile.page.prototype.keepNativeSelector()).each(function(){var b,a,c,e,f=d(this),k=this.getAttribute("type"),n=d.mobile.degradeInputs[k]||"text";d.mobile.degradeInputs[k]&&(b=d("<div>").html(f.clone()).html(),a=-1<b.indexOf(" type="),
c=a?/\s+type=["']?\w+['"]?/:/\/?>/,e=' type="'+n+'" data-'+d.mobile.ns+'type="'+k+'"'+(a?"":">"),f.replaceWith(b.replace(c,e)))})}})(F);(function(d,b,h){d.widget("mobile.page",d.mobile.page,{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0,dialog:!1},_create:function(){this._super();this.options.dialog&&(d.extend(this,{_inner:this.element.children(),_headerCloseButton:null}),this.options.enhanced||this._setCloseBtn(this.options.closeBtn))},_enhance:function(){this._super();
this.options.dialog&&this.element.addClass("ui-dialog").wrapInner(d("<div/>",{role:"dialog","class":"ui-dialog-contain ui-overlay-shadow"+(this.options.corners?" ui-corner-all":"")}))},_setOptions:function(a){var c,e,b=this.options;a.corners!==h&&this._inner.toggleClass("ui-corner-all",!!a.corners);a.overlayTheme!==h&&d.mobile.activePage[0]===this.element[0]&&(b.overlayTheme=a.overlayTheme,this._handlePageBeforeShow());a.closeBtnText!==h&&(c=b.closeBtn,e=a.closeBtnText);a.closeBtn!==h&&(c=a.closeBtn);
c&&this._setCloseBtn(c,e);this._super(a)},_handlePageBeforeShow:function(){this.options.overlayTheme&&this.options.dialog?(this.removeContainerBackground(),this.setContainerBackground(this.options.overlayTheme)):this._super()},_setCloseBtn:function(a,c){var e,b=this._headerCloseButton;a="left"===a?"left":"right"===a?"right":"none";"none"===a?b&&(b.remove(),b=null):b?(b.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+a),c&&b.text(c)):(e=this._inner.find(":jqmData(role='header')").first(),
b=d("<a></a>",{href:"#","class":"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+a}).attr("data-"+d.mobile.ns+"rel","back").text(c||this.options.closeBtnText||"").prependTo(e));this._headerCloseButton=b}})})(F,this);(function(d,b,h){d.widget("mobile.dialog",{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0},_handlePageBeforeShow:function(){this._isCloseable=!0;this.options.overlayTheme&&this.element.page("removeContainerBackground").page("setContainerBackground",
this.options.overlayTheme)},_handlePageBeforeHide:function(){this._isCloseable=!1},_handleVClickSubmit:function(a){var c;a=d(a.target).closest("vclick"===a.type?"a":"form");a.length&&!a.jqmData("transition")&&(c={},c["data-"+d.mobile.ns+"transition"]=(d.mobile.navigate.history.getActive()||{}).transition||d.mobile.defaultDialogTransition,c["data-"+d.mobile.ns+"direction"]="reverse",a.attr(c))},_create:function(){var a=this.element,c=this.options;a.addClass("ui-dialog").wrapInner(d("<div/>",{role:"dialog",
"class":"ui-dialog-contain ui-overlay-shadow"+(c.corners?" ui-corner-all":"")}));d.extend(this,{_isCloseable:!1,_inner:a.children(),_headerCloseButton:null});this._on(a,{vclick:"_handleVClickSubmit",submit:"_handleVClickSubmit",pagebeforeshow:"_handlePageBeforeShow",pagebeforehide:"_handlePageBeforeHide"});this._setCloseBtn(c.closeBtn)},_setOptions:function(a){var c,e,b=this.options;a.corners!==h&&this._inner.toggleClass("ui-corner-all",!!a.corners);a.overlayTheme!==h&&d.mobile.activePage[0]===this.element[0]&&
(b.overlayTheme=a.overlayTheme,this._handlePageBeforeShow());a.closeBtnText!==h&&(c=b.closeBtn,e=a.closeBtnText);a.closeBtn!==h&&(c=a.closeBtn);c&&this._setCloseBtn(c,e);this._super(a)},_setCloseBtn:function(a,c){var e,b=this._headerCloseButton;a="left"===a?"left":"right"===a?"right":"none";"none"===a?b&&(b.remove(),b=null):b?(b.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+a),c&&b.text(c)):(e=this._inner.find(":jqmData(role='header')").first(),b=d("<a></a>",{role:"button",href:"#","class":"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+
a}).text(c||this.options.closeBtnText||"").prependTo(e),this._on(b,{click:"close"}));this._headerCloseButton=b},close:function(){var a=d.mobile.navigate.history;this._isCloseable&&(this._isCloseable=!1,d.mobile.hashListeningEnabled&&0<a.activeIndex?d.mobile.back():d.mobile.pageContainer.pagecontainer("back"))}})})(F,this);(function(d,b){var h=/([A-Z])/g,a=function(a){return"ui-btn-icon-"+(null===a?"left":a)};d.widget("mobile.collapsible",{options:{enhanced:!1,expandCueText:null,collapseCueText:null,
collapsed:!0,heading:"h1,h2,h3,h4,h5,h6,legend",collapsedIcon:null,expandedIcon:null,iconpos:null,theme:null,contentTheme:null,inset:null,corners:null,mini:null},_create:function(){var a=this.element,e={accordion:a.closest(":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')"+(d.mobile.collapsibleset?", :mobile-collapsibleset":"")).addClass("ui-collapsible-set")};this._ui=e;this._renderedOptions=this._getOptions(this.options);this.options.enhanced?(e.heading=this.element.children(".ui-collapsible-heading"),
e.content=e.heading.next(),e.anchor=e.heading.children(),e.status=e.anchor.children(".ui-collapsible-heading-status")):this._enhance(a,e);this._on(e.heading,{tap:function(){e.heading.find("a").first().addClass(d.mobile.activeBtnClass)},click:function(a){this._handleExpandCollapse(!e.heading.hasClass("ui-collapsible-heading-collapsed"));a.preventDefault();a.stopPropagation()}})},_getOptions:function(a){var c,b=this._ui.accordion,k=this._ui.accordionWidget;a=d.extend({},a);b.length&&!k&&(this._ui.accordionWidget=
k=b.data("mobile-collapsibleset"));for(c in a)a[c]=null!=a[c]?a[c]:k?k.options[c]:b.length?d.mobile.getAttribute(b[0],c.replace(h,"-$1").toLowerCase()):null,null==a[c]&&(a[c]=d.mobile.collapsible.defaults[c]);return a},_themeClassFromOption:function(a,e){return e?"none"===e?"":a+e:""},_enhance:function(c,e){var b,k=this._renderedOptions,h=this._themeClassFromOption("ui-body-",k.contentTheme);return c.addClass("ui-collapsible "+(k.inset?"ui-collapsible-inset ":"")+(k.inset&&k.corners?"ui-corner-all ":
"")+(h?"ui-collapsible-themed-content ":"")),e.originalHeading=c.children(this.options.heading).first(),e.content=c.wrapInner("<div class='ui-collapsible-content "+h+"'></div>").children(".ui-collapsible-content"),e.heading=e.originalHeading,e.heading.is("legend")&&(e.heading=d("<div role='heading'>"+e.heading.html()+"</div>"),e.placeholder=d("<div>\x3c!-- placeholder for legend --\x3e</div>").insertBefore(e.originalHeading),e.originalHeading.remove()),b=k.collapsed?k.collapsedIcon?"ui-icon-"+k.collapsedIcon:
"":k.expandedIcon?"ui-icon-"+k.expandedIcon:"",e.status=d("<span class='ui-collapsible-heading-status'></span>"),e.anchor=e.heading.detach().addClass("ui-collapsible-heading").append(e.status).wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().addClass("ui-btn "+(b?b+" ":"")+(b?a(k.iconpos)+" ":"")+this._themeClassFromOption("ui-btn-",k.theme)+" "+(k.mini?"ui-mini ":"")),e.heading.insertBefore(e.content),this._handleExpandCollapse(this.options.collapsed),e},refresh:function(){this._applyOptions(this.options);
this._renderedOptions=this._getOptions(this.options)},_applyOptions:function(c){var e,f,k,h=this.element,m=this._renderedOptions,d=this._ui,g=d.anchor;var q=d.status;var t=this._getOptions(c);c.collapsed!==b&&this._handleExpandCollapse(c.collapsed);(c=h.hasClass("ui-collapsible-collapsed"))?t.expandCueText!==b&&q.text(t.expandCueText):t.collapseCueText!==b&&q.text(t.collapseCueText);q=t.collapsedIcon!==b?!1!==t.collapsedIcon:!1!==m.collapsedIcon;(t.iconpos!==b||t.collapsedIcon!==b||t.expandedIcon!==
b)&&(g.removeClass([a(m.iconpos)].concat(m.expandedIcon?["ui-icon-"+m.expandedIcon]:[]).concat(m.collapsedIcon?["ui-icon-"+m.collapsedIcon]:[]).join(" ")),q&&g.addClass([a(t.iconpos!==b?t.iconpos:m.iconpos)].concat(c?["ui-icon-"+(t.collapsedIcon!==b?t.collapsedIcon:m.collapsedIcon)]:["ui-icon-"+(t.expandedIcon!==b?t.expandedIcon:m.expandedIcon)]).join(" ")));t.theme!==b&&(f=this._themeClassFromOption("ui-btn-",m.theme),e=this._themeClassFromOption("ui-btn-",t.theme),g.removeClass(f).addClass(e));
t.contentTheme!==b&&(f=this._themeClassFromOption("ui-body-",m.contentTheme),e=this._themeClassFromOption("ui-body-",t.contentTheme),d.content.removeClass(f).addClass(e));t.inset!==b&&(h.toggleClass("ui-collapsible-inset",t.inset),k=!(!t.inset||!t.corners&&!m.corners));t.corners!==b&&(k=!(!t.corners||!t.inset&&!m.inset));k!==b&&h.toggleClass("ui-corner-all",k);t.mini!==b&&g.toggleClass("ui-mini",t.mini)},_setOptions:function(a){this._applyOptions(a);this._super(a);this._renderedOptions=this._getOptions(this.options)},
_handleExpandCollapse:function(a){var c=this._renderedOptions,b=this._ui;b.status.text(a?c.expandCueText:c.collapseCueText);b.heading.toggleClass("ui-collapsible-heading-collapsed",a).find("a").first().toggleClass("ui-icon-"+c.expandedIcon,!a).toggleClass("ui-icon-"+c.collapsedIcon,a||c.expandedIcon===c.collapsedIcon).removeClass(d.mobile.activeBtnClass);this.element.toggleClass("ui-collapsible-collapsed",a);b.content.toggleClass("ui-collapsible-content-collapsed",a).attr("aria-hidden",a).trigger("updatelayout");
this.options.collapsed=a;this._trigger(a?"collapse":"expand")},expand:function(){this._handleExpandCollapse(!1)},collapse:function(){this._handleExpandCollapse(!0)},_destroy:function(){var a=this._ui;this.options.enhanced||(a.placeholder?(a.originalHeading.insertBefore(a.placeholder),a.placeholder.remove(),a.heading.remove()):(a.status.remove(),a.heading.removeClass("ui-collapsible-heading ui-collapsible-heading-collapsed").children().contents().unwrap()),a.anchor.contents().unwrap(),a.content.contents().unwrap(),
this.element.removeClass("ui-collapsible ui-collapsible-collapsed ui-collapsible-themed-content ui-collapsible-inset ui-corner-all"))}});d.mobile.collapsible.defaults={expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsedIcon:"plus",contentTheme:"inherit",expandedIcon:"minus",iconpos:"left",inset:!0,corners:!0,theme:"inherit",mini:!1}})(F);(function(d){function b(a){var c,e=a.length,b=[];for(c=0;e>c;c++)a[c].className.match(h)||b.push(a[c]);return d(b)}
var h=/\bui-screen-hidden\b/;d.mobile.behaviors.addFirstLastClasses={_getVisibles:function(a,c){var e;return c?e=b(a):(e=a.filter(":visible"),0===e.length&&(e=b(a))),e},_addFirstLastClasses:function(a,c,e){a.removeClass("ui-first-child ui-last-child");c.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child");e||this.element.trigger("updatelayout")},_removeFirstLastClasses:function(a){a.removeClass("ui-first-child ui-last-child")}}})(F);(function(d,b){var h=":mobile-collapsible, "+
d.mobile.collapsible.initSelector;d.widget("mobile.collapsibleset",d.extend({initSelector:":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",options:d.extend({enhanced:!1},d.mobile.collapsible.defaults),_handleCollapsibleExpand:function(a){a=d(a.target).closest(".ui-collapsible");a.parent().is(":mobile-collapsibleset, :jqmData(role='collapsible-set')")&&a.siblings(".ui-collapsible:not(.ui-collapsible-collapsed)").collapsible("collapse")},_create:function(){var a=this.element,c=this.options;
d.extend(this,{_classes:""});c.enhanced||(a.addClass("ui-collapsible-set "+this._themeClassFromOption("ui-group-theme-",c.theme)+" "+(c.corners&&c.inset?"ui-corner-all ":"")),this.element.find(d.mobile.collapsible.initSelector).collapsible());this._on(a,{collapsibleexpand:"_handleCollapsibleExpand"})},_themeClassFromOption:function(a,c){return c?"none"===c?"":a+c:""},_init:function(){this._refresh(!0);this.element.children(h).filter(":jqmData(collapsed='false')").collapsible("expand")},_setOptions:function(a){var c,
e,f=this.element,k=this._themeClassFromOption("ui-group-theme-",a.theme);return k&&f.removeClass(this._themeClassFromOption("ui-group-theme-",this.options.theme)).addClass(k),a.inset!==b&&(e=!(!a.inset||!a.corners&&!this.options.corners)),a.corners!==b&&(e=!(!a.corners||!a.inset&&!this.options.inset)),e!==b&&f.toggleClass("ui-corner-all",e),c=this._super(a),this.element.children(":mobile-collapsible").collapsible("refresh"),c},_destroy:function(){var a=this.element;this._removeFirstLastClasses(a.children(h));
a.removeClass("ui-collapsible-set ui-corner-all "+this._themeClassFromOption("ui-group-theme-",this.options.theme)).children(":mobile-collapsible").collapsible("destroy")},_refresh:function(a){var c=this.element.children(h);this.element.find(d.mobile.collapsible.initSelector).not(".ui-collapsible").collapsible();this._addFirstLastClasses(c,this._getVisibles(c,a),a)},refresh:function(){this._refresh(!1)}},d.mobile.behaviors.addFirstLastClasses))})(F);(function(d){d.fn.fieldcontain=function(){return this.addClass("ui-field-contain")}})(F);
(function(d){d.fn.grid=function(b){return this.each(function(){var h=d(this),a=d.extend({grid:null},b),c=h.children(),e={solo:1,a:2,b:3,c:4,d:5},a=a.grid;if(!a)if(5>=c.length)for(f in e)e[f]===c.length&&(a=f);else a="a",h.addClass("ui-grid-duo");var f=e[a];h.addClass("ui-grid-"+a);c.filter(":nth-child("+f+"n+1)").addClass("ui-block-a");1<f&&c.filter(":nth-child("+f+"n+2)").addClass("ui-block-b");2<f&&c.filter(":nth-child("+f+"n+3)").addClass("ui-block-c");3<f&&c.filter(":nth-child("+f+"n+4)").addClass("ui-block-d");
4<f&&c.filter(":nth-child("+f+"n+5)").addClass("ui-block-e")})}})(F);(function(d,b){d.widget("mobile.navbar",{options:{iconpos:"top",grid:null},_create:function(){var h=this.element,a=h.find("a, button"),c=a.filter(":jqmData(icon)").length?this.options.iconpos:b;h.addClass("ui-navbar").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid});a.each(function(){var a=d.mobile.getAttribute(this,"icon"),b=d.mobile.getAttribute(this,"theme"),k="ui-btn";b&&(k+=" ui-btn-"+b);
a&&(k+=" ui-icon-"+a+" ui-btn-icon-"+c);d(this).addClass(k)});h.delegate("a","vclick",function(){var c=d(this);c.hasClass("ui-state-disabled")||c.hasClass("ui-disabled")||c.hasClass(d.mobile.activeBtnClass)||(a.removeClass(d.mobile.activeBtnClass),c.addClass(d.mobile.activeBtnClass),d(l).one("pagehide",function(){c.removeClass(d.mobile.activeBtnClass)}))});h.closest(".ui-page").bind("pagebeforeshow",function(){a.filter(".ui-state-persist").addClass(d.mobile.activeBtnClass)})}})})(F);(function(d){var b=
d.mobile.getAttribute;d.widget("mobile.listview",d.extend({options:{theme:null,countTheme:null,dividerTheme:null,icon:"carat-r",splitIcon:"carat-r",splitTheme:null,corners:!0,shadow:!0,inset:!1},_create:function(){var b=""+(this.options.inset?" ui-listview-inset":"");this.options.inset&&(b+=this.options.corners?" ui-corner-all":"",b+=this.options.shadow?" ui-shadow":"");this.element.addClass(" ui-listview"+b);this.refresh(!0)},_findFirstElementByTagName:function(b,a,c,e){var f={};for(f[c]=f[e]=!0;b;){if(f[b.nodeName])return b;
b=b[a]}return null},_addThumbClasses:function(b){var a,c=b.length;for(a=0;c>a;a++){var e=d(this._findFirstElementByTagName(b[a].firstChild,"nextSibling","img","IMG"));e.length&&d(this._findFirstElementByTagName(e[0].parentNode,"parentNode","li","LI")).addClass(e.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")}},_getChildrenByTagName:function(b,a,c){var e=[],f={};f[a]=f[c]=!0;for(b=b.firstChild;b;)f[b.nodeName]&&e.push(b),b=b.nextSibling;return d(e)},_beforeListviewRefresh:d.noop,_afterListviewRefresh:d.noop,
refresh:function(h){var a,c,e,f,k,n,m,r,g,q,t,w,v,y,A,z=this.options;var B=this.element;var x=!!d.nodeName(B[0],"ol");var l=B.attr("start");var C={},D=B.find(".ui-li-count"),G=b(B[0],"counttheme")||this.options.countTheme,G=G?"ui-body-"+G:"ui-body-inherit";z.theme&&B.addClass("ui-group-theme-"+z.theme);x&&(l||0===l)&&(c=parseInt(l,10)-1,B.css("counter-reset","listnumbering "+c));this._beforeListviewRefresh();var H=this._getChildrenByTagName(B[0],"li","LI");c=0;for(B=H.length;B>c;c++){l=H.eq(c);var K=
"";(h||0>l[0].className.search(/\bui-li-static\b|\bui-li-divider\b/))&&(n=this._getChildrenByTagName(l[0],"a","A"),m="list-divider"===b(l[0],"role"),g=l.attr("value"),e=b(l[0],"theme"),n.length&&0>n[0].className.search(/\bui-btn\b/)&&!m?(f=b(l[0],"icon"),k=!1===f?!1:f||z.icon,n.removeClass("ui-link"),a="ui-btn",e&&(a+=" ui-btn-"+e),1<n.length?(K="ui-li-has-alt",q=n.last(),t=b(q[0],"theme")||z.splitTheme||b(l[0],"theme",!0),w=t?" ui-btn-"+t:"",v=b(q[0],"icon")||b(l[0],"icon")||z.splitIcon,y="ui-btn ui-btn-icon-notext ui-icon-"+
v+w,q.attr("title",d.trim(q.getEncodedText())).addClass(y).empty(),n=n.first()):k&&(a+=" ui-btn-icon-right ui-icon-"+k),n.addClass(a)):m?(A=b(l[0],"theme")||z.dividerTheme||z.theme,K="ui-li-divider ui-bar-"+(A?A:"inherit"),l.attr("role","heading")):0>=n.length&&(K="ui-li-static ui-body-"+(e?e:"inherit")),x&&g&&(r=parseInt(g,10)-1,l.css("counter-reset","listnumbering "+r)));C[K]||(C[K]=[]);C[K].push(l[0])}for(K in C)d(C[K]).addClass(K);D.each(function(){d(this).closest("li").addClass("ui-li-has-count")});
G&&D.not("[class*='ui-body-']").addClass(G);this._addThumbClasses(H);this._addThumbClasses(H.find(".ui-btn"));this._afterListviewRefresh();this._addFirstLastClasses(H,this._getVisibles(H,h),h)}},d.mobile.behaviors.addFirstLastClasses))})(F);(function(d){d.widget("mobile.listview",d.mobile.listview,{options:{autodividers:!1,autodividersSelector:function(b){return(b=d.trim(b.text())||null)?b.slice(0,1).toUpperCase():null}},_beforeListviewRefresh:function(){this.options.autodividers&&(this._replaceDividers(),
this._superApply(arguments))},_replaceDividers:function(){var b,h,a=null;var c=this.element;c.children("li:jqmData(role='list-divider')").remove();var e=c.children("li");for(c=0;c<e.length;c++){var f=e[c];(b=this.options.autodividersSelector(d(f)))&&a!==b&&(h=l.createElement("li"),h.appendChild(l.createTextNode(b)),h.setAttribute("data-"+d.mobile.ns+"role","list-divider"),f.parentNode.insertBefore(h,f));a=b}}})})(F);(function(d){var b=/(^|\s)ui-li-divider($|\s)/,h=/(^|\s)ui-screen-hidden($|\s)/;d.widget("mobile.listview",
d.mobile.listview,{options:{hideDividers:!1},_afterListviewRefresh:function(){var a,c=!0;if(this._superApply(arguments),this.options.hideDividers){var e=this._getChildrenByTagName(this.element[0],"li","LI");for(a=e.length-1;-1<a;a--){var f=e[a];f.className.match(b)?(c&&(f.className+=" ui-screen-hidden"),c=!0):f.className.match(h)||(c=!1)}}}})})(F);(function(d){d.mobile.nojs=function(b){d(":jqmData(role='nojs')",b).addClass("ui-nojs")}})(F);(function(d){d.mobile.behaviors.formReset={_handleFormReset:function(){this._on(this.element.closest("form"),
{reset:function(){this._delay("_reset")}})}}})(F);(function(d,b){var h=d.mobile.path.hashToSelector;d.widget("mobile.checkboxradio",d.extend({initSelector:"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",options:{theme:"inherit",mini:!1,wrapperClass:null,enhanced:!1,iconpos:"left"},_create:function(){var a=this.element,c=this.options,e=function(a,c){return a.jqmData(c)||a.closest("form, fieldset").jqmData(c)},b=this.options.enhanced?
{element:this.element.siblings("label"),isParent:!1}:this._findLabel(),k=a[0].type,h="ui-"+k+"-on",m="ui-"+k+"-off";"checkbox"!==k&&"radio"!==k||(this.element[0].disabled&&(this.options.disabled=!0),c.iconpos=e(a,"iconpos")||b.element.attr("data-"+d.mobile.ns+"iconpos")||c.iconpos,c.mini=e(a,"mini")||c.mini,d.extend(this,{input:a,label:b.element,labelIsParent:b.isParent,inputtype:k,checkedClass:h,uncheckedClass:m}),this.options.enhanced||this._enhance(),this._on(b.element,{vmouseover:"_handleLabelVMouseOver",
vclick:"_handleLabelVClick"}),this._on(a,{vmousedown:"_cacheVals",vclick:"_handleInputVClick",focus:"_handleInputFocus",blur:"_handleInputBlur"}),this._handleFormReset(),this.refresh())},_findLabel:function(){var a,c,e,b=this.element,k=b[0].labels;return k&&0<k.length?(c=d(k[0]),e=d.contains(c[0],b[0])):(a=b.closest("label"),e=0<a.length,c=e?a:d(this.document[0].getElementsByTagName("label")).filter("[for='"+h(b[0].id)+"']").first()),{element:c,isParent:e}},_enhance:function(){this.label.addClass("ui-btn ui-corner-all");
this.labelIsParent?this.input.add(this.label).wrapAll(this._wrapper()):(this.element.wrap(this._wrapper()),this.element.parent().prepend(this.label));this._setOptions({theme:this.options.theme,iconpos:this.options.iconpos,mini:this.options.mini})},_wrapper:function(){return d("<div class='"+(this.options.wrapperClass?this.options.wrapperClass:"")+" ui-"+this.inputtype+(this.options.disabled?" ui-state-disabled":"")+"' ></div>")},_handleInputFocus:function(){this.label.addClass(d.mobile.focusClass)},
_handleInputBlur:function(){this.label.removeClass(d.mobile.focusClass)},_handleInputVClick:function(){this.element.prop("checked",this.element.is(":checked"));this._getInputSet().not(this.element).prop("checked",!1);this._updateAll(!0)},_handleLabelVMouseOver:function(a){this.label.parent().hasClass("ui-state-disabled")&&a.stopPropagation()},_handleLabelVClick:function(a){var c=this.element;return c.is(":disabled")?void a.preventDefault():(this._cacheVals(),c.prop("checked","radio"===this.inputtype&&
!0||!c.prop("checked")),c.triggerHandler("click"),this._getInputSet().not(c).prop("checked",!1),this._updateAll(),!1)},_cacheVals:function(){this._getInputSet().each(function(){d(this).attr("data-"+d.mobile.ns+"cacheVal",this.checked)})},_getInputSet:function(){var a,c,e=this.element[0],b=e.name,k=e.form,e=this.element.parents().last().get(0),n=this.element;return b&&"radio"===this.inputtype&&e&&(a="input[type='radio'][name='"+h(b)+"']",k?(c=k.getAttribute("id"),c&&(n=d(a+"[form='"+h(c)+"']",e)),
n=d(k).find(a).filter(function(){return this.form===k}).add(n)):n=d(a,e).filter(function(){return!this.form})),n},_updateAll:function(a){var c=this;this._getInputSet().each(function(){var e=d(this);!this.checked&&"checkbox"!==c.inputtype||a||e.trigger("change")}).checkboxradio("refresh")},_reset:function(){this.refresh()},_hasIcon:function(){var a,c,e=d.mobile.controlgroup;return e&&(a=this.element.closest(":mobile-controlgroup,"+e.prototype.initSelector),0<a.length)?(c=d.data(a[0],"mobile-controlgroup"),
"horizontal"!==(c?c.options.type:a.attr("data-"+d.mobile.ns+"type"))):!0},refresh:function(){var a=this.element[0].checked,c=d.mobile.activeBtnClass,e="ui-btn-icon-"+this.options.iconpos,b=[],k=[];this._hasIcon()?(k.push(c),b.push(e)):(k.push(e),(a?b:k).push(c));a?(b.push(this.checkedClass),k.push(this.uncheckedClass)):(b.push(this.uncheckedClass),k.push(this.checkedClass));this.widget().toggleClass("ui-state-disabled",this.element.prop("disabled"));this.label.addClass(b.join(" ")).removeClass(k.join(" "))},
widget:function(){return this.label.parent()},_setOptions:function(a){var c=this.label,e=this.options,f=this.widget(),k=this._hasIcon();a.disabled!==b&&(this.input.prop("disabled",!!a.disabled),f.toggleClass("ui-state-disabled",!!a.disabled));a.mini!==b&&f.toggleClass("ui-mini",!!a.mini);a.theme!==b&&c.removeClass("ui-btn-"+e.theme).addClass("ui-btn-"+a.theme);a.wrapperClass!==b&&f.removeClass(e.wrapperClass).addClass(a.wrapperClass);a.iconpos!==b&&k?c.removeClass("ui-btn-icon-"+e.iconpos).addClass("ui-btn-icon-"+
a.iconpos):k||c.removeClass("ui-btn-icon-"+e.iconpos);this._super(a)}},d.mobile.behaviors.formReset))})(F);(function(d,b){d.widget("mobile.button",{initSelector:"input[type='button'], input[type='submit'], input[type='reset']",options:{theme:null,icon:null,iconpos:"left",iconshadow:!1,corners:!0,shadow:!0,inline:null,mini:null,wrapperClass:null,enhanced:!1},_create:function(){this.element.is(":disabled")&&(this.options.disabled=!0);this.options.enhanced||this._enhance();d.extend(this,{wrapper:this.element.parent()});
this._on({focus:function(){this.widget().addClass(d.mobile.focusClass)},blur:function(){this.widget().removeClass(d.mobile.focusClass)}});this.refresh(!0)},_enhance:function(){this.element.wrap(this._button())},_button:function(){var b=this.options,a=this._getIconClasses(this.options);return d("<div class='ui-btn ui-input-btn"+(b.wrapperClass?" "+b.wrapperClass:"")+(b.theme?" ui-btn-"+b.theme:"")+(b.corners?" ui-corner-all":"")+(b.shadow?" ui-shadow":"")+(b.inline?" ui-btn-inline":"")+(b.mini?" ui-mini":
"")+(b.disabled?" ui-state-disabled":"")+(a?" "+a:"")+"' >"+this.element.val()+"</div>")},widget:function(){return this.wrapper},_destroy:function(){this.element.insertBefore(this.wrapper);this.wrapper.remove()},_getIconClasses:function(b){return b.icon?"ui-icon-"+b.icon+(b.iconshadow?" ui-shadow-icon":"")+" ui-btn-icon-"+b.iconpos:""},_setOptions:function(h){var a=this.widget();h.theme!==b&&a.removeClass(this.options.theme).addClass("ui-btn-"+h.theme);h.corners!==b&&a.toggleClass("ui-corner-all",
h.corners);h.shadow!==b&&a.toggleClass("ui-shadow",h.shadow);h.inline!==b&&a.toggleClass("ui-btn-inline",h.inline);h.mini!==b&&a.toggleClass("ui-mini",h.mini);h.disabled!==b&&(this.element.prop("disabled",h.disabled),a.toggleClass("ui-state-disabled",h.disabled));h.icon===b&&h.iconshadow===b&&h.iconpos===b||a.removeClass(this._getIconClasses(this.options)).addClass(this._getIconClasses(d.extend({},this.options,h)));this._super(h)},refresh:function(b){var a,c=this.element.prop("disabled");this.options.icon&&
"notext"===this.options.iconpos&&this.element.attr("title")&&this.element.attr("title",this.element.val());b||(a=this.element.detach(),d(this.wrapper).text(this.element.val()).append(a));this.options.disabled!==c&&this._setOptions({disabled:c})}})})(F);(function(d){var b=d("meta[name=viewport]"),h=b.attr("content"),a=h+",maximum-scale=1, user-scalable=no",c=h+",maximum-scale=10, user-scalable=yes",e=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(h);d.mobile.zoom=d.extend({},
{enabled:!e,locked:!1,disable:function(c){e||d.mobile.zoom.locked||(b.attr("content",a),d.mobile.zoom.enabled=!1,d.mobile.zoom.locked=c||!1)},enable:function(a){e||d.mobile.zoom.locked&&!0!==a||(b.attr("content",c),d.mobile.zoom.enabled=!0,d.mobile.zoom.locked=!1)},restore:function(){e||(b.attr("content",h),d.mobile.zoom.enabled=!0)}})})(F);(function(d,b){d.widget("mobile.textinput",{initSelector:"input[type='text'],input[type='search'],:jqmData(type='search'),input[type='number'],:jqmData(type='number'),input[type='password'],input[type='email'],input[type='url'],input[type='tel'],textarea,input[type='time'],input[type='date'],input[type='month'],input[type='week'],input[type='datetime'],input[type='datetime-local'],input[type='color'],input:not([type]),input[type='file']",
options:{theme:null,corners:!0,mini:!1,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&-1<navigator.userAgent.indexOf("AppleWebKit"),wrapperClass:"",enhanced:!1},_create:function(){var b=this.options,a=this.element.is("[type='search'], :jqmData(type='search')"),c="TEXTAREA"===this.element[0].tagName,e=this.element.is("[data-"+(d.mobile.ns||"")+"type='range']"),f=(this.element.is("input")||this.element.is("[data-"+(d.mobile.ns||"")+"type='search']"))&&!e;this.element.prop("disabled")&&
(b.disabled=!0);d.extend(this,{classes:this._classesFromOptions(),isSearch:a,isTextarea:c,isRange:e,inputNeedsWrap:f});this._autoCorrect();b.enhanced||this._enhance();this._on({focus:"_handleFocus",blur:"_handleBlur"})},refresh:function(){this.setOptions({disabled:this.element.is(":disabled")})},_enhance:function(){var b=[];this.isTextarea&&b.push("ui-input-text");(this.isTextarea||this.isRange)&&b.push("ui-shadow-inset");this.inputNeedsWrap?this.element.wrap(this._wrap()):b=b.concat(this.classes);
this.element.addClass(b.join(" "))},widget:function(){return this.inputNeedsWrap?this.element.parent():this.element},_classesFromOptions:function(){var b=this.options,a=[];return a.push("ui-body-"+(null===b.theme?"inherit":b.theme)),b.corners&&a.push("ui-corner-all"),b.mini&&a.push("ui-mini"),b.disabled&&a.push("ui-state-disabled"),b.wrapperClass&&a.push(b.wrapperClass),a},_wrap:function(){return d("<div class='"+(this.isSearch?"ui-input-search ":"ui-input-text ")+this.classes.join(" ")+" ui-shadow-inset'></div>")},
_autoCorrect:function(){"undefined"==typeof this.element[0].autocorrect||d.support.touchOverflow||(this.element[0].setAttribute("autocorrect","off"),this.element[0].setAttribute("autocomplete","off"))},_handleBlur:function(){this.widget().removeClass(d.mobile.focusClass);this.options.preventFocusZoom&&d.mobile.zoom.enable(!0)},_handleFocus:function(){this.options.preventFocusZoom&&d.mobile.zoom.disable(!0);this.widget().addClass(d.mobile.focusClass)},_setOptions:function(h){var a=this.widget();this._super(h);
h.disabled===b&&h.mini===b&&h.corners===b&&h.theme===b&&h.wrapperClass===b||(a.removeClass(this.classes.join(" ")),this.classes=this._classesFromOptions(),a.addClass(this.classes.join(" ")));h.disabled!==b&&this.element.prop("disabled",!!h.disabled)},_destroy:function(){this.options.enhanced||(this.inputNeedsWrap&&this.element.unwrap(),this.element.removeClass("ui-input-text "+this.classes.join(" ")))}})})(F);(function(d,b){d.widget("mobile.slider",d.extend({initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",
widgetEventPrefix:"slide",options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!1},_create:function(){var h,a=this.element,c=this.options.trackTheme||d.mobile.getAttribute(a[0],"theme");var e=c?" ui-bar-"+c:" ui-bar-inherit";var f=this.options.corners||a.jqmData("corners")?" ui-corner-all":"";var k=this.options.mini||a.jqmData("mini")?" ui-mini":"";var n=a[0].nodeName.toLowerCase();var c="select"===n,m=a.parent().is(":jqmData(role='rangeslider')");var r=c?"ui-slider-switch":"";var u=a.attr("id");
var q=d("[for='"+u+"']"),t=q.attr("id")||u+"-label",w=c?0:parseFloat(a.attr("min")),v=c?a.find("option").length-1:parseFloat(a.attr("max")),y=g.parseFloat(a.attr("step")||1),A=l.createElement("a"),z=d(A);u=l.createElement("div");var B=d(u),x=this.options.highlight&&!c?function(){var a=l.createElement("div");return a.className="ui-slider-bg "+d.mobile.activeBtnClass,d(a).prependTo(B)}():!1;if(q.attr("id",t),this.isToggleSwitch=c,A.setAttribute("href","#"),u.setAttribute("role","application"),u.className=
[this.isToggleSwitch?"ui-slider ui-slider-track ui-shadow-inset ":"ui-slider-track ui-shadow-inset ",r,e,f,k].join(""),A.className="ui-slider-handle",u.appendChild(A),z.attr({role:"slider","aria-valuemin":w,"aria-valuemax":v,"aria-valuenow":this._value(),"aria-valuetext":this._value(),title:this._value(),"aria-labelledby":t}),d.extend(this,{slider:B,handle:z,control:a,type:n,step:y,max:v,min:w,valuebg:x,isRangeslider:m,dragging:!1,beforeStart:null,userModified:!1,mouseMoved:!1}),c){(h=a.attr("tabindex"))&&
z.attr("tabindex",h);a.attr("tabindex","-1").focus(function(){d(this).blur();z.focus()});h=l.createElement("div");h.className="ui-slider-inneroffset";e=0;for(f=u.childNodes.length;f>e;e++)h.appendChild(u.childNodes[e]);u.appendChild(h);z.addClass("ui-slider-handle-snapping");u=a.find("option");e=0;for(f=u.length;f>e;e++)k=e?"a":"b",n=e?" "+d.mobile.activeBtnClass:"",r=l.createElement("span"),r.className=["ui-slider-label ui-slider-label-",k,n].join(""),r.setAttribute("role","img"),r.appendChild(l.createTextNode(u[e].innerHTML)),
d(r).prependTo(B);this._labels=d(".ui-slider-label",B)}a.addClass(c?"ui-slider-switch":"ui-slider-input");this._on(a,{change:"_controlChange",keyup:"_controlKeyup",blur:"_controlBlur",vmouseup:"_controlVMouseUp"});B.bind("vmousedown",d.proxy(this._sliderVMouseDown,this)).bind("vclick",!1);this._on(l,{vmousemove:"_preventDocumentDrag"});this._on(B.add(l),{vmouseup:"_sliderVMouseUp"});B.insertAfter(a);c||m||(h=this.options.mini?"<div class='ui-slider ui-mini'>":"<div class='ui-slider'>",a.add(B).wrapAll(h));
this._on(this.handle,{vmousedown:"_handleVMouseDown",keydown:"_handleKeydown",keyup:"_handleKeyup"});this.handle.bind("vclick",!1);this._handleFormReset();this.refresh(b,b,!0)},_setOptions:function(h){h.theme!==b&&this._setTheme(h.theme);h.trackTheme!==b&&this._setTrackTheme(h.trackTheme);h.corners!==b&&this._setCorners(h.corners);h.mini!==b&&this._setMini(h.mini);h.highlight!==b&&this._setHighlight(h.highlight);h.disabled!==b&&this._setDisabled(h.disabled);this._super(h)},_controlChange:function(b){return!1===
this._trigger("controlchange",b)?!1:void(this.mouseMoved||this.refresh(this._value(),!0))},_controlKeyup:function(){this.refresh(this._value(),!0,!0)},_controlBlur:function(){this.refresh(this._value(),!0)},_controlVMouseUp:function(){this._checkedRefresh()},_handleVMouseDown:function(){this.handle.focus()},_handleKeydown:function(b){var a=this._value();if(!this.options.disabled){switch(b.keyCode){case d.mobile.keyCode.HOME:case d.mobile.keyCode.END:case d.mobile.keyCode.PAGE_UP:case d.mobile.keyCode.PAGE_DOWN:case d.mobile.keyCode.UP:case d.mobile.keyCode.RIGHT:case d.mobile.keyCode.DOWN:case d.mobile.keyCode.LEFT:b.preventDefault(),
this._keySliding||(this._keySliding=!0,this.handle.addClass("ui-state-active"))}switch(b.keyCode){case d.mobile.keyCode.HOME:this.refresh(this.min);break;case d.mobile.keyCode.END:this.refresh(this.max);break;case d.mobile.keyCode.PAGE_UP:case d.mobile.keyCode.UP:case d.mobile.keyCode.RIGHT:this.refresh(a+this.step);break;case d.mobile.keyCode.PAGE_DOWN:case d.mobile.keyCode.DOWN:case d.mobile.keyCode.LEFT:this.refresh(a-this.step)}}},_handleKeyup:function(){this._keySliding&&(this._keySliding=!1,
this.handle.removeClass("ui-state-active"))},_sliderVMouseDown:function(h){return this.options.disabled||1!==h.which&&0!==h.which&&h.which!==b?!1:!1===this._trigger("beforestart",h)?!1:(this.dragging=!0,this.userModified=!1,this.mouseMoved=!1,this.isToggleSwitch&&(this.beforeStart=this.element[0].selectedIndex),this.refresh(h),this._trigger("start"),!1)},_sliderVMouseUp:function(){return this.dragging?(this.dragging=!1,this.isToggleSwitch&&(this.handle.addClass("ui-slider-handle-snapping"),this.refresh(this.mouseMoved?
this.userModified?0===this.beforeStart?1:0:this.beforeStart:0===this.beforeStart?1:0)),this.mouseMoved=!1,this._trigger("stop"),!1):void 0},_preventDocumentDrag:function(b){return!1===this._trigger("drag",b)?!1:this.dragging&&!this.options.disabled?(this.mouseMoved=!0,this.isToggleSwitch&&this.handle.removeClass("ui-slider-handle-snapping"),this.refresh(b),this.userModified=this.beforeStart!==this.element[0].selectedIndex,!1):void 0},_checkedRefresh:function(){this.value!==this._value()&&this.refresh(this._value())},
_value:function(){return this.isToggleSwitch?this.element[0].selectedIndex:parseFloat(this.element.val())},_reset:function(){this.refresh(b,!1,!0)},refresh:function(b,a,c){var e,f,k,h,m,r,g,q,t,w,v,y,A,z,B,x=this;var E=d.mobile.getAttribute(this.element[0],"theme");var C=(C=this.options.theme||E)?" ui-btn-"+C:"";E=this.options.trackTheme||E;if(x.slider[0].className=[this.isToggleSwitch?"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset":"ui-slider-track ui-shadow-inset",E?" ui-bar-"+E:" ui-bar-inherit",
this.options.corners?" ui-corner-all":"",this.options.mini?" ui-mini":""].join(""),(this.options.disabled||this.element.prop("disabled"))&&this.disable(),this.value=this._value(),this.options.highlight&&!this.isToggleSwitch&&0===this.slider.find(".ui-slider-bg").length&&(this.valuebg=function(){var a=l.createElement("div");return a.className="ui-slider-bg "+d.mobile.activeBtnClass,d(a).prependTo(x.slider)}()),this.handle.addClass("ui-btn"+C+" ui-shadow"),m=this.element,r=!this.isToggleSwitch,g=r?
[]:m.find("option"),E=r?parseFloat(m.attr("min")):0,C=r?parseFloat(m.attr("max")):g.length-1,q=r&&0<parseFloat(m.attr("step"))?parseFloat(m.attr("step")):1,"object"==typeof b){if(k=b,e=this.slider.offset().left,f=this.slider.width(),h=f/((C-E)/q),!this.dragging||k.pageX<e-8||k.pageX>e+f+8)return;e=1<h?(k.pageX-e)/f*100:Math.round((k.pageX-e)/f*100)}else null==b&&(b=r?parseFloat(m.val()||0):m[0].selectedIndex),e=(parseFloat(b)-E)/(C-E)*100;if(!isNaN(e)&&(t=e/100*(C-E)+E,w=(t-E)%q,v=t-w,2*Math.abs(w)>=
q&&(v+=0<w?q:-q),y=100/((C-E)/q),t=parseFloat(v.toFixed(5)),"undefined"==typeof h&&(h=f/((C-E)/q)),1<h&&r&&(e=1/q*y*(t-E)),0>e&&(e=0),100<e&&(e=100),E>t&&(t=E),t>C&&(t=C),this.handle.css("left",e+"%"),this.handle[0].setAttribute("aria-valuenow",r?t:g.eq(t).attr("value")),this.handle[0].setAttribute("aria-valuetext",r?t:g.eq(t).getEncodedText()),this.handle[0].setAttribute("title",r?t:g.eq(t).getEncodedText()),this.valuebg&&this.valuebg.css("width",e+"%"),this._labels&&(A=this.handle.width()/this.slider.width()*
100,z=e&&A+(100-A)*e/100,B=100===e?0:Math.min(A+100-z,100),this._labels.each(function(){var a=d(this).hasClass("ui-slider-label-a");d(this).width((a?z:B)+"%")})),!c)){if(c=!1,r?(c=parseFloat(m.val())!==t,m.val(t)):(c=m[0].selectedIndex!==t,m[0].selectedIndex=t),!1===this._trigger("beforechange",b))return!1;!a&&c&&m.trigger("change")}},_setHighlight:function(b){(b=!!b)?(this.options.highlight=!!b,this.refresh()):this.valuebg&&(this.valuebg.remove(),this.valuebg=!1)},_setTheme:function(b){this.handle.removeClass("ui-btn-"+
this.options.theme).addClass("ui-btn-"+b);b=b?b:"inherit";this.control.removeClass("ui-body-"+(this.options.theme?this.options.theme:"inherit")).addClass("ui-body-"+b)},_setTrackTheme:function(b){b=b?b:"inherit";this.slider.removeClass("ui-body-"+(this.options.trackTheme?this.options.trackTheme:"inherit")).addClass("ui-body-"+b)},_setMini:function(b){b=!!b;this.isToggleSwitch||this.isRangeslider||(this.slider.parent().toggleClass("ui-mini",b),this.element.toggleClass("ui-mini",b));this.slider.toggleClass("ui-mini",
b)},_setCorners:function(b){this.slider.toggleClass("ui-corner-all",b);this.isToggleSwitch||this.control.toggleClass("ui-corner-all",b)},_setDisabled:function(b){b=!!b;this.element.prop("disabled",b);this.slider.toggleClass("ui-state-disabled",b).attr("aria-disabled",b);this.element.toggleClass("ui-state-disabled",b)}},d.mobile.behaviors.formReset))})(F);(function(d){var b;d.widget("mobile.slider",d.mobile.slider,{options:{popupEnabled:!1,showValue:!1},_create:function(){this._super();d.extend(this,
{_currentValue:null,_popup:null,_popupVisible:!1});this._setOption("popupEnabled",this.options.popupEnabled);this._on(this.handle,{vmousedown:"_showPopup"});this._on(this.slider.add(this.document),{vmouseup:"_hidePopup"});this._refresh()},_positionPopup:function(){var b=this.handle.offset();this._popup.offset({left:b.left+(this.handle.width()-this._popup.width())/2,top:b.top-this._popup.outerHeight()-5})},_setOption:function(h,a){this._super(h,a);"showValue"===h?this.handle.html(a&&!this.options.mini?
this._value():""):"popupEnabled"===h&&a&&!this._popup&&(this._popup=(b||(b=d("<div></div>",{"class":"ui-slider-popup ui-shadow ui-corner-all"})),b.clone()).addClass("ui-body-"+(this.options.theme||"a")).hide().insertBefore(this.element))},refresh:function(){this._super.apply(this,arguments);this._refresh()},_refresh:function(){var b=this.options;b.popupEnabled&&this.handle.removeAttr("title");var a=this._value();a!==this._currentValue&&(this._currentValue=a,b.popupEnabled&&this._popup&&(this._positionPopup(),
this._popup.html(a)),b.showValue&&!this.options.mini&&this.handle.html(a))},_showPopup:function(){this.options.popupEnabled&&!this._popupVisible&&(this.handle.html(""),this._popup.show(),this._positionPopup(),this._popupVisible=!0)},_hidePopup:function(){var b=this.options;b.popupEnabled&&this._popupVisible&&(b.showValue&&!b.mini&&this.handle.html(this._value()),this._popup.hide(),this._popupVisible=!1)}})})(F);(function(d,b){d.widget("mobile.flipswitch",d.extend({options:{onText:"On",offText:"Off",
theme:null,enhanced:!1,wrapperClass:null,corners:!0,mini:!1},_create:function(){this.options.enhanced?d.extend(this,{flipswitch:this.element.parent(),on:this.element.find(".ui-flipswitch-on").eq(0),off:this.element.find(".ui-flipswitch-off").eq(0),type:this.element.get(0).tagName}):this._enhance();this._handleFormReset();this._originalTabIndex=this.element.attr("tabindex");null!=this._originalTabIndex&&this.on.attr("tabindex",this._originalTabIndex);this.element.attr("tabindex","-1");this._on({focus:"_handleInputFocus"});
this.element.is(":disabled")&&this._setOptions({disabled:!0});this._on(this.flipswitch,{click:"_toggle",swipeleft:"_left",swiperight:"_right"});this._on(this.on,{keydown:"_keydown"});this._on({change:"refresh"})},_handleInputFocus:function(){this.on.focus()},widget:function(){return this.flipswitch},_left:function(){this.flipswitch.removeClass("ui-flipswitch-active");"SELECT"===this.type?this.element.get(0).selectedIndex=0:this.element.prop("checked",!1);this.element.trigger("change")},_right:function(){this.flipswitch.addClass("ui-flipswitch-active");
"SELECT"===this.type?this.element.get(0).selectedIndex=1:this.element.prop("checked",!0);this.element.trigger("change")},_enhance:function(){var b=d("<div>"),a=this.options,c=this.element,e=a.theme?a.theme:"inherit",f=d("<a></a>",{href:"#"}),k=d("<span></span>"),n=c.get(0).tagName,m="INPUT"===n?a.onText:c.find("option").eq(1).text(),r="INPUT"===n?a.offText:c.find("option").eq(0).text();f.addClass("ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit").text(m);k.addClass("ui-flipswitch-off").text(r);b.addClass("ui-flipswitch ui-shadow-inset ui-bar-"+
e+" "+(a.wrapperClass?a.wrapperClass:"")+" "+(c.is(":checked")||c.find("option").eq(1).is(":selected")?"ui-flipswitch-active":"")+(c.is(":disabled")?" ui-state-disabled":"")+(a.corners?" ui-corner-all":"")+(a.mini?" ui-mini":"")).append(f,k);c.addClass("ui-flipswitch-input").after(b).appendTo(b);d.extend(this,{flipswitch:b,on:f,off:k,type:n})},_reset:function(){this.refresh()},refresh:function(){var b=this.flipswitch.hasClass("ui-flipswitch-active")?"_right":"_left";var a="SELECT"===this.type?0<this.element.get(0).selectedIndex?
"_right":"_left":this.element.prop("checked")?"_right":"_left";a!==b&&this[a]()},_toggle:function(){this[this.flipswitch.hasClass("ui-flipswitch-active")?"_left":"_right"]()},_keydown:function(b){b.which===d.mobile.keyCode.LEFT?this._left():b.which===d.mobile.keyCode.RIGHT?this._right():b.which===d.mobile.keyCode.SPACE&&(this._toggle(),b.preventDefault())},_setOptions:function(h){if(h.theme!==b){var a=h.theme?h.theme:"inherit",c=h.theme?h.theme:"inherit";this.widget().removeClass("ui-bar-"+a).addClass("ui-bar-"+
c)}h.onText!==b&&this.on.text(h.onText);h.offText!==b&&this.off.text(h.offText);h.disabled!==b&&this.widget().toggleClass("ui-state-disabled",h.disabled);h.mini!==b&&this.widget().toggleClass("ui-mini",h.mini);h.corners!==b&&this.widget().toggleClass("ui-corner-all",h.corners);this._super(h)},_destroy:function(){this.options.enhanced||(null!=this._originalTabIndex?this.element.attr("tabindex",this._originalTabIndex):this.element.removeAttr("tabindex"),this.on.remove(),this.off.remove(),this.element.unwrap(),
this.flipswitch.remove(),this.removeClass("ui-flipswitch-input"))}},d.mobile.behaviors.formReset))})(F);(function(d,b){d.widget("mobile.rangeslider",d.extend({options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!0},_create:function(){var b=this.element,a=this.options.mini?"ui-rangeslider ui-mini":"ui-rangeslider",c=b.find("input").first(),e=b.find("input").last(),f=b.find("label").first(),k=d.data(c.get(0),"mobile-slider")||d.data(c.slider().get(0),"mobile-slider"),n=d.data(e.get(0),
"mobile-slider")||d.data(e.slider().get(0),"mobile-slider"),m=k.slider,n=n.slider,k=k.handle,r=d("<div class='ui-rangeslider-sliders' />").appendTo(b);c.addClass("ui-rangeslider-first");e.addClass("ui-rangeslider-last");b.addClass(a);m.appendTo(r);n.appendTo(r);f.insertBefore(b);k.prependTo(n);d.extend(this,{_inputFirst:c,_inputLast:e,_sliderFirst:m,_sliderLast:n,_label:f,_targetVal:null,_sliderTarget:!1,_sliders:r,_proxy:!1});this.refresh();this._on(this.element.find("input.ui-slider-input"),{slidebeforestart:"_slidebeforestart",
slidestop:"_slidestop",slidedrag:"_slidedrag",slidebeforechange:"_change",blur:"_change",keyup:"_change"});this._on({mousedown:"_change"});this._on(this.element.closest("form"),{reset:"_handleReset"});this._on(k,{vmousedown:"_dragFirstHandle"})},_handleReset:function(){var b=this;setTimeout(function(){b._updateHighlight()},0)},_dragFirstHandle:function(b){return d.data(this._inputFirst.get(0),"mobile-slider").dragging=!0,d.data(this._inputFirst.get(0),"mobile-slider").refresh(b),d.data(this._inputFirst.get(0),
"mobile-slider")._trigger("start"),!1},_slidedrag:function(b){var a=d(b.target).is(this._inputFirst),c=a?this._inputLast:this._inputFirst;return this._sliderTarget=!1,"first"===this._proxy&&a||"last"===this._proxy&&!a?(d.data(c.get(0),"mobile-slider").dragging=!0,d.data(c.get(0),"mobile-slider").refresh(b),!1):void 0},_slidestop:function(b){b=d(b.target).is(this._inputFirst);this._proxy=!1;this.element.find("input").trigger("vmouseup");this._sliderFirst.css("z-index",b?1:"")},_slidebeforestart:function(b){this._sliderTarget=
!1;d(b.originalEvent.target).hasClass("ui-slider-track")&&(this._sliderTarget=!0,this._targetVal=d(b.target).val())},_setOptions:function(h){h.theme!==b&&this._setTheme(h.theme);h.trackTheme!==b&&this._setTrackTheme(h.trackTheme);h.mini!==b&&this._setMini(h.mini);h.highlight!==b&&this._setHighlight(h.highlight);h.disabled!==b&&this._setDisabled(h.disabled);this._super(h);this.refresh()},refresh:function(){var b=this.element,a=this.options;(this._inputFirst.is(":disabled")||this._inputLast.is(":disabled"))&&
(this.options.disabled=!0);b.find("input").slider({theme:a.theme,trackTheme:a.trackTheme,disabled:a.disabled,corners:a.corners,mini:a.mini,highlight:a.highlight}).slider("refresh");this._updateHighlight()},_change:function(b){if("keyup"===b.type)return this._updateHighlight(),!1;var a=this,c=parseFloat(this._inputFirst.val(),10),e=parseFloat(this._inputLast.val(),10),f=d(b.target).hasClass("ui-rangeslider-first"),k=f?this._inputFirst:this._inputLast,h=f?this._inputLast:this._inputFirst;if(this._inputFirst.val()>
this._inputLast.val()&&"mousedown"===b.type&&!d(b.target).hasClass("ui-slider-handle"))k.blur();else if("mousedown"===b.type)return;return c>e&&!this._sliderTarget?(k.val(f?e:c).slider("refresh"),this._trigger("normalize")):c>e&&(k.val(this._targetVal).slider("refresh"),setTimeout(function(){h.val(f?c:e).slider("refresh");d.data(h.get(0),"mobile-slider").handle.focus();a._sliderFirst.css("z-index",f?"":1);a._trigger("normalize")},0),this._proxy=f?"first":"last"),c===e?(d.data(k.get(0),"mobile-slider").handle.css("z-index",
1),d.data(h.get(0),"mobile-slider").handle.css("z-index",0)):(d.data(h.get(0),"mobile-slider").handle.css("z-index",""),d.data(k.get(0),"mobile-slider").handle.css("z-index","")),this._updateHighlight(),c>=e?!1:void 0},_updateHighlight:function(){var b=parseInt(d.data(this._inputFirst.get(0),"mobile-slider").handle.get(0).style.left,10),a=parseInt(d.data(this._inputLast.get(0),"mobile-slider").handle.get(0).style.left,10)-b;this.element.find(".ui-slider-bg").css({"margin-left":b+"%",width:a+"%"})},
_setTheme:function(b){this._inputFirst.slider("option","theme",b);this._inputLast.slider("option","theme",b)},_setTrackTheme:function(b){this._inputFirst.slider("option","trackTheme",b);this._inputLast.slider("option","trackTheme",b)},_setMini:function(b){this._inputFirst.slider("option","mini",b);this._inputLast.slider("option","mini",b);this.element.toggleClass("ui-mini",!!b)},_setHighlight:function(b){this._inputFirst.slider("option","highlight",b);this._inputLast.slider("option","highlight",b)},
_setDisabled:function(b){this._inputFirst.prop("disabled",b);this._inputLast.prop("disabled",b)},_destroy:function(){this._label.prependTo(this.element);this.element.removeClass("ui-rangeslider ui-mini");this._inputFirst.after(this._sliderFirst);this._inputLast.after(this._sliderLast);this._sliders.remove();this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy")}},d.mobile.behaviors.formReset))})(F);(function(d,b){d.widget("mobile.textinput",d.mobile.textinput,
{options:{clearBtn:!1,clearBtnText:"Clear text"},_create:function(){this._super();this.isSearch&&(this.options.clearBtn=!0);this.options.clearBtn&&this.inputNeedsWrap&&this._addClearBtn()},clearButton:function(){return d("<a href='#' tabindex='-1' aria-hidden='true' class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'></a>").attr("title",this.options.clearBtnText).text(this.options.clearBtnText)},_clearBtnClick:function(b){this.element.val("").focus().trigger("change");this._clearBtn.addClass("ui-input-clear-hidden");
b.preventDefault()},_addClearBtn:function(){this.options.enhanced||this._enhanceClear();d.extend(this,{_clearBtn:this.widget().find("a.ui-input-clear")});this._bindClearEvents();this._toggleClear()},_enhanceClear:function(){this.clearButton().appendTo(this.widget());this.widget().addClass("ui-input-has-clear")},_bindClearEvents:function(){this._on(this._clearBtn,{click:"_clearBtnClick"});this._on({keyup:"_toggleClear",change:"_toggleClear",input:"_toggleClear",focus:"_toggleClear",blur:"_toggleClear",
cut:"_toggleClear",paste:"_toggleClear"})},_unbindClear:function(){this._off(this._clearBtn,"click");this._off(this.element,"keyup change input focus blur cut paste")},_setOptions:function(h){this._super(h);h.clearBtn===b||this.element.is("textarea, :jqmData(type='range')")||(h.clearBtn?this._addClearBtn():this._destroyClear());h.clearBtnText!==b&&this._clearBtn!==b&&this._clearBtn.text(h.clearBtnText).attr("title",h.clearBtnText)},_toggleClear:function(){this._delay("_toggleClearClass",0)},_toggleClearClass:function(){this._clearBtn.toggleClass("ui-input-clear-hidden",
!this.element.val())},_destroyClear:function(){this.widget().removeClass("ui-input-has-clear");this._unbindClear();this._clearBtn.remove()},_destroy:function(){this._super();this.options.clearBtn&&this._destroyClear()}})})(F);(function(d,b){d.widget("mobile.textinput",d.mobile.textinput,{options:{autogrow:!0,keyupTimeoutBuffer:100},_create:function(){this._super();this.options.autogrow&&this.isTextarea&&this._autogrow()},_autogrow:function(){this.element.addClass("ui-textinput-autogrow");this._on({keyup:"_timeout",
change:"_timeout",input:"_timeout",paste:"_timeout"});this._on(!0,this.document,{pageshow:"_handleShow",popupbeforeposition:"_handleShow",updatelayout:"_handleShow",panelopen:"_handleShow"})},_handleShow:function(b){d.contains(b.target,this.element[0])&&this.element.is(":visible")&&("popupbeforeposition"!==b.type&&this.element.addClass("ui-textinput-autogrow-resize").animationComplete(d.proxy(function(){this.element.removeClass("ui-textinput-autogrow-resize")},this),"transition"),this._prepareHeightUpdate())},
_unbindAutogrow:function(){this.element.removeClass("ui-textinput-autogrow");this._off(this.element,"keyup change input paste");this._off(this.document,"pageshow popupbeforeposition updatelayout panelopen")},keyupTimeout:null,_prepareHeightUpdate:function(h){this.keyupTimeout&&clearTimeout(this.keyupTimeout);h===b?this._updateHeight():this.keyupTimeout=this._delay("_updateHeight",h)},_timeout:function(){this._prepareHeightUpdate(this.options.keyupTimeoutBuffer)},_updateHeight:function(){var b,a,c,
e=this.window.scrollTop();this.keyupTimeout=0;"onpage"in this.element[0]||this.element.css({height:0,"min-height":0,"max-height":0});var f=this.element[0].scrollHeight;var k=this.element[0].clientHeight;var n=parseFloat(this.element.css("border-top-width"));var m=parseFloat(this.element.css("border-bottom-width"));f=f+(n+m)+15;0===k&&(b=parseFloat(this.element.css("padding-top")),a=parseFloat(this.element.css("padding-bottom")),c=b+a,f+=c);this.element.css({height:f,"min-height":"","max-height":""});
this.window.scrollTop(e)},refresh:function(){this.options.autogrow&&this.isTextarea&&this._updateHeight()},_setOptions:function(h){this._super(h);h.autogrow!==b&&this.isTextarea&&(h.autogrow?this._autogrow():this._unbindAutogrow())}})})(F);(function(d){d.widget("mobile.selectmenu",d.extend({initSelector:"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",options:{theme:null,icon:"carat-d",iconpos:"right",inline:!1,corners:!0,shadow:!0,iconshadow:!1,overlayTheme:null,dividerTheme:null,
hidePlaceholderMenuItems:!0,closeText:"Close",nativeMenu:!0,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&-1<navigator.userAgent.indexOf("AppleWebKit"),mini:!1},_button:function(){return d("<div/>")},_setDisabled:function(b){return this.element.attr("disabled",b),this.button.attr("aria-disabled",b),this._setOption("disabled",b)},_focusButton:function(){var b=this;setTimeout(function(){b.button.focus()},40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var b=
this.options.inline||this.element.jqmData("inline"),h=this.options.mini||this.element.jqmData("mini"),a="";~this.element[0].className.indexOf("ui-btn-left")&&(a=" ui-btn-left");~this.element[0].className.indexOf("ui-btn-right")&&(a=" ui-btn-right");b&&(a+=" ui-btn-inline");h&&(a+=" ui-mini");this.select=this.element.removeClass("ui-btn-left ui-btn-right").wrap("<div class='ui-select"+a+"'>");this.selectId=this.select.attr("id")||"select-"+this.uuid;this.buttonId=this.selectId+"-button";this.label=
d("label[for='"+this.selectId+"']");this.isMultiple=this.select[0].multiple},_destroy:function(){var b=this.element.parents(".ui-select");0<b.length&&(b.is(".ui-btn-left, .ui-btn-right")&&this.element.addClass(b.hasClass("ui-btn-left")?"ui-btn-left":"ui-btn-right"),this.element.insertAfter(b),b.remove())},_create:function(){this._preExtension();this.button=this._button();var b=this,h=this.options,a=h.icon?h.iconpos||this.select.jqmData("iconpos"):!1,a=this.button.insertBefore(this.select).attr("id",
this.buttonId).addClass("ui-btn"+(h.icon?" ui-icon-"+h.icon+" ui-btn-icon-"+a+(h.iconshadow?" ui-shadow-icon":""):"")+(h.theme?" ui-btn-"+h.theme:"")+(h.corners?" ui-corner-all":"")+(h.shadow?" ui-shadow":""));this.setButtonText();h.nativeMenu&&g.opera&&g.opera.version&&a.addClass("ui-select-nativeonly");this.isMultiple&&(this.buttonCount=d("<span>").addClass("ui-li-count ui-body-inherit").hide().appendTo(a.addClass("ui-li-has-count")));(h.disabled||this.element.attr("disabled"))&&this.disable();
this.select.change(function(){b.refresh();h.nativeMenu&&b._delay(function(){b.select.blur()})});this._handleFormReset();this._on(this.button,{keydown:"_handleKeydown"});this.build()},build:function(){var b=this;this.select.appendTo(b.button).bind("vmousedown",function(){b.button.addClass(d.mobile.activeBtnClass)}).bind("focus",function(){b.button.addClass(d.mobile.focusClass)}).bind("blur",function(){b.button.removeClass(d.mobile.focusClass)}).bind("focus vmouseover",function(){b.button.trigger("vmouseover")}).bind("vmousemove",
function(){b.button.removeClass(d.mobile.activeBtnClass)}).bind("change blur vmouseout",function(){b.button.trigger("vmouseout").removeClass(d.mobile.activeBtnClass)});b.button.bind("vmousedown",function(){b.options.preventFocusZoom&&d.mobile.zoom.disable(!0)});b.label.bind("click focus",function(){b.options.preventFocusZoom&&d.mobile.zoom.disable(!0)});b.select.bind("focus",function(){b.options.preventFocusZoom&&d.mobile.zoom.disable(!0)});b.button.bind("mouseup",function(){b.options.preventFocusZoom&&
setTimeout(function(){d.mobile.zoom.enable(!0)},0)});b.select.bind("blur",function(){b.options.preventFocusZoom&&d.mobile.zoom.enable(!0)})},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var b=this;return this.selected().map(function(){return b._selectOptions().index(this)}).get()},setButtonText:function(){var b=this,h=this.selected(),a=this.placeholder,c=d(l.createElement("span"));this.button.children("span").not(".ui-li-count").remove().end().end().prepend(function(){return a=
h.length?h.map(function(){return d(this).text()}).get().join(", "):b.placeholder,a?c.text(a):c.html("&#160;"),c.addClass(b.select.attr("class")).addClass(h.attr("class")).removeClass("ui-screen-hidden")}())},setButtonCount:function(){var b=this.selected();this.isMultiple&&this.buttonCount[1<b.length?"show":"hide"]().text(b.length)},_handleKeydown:function(){this._delay("_refreshButton")},_reset:function(){this.refresh()},_refreshButton:function(){this.setButtonText();this.setButtonCount()},refresh:function(){this._refreshButton()},
open:d.noop,close:d.noop,disable:function(){this._setDisabled(!0);this.button.addClass("ui-state-disabled")},enable:function(){this._setDisabled(!1);this.button.removeClass("ui-state-disabled")}},d.mobile.behaviors.formReset))})(F);(function(d){d.mobile.links=function(b){d(b).find("a").jqmEnhanceable().filter(":jqmData(rel='popup')[href][href!='']").each(function(){var b=this.getAttribute("href").substring(1);b&&(this.setAttribute("aria-haspopup",!0),this.setAttribute("aria-owns",b),this.setAttribute("aria-expanded",
!1))}).end().not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")}})(F);(function(d,b){function h(a,e,b,k){return e>a?b+(a-e)/2:Math.min(Math.max(b,k-e/2),b+a-e)}function a(a){return{x:a.scrollLeft(),y:a.scrollTop(),cx:a[0].innerWidth||a.width(),cy:a[0].innerHeight||a.height()}}d.widget("mobile.popup",{options:{wrapperClass:null,theme:null,overlayTheme:null,shadow:!0,corners:!0,transition:"none",positionTo:"origin",tolerance:null,closeLinkSelector:"a:jqmData(rel='back')",
closeLinkEvents:"click.popup",navigateEvents:"navigate.popup",closeEvents:"navigate.popup pagebeforechange.popup",dismissible:!0,enhanced:!1,history:!d.mobile.browser.oldIE},_handleDocumentVmousedown:function(a){this._isOpen&&d.contains(this._ui.container[0],a.target)&&this._ignoreResizeEvents()},_create:function(){var a=this.element,e=a.attr("id"),b=this.options;b.history=b.history&&d.mobile.ajaxEnabled&&d.mobile.hashListeningEnabled;this._on(this.document,{vmousedown:"_handleDocumentVmousedown"});
d.extend(this,{_scrollTop:0,_page:a.closest(".ui-page"),_ui:null,_fallbackTransition:"",_currentTransition:!1,_prerequisites:null,_isOpen:!1,_tolerance:null,_resizeData:null,_ignoreResizeTo:0,_orientationchangeInProgress:!1});0===this._page.length&&(this._page=d("body"));b.enhanced?this._ui={container:a.parent(),screen:a.parent().prev(),placeholder:d(this.document[0].getElementById(e+"-placeholder"))}:(this._ui=this._enhance(a,e),this._applyTransition(b.transition));this._setTolerance(b.tolerance)._ui.focusElement=
this._ui.container;this._on(this._ui.screen,{vclick:"_eatEventAndClose"});this._on(this.window,{orientationchange:d.proxy(this,"_handleWindowOrientationchange"),resize:d.proxy(this,"_handleWindowResize"),keyup:d.proxy(this,"_handleWindowKeyUp")});this._on(this.document,{focusin:"_handleDocumentFocusIn"})},_enhance:function(a,e){var c=this.options,b=c.wrapperClass,b={screen:d("<div class='ui-screen-hidden ui-popup-screen "+this._themeClassFromOption("ui-overlay-",c.overlayTheme)+"'></div>"),placeholder:d("<div style='display: none;'>\x3c!-- placeholder --\x3e</div>"),
container:d("<div class='ui-popup-container ui-popup-hidden ui-popup-truncate"+(b?" "+b:"")+"'></div>")},h=this.document[0].createDocumentFragment();return h.appendChild(b.screen[0]),h.appendChild(b.container[0]),e&&(b.screen.attr("id",e+"-screen"),b.container.attr("id",e+"-popup"),b.placeholder.attr("id",e+"-placeholder").html("\x3c!-- placeholder for "+e+" --\x3e")),this._page[0].appendChild(h),b.placeholder.insertAfter(a),a.detach().addClass("ui-popup "+this._themeClassFromOption("ui-body-",c.theme)+
" "+(c.shadow?"ui-overlay-shadow ":"")+(c.corners?"ui-corner-all ":"")).appendTo(b.container),b},_eatEventAndClose:function(a){return a.preventDefault(),a.stopImmediatePropagation(),this.options.dismissible&&this.close(),!1},_resizeScreen:function(){var a=this._ui.screen,e=this._ui.container.outerHeight(!0),b=a.removeAttr("style").height(),k=this.document.height()-1;k>b?a.height(k):e>b&&a.height(e)},_handleWindowKeyUp:function(a){return this._isOpen&&a.keyCode===d.mobile.keyCode.ESCAPE?this._eatEventAndClose(a):
void 0},_expectResizeEvent:function(){var c=a(this.window);if(this._resizeData){if(c.x===this._resizeData.windowCoordinates.x&&c.y===this._resizeData.windowCoordinates.y&&c.cx===this._resizeData.windowCoordinates.cx&&c.cy===this._resizeData.windowCoordinates.cy)return!1;clearTimeout(this._resizeData.timeoutId)}return this._resizeData={timeoutId:this._delay("_resizeTimeout",200),windowCoordinates:c},!0},_resizeTimeout:function(){this._isOpen?this._expectResizeEvent()||(this._ui.container.hasClass("ui-popup-hidden")&&
(this._ui.container.removeClass("ui-popup-hidden ui-popup-truncate"),this.reposition({positionTo:"window"}),this._ignoreResizeEvents()),this._resizeScreen(),this._resizeData=null,this._orientationchangeInProgress=!1):(this._resizeData=null,this._orientationchangeInProgress=!1)},_stopIgnoringResizeEvents:function(){this._ignoreResizeTo=0},_ignoreResizeEvents:function(){this._ignoreResizeTo&&clearTimeout(this._ignoreResizeTo);this._ignoreResizeTo=this._delay("_stopIgnoringResizeEvents",1E3)},_handleWindowResize:function(){this._isOpen&&
0===this._ignoreResizeTo&&(!this._expectResizeEvent()&&!this._orientationchangeInProgress||this._ui.container.hasClass("ui-popup-hidden")||this._ui.container.addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style"))},_handleWindowOrientationchange:function(){!this._orientationchangeInProgress&&this._isOpen&&0===this._ignoreResizeTo&&(this._expectResizeEvent(),this._orientationchangeInProgress=!0)},_handleDocumentFocusIn:function(a){var c,b=a.target,k=this._ui;if(this._isOpen){if(b!==k.container[0]){if(c=
d(b),!d.contains(k.container[0],b))return d(this.document[0].activeElement).one("focus",d.proxy(function(){this._safelyBlur(b)},this)),k.focusElement.focus(),a.preventDefault(),a.stopImmediatePropagation(),!1;k.focusElement[0]===k.container[0]&&(k.focusElement=c)}this._ignoreResizeEvents()}},_themeClassFromOption:function(a,e){return e?"none"===e?"":a+e:a+"inherit"},_applyTransition:function(a){return a&&(this._ui.container.removeClass(this._fallbackTransition),"none"!==a&&(this._fallbackTransition=
d.mobile._maybeDegradeTransition(a),"none"===this._fallbackTransition&&(this._fallbackTransition=""),this._ui.container.addClass(this._fallbackTransition))),this},_setOptions:function(a){var c=this.options,f=this.element,k=this._ui.screen;return a.wrapperClass!==b&&this._ui.container.removeClass(c.wrapperClass).addClass(a.wrapperClass),a.theme!==b&&f.removeClass(this._themeClassFromOption("ui-body-",c.theme)).addClass(this._themeClassFromOption("ui-body-",a.theme)),a.overlayTheme!==b&&(k.removeClass(this._themeClassFromOption("ui-overlay-",
c.overlayTheme)).addClass(this._themeClassFromOption("ui-overlay-",a.overlayTheme)),this._isOpen&&k.addClass("in")),a.shadow!==b&&f.toggleClass("ui-overlay-shadow",a.shadow),a.corners!==b&&f.toggleClass("ui-corner-all",a.corners),a.transition!==b&&(this._currentTransition||this._applyTransition(a.transition)),a.tolerance!==b&&this._setTolerance(a.tolerance),a.disabled!==b&&a.disabled&&this.close(),this._super(a)},_setTolerance:function(a){var c,f={t:30,r:15,b:30,l:15};if(a!==b)switch(c=String(a).split(","),
d.each(c,function(a,e){c[a]=parseInt(e,10)}),c.length){case 1:isNaN(c[0])||(f.t=f.r=f.b=f.l=c[0]);break;case 2:isNaN(c[0])||(f.t=f.b=c[0]);isNaN(c[1])||(f.l=f.r=c[1]);break;case 4:isNaN(c[0])||(f.t=c[0]),isNaN(c[1])||(f.r=c[1]),isNaN(c[2])||(f.b=c[2]),isNaN(c[3])||(f.l=c[3])}return this._tolerance=f,this},_clampPopupWidth:function(c){var e,b=a(this.window),b={x:this._tolerance.l,y:b.y+this._tolerance.t,cx:b.cx-this._tolerance.l-this._tolerance.r,cy:b.cy-this._tolerance.t-this._tolerance.b};return c||
this._ui.container.css("max-width",b.cx),e={cx:this._ui.container.outerWidth(!0),cy:this._ui.container.outerHeight(!0)},{rc:b,menuSize:e}},_calculateFinalLocation:function(a,e){var c,b=e.rc,n=e.menuSize;return c={left:h(b.cx,n.cx,b.x,a.x),top:h(b.cy,n.cy,b.y,a.y)},c.top=Math.max(0,c.top),c.top-=Math.min(c.top,Math.max(0,c.top+n.cy-this.document.height())),c},_placementCoords:function(a){return this._calculateFinalLocation(a,this._clampPopupWidth())},_createPrerequisites:function(a,e,b){var c=this;
var f={screen:d.Deferred(),container:d.Deferred()};f.screen.then(function(){f===c._prerequisites&&a()});f.container.then(function(){f===c._prerequisites&&e()});d.when(f.screen,f.container).done(function(){f===c._prerequisites&&(c._prerequisites=null,b())});c._prerequisites=f},_animate:function(a){return this._ui.screen.removeClass(a.classToRemove).addClass(a.screenClassToAdd),a.prerequisites.screen.resolve(),a.transition&&"none"!==a.transition&&(a.applyTransition&&this._applyTransition(a.transition),
this._fallbackTransition)?void this._ui.container.addClass(a.containerClassToAdd).removeClass(a.classToRemove).animationComplete(d.proxy(a.prerequisites.container,"resolve")):(this._ui.container.removeClass(a.classToRemove),void a.prerequisites.container.resolve())},_desiredCoords:function(c){var e,b=null,k=a(this.window),h=c.x,m=c.y;if((c=c.positionTo)&&"origin"!==c)if("window"===c)h=k.cx/2+k.x,m=k.cy/2+k.y;else{try{b=d(c)}catch(r){b=null}b&&(b.filter(":visible"),0===b.length&&(b=null))}return b&&
(e=b.offset(),h=e.left+b.outerWidth()/2,m=e.top+b.outerHeight()/2),("number"!==d.type(h)||isNaN(h))&&(h=k.cx/2+k.x),("number"!==d.type(m)||isNaN(m))&&(m=k.cy/2+k.y),{x:h,y:m}},_reposition:function(a){a={x:a.x,y:a.y,positionTo:a.positionTo};this._trigger("beforeposition",b,a);this._ui.container.offset(this._placementCoords(this._desiredCoords(a)))},reposition:function(a){this._isOpen&&this._reposition(a)},_safelyBlur:function(a){a!==this.window[0]&&"body"!==a.nodeName.toLowerCase()&&d(a).blur()},_openPrerequisitesComplete:function(){var a=
this.element.attr("id"),e=this._ui.container.find(":focusable").first();this._ui.container.addClass("ui-popup-active");this._isOpen=!0;this._resizeScreen();d.contains(this._ui.container[0],this.document[0].activeElement)||this._safelyBlur(this.document[0].activeElement);0<e.length&&(this._ui.focusElement=e);this._ignoreResizeEvents();a&&this.document.find("[aria-haspopup='true'][aria-owns='"+a+"']").attr("aria-expanded",!0);this._trigger("afteropen")},_open:function(a){a=d.extend({},this.options,
a);var c=navigator.userAgent;var b=c.match(/AppleWebKit\/([0-9\.]+)/),b=!!b&&b[1],k=c.match(/Android (\d+(?:\.\d+))/),h=!!k&&k[1];c=-1<c.indexOf("Chrome");c=null!==k&&"4.0"===h&&b&&534.13<b&&!c?!0:!1;this._createPrerequisites(d.noop,d.noop,d.proxy(this,"_openPrerequisitesComplete"));this._currentTransition=a.transition;this._applyTransition(a.transition);this._ui.screen.removeClass("ui-screen-hidden");this._ui.container.removeClass("ui-popup-truncate");this._reposition(a);this._ui.container.removeClass("ui-popup-hidden");
this.options.overlayTheme&&c&&this.element.closest(".ui-page").addClass("ui-popup-open");this._animate({additionalCondition:!0,transition:a.transition,classToRemove:"",screenClassToAdd:"in",containerClassToAdd:"in",applyTransition:!1,prerequisites:this._prerequisites})},_closePrerequisiteScreen:function(){this._ui.screen.removeClass("out").addClass("ui-screen-hidden")},_closePrerequisiteContainer:function(){this._ui.container.removeClass("reverse out").addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style")},
_closePrerequisitesDone:function(){var a=this._ui.container,e=this.element.attr("id");d.mobile.popup.active=b;d(":focus",a[0]).add(a[0]).blur();e&&this.document.find("[aria-haspopup='true'][aria-owns='"+e+"']").attr("aria-expanded",!1);this._trigger("afterclose")},_close:function(a){this._ui.container.removeClass("ui-popup-active");this._page.removeClass("ui-popup-open");this._isOpen=!1;this._createPrerequisites(d.proxy(this,"_closePrerequisiteScreen"),d.proxy(this,"_closePrerequisiteContainer"),
d.proxy(this,"_closePrerequisitesDone"));this._animate({additionalCondition:this._ui.screen.hasClass("in"),transition:a?"none":this._currentTransition,classToRemove:"in",screenClassToAdd:"out",containerClassToAdd:"reverse out",applyTransition:!0,prerequisites:this._prerequisites})},_unenhance:function(){this.options.enhanced||(this._setOptions({theme:d.mobile.popup.prototype.options.theme}),this.element.detach().insertAfter(this._ui.placeholder).removeClass("ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit"),
this._ui.screen.remove(),this._ui.container.remove(),this._ui.placeholder.remove())},_destroy:function(){return d.mobile.popup.active===this?(this.element.one("popupafterclose",d.proxy(this,"_unenhance")),this.close()):this._unenhance(),this},_closePopup:function(a,e){var c,b,h=this.options,m=!1;a&&a.isDefaultPrevented()||d.mobile.popup.active!==this||(g.scrollTo(0,this._scrollTop),a&&"pagebeforechange"===a.type&&e&&(c="string"==typeof e.toPage?e.toPage:e.toPage.jqmData("url"),c=d.mobile.path.parseUrl(c),
b=c.pathname+c.search+c.hash,this._myUrl!==d.mobile.path.makeUrlAbsolute(b)?m=!0:a.preventDefault()),this.window.off(h.closeEvents),this.element.undelegate(h.closeLinkSelector,h.closeLinkEvents),this._close(m))},_bindContainerClose:function(){this.window.on(this.options.closeEvents,d.proxy(this,"_closePopup"))},widget:function(){return this._ui.container},open:function(a){var c,b,k,h,m,r=this,g=this.options;return d.mobile.popup.active||g.disabled?this:(d.mobile.popup.active=this,this._scrollTop=
this.window.scrollTop(),g.history?(m=d.mobile.navigate.history,b=d.mobile.dialogHashKey,k=d.mobile.activePage,h=k?k.hasClass("ui-dialog"):!1,this._myUrl=c=m.getActive().url,-1<c.indexOf(b)&&!h&&0<m.activeIndex?(r._open(a),r._bindContainerClose(),this):(-1!==c.indexOf(b)||h?c=d.mobile.path.parseLocation().hash+b:c+=-1<c.indexOf("#")?b:"#"+b,this.window.one("beforenavigate",function(c){c.preventDefault();r._open(a);r._bindContainerClose()}),this.urlAltered=!0,d.mobile.navigate(c,{role:"dialog"}),this)):
(r._open(a),r._bindContainerClose(),r.element.delegate(g.closeLinkSelector,g.closeLinkEvents,function(a){r.close();a.preventDefault()}),this))},close:function(){return d.mobile.popup.active!==this?this:(this._scrollTop=this.window.scrollTop(),this.options.history&&this.urlAltered?(d.mobile.back(),this.urlAltered=!1):this._closePopup(),this)}});d.mobile.popup.handleLink=function(a){var c,b=d.mobile.path,b=d(b.hashToSelector(b.parseUrl(a.attr("href")).hash)).first();0<b.length&&b.data("mobile-popup")&&
(c=a.offset(),b.popup("open",{x:c.left+a.outerWidth()/2,y:c.top+a.outerHeight()/2,transition:a.jqmData("transition"),positionTo:a.jqmData("position-to")}));setTimeout(function(){a.removeClass(d.mobile.activeBtnClass)},300)};d.mobile.document.on("pagebeforechange",function(a,b){"popup"===b.options.role&&(d.mobile.popup.handleLink(b.options.link),a.preventDefault())})})(F);(function(d,b){var h=function(a,c,b){a=a[b+"All"]().not(".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')").first();
a.length&&(c.blur().attr("tabindex","-1"),a.find("a").first().focus())};d.widget("mobile.selectmenu",d.mobile.selectmenu,{_create:function(){var a=this.options;return a.nativeMenu=a.nativeMenu||0<this.element.parents(":jqmData(role='popup'),:mobile-popup").length,this._super()},_handleSelectFocus:function(){this.element.blur();this.button.focus()},_handleKeydown:function(a){this._super(a);this._handleButtonVclickKeydown(a)},_handleButtonVclickKeydown:function(a){this.options.disabled||this.isOpen||
this.options.nativeMenu||("vclick"===a.type||a.keyCode&&(a.keyCode===d.mobile.keyCode.ENTER||a.keyCode===d.mobile.keyCode.SPACE))&&(this._decideFormat(),"overlay"===this.menuType?this.button.attr("href","#"+this.popupId).attr("data-"+(d.mobile.ns||"")+"rel","popup"):this.button.attr("href","#"+this.dialogId).attr("data-"+(d.mobile.ns||"")+"rel","dialog"),this.isOpen=!0)},_handleListFocus:function(a){var c="focusin"===a.type?{tabindex:"0",event:"vmouseover"}:{tabindex:"-1",event:"vmouseout"};d(a.target).attr("tabindex",
c.tabindex).trigger(c.event)},_handleListKeydown:function(a){var c=d(a.target),b=c.closest("li");switch(a.keyCode){case 38:return h(b,c,"prev"),!1;case 40:return h(b,c,"next"),!1;case 13:case 32:return c.trigger("click"),!1}},_handleMenuPageHide:function(){this._delayedTrigger();this.thisPage.page("bindRemove")},_handleHeaderCloseClick:function(){return"overlay"===this.menuType?(this.close(),!1):void 0},_handleListItemClick:function(a){var c=d(a.target).closest("li"),b=this.select[0].selectedIndex,
f=d.mobile.getAttribute(c,"option-index"),k=this._selectOptions().eq(f)[0];k.selected=this.isMultiple?!k.selected:!0;this.isMultiple&&c.find("a").toggleClass("ui-checkbox-on",k.selected).toggleClass("ui-checkbox-off",!k.selected);this.isMultiple||b===f||(this._triggerChange=!0);this.isMultiple?(this.select.trigger("change"),this.list.find("li:not(.ui-li-divider)").eq(f).find("a").first().focus()):this.close();a.preventDefault()},build:function(){var a,c,e,f,k,h,m,r,g,q,t,w,v,y,A,l,B,x=this.options;
return x.nativeMenu?this._super():(a=this.selectId,c=a+"-listbox",e=a+"-dialog",f=this.label,k=this.element.closest(".ui-page"),h=this.element[0].multiple,m=a+"-menu",r=x.theme?" data-"+d.mobile.ns+"theme='"+x.theme+"'":"",g=x.overlayTheme||x.theme||null,q=g?" data-"+d.mobile.ns+"overlay-theme='"+g+"'":"",t=x.dividerTheme&&h?" data-"+d.mobile.ns+"divider-theme='"+x.dividerTheme+"'":"",w=d("<div data-"+d.mobile.ns+"role='dialog' class='ui-selectmenu' id='"+e+"'"+r+q+"><div data-"+d.mobile.ns+"role='header'><div class='ui-title'></div></div><div data-"+
d.mobile.ns+"role='content'></div></div>"),v=d("<div"+r+q+" id='"+c+"' class='ui-selectmenu'></div>").insertAfter(this.select).popup(),y=d("<ul class='ui-selectmenu-list' id='"+m+"' role='listbox' aria-labelledby='"+this.buttonId+"'"+r+t+"></ul>").appendTo(v),A=d("<div class='ui-header ui-bar-"+(x.theme?x.theme:"inherit")+"'></div>").prependTo(v),l=d("<h1 class='ui-title'></h1>").appendTo(A),this.isMultiple&&(B=d("<a>",{role:"button",text:x.closeText,href:"#","class":"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"}).appendTo(A)),
d.extend(this,{selectId:a,menuId:m,popupId:c,dialogId:e,thisPage:k,menuPage:w,label:f,isMultiple:h,theme:x.theme,listbox:v,list:y,header:A,headerTitle:l,headerClose:B,menuPageContent:void 0,menuPageClose:void 0,placeholder:""}),this.refresh(),this._origTabIndex===b&&(this._origTabIndex=null===this.select[0].getAttribute("tabindex")?!1:this.select.attr("tabindex")),this.select.attr("tabindex","-1"),this._on(this.select,{focus:"_handleSelectFocus"}),this._on(this.button,{vclick:"_handleButtonVclickKeydown"}),
this.list.attr("role","listbox"),this._on(this.list,{focusin:"_handleListFocus",focusout:"_handleListFocus",keydown:"_handleListKeydown","click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)":"_handleListItemClick"}),this._on(this.menuPage,{pagehide:"_handleMenuPageHide"}),this._on(this.listbox,{popupafterclose:"_popupClosed"}),this.isMultiple&&this._on(this.headerClose,{click:"_handleHeaderCloseClick"}),this)},_popupClosed:function(){this.close();this._delayedTrigger()},_delayedTrigger:function(){this._triggerChange&&
this.element.trigger("change");this._triggerChange=!1},_isRebuildRequired:function(){var a=this.list.find("li");return this._selectOptions().not(".ui-screen-hidden").text()!==a.text()},selected:function(){return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )")},refresh:function(a){var c,b;return this.options.nativeMenu?this._super(a):(c=this,(a||this._isRebuildRequired())&&c._buildList(),b=this.selectedIndices(),c.setButtonText(),c.setButtonCount(),void c.list.find("li:not(.ui-li-divider)").find("a").removeClass(d.mobile.activeBtnClass).end().attr("aria-selected",
!1).each(function(a){var e=d(this);-1<d.inArray(a,b)?(e.attr("aria-selected",!0),c.isMultiple?e.find("a").removeClass("ui-checkbox-off").addClass("ui-checkbox-on"):e.hasClass("ui-screen-hidden")?e.next().find("a").addClass(d.mobile.activeBtnClass):e.find("a").addClass(d.mobile.activeBtnClass)):c.isMultiple&&e.find("a").removeClass("ui-checkbox-on").addClass("ui-checkbox-off")}))},close:function(){!this.options.disabled&&this.isOpen&&("page"===this.menuType?(this.menuPage.dialog("close"),this.list.appendTo(this.listbox)):
this.listbox.popup("close"),this._focusButton(),this.isOpen=!1)},open:function(){this.button.click()},_focusMenuItem:function(){var a=this.list.find("a."+d.mobile.activeBtnClass);0===a.length&&(a=this.list.find("li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')) a.ui-btn"));a.first().focus()},_decideFormat:function(){var a=this.window,c=this.list.parent().outerHeight(),b=a.scrollTop(),f=this.button.offset().top,a=a.height();c>a-80||!d.support.scrollTop?
(this.menuPage.appendTo(d.mobile.pageContainer).page(),this.menuPageContent=this.menuPage.find(".ui-content"),this.menuPageClose=this.menuPage.find(".ui-header a"),this.thisPage.unbind("pagehide.remove"),0===b&&f>a&&this.thisPage.one("pagehide",function(){d(this).jqmData("lastScroll",f)}),this.menuPage.one({pageshow:d.proxy(this,"_focusMenuItem"),pagehide:d.proxy(this,"close")}),this.menuType="page",this.menuPageContent.append(this.list),this.menuPage.find("div .ui-title").text(this.label.getEncodedText()||
this.placeholder)):(this.menuType="overlay",this.listbox.one({popupafteropen:d.proxy(this,"_focusMenuItem")}))},_buildList:function(){var a,c,b,f,k,h,m,r,g,q=this.options,t=this.placeholder,w=!0;var v="data-"+d.mobile.ns;var y=v+"option-index",A=v+"icon",z=v+"role",B=v+"placeholder",x=l.createDocumentFragment(),E=!1;this.list.empty().filter(".ui-listview").listview("destroy");v=this._selectOptions();var C=v.length;var D=this.select[0];for(c=0;C>c;c++,E=!1){var G=v[c];var H=d(G);H.hasClass("ui-screen-hidden")||
(b=G.parentNode,h=[],f=H.text(),k=l.createElement("a"),k.setAttribute("href","#"),k.appendChild(l.createTextNode(f)),b!==D&&"optgroup"===b.nodeName.toLowerCase()&&(m=b.getAttribute("label"),m!==a&&(r=l.createElement("li"),r.setAttribute(z,"list-divider"),r.setAttribute("role","option"),r.setAttribute("tabindex","-1"),r.appendChild(l.createTextNode(m)),x.appendChild(r),a=m)),!w||G.getAttribute("value")&&0!==f.length&&!H.jqmData("placeholder")||(w=!1,E=!0,null===G.getAttribute(B)&&(this._removePlaceholderAttr=
!0),G.setAttribute(B,!0),q.hidePlaceholderMenuItems&&h.push("ui-screen-hidden"),t!==f&&(t=this.placeholder=f)),g=l.createElement("li"),G.disabled&&(h.push("ui-state-disabled"),g.setAttribute("aria-disabled",!0)),g.setAttribute(y,c),g.setAttribute(A,"false"),E&&g.setAttribute(B,!0),g.className=h.join(" "),g.setAttribute("role","option"),k.setAttribute("tabindex","-1"),this.isMultiple&&d(k).addClass("ui-btn ui-checkbox-off ui-btn-icon-right"),g.appendChild(k),x.appendChild(g))}this.list[0].appendChild(x);
this.isMultiple||t.length?this.headerTitle.text(this.placeholder):this.header.addClass("ui-screen-hidden");this.list.listview()},_button:function(){return this.options.nativeMenu?this._super():d("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})},_destroy:function(){this.options.nativeMenu||(this.close(),this._origTabIndex!==b&&(!1!==this._origTabIndex?this.select.attr("tabindex",this._origTabIndex):this.select.removeAttr("tabindex")),this._removePlaceholderAttr&&
this._selectOptions().removeAttr("data-"+d.mobile.ns+"placeholder"),this.listbox.remove(),this.menuPage.remove());this._super()}})})(F);(function(d,b){function h(a){return"-"+a.toLowerCase()}var a={"ui-shadow":"shadow","ui-corner-all":"corners","ui-btn-inline":"inline","ui-shadow-icon":"iconshadow","ui-mini":"mini"},c=function(){var a=d.mobile.getAttribute.apply(this,arguments);return null==a?b:a},e=/[A-Z]/g;d.fn.buttonMarkup=function(f,k){var n,m,r,g=d.fn.buttonMarkup.defaults;for(n=0;n<this.length;n++){var q=
this[n];if(k)var t={alreadyEnhanced:!1,unknownClasses:[]};else{var w,v=q.className,y=!1,A=!0,l={icon:"",inline:!1,shadow:!1,corners:!1,iconshadow:!1,mini:!1},B=[],v=v.split(" ");for(w=0;w<v.length;w++){t=!0;var x=a[v[w]];x!==b?(t=!1,l[x]=!0):0===v[w].indexOf("ui-btn-icon-")?(t=!1,A=!1,l.iconpos=v[w].substring(12)):0===v[w].indexOf("ui-icon-")?(t=!1,l.icon=v[w].substring(8)):0===v[w].indexOf("ui-btn-")&&8===v[w].length?(t=!1,l.theme=v[w].substring(7)):"ui-btn"===v[w]&&(t=!1,y=!0);t&&B.push(v[w])}t=
(A&&(l.icon=""),{options:l,unknownClasses:B,alreadyEnhanced:y})}if(m=t,x=d.extend({},m.alreadyEnhanced?m.options:{},f),!m.alreadyEnhanced)for(r in g)x[r]===b&&(x[r]=c(q,r.replace(e,h)));t=q;x=d.extend({},g,x);w=(w=m.unknownClasses)?w:[];x=(w.push("ui-btn"),x.theme&&w.push("ui-btn-"+x.theme),x.icon&&(w=w.concat(["ui-icon-"+x.icon,"ui-btn-icon-"+x.iconpos]),x.iconshadow&&w.push("ui-shadow-icon")),x.inline&&w.push("ui-btn-inline"),x.shadow&&w.push("ui-shadow"),x.corners&&w.push("ui-corner-all"),x.mini&&
w.push("ui-mini"),w);t.className=x.join(" ");"button"!==q.tagName.toLowerCase()&&q.setAttribute("role","button")}return this};d.fn.buttonMarkup.defaults={icon:"",iconpos:"left",theme:null,inline:!1,shadow:!0,corners:!0,iconshadow:!1,mini:!1};d.extend(d.fn.buttonMarkup,{initSelector:"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)"})})(F);(function(d,b){d.widget("mobile.controlgroup",d.extend({options:{enhanced:!1,theme:null,
shadow:!1,corners:!0,excludeInvisible:!0,type:"vertical",mini:!1},_create:function(){var b=this.element,a=this.options,c=d.mobile.page.prototype.keepNativeSelector();d.fn.buttonMarkup&&this.element.find(d.fn.buttonMarkup.initSelector).not(c).buttonMarkup();d.each(this._childWidgets,d.proxy(function(a,b){d.mobile[b]&&this.element.find(d.mobile[b].initSelector).not(c)[b]()},this));d.extend(this,{_ui:null,_initialRefresh:!0});this._ui=a.enhanced?{groupLegend:b.children(".ui-controlgroup-label").children(),
childWrapper:b.children(".ui-controlgroup-controls")}:this._enhance()},_childWidgets:["checkboxradio","selectmenu","button"],_themeClassFromOption:function(b){return b?"none"===b?"":"ui-group-theme-"+b:""},_enhance:function(){var b=this.element,a=this.options,a={groupLegend:b.children("legend"),childWrapper:b.addClass("ui-controlgroup ui-controlgroup-"+("horizontal"===a.type?"horizontal":"vertical")+" "+this._themeClassFromOption(a.theme)+" "+(a.corners?"ui-corner-all ":"")+(a.mini?"ui-mini ":"")).wrapInner("<div class='ui-controlgroup-controls "+
(!0===a.shadow?"ui-shadow":"")+"'></div>").children()};return 0<a.groupLegend.length&&d("<div role='heading' class='ui-controlgroup-label'></div>").append(a.groupLegend).prependTo(b),a},_init:function(){this.refresh()},_setOptions:function(h){var a,c,e=this.element;return h.type!==b&&(e.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical").addClass("ui-controlgroup-"+("horizontal"===h.type?"horizontal":"vertical")),a=!0),h.theme!==b&&e.removeClass(this._themeClassFromOption(this.options.theme)).addClass(this._themeClassFromOption(h.theme)),
h.corners!==b&&e.toggleClass("ui-corner-all",h.corners),h.mini!==b&&e.toggleClass("ui-mini",h.mini),h.shadow!==b&&this._ui.childWrapper.toggleClass("ui-shadow",h.shadow),h.excludeInvisible!==b&&(this.options.excludeInvisible=h.excludeInvisible,a=!0),c=this._super(h),a&&this.refresh(),c},container:function(){return this._ui.childWrapper},refresh:function(){var b=this.container(),a=b.find(".ui-btn").not(".ui-slider-handle"),c=this._initialRefresh;d.mobile.checkboxradio&&b.find(":mobile-checkboxradio").checkboxradio("refresh");
this._addFirstLastClasses(a,this.options.excludeInvisible?this._getVisibles(a,c):a,c);this._initialRefresh=!1},_destroy:function(){var b,a,c=this.options;return c.enhanced?this:(b=this._ui,a=this.element.removeClass("ui-controlgroup ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini "+this._themeClassFromOption(c.theme)).find(".ui-btn").not(".ui-slider-handle"),this._removeFirstLastClasses(a),b.groupLegend.unwrap(),void b.childWrapper.children().unwrap())}},d.mobile.behaviors.addFirstLastClasses))})(F);
(function(d,b){d.widget("mobile.toolbar",{initSelector:":jqmData(role='footer'), :jqmData(role='header')",options:{theme:null,addBackBtn:!1,backBtnTheme:null,backBtnText:"Back"},_create:function(){var b=this.element.is(":jqmData(role='header')")?"header":"footer",a=this.element.closest(".ui-page");0===a.length&&(a=!1,this._on(this.document,{pageshow:"refresh"}));d.extend(this,{role:b,page:a,leftbtn:void 0,rightbtn:void 0});this.element.attr("role","header"===b?"banner":"contentinfo").addClass("ui-"+
b);this.refresh();this._setOptions(this.options)},_setOptions:function(h){if(h.addBackBtn!==b&&this._updateBackButton(),null!=h.backBtnTheme&&this.element.find(".ui-toolbar-back-btn").addClass("ui-btn ui-btn-"+h.backBtnTheme),h.backBtnText!==b&&this.element.find(".ui-toolbar-back-btn .ui-btn-text").text(h.backBtnText),h.theme!==b){var a=h.theme?h.theme:"inherit";this.element.removeClass("ui-bar-"+(this.options.theme?this.options.theme:"inherit")).addClass("ui-bar-"+a)}this._super(h)},refresh:function(){"header"===
this.role&&this._addHeaderButtonClasses();this.page||(this._setRelative(),"footer"===this.role?this.element.appendTo("body"):"header"===this.role&&this._updateBackButton());this._addHeadingClasses();this._btnMarkup()},_setRelative:function(){d("[data-"+d.mobile.ns+"role='page']").css({position:"relative"})},_btnMarkup:function(){this.element.children("a").filter(":not([data-"+d.mobile.ns+"role='none'])").attr("data-"+d.mobile.ns+"role","button");this.element.trigger("create")},_addHeaderButtonClasses:function(){var b=
this.element.children("a, button");this.leftbtn=b.hasClass("ui-btn-left")&&!b.hasClass("ui-toolbar-back-btn");this.rightbtn=b.hasClass("ui-btn-right");this.leftbtn=this.leftbtn||b.eq(0).not(".ui-btn-right,.ui-toolbar-back-btn").addClass("ui-btn-left").length;this.rightbtn=this.rightbtn||b.eq(1).addClass("ui-btn-right").length},_updateBackButton:function(){var b=this.options,a=b.backBtnTheme||b.theme;var c=this._backButton=this._backButton||{};this.options.addBackBtn&&"header"===this.role&&1<d(".ui-page").length&&
(this.page?this.page[0].getAttribute("data-"+d.mobile.ns+"url")!==d.mobile.path.stripHash(location.hash):d.mobile.navigate&&d.mobile.navigate.history&&0<d.mobile.navigate.history.activeIndex)&&!this.leftbtn?c.attached||(this.backButton=c.element=(c.element||d("<a role='button' href='javascript:void(0);' class='ui-btn ui-corner-all ui-shadow ui-btn-left "+(a?"ui-btn-"+a+" ":"")+"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' data-"+d.mobile.ns+"rel='back'>"+b.backBtnText+"</a>")).prependTo(this.element),
c.attached=!0):c.element&&(c.element.detach(),c.attached=!1)},_addHeadingClasses:function(){this.element.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading","aria-level":"1"})},_destroy:function(){this.element.children("h1, h2, h3, h4, h5, h6").removeClass("ui-title").removeAttr("role").removeAttr("aria-level");"header"===this.role&&(this.element.children("a, button").removeClass("ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all"),this.backButton&&this.backButton.remove());
this.element.removeClass("ui-bar-"+(this.options.theme?this.options.theme:"inherit"));this.element.removeClass("ui-"+this.role).removeAttr("role")}})})(F);(function(d,b){d.widget("mobile.toolbar",d.mobile.toolbar,{options:{position:null,visibleOnPageShow:!0,disablePageZoom:!0,transition:"slide",fullscreen:!1,tapToggle:!0,tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",hideDuringFocus:"input, textarea, select",
updatePagePadding:!0,trackPersistentToolbars:!0,supportBlacklist:function(){return!d.support.fixedPosition}},_create:function(){this._super();this.pagecontainer=d(":mobile-pagecontainer");"fixed"!==this.options.position||this.options.supportBlacklist()||this._makeFixed()},_makeFixed:function(){this.element.addClass("ui-"+this.role+"-fixed");this.updatePagePadding();this._addTransitionClass();this._bindPageEvents();this._bindToggleHandlers()},_setOptions:function(h){if("fixed"===h.position&&"fixed"!==
this.options.position&&this._makeFixed(),"fixed"===this.options.position&&!this.options.supportBlacklist()){var a=this.page?this.page:0<d(".ui-page-active").length?d(".ui-page-active"):d(".ui-page").eq(0);h.fullscreen!==b&&(h.fullscreen?(this.element.addClass("ui-"+this.role+"-fullscreen"),a.addClass("ui-page-"+this.role+"-fullscreen")):(this.element.removeClass("ui-"+this.role+"-fullscreen"),a.removeClass("ui-page-"+this.role+"-fullscreen").addClass("ui-page-"+this.role+"-fixed")))}this._super(h)},
_addTransitionClass:function(){var b=this.options.transition;b&&"none"!==b&&("slide"===b&&(b=this.element.hasClass("ui-header")?"slidedown":"slideup"),this.element.addClass(b))},_bindPageEvents:function(){var b=this.page?this.element.closest(".ui-page"):this.document;this._on(b,{pagebeforeshow:"_handlePageBeforeShow",webkitAnimationStart:"_handleAnimationStart",animationstart:"_handleAnimationStart",updatelayout:"_handleAnimationStart",pageshow:"_handlePageShow",pagebeforehide:"_handlePageBeforeHide"})},
_handlePageBeforeShow:function(){var b=this.options;b.disablePageZoom&&d.mobile.zoom.disable(!0);b.visibleOnPageShow||this.hide(!0)},_handleAnimationStart:function(){this.options.updatePagePadding&&this.updatePagePadding(this.page?this.page:".ui-page-active")},_handlePageShow:function(){this.updatePagePadding(this.page?this.page:".ui-page-active");this.options.updatePagePadding&&this._on(this.window,{throttledresize:"updatePagePadding"})},_handlePageBeforeHide:function(b,a){var c,e,f,k,h=this.options;
h.disablePageZoom&&d.mobile.zoom.enable(!0);h.updatePagePadding&&this._off(this.window,"throttledresize");h.trackPersistentToolbars&&(c=d(".ui-footer-fixed:jqmData(id)",this.page),e=d(".ui-header-fixed:jqmData(id)",this.page),f=c.length&&a.nextPage&&d(".ui-footer-fixed:jqmData(id='"+c.jqmData("id")+"')",a.nextPage)||d(),k=e.length&&a.nextPage&&d(".ui-header-fixed:jqmData(id='"+e.jqmData("id")+"')",a.nextPage)||d(),(f.length||k.length)&&(f.add(k).appendTo(d.mobile.pageContainer),a.nextPage.one("pageshow",
function(){k.prependTo(this);f.appendTo(this)})))},_visible:!0,updatePagePadding:function(h){var a=this.element,c="header"===this.role,e=parseFloat(a.css(c?"top":"bottom"));this.options.fullscreen||(h&&h.type===b&&h||this.page||a.closest(".ui-page"),h=this.page?this.page:".ui-page-active",d(h).css("padding-"+(c?"top":"bottom"),a.outerHeight()+e))},_useTransition:function(b){var a=this.element,c=this.window.scrollTop(),e=a.height(),a=this.page?a.closest(".ui-page").height():d(".ui-page-active").height(),
f=d.mobile.getScreenHeight();return!b&&(this.options.transition&&"none"!==this.options.transition&&("header"===this.role&&!this.options.fullscreen&&c>e||"footer"===this.role&&!this.options.fullscreen&&a-e>c+f)||this.options.fullscreen)},show:function(b){var a=this.element;this._useTransition(b)?a.removeClass("out ui-fixed-hidden").addClass("in").animationComplete(function(){a.removeClass("in")}):a.removeClass("ui-fixed-hidden");this._visible=!0},hide:function(b){var a=this.element,c="out"+("slide"===
this.options.transition?" reverse":"");this._useTransition(b)?a.addClass(c).removeClass("in").animationComplete(function(){a.addClass("ui-fixed-hidden").removeClass(c)}):a.addClass("ui-fixed-hidden").removeClass(c);this._visible=!1},toggle:function(){this[this._visible?"hide":"show"]()},_bindToggleHandlers:function(){var b,a,c=this,e=c.options,f=!0;(this.page?this.page:d(".ui-page")).bind("vclick",function(a){e.tapToggle&&!d(a.target).closest(e.tapToggleBlacklist).length&&c.toggle()}).bind("focusin focusout",
function(k){1025>screen.width&&d(k.target).is(e.hideDuringFocus)&&!d(k.target).closest(".ui-header-fixed, .ui-footer-fixed").length&&("focusout"!==k.type||f?"focusin"===k.type&&f&&(clearTimeout(b),f=!1,a=setTimeout(function(){c.hide()},0)):(f=!0,clearTimeout(a),b=setTimeout(function(){c.show()},0)))})},_setRelative:function(){"fixed"!==this.options.position&&d("[data-"+d.mobile.ns+"role='page']").css({position:"relative"})},_destroy:function(){var b,a,c,e,f=this.pagecontainer.pagecontainer("getActivePage");
this._super();"fixed"===this.options.position&&(a=0<d("body>.ui-"+this.role+"-fixed").add(f.find(".ui-"+this.options.role+"-fixed")).not(this.element).length,e=0<d("body>.ui-"+this.role+"-fixed").add(f.find(".ui-"+this.options.role+"-fullscreen")).not(this.element).length,this.element.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen in out ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden"),e||(b="ui-page-"+this.role+"-fullscreen"),a||(c="header"===this.role,b+=" ui-page-"+
this.role+"-fixed",f.css("padding-"+(c?"top":"bottom"),"")),f.removeClass(b))}})})(F);(function(d){d.widget("mobile.toolbar",d.mobile.toolbar,{_makeFixed:function(){this._super();this._workarounds()},_workarounds:function(){var b=navigator.userAgent,h=navigator.platform,a=b.match(/AppleWebKit\/([0-9]+)/),a=!!a&&a[1];if(-1<h.indexOf("iPhone")||-1<h.indexOf("iPad")||-1<h.indexOf("iPod"))b="ios";else{if(!(-1<b.indexOf("Android")))return;b="android"}"ios"===b?this._bindScrollWorkaround():"android"===
b&&a&&534>a&&(this._bindScrollWorkaround(),this._bindListThumbWorkaround())},_viewportOffset:function(){var b=this.element,h=b.hasClass("ui-header"),a=Math.abs(b.offset().top-this.window.scrollTop());return h||(a=Math.round(a-this.window.height()+b.outerHeight())-60),a},_bindScrollWorkaround:function(){var b=this;this._on(this.window,{scrollstop:function(){2<b._viewportOffset()&&b._visible&&b._triggerRedraw()}})},_bindListThumbWorkaround:function(){this.element.closest(".ui-page").addClass("ui-android-2x-fixed")},
_triggerRedraw:function(){var b=parseFloat(d(".ui-page-active").css("padding-bottom"));d(".ui-page-active").css("padding-bottom",b+1+"px");setTimeout(function(){d(".ui-page-active").css("padding-bottom",b+"px")},0)},destroy:function(){this._super();this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix")}})})(F);(function(d,b){var h=d.mobile.browser.oldIE&&8>=d.mobile.browser.oldIE,a=d("<div class='ui-popup-arrow-guide'></div><div class='ui-popup-arrow-container"+(h?" ie":"")+"'><div class='ui-popup-arrow'></div></div>");
d.widget("mobile.popup",d.mobile.popup,{options:{arrow:""},_create:function(){var a=this._super();return this.options.arrow&&(this._ui.arrow=this._addArrow()),a},_addArrow:function(){var c,b=this.options,f=a.clone();var k=f.eq(0);var f=f.eq(1),h=f.children();k={arEls:f.add(k),gd:k,ct:f,ar:h};return c=this._themeClassFromOption("ui-body-",b.theme),k.ar.addClass(c+(b.shadow?" ui-overlay-shadow":"")),k.arEls.hide().appendTo(this.element),k},_unenhance:function(){var a=this._ui.arrow;return a&&a.arEls.remove(),
this._super()},_tryAnArrow:function(a,b,f,k,h){var c,e,n,d={},g={};return k.arFull[a.dimKey]>k.guideDims[a.dimKey]?h:(d[a.fst]=f[a.fst]+(k.arHalf[a.oDimKey]+k.menuHalf[a.oDimKey])*a.offsetFactor-k.contentBox[a.fst]+(k.clampInfo.menuSize[a.oDimKey]-k.contentBox[a.oDimKey])*a.arrowOffsetFactor,d[a.snd]=f[a.snd],c=k.result||this._calculateFinalLocation(d,k.clampInfo),e={x:c.left,y:c.top},g[a.fst]=e[a.fst]+k.contentBox[a.fst]+a.tipOffset,g[a.snd]=Math.max(c[a.prop]+k.guideOffset[a.prop]+k.arHalf[a.dimKey],
Math.min(c[a.prop]+k.guideOffset[a.prop]+k.guideDims[a.dimKey]-k.arHalf[a.dimKey],f[a.snd])),n=Math.abs(f.x-g.x)+Math.abs(f.y-g.y),(!h||n<h.diff)&&(g[a.snd]-=k.arHalf[a.dimKey]+c[a.prop]+k.contentBox[a.snd],h={dir:b,diff:n,result:c,posProp:a.prop,posVal:g[a.snd]}),h)},_getPlacementState:function(a){var c,b,k=this._ui.arrow;a={clampInfo:this._clampPopupWidth(!a),arFull:{cx:k.ct.width(),cy:k.ct.height()},guideDims:{cx:k.gd.width(),cy:k.gd.height()},guideOffset:k.gd.offset()};return c=this.element.offset(),
k.gd.css({left:0,top:0,right:0,bottom:0}),b=k.gd.offset(),a.contentBox={x:b.left-c.left,y:b.top-c.top,cx:k.gd.width(),cy:k.gd.height()},k.gd.removeAttr("style"),a.guideOffset={left:a.guideOffset.left-c.left,top:a.guideOffset.top-c.top},a.arHalf={cx:a.arFull.cx/2,cy:a.arFull.cy/2},a.menuHalf={cx:a.clampInfo.menuSize.cx/2,cy:a.clampInfo.menuSize.cy/2},a},_placementCoords:function(a){var c,b,k,n=this.options.arrow,m=this._ui.arrow;return m?(m.arEls.show(),c=this._getPlacementState(!0),k={l:{fst:"x",
snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:1,tipOffset:-c.arHalf.cx,arrowOffsetFactor:0},r:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:-1,tipOffset:c.arHalf.cx+c.contentBox.cx,arrowOffsetFactor:1},b:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:-1,tipOffset:c.arHalf.cy+c.contentBox.cy,arrowOffsetFactor:1},t:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:1,tipOffset:-c.arHalf.cy,arrowOffsetFactor:0}},d.each((!0===n?"l,t,r,b":
n).split(","),d.proxy(function(e,f){b=this._tryAnArrow(k[f],f,a,c,b)},this)),b?(m.ct.removeClass("ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b").addClass("ui-popup-arrow-"+b.dir).removeAttr("style").css(b.posProp,b.posVal).show(),h||(this.element.offset(),m.ct.offset()),b.result):(m.arEls.hide(),this._super(a))):this._super(a)},_setOptions:function(a){var c,f=this.options.theme,k=this._ui.arrow,h=this._super(a);if(a.arrow!==b){if(!k&&a.arrow)return void(this._ui.arrow=this._addArrow());
k&&!a.arrow&&(k.arEls.remove(),this._ui.arrow=null)}return k=this._ui.arrow,k&&(a.theme!==b&&(f=this._themeClassFromOption("ui-body-",f),c=this._themeClassFromOption("ui-body-",a.theme),k.ar.removeClass(f).addClass(c)),a.shadow!==b&&k.ar.toggleClass("ui-overlay-shadow",a.shadow)),h},_destroy:function(){var a=this._ui.arrow;return a&&a.arEls.remove(),this._super()}})})(F);(function(d,b){d.widget("mobile.panel",{options:{classes:{panel:"ui-panel",panelOpen:"ui-panel-open",panelClosed:"ui-panel-closed",
panelFixed:"ui-panel-fixed",panelInner:"ui-panel-inner",modal:"ui-panel-dismiss",modalOpen:"ui-panel-dismiss-open",pageContainer:"ui-panel-page-container",pageWrapper:"ui-panel-wrapper",pageFixedToolbar:"ui-panel-fixed-toolbar",pageContentPrefix:"ui-panel-page-content",animate:"ui-panel-animate"},animate:!0,theme:null,position:"left",dismissible:!0,display:"reveal",swipeClose:!0,positionFixed:!1},_closeLink:null,_parentPage:null,_page:null,_modal:null,_panelInner:null,_wrapper:null,_fixedToolbars:null,
_create:function(){var b=this.element,a=b.closest(".ui-page, :jqmData(role='page')");d.extend(this,{_closeLink:b.find(":jqmData(rel='close')"),_parentPage:0<a.length?a:!1,_openedPage:null,_page:this._getPage,_panelInner:this._getPanelInner(),_fixedToolbars:this._getFixedToolbars});"overlay"!==this.options.display&&this._getWrapper();this._addPanelClasses();d.support.cssTransform3d&&this.options.animate&&this.element.addClass(this.options.classes.animate);this._bindUpdateLayout();this._bindCloseEvents();
this._bindLinkListeners();this._bindPageEvents();this.options.dismissible&&this._createModal();this._bindSwipeEvents()},_getPanelInner:function(){var b=this.element.find("."+this.options.classes.panelInner);return 0===b.length&&(b=this.element.children().wrapAll("<div class='"+this.options.classes.panelInner+"' />").parent()),b},_createModal:function(){var b=this,a=b._parentPage?b._parentPage.parent():b.element.parent();b._modal=d("<div class='"+b.options.classes.modal+"'></div>").on("mousedown",
function(){b.close()}).appendTo(a)},_getPage:function(){return this._openedPage||this._parentPage||d("."+d.mobile.activePageClass)},_getWrapper:function(){var b=this._page().find("."+this.options.classes.pageWrapper);0===b.length&&(b=this._page().children(".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)").wrapAll("<div class='"+this.options.classes.pageWrapper+"'></div>").parent());this._wrapper=b},_getFixedToolbars:function(){var b=d("body").children(".ui-header-fixed, .ui-footer-fixed"),
a=this._page().find(".ui-header-fixed, .ui-footer-fixed");return b.add(a).addClass(this.options.classes.pageFixedToolbar)},_getPosDisplayClasses:function(b){return b+"-position-"+this.options.position+" "+b+"-display-"+this.options.display},_getPanelClasses:function(){var b=this.options.classes.panel+" "+this._getPosDisplayClasses(this.options.classes.panel)+" "+this.options.classes.panelClosed+" ui-body-"+(this.options.theme?this.options.theme:"inherit");return this.options.positionFixed&&(b+=" "+
this.options.classes.panelFixed),b},_addPanelClasses:function(){this.element.addClass(this._getPanelClasses())},_handleCloseClick:function(b){b.isDefaultPrevented()||this.close()},_bindCloseEvents:function(){this._on(this._closeLink,{click:"_handleCloseClick"});this._on({"click a:jqmData(ajax='false')":"_handleCloseClick"})},_positionPanel:function(b){var a=this._panelInner.outerHeight(),c=a>d.mobile.getScreenHeight();c||!this.options.positionFixed?(c&&(this._unfixPanel(),d.mobile.resetActivePageHeight(a)),
b&&this.window[0].scrollTo(0,d.mobile.defaultHomeScroll)):this._fixPanel()},_bindFixListener:function(){this._on(d(g),{throttledresize:"_positionPanel"})},_unbindFixListener:function(){this._off(d(g),"throttledresize")},_unfixPanel:function(){this.options.positionFixed&&d.support.fixedPosition&&this.element.removeClass(this.options.classes.panelFixed)},_fixPanel:function(){this.options.positionFixed&&d.support.fixedPosition&&this.element.addClass(this.options.classes.panelFixed)},_bindUpdateLayout:function(){var b=
this;b.element.on("updatelayout",function(){b._open&&b._positionPanel()})},_bindLinkListeners:function(){this._on("body",{"click a":"_handleClick"})},_handleClick:function(h){var a,c=this.element.attr("id");h.currentTarget.href.split("#")[1]===c&&c!==b&&(h.preventDefault(),a=d(h.target),a.hasClass("ui-btn")&&(a.addClass(d.mobile.activeBtnClass),this.element.one("panelopen panelclose",function(){a.removeClass(d.mobile.activeBtnClass)})),this.toggle())},_bindSwipeEvents:function(){var b=this,a=b._modal?
b.element.add(b._modal):b.element;b.options.swipeClose&&("left"===b.options.position?a.on("swipeleft.panel",function(){b.close()}):a.on("swiperight.panel",function(){b.close()}))},_bindPageEvents:function(){var b=this;this.document.on("panelbeforeopen",function(a){b._open&&a.target!==b.element[0]&&b.close()}).on("keyup.panel",function(a){27===a.keyCode&&b._open&&b.close()});this._parentPage||"overlay"===this.options.display||this._on(this.document,{pageshow:function(){this._openedPage=null;this._getWrapper()}});
b._parentPage?this.document.on("pagehide",":jqmData(role='page')",function(){b._open&&b.close(!0)}):this.document.on("pagebeforehide",function(){b._open&&b.close(!0)})},_open:!1,_pageContentOpenClasses:null,_modalOpenClasses:null,open:function(b){if(!this._open){var a=this,c=a.options,e=function(){a._off(a.document,"panelclose");a._page().jqmData("panel","open");d.support.cssTransform3d&&c.animate&&"overlay"!==c.display&&(a._wrapper.addClass(c.classes.animate),a._fixedToolbars().addClass(c.classes.animate));
!b&&d.support.cssTransform3d&&c.animate?(a._wrapper||a.element).animationComplete(f,"transition"):setTimeout(f,0);c.theme&&"overlay"!==c.display&&a._page().parent().addClass(c.classes.pageContainer+"-themed "+c.classes.pageContainer+"-"+c.theme);a.element.removeClass(c.classes.panelClosed).addClass(c.classes.panelOpen);a._positionPanel(!0);a._pageContentOpenClasses=a._getPosDisplayClasses(c.classes.pageContentPrefix);"overlay"!==c.display&&(a._page().parent().addClass(c.classes.pageContainer),a._wrapper.addClass(a._pageContentOpenClasses),
a._fixedToolbars().addClass(a._pageContentOpenClasses));a._modalOpenClasses=a._getPosDisplayClasses(c.classes.modal)+" "+c.classes.modalOpen;a._modal&&a._modal.addClass(a._modalOpenClasses).height(Math.max(a._modal.height(),a.document.height()))},f=function(){a._open&&("overlay"!==c.display&&(a._wrapper.addClass(c.classes.pageContentPrefix+"-open"),a._fixedToolbars().addClass(c.classes.pageContentPrefix+"-open")),a._bindFixListener(),a._trigger("open"),a._openedPage=a._page())};a._trigger("beforeopen");
"open"===a._page().jqmData("panel")?a._on(a.document,{panelclose:e}):e();a._open=!0}},close:function(b){if(this._open){var a=this,c=this.options,e=function(){c.theme&&"overlay"!==c.display&&a._page().parent().removeClass(c.classes.pageContainer+"-themed "+c.classes.pageContainer+"-"+c.theme);a.element.addClass(c.classes.panelClosed);"overlay"!==c.display&&(a._page().parent().removeClass(c.classes.pageContainer),a._wrapper.removeClass(c.classes.pageContentPrefix+"-open"),a._fixedToolbars().removeClass(c.classes.pageContentPrefix+
"-open"));d.support.cssTransform3d&&c.animate&&"overlay"!==c.display&&(a._wrapper.removeClass(c.classes.animate),a._fixedToolbars().removeClass(c.classes.animate));a._fixPanel();a._unbindFixListener();d.mobile.resetActivePageHeight();a._page().jqmRemoveData("panel");a._trigger("close");a._openedPage=null};a._trigger("beforeclose");a.element.removeClass(c.classes.panelOpen);"overlay"!==c.display&&(a._wrapper.removeClass(a._pageContentOpenClasses),a._fixedToolbars().removeClass(a._pageContentOpenClasses));
!b&&d.support.cssTransform3d&&c.animate?(a._wrapper||a.element).animationComplete(e,"transition"):setTimeout(e,0);a._modal&&a._modal.removeClass(a._modalOpenClasses).height("");a._open=!1}},toggle:function(){this[this._open?"close":"open"]()},_destroy:function(){var b,a=this.options,c=1<d("body > :mobile-panel").length+d.mobile.activePage.find(":mobile-panel").length;"overlay"!==a.display&&(b=d("body > :mobile-panel").add(d.mobile.activePage.find(":mobile-panel")),0===b.not(".ui-panel-display-overlay").not(this.element).length&&
this._wrapper.children().unwrap(),this._open&&(this._fixedToolbars().removeClass(a.classes.pageContentPrefix+"-open"),d.support.cssTransform3d&&a.animate&&this._fixedToolbars().removeClass(a.classes.animate),this._page().parent().removeClass(a.classes.pageContainer),a.theme&&this._page().parent().removeClass(a.classes.pageContainer+"-themed "+a.classes.pageContainer+"-"+a.theme)));c||this.document.off("panelopen panelclose");this._open&&this._page().jqmRemoveData("panel");this._panelInner.children().unwrap();
this.element.removeClass([this._getPanelClasses(),a.classes.panelOpen,a.classes.animate].join(" ")).off("swipeleft.panel swiperight.panel").off("panelbeforeopen").off("panelhide").off("keyup.panel").off("updatelayout");this._modal&&this._modal.remove()}})})(F);(function(d,b){d.widget("mobile.table",{options:{classes:{table:"ui-table"},enhanced:!1},_create:function(){this.options.enhanced||this.element.addClass(this.options.classes.table);d.extend(this,{headers:b,allHeaders:b});this._refresh(!0)},
_setHeaders:function(){var b=this.element.find("thead tr");this.headers=this.element.find("tr:eq(0)").children();this.allHeaders=this.headers.add(b.children())},refresh:function(){this._refresh()},rebuild:d.noop,_refresh:function(){var b=this.element,a=b.find("thead tr");this._setHeaders();a.each(function(){var c=0;d(this).children().each(function(){var e,f=parseInt(this.getAttribute("colspan"),10),k=":nth-child("+(c+1)+")";if(this.setAttribute("data-"+d.mobile.ns+"colstart",c+1),f)for(e=0;f-1>e;e++)c++,
k+=", :nth-child("+(c+1)+")";d(this).jqmData("cells",b.find("tr").not(a.eq(0)).not(this).children(k));c++})})}})})(F);(function(d){d.widget("mobile.table",d.mobile.table,{options:{mode:"columntoggle",columnBtnTheme:null,columnPopupTheme:null,columnBtnText:"Columns...",classes:d.extend(d.mobile.table.prototype.options.classes,{popup:"ui-table-columntoggle-popup",columnBtn:"ui-table-columntoggle-btn",priorityPrefix:"ui-table-priority-",columnToggleTable:"ui-table-columntoggle"})},_create:function(){this._super();
"columntoggle"===this.options.mode&&(d.extend(this,{_menu:null}),this.options.enhanced?(this._menu=d(this.document[0].getElementById(this._id()+"-popup")).children().first(),this._addToggles(this._menu,!0)):(this._menu=this._enhanceColToggle(),this.element.addClass(this.options.classes.columnToggleTable)),this._setupEvents(),this._setToggleState())},_id:function(){return this.element.attr("id")||this.widgetName+this.uuid},_setupEvents:function(){this._on(this.window,{throttledresize:"_setToggleState"});
this._on(this._menu,{"change input":"_menuInputChange"})},_addToggles:function(b,h){var a,c=0,e=this.options,f=b.controlgroup("container");h?a=b.find("input"):f.empty();this.headers.not("td").each(function(){var b,n,m=d(this),r=d.mobile.getAttribute(this,"priority");r&&(n=m.add(m.jqmData("cells")),n.addClass(e.classes.priorityPrefix+r),b=(h?a.eq(c++):d("<label><input type='checkbox' checked />"+(m.children("abbr").first().attr("title")||m.text())+"</label>").appendTo(f).children(0).checkboxradio({theme:e.columnPopupTheme})).jqmData("header",
m).jqmData("cells",n),m.jqmData("input",b))});h||b.controlgroup("refresh")},_menuInputChange:function(b){b=d(b.target);var h=b[0].checked;b.jqmData("cells").toggleClass("ui-table-cell-hidden",!h).toggleClass("ui-table-cell-visible",h)},_unlockCells:function(b){b.removeClass("ui-table-cell-hidden ui-table-cell-visible")},_enhanceColToggle:function(){var b,h,a,c,e=this.element,f=this.options,k=d.mobile.ns,n=this.document[0].createDocumentFragment();return b=this._id()+"-popup",h=d("<a href='#"+b+"' class='"+
f.classes.columnBtn+" ui-btn ui-btn-"+(f.columnBtnTheme||"a")+" ui-corner-all ui-shadow ui-mini' data-"+k+"rel='popup'>"+f.columnBtnText+"</a>"),a=d("<div class='"+f.classes.popup+"' id='"+b+"'></div>"),c=d("<fieldset></fieldset>").controlgroup(),this._addToggles(c,!1),c.appendTo(a),n.appendChild(a[0]),n.appendChild(h[0]),e.before(n),a.popup(),c},rebuild:function(){this._super();"columntoggle"===this.options.mode&&this._refresh(!1)},_refresh:function(b){if(this._super(b),!b&&"columntoggle"===this.options.mode){var h=
this.headers;var a=[];this._menu.find("input").each(function(){var c=d(this),b=c.jqmData("header"),b=h.index(b[0]);-1<b&&!c.prop("checked")&&a.push(b)});this._unlockCells(this.element.find(".ui-table-cell-hidden, .ui-table-cell-visible"));this._addToggles(this._menu,b);for(b=a.length-1;-1<b;b--)h.eq(a[b]).jqmData("input").prop("checked",!1).checkboxradio("refresh").trigger("change")}},_setToggleState:function(){this._menu.find("input").each(function(){var b=d(this);this.checked="table-cell"===b.jqmData("cells").eq(0).css("display");
b.checkboxradio("refresh")})},_destroy:function(){this._super()}})})(F);(function(d){d.widget("mobile.table",d.mobile.table,{options:{mode:"reflow",classes:d.extend(d.mobile.table.prototype.options.classes,{reflowTable:"ui-table-reflow",cellLabels:"ui-table-cell-label"})},_create:function(){this._super();"reflow"===this.options.mode&&(this.options.enhanced||(this.element.addClass(this.options.classes.reflowTable),this._updateReflow()))},rebuild:function(){this._super();"reflow"===this.options.mode&&
this._refresh(!1)},_refresh:function(b){this._super(b);b||"reflow"!==this.options.mode||this._updateReflow()},_updateReflow:function(){var b=this,h=this.options;d(b.allHeaders.get().reverse()).each(function(){var a,c,e=d(this).jqmData("cells"),f=d.mobile.getAttribute(this,"colstart"),k=e.not(this).filter("thead th").length&&" ui-table-cell-label-top",n=d(this).clone().contents();0<n.length&&(k?(a=parseInt(this.getAttribute("colspan"),10),c="",a&&(c="td:nth-child("+a+"n + "+f+")"),b._addLabels(e.filter(c),
h.classes.cellLabels+k,n)):b._addLabels(e,h.classes.cellLabels,n))})},_addLabels:function(b,h,a){1===a.length&&"abbr"===a[0].nodeName.toLowerCase()&&(a=a.eq(0).attr("title"));b.not(":has(b."+h+")").prepend(d("<b class='"+h+"'></b>").append(a))}})})(F);(function(d,b){var h=function(a,c){return-1===(""+(d.mobile.getAttribute(this,"filtertext")||d(this).text())).toLowerCase().indexOf(c)};d.widget("mobile.filterable",{initSelector:":jqmData(filter='true')",options:{filterReveal:!1,filterCallback:h,enhanced:!1,
input:null,children:"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"},_create:function(){var a=this.options;d.extend(this,{_search:null,_timer:0});this._setInput(a.input);a.enhanced||this._filterItems((this._search&&this._search.val()||"").toLowerCase())},_onKeyUp:function(){var a,c,b=this._search;b&&(a=b.val().toLowerCase(),c=d.mobile.getAttribute(b[0],"lastval")+"",!c||c!==
a)&&(this._timer&&(g.clearTimeout(this._timer),this._timer=0),this._timer=this._delay(function(){return!1===this._trigger("beforefilter",null,{input:b})?!1:(b[0].setAttribute("data-"+d.mobile.ns+"lastval",a),this._filterItems(a),void(this._timer=0))},250))},_getFilterableItems:function(){var a=this.element,c=this.options.children,c=c?d.isFunction(c)?c():c.nodeName?d(c):c.jquery?c:this.element.find(c):{length:0};return 0===c.length&&(c=a.children()),c},_filterItems:function(a){var c,b=[],f=[],k=this.options,
n=this._getFilterableItems();if(null!=a){var m=k.filterCallback||h;var r=n.length;for(c=0;r>c;c++){var g=m.call(n[c],c,a)?f:b;g.push(n[c])}}0===f.length?n[k.filterReveal&&0===a.length?"addClass":"removeClass"]("ui-screen-hidden"):(d(f).addClass("ui-screen-hidden"),d(b).removeClass("ui-screen-hidden"));this._refreshChildWidget();this._trigger("filter",null,{items:n})},_refreshChildWidget:function(){var a,c=["collapsibleset","selectmenu","controlgroup","listview"];for(a=c.length-1;-1<a;a--){var b=c[a];
d.mobile[b]&&(b=this.element.data("mobile-"+b),b&&d.isFunction(b.refresh)&&b.refresh())}},_setInput:function(a){var c=this._search;this._timer&&(g.clearTimeout(this._timer),this._timer=0);c&&(this._off(c,"keyup change input"),c=null);a&&(c=a.jquery?a:a.nodeName?d(a):this.document.find(a),this._on(c,{keydown:"_onKeyDown",keypress:"_onKeyPress",keyup:"_onKeyUp",change:"_onKeyUp",input:"_onKeyUp"}));this._search=c},_onKeyDown:function(a){a.keyCode===d.ui.keyCode.ENTER&&(a.preventDefault(),this._preventKeyPress=
!0)},_onKeyPress:function(a){this._preventKeyPress&&(a.preventDefault(),this._preventKeyPress=!1)},_setOptions:function(a){var c=!(a.filterReveal===b&&a.filterCallback===b&&a.children===b);this._super(a);a.input!==b&&(this._setInput(a.input),c=!0);c&&this.refresh()},_destroy:function(){var a=this.options,c=this._getFilterableItems();a.enhanced?c.toggleClass("ui-screen-hidden",a.filterReveal):c.removeClass("ui-screen-hidden")},refresh:function(){this._timer&&(g.clearTimeout(this._timer),this._timer=
0);this._filterItems((this._search&&this._search.val()||"").toLowerCase())}})})(F);(function(d,b){var h=function(a,c){return function(b){c.call(this,b);a._syncTextInputOptions(b)}},a=/(^|\s)ui-li-divider(\s|$)/,c=d.mobile.filterable.prototype.options.filterCallback;d.mobile.filterable.prototype.options.filterCallback=function(b,f){return!this.className.match(a)&&c.call(this,b,f)};d.widget("mobile.filterable",d.mobile.filterable,{options:{filterPlaceholder:"Filter items...",filterTheme:null},_create:function(){var a,
c,b=this.element,h=["collapsibleset","selectmenu","controlgroup","listview"],m={};this._super();d.extend(this,{_widget:null});for(a=h.length-1;-1<a;a--)if(c=h[a],d.mobile[c]){if(this._setWidget(b.data("mobile-"+c)))break;m[c+"create"]="_handleCreate"}this._widget||this._on(b,m)},_handleCreate:function(a){this._setWidget(this.element.data("mobile-"+a.type.substring(0,a.type.length-6)))},_trigger:function(a,c,b){return this._widget&&"mobile-listview"===this._widget.widgetFullName&&"beforefilter"===
a&&this._widget._trigger("beforefilter",c,b),this._super(a,c,b)},_setWidget:function(a){return!this._widget&&a&&(this._widget=a,this._widget._setOptions=h(this,this._widget._setOptions)),this._widget&&(this._syncTextInputOptions(this._widget.options),"listview"===this._widget.widgetName&&(this._widget.options.hideDividers=!0,this._widget.element.listview("refresh"))),!!this._widget},_isSearchInternal:function(){return this._search&&this._search.jqmData("ui-filterable-"+this.uuid+"-internal")},_setInput:function(a){var c=
this.options,b=!0,e={};if(!a){if(this._isSearchInternal())return;b=!1;a=d("<input data-"+d.mobile.ns+"type='search' placeholder='"+c.filterPlaceholder+"'></input>").jqmData("ui-filterable-"+this.uuid+"-internal",!0);d("<form class='ui-filterable'></form>").append(a).submit(function(c){c.preventDefault();a.blur()}).insertBefore(this.element);d.mobile.textinput&&(null!=this.options.filterTheme&&(e.theme=c.filterTheme),a.textinput(e))}this._super(a);this._isSearchInternal()&&b&&this._search.attr("placeholder",
this.options.filterPlaceholder)},_setOptions:function(a){var c=this._super(a);return a.filterPlaceholder!==b&&this._isSearchInternal()&&this._search.attr("placeholder",a.filterPlaceholder),a.filterTheme!==b&&this._search&&d.mobile.textinput&&this._search.textinput("option","theme",a.filterTheme),c},_refreshChildWidget:function(){this._refreshingChildWidget=!0;this._superApply(arguments);this._refreshingChildWidget=!1},refresh:function(){this._refreshingChildWidget||this._superApply(arguments)},_destroy:function(){this._isSearchInternal()&&
this._search.remove();this._super()},_syncTextInputOptions:function(a){var c,e={};if(this._isSearchInternal()&&d.mobile.textinput){for(c in d.mobile.textinput.prototype.options)a[c]!==b&&(e[c]="theme"===c&&null!=this.options.filterTheme?this.options.filterTheme:a[c]);this._search.textinput("option",e)}}});d.widget("mobile.listview",d.mobile.listview,{options:{filter:!1},_create:function(){return!0!==this.options.filter||this.element.data("mobile-filterable")||this.element.filterable(),this._super()},
refresh:function(){var a;this._superApply(arguments);!0===this.options.filter&&(a=this.element.data("mobile-filterable"),a&&a.refresh())}})})(F);(function(d,b){function h(a){return 1<a.hash.length&&decodeURIComponent(a.href.replace(c,""))===decodeURIComponent(location.href.replace(c,""))}var a=0,c=/#.*$/;d.widget("ui.tabs",{version:"fadf2b312a05040436451c64bbfaf4814bc62c56",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,
beforeLoad:null,load:null},_create:function(){var a=this,c=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){d(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){d(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();c.active=this._initialActive();
d.isArray(c.disabled)&&(c.disabled=d.unique(c.disabled.concat(d.map(this.tabs.filter(".ui-state-disabled"),function(c){return a.tabs.index(c)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(c.active):d();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var a=this.options.active,c=this.options.collapsible,b=location.hash.substring(1);return null===a&&(b&&this.tabs.each(function(c,e){return d(e).attr("aria-controls")===b?(a=c,
!1):void 0}),null===a&&(a=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===a||-1===a)&&(a=this.tabs.length?0:!1)),!1!==a&&(a=this.tabs.index(this.tabs.eq(a)),-1===a&&(a=c?!1:0)),!c&&!1===a&&this.anchors.length&&(a=0),a},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):d()}},_tabKeydown:function(a){var c=d(this.document[0].activeElement).closest("li"),b=this.tabs.index(c),e=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:b++;
break;case d.ui.keyCode.UP:case d.ui.keyCode.LEFT:e=!1;b--;break;case d.ui.keyCode.END:b=this.anchors.length-1;break;case d.ui.keyCode.HOME:b=0;break;case d.ui.keyCode.SPACE:return a.preventDefault(),clearTimeout(this.activating),void this._activate(b);case d.ui.keyCode.ENTER:return a.preventDefault(),clearTimeout(this.activating),void this._activate(b===this.options.active?!1:b);default:return}a.preventDefault();clearTimeout(this.activating);b=this._focusNextTab(b,e);a.ctrlKey||(c.attr("aria-selected",
"false"),this.tabs.eq(b).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",b)},this.delay))}},_panelKeydown:function(a){this._handlePageNav(a)||a.ctrlKey&&a.keyCode===d.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){return a.altKey&&a.keyCode===d.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):a.altKey&&a.keyCode===d.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+
1,!0)),!0):void 0},_findNextTab:function(a,c){for(var b=this.tabs.length-1;-1!==d.inArray((a>b&&(a=0),0>a&&(a=b),a),this.options.disabled);)a=c?a+1:a-1;return a},_focusNextTab:function(a,c){return a=this._findNextTab(a,c),this.tabs.eq(a).focus(),a},_setOption:function(a,c){return"active"===a?void this._activate(c):"disabled"===a?void this._setupDisabled(c):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===
a&&this._setupEvents(c),void("heightStyle"===a&&this._setupHeightStyle(c)))},_tabId:function(c){return c.attr("aria-controls")||"ui-tabs-"+ ++a},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var a=this.options,c=this.tablist.children(":has(a[href])");a.disabled=d.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==a.active&&this.anchors.length?this.active.length&&!d.contains(this.tablist[0],
this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=d()):this._activate(this._findNextTab(Math.max(0,a.active-1),!1)):a.active=this.tabs.index(this.active):(a.active=!1,this.active=d());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false",
"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",
tabIndex:-1});this.anchors=this.tabs.map(function(){return d("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=d();this.anchors.each(function(c,b){var e,f,k,g=d(b).uniqueId().attr("id"),q=d(b).closest("li"),t=q.attr("aria-controls");h(b)?(e=b.hash,f=a.element.find(a._sanitizeSelector(e))):(k=a._tabId(q),e="#"+k,f=a.element.find(e),f.length||(f=a._createPanel(k),f.insertAfter(a.panels[c-1]||a.tablist)),f.attr("aria-live","polite"));f.length&&(a.panels=a.panels.add(f));
t&&q.data("ui-tabs-aria-controls",t);q.attr({"aria-controls":e.substring(1),"aria-labelledby":g});f.attr("aria-labelledby",g)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(a){return d("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(a){d.isArray(a)&&(a.length?a.length===this.anchors.length&&
(a=!0):a=!1);for(var c,b=0;c=this.tabs[b];b++)!0===a||-1!==d.inArray(b,a)?d(c).addClass("ui-state-disabled").attr("aria-disabled","true"):d(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=a},_setupEvents:function(a){var c={click:function(a){a.preventDefault()}};a&&d.each(a.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,
{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var c,b=this.element.parent();"fill"===a?(c=b.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var a=d(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(c-=a.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=d(this).outerHeight(!0)}),this.panels.each(function(){d(this).height(Math.max(0,c-d(this).innerHeight()+
d(this).height()))}).css("overflow","auto")):"auto"===a&&(c=0,this.panels.each(function(){c=Math.max(c,d(this).height("").height())}).height(c))},_eventHandler:function(a){var c=this.options,b=this.active,e=d(a.currentTarget).closest("li"),h=e[0]===b[0],r=h&&c.collapsible,g=r?d():this._getPanelForTab(e),q=b.length?this._getPanelForTab(b):d(),b={oldTab:b,oldPanel:q,newTab:r?d():e,newPanel:g};a.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||h&&!c.collapsible||
!1===this._trigger("beforeActivate",a,b)||(c.active=r?!1:this.tabs.index(e),this.active=h?d():e,this.xhr&&this.xhr.abort(),q.length||g.length||d.error("jQuery UI Tabs: Mismatching fragment identifier."),g.length&&this.load(this.tabs.index(e),a),this._toggle(a,b))},_toggle:function(a,c){function b(){f.running=!1;f._trigger("activate",a,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");h.length&&f.options.show?f._show(h,f.options.show,b):(h.show(),b())}var f=this,h=c.newPanel,
g=c.oldPanel;this.running=!0;g.length&&this.options.hide?this._hide(g,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),g.hide(),e());g.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");h.length&&g.length?c.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return 0===d(this).attr("tabIndex")}).attr("tabIndex",-1);h.attr({"aria-expanded":"true",
"aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(a){var c;a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),c=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:d.noop}))},_findActive:function(a){return!1===a?d():this.tabs.eq(a)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){d.data(this,"ui-tabs-destroy")?d(this).remove():d(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var a=d(this),c=a.data("ui-tabs-aria-controls");c?a.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):a.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var c=this.options.disabled;!1!==c&&(a===b?c=!1:(a=this._getIndex(a),c=d.isArray(c)?d.map(c,function(c){return c!==a?c:null}):d.map(this.tabs,function(c,b){return b!==a?b:null})),this._setupDisabled(c))},disable:function(a){var c=
this.options.disabled;if(!0!==c){if(a===b)c=!0;else{if(a=this._getIndex(a),-1!==d.inArray(a,c))return;c=d.isArray(c)?d.merge([a],c).sort():[a]}this._setupDisabled(c)}},load:function(a,c){a=this._getIndex(a);var b=this,e=this.tabs.eq(a),f=e.find(".ui-tabs-anchor"),r=this._getPanelForTab(e),g={tab:e,panel:r};h(f[0])||(this.xhr=d.ajax(this._ajaxSettings(f,c,g)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){r.html(a);
b._trigger("load",c,g)},1)}).complete(function(a,c){setTimeout(function(){"abort"===c&&b.panels.stop(!1,!0);e.removeClass("ui-tabs-loading");r.removeAttr("aria-busy");a===b.xhr&&delete b.xhr},1)})))},_ajaxSettings:function(a,c,b){var e=this;return{url:a.attr("href"),beforeSend:function(a,f){return e._trigger("beforeLoad",c,d.extend({jqXHR:a,ajaxSettings:f},b))}}},_getPanelForTab:function(a){a=d(a).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}})})(F);(function(d,b){function h(h){c=
h.originalEvent;n=c.accelerationIncludingGravity;e=Math.abs(n.x);f=Math.abs(n.y);k=Math.abs(n.z);!b.orientation&&(7<e||(6<k&&8>f||8>k&&6<f)&&5<e)?a.enabled&&a.disable():a.enabled||a.enable()}d.mobile.iosorientationfixEnabled=!0;var a,c,e,f,k,n,m=navigator.userAgent;return/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(m)&&-1<m.indexOf("AppleWebKit")?(a=d.mobile.zoom,void d.mobile.document.on("mobileinit",function(){d.mobile.iosorientationfixEnabled&&d.mobile.window.bind("orientationchange.iosorientationfix",
a.enable).bind("devicemotion.iosorientationfix",h)})):void(d.mobile.iosorientationfixEnabled=!1)})(F,this);(function(d,b,h){function a(){c.removeClass("ui-mobile-rendering")}var c=d("html"),e=d.mobile.window;d(b.document).trigger("mobileinit");d.mobile.gradeA()&&(d.mobile.ajaxBlacklist&&(d.mobile.ajaxEnabled=!1),c.addClass("ui-mobile ui-mobile-rendering"),setTimeout(a,5E3),d.extend(d.mobile,{initializePage:function(){var c=d.mobile.path,b=d(":jqmData(role='page'), :jqmData(role='dialog')"),n=c.stripHash(c.stripQueryParams(c.parseLocation().hash)),
m=d.mobile.path.parseLocation(),r=n?l.getElementById(n):h;b.length||(b=d("body").wrapInner("<div data-"+d.mobile.ns+"role='page'></div>").children(0));b.each(function(){var a=d(this);a[0].getAttribute("data-"+d.mobile.ns+"url")||a.attr("data-"+d.mobile.ns+"url",a.attr("id")||c.convertUrlToDataUrl(m.pathname+m.search))});d.mobile.firstPage=b.first();d.mobile.pageContainer=d.mobile.firstPage.parent().addClass("ui-mobile-viewport").pagecontainer();d.mobile.navreadyDeferred.resolve();e.trigger("pagecontainercreate");
d.mobile.loading("show");a();d.mobile.hashListeningEnabled&&d.mobile.path.isHashValid(location.hash)&&(d(r).is(":jqmData(role='page')")||d.mobile.path.isPath(n)||n===d.mobile.dialogHashKey)?d.event.special.navigate.isPushStateEnabled()?(d.mobile.navigate.history.stack=[],d.mobile.navigate(d.mobile.path.isPath(location.hash)?location.hash:location.href)):e.trigger("hashchange",[!0]):(d.event.special.navigate.isPushStateEnabled()&&d.mobile.navigate.navigator.squash(c.parseLocation().href),d.mobile.changePage(d.mobile.firstPage,
{transition:"none",reverse:!0,changeHash:!1,fromHashChange:!0}))}}),d(function(){d.support.inlineSVG();d.mobile.hideUrlBar&&b.scrollTo(0,1);d.mobile.defaultHomeScroll=d.support.scrollTop&&1!==d.mobile.window.scrollTop()?1:0;d.mobile.autoInitializePage&&d.mobile.initializePage();d.mobile.hideUrlBar&&e.load(d.mobile.silentScroll);d.support.cssPointerEvents||d.mobile.document.delegate(".ui-state-disabled,.ui-disabled","vclick",function(a){a.preventDefault();a.stopImmediatePropagation()})}))})(F,this)});(function(F){"object"===typeof exports&&"undefined"!==typeof module?module.exports=F():"function"===typeof define&&define.amd?define([],F):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).mapboxgl=F()})(function(){return function g(l,d,b){function h(c,f){if(!d[c]){if(!l[c]){var e="function"==typeof require&&require;if(!f&&e)return e(c,!0);if(a)return a(c,!0);e=Error("Cannot find module '"+c+"'");throw e.code="MODULE_NOT_FOUND",e;}e=d[c]={exports:{}};
l[c][0].call(e.exports,function(a){var b=l[c][1][a];return h(b?b:a)},e,e.exports,g,l,d,b)}return d[c].exports}for(var a="function"==typeof require&&require,c=0;c<b.length;c++)h(b[c]);return h}({1:[function(g,l,d){!function(b,h){"object"==typeof d&&"undefined"!=typeof l?l.exports=h():b.glMatrix=h()}(this,function(){return function(){var b=new Float32Array(3);return b[0]=0,b[1]=0,b[2]=0,b}(),function(){var b=new Float32Array(4);return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b}(),{vec3:{transformMat3:function(b,
h,a){var c=h[0],e=h[1];h=h[2];return b[0]=c*a[0]+e*a[3]+h*a[6],b[1]=c*a[1]+e*a[4]+h*a[7],b[2]=c*a[2]+e*a[5]+h*a[8],b}},vec4:{transformMat4:function(b,h,a){var c=h[0],e=h[1],f=h[2];h=h[3];return b[0]=a[0]*c+a[4]*e+a[8]*f+a[12]*h,b[1]=a[1]*c+a[5]*e+a[9]*f+a[13]*h,b[2]=a[2]*c+a[6]*e+a[10]*f+a[14]*h,b[3]=a[3]*c+a[7]*e+a[11]*f+a[15]*h,b}},mat2:{create:function(){var b=new Float32Array(4);return b[0]=1,b[1]=0,b[2]=0,b[3]=1,b},rotate:function(b,h,a){var c=h[0],e=h[1],f=h[2];h=h[3];var k=Math.sin(a);a=Math.cos(a);
return b[0]=c*a+f*k,b[1]=e*a+h*k,b[2]=c*-k+f*a,b[3]=e*-k+h*a,b},scale:function(b,h,a){var c=h[1],e=h[2],f=h[3],k=a[0];a=a[1];return b[0]=h[0]*k,b[1]=c*k,b[2]=e*a,b[3]=f*a,b}},mat3:{create:function(){var b=new Float32Array(9);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},fromRotation:function(b,h){var a=Math.sin(h),c=Math.cos(h);return b[0]=c,b[1]=a,b[2]=0,b[3]=-a,b[4]=c,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}},mat4:{create:function(){var b=new Float32Array(16);return b[0]=1,b[1]=
0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},identity:function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},translate:function(b,h,a){var c,e,f,k,d,m,r,g,q,t,w,v,y=a[0],A=a[1];a=a[2];return h===b?(b[12]=h[0]*y+h[4]*A+h[8]*a+h[12],b[13]=h[1]*y+h[5]*A+h[9]*a+h[13],b[14]=h[2]*y+h[6]*A+h[10]*a+h[14],b[15]=h[3]*y+h[7]*A+h[11]*a+h[15]):(c=h[0],e=h[1],f=h[2],
k=h[3],d=h[4],m=h[5],r=h[6],g=h[7],q=h[8],t=h[9],w=h[10],v=h[11],b[0]=c,b[1]=e,b[2]=f,b[3]=k,b[4]=d,b[5]=m,b[6]=r,b[7]=g,b[8]=q,b[9]=t,b[10]=w,b[11]=v,b[12]=c*y+d*A+q*a+h[12],b[13]=e*y+m*A+t*a+h[13],b[14]=f*y+r*A+w*a+h[14],b[15]=k*y+g*A+v*a+h[15]),b},scale:function(b,h,a){var c=a[0],e=a[1];a=a[2];return b[0]=h[0]*c,b[1]=h[1]*c,b[2]=h[2]*c,b[3]=h[3]*c,b[4]=h[4]*e,b[5]=h[5]*e,b[6]=h[6]*e,b[7]=h[7]*e,b[8]=h[8]*a,b[9]=h[9]*a,b[10]=h[10]*a,b[11]=h[11]*a,b[12]=h[12],b[13]=h[13],b[14]=h[14],b[15]=h[15],
b},multiply:function(b,h,a){var c=h[0],e=h[1],f=h[2],k=h[3],d=h[4],m=h[5],r=h[6],g=h[7],q=h[8],t=h[9],w=h[10],v=h[11],y=h[12],A=h[13],l=h[14];h=h[15];var B=a[0],x=a[1],E=a[2],C=a[3];return b[0]=B*c+x*d+E*q+C*y,b[1]=B*e+x*m+E*t+C*A,b[2]=B*f+x*r+E*w+C*l,b[3]=B*k+x*g+E*v+C*h,B=a[4],x=a[5],E=a[6],C=a[7],b[4]=B*c+x*d+E*q+C*y,b[5]=B*e+x*m+E*t+C*A,b[6]=B*f+x*r+E*w+C*l,b[7]=B*k+x*g+E*v+C*h,B=a[8],x=a[9],E=a[10],C=a[11],b[8]=B*c+x*d+E*q+C*y,b[9]=B*e+x*m+E*t+C*A,b[10]=B*f+x*r+E*w+C*l,b[11]=B*k+x*g+E*v+C*h,
B=a[12],x=a[13],E=a[14],C=a[15],b[12]=B*c+x*d+E*q+C*y,b[13]=B*e+x*m+E*t+C*A,b[14]=B*f+x*r+E*w+C*l,b[15]=B*k+x*g+E*v+C*h,b},perspective:function(b,h,a,c,e){h=1/Math.tan(h/2);var f=1/(c-e);return b[0]=h/a,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=h,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=(e+c)*f,b[11]=-1,b[12]=0,b[13]=0,b[14]=2*e*c*f,b[15]=0,b},rotateX:function(b,h,a){var c=Math.sin(a);a=Math.cos(a);var e=h[4],f=h[5],k=h[6],d=h[7],m=h[8],r=h[9],g=h[10],q=h[11];return h!==b&&(b[0]=h[0],b[1]=h[1],b[2]=h[2],b[3]=h[3],
b[12]=h[12],b[13]=h[13],b[14]=h[14],b[15]=h[15]),b[4]=e*a+m*c,b[5]=f*a+r*c,b[6]=k*a+g*c,b[7]=d*a+q*c,b[8]=m*a-e*c,b[9]=r*a-f*c,b[10]=g*a-k*c,b[11]=q*a-d*c,b},rotateZ:function(b,h,a){var c=Math.sin(a);a=Math.cos(a);var e=h[0],f=h[1],k=h[2],d=h[3],m=h[4],r=h[5],g=h[6],q=h[7];return h!==b&&(b[8]=h[8],b[9]=h[9],b[10]=h[10],b[11]=h[11],b[12]=h[12],b[13]=h[13],b[14]=h[14],b[15]=h[15]),b[0]=e*a+m*c,b[1]=f*a+r*c,b[2]=k*a+g*c,b[3]=d*a+q*c,b[4]=m*a-e*c,b[5]=r*a-f*c,b[6]=g*a-k*c,b[7]=q*a-d*c,b},invert:function(b,
h){var a=h[0],c=h[1],e=h[2],f=h[3],k=h[4],d=h[5],m=h[6],r=h[7],g=h[8],q=h[9],t=h[10],w=h[11],v=h[12],y=h[13],l=h[14],z=h[15],B=a*d-c*k,x=a*m-e*k,E=a*r-f*k,C=c*m-e*d,D=c*r-f*d,G=e*r-f*m,H=g*y-q*v,K=g*l-t*v,J=g*z-w*v,I=q*l-t*y,N=q*z-w*y,P=t*z-w*l,M=B*P-x*N+E*I+C*J-D*K+G*H;return M?(M=1/M,b[0]=(d*P-m*N+r*I)*M,b[1]=(e*N-c*P-f*I)*M,b[2]=(y*G-l*D+z*C)*M,b[3]=(t*D-q*G-w*C)*M,b[4]=(m*J-k*P-r*K)*M,b[5]=(a*P-e*J+f*K)*M,b[6]=(l*E-v*G-z*x)*M,b[7]=(g*G-t*E+w*x)*M,b[8]=(k*N-d*J+r*H)*M,b[9]=(c*J-a*N-f*H)*M,b[10]=
(v*D-y*E+z*B)*M,b[11]=(q*E-g*D-w*B)*M,b[12]=(d*K-k*I-m*H)*M,b[13]=(a*I-c*K+e*H)*M,b[14]=(y*x-v*C-l*B)*M,b[15]=(g*C-q*x+t*B)*M,b):null},ortho:function(b,h,a,c,e,f,k){var d=1/(h-a),m=1/(c-e),r=1/(f-k);return b[0]=-2*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*m,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*r,b[11]=0,b[12]=(h+a)*d,b[13]=(e+c)*m,b[14]=(k+f)*r,b[15]=1,b}}}})},{}],2:[function(g,l,d){!function(b,h){"object"==typeof d&&"undefined"!=typeof l?l.exports=h():b.ShelfPack=h()}(this,function(){function b(a,b,f){f=
f||{};this.w=a||64;this.h=b||64;this.autoResize=!!f.autoResize;this.shelves=[];this.freebins=[];this.stats={};this.bins={};this.maxId=0}function h(a,b,f){this.x=0;this.y=a;this.w=this.free=b;this.h=f}function a(a,b,f,k,h,m,d){this.id=a;this.x=b;this.y=f;this.w=k;this.h=h;this.maxw=m||k;this.maxh=d||h;this.refcount=0}return b.prototype.pack=function(a,b){a=[].concat(a);b=b||{};for(var c,e,h,m,d=[],g=0;g<a.length;g++)if(c=a[g].w||a[g].width,e=a[g].h||a[g].height,h=a[g].id,c&&e)if(m=this.packOne(c,e,
h),m)b.inPlace&&(a[g].x=m.x,a[g].y=m.y,a[g].id=m.id),d.push(m);if(0<this.shelves.length){for(h=e=c=0;h<this.shelves.length;h++)m=this.shelves[h],e+=m.h,c=Math.max(m.w-m.free,c);this.resize(c,e)}return d},b.prototype.packOne=function(a,b,f){var c,e,m,d,g=-1,q=-1,t=1/0,w=0;if("string"==typeof f||"number"==typeof f){if(c=this.getBin(f))return this.ref(c),c;"number"==typeof f&&(this.maxId=Math.max(f,this.maxId))}else f=++this.maxId;for(d=0;d<this.freebins.length;d++){if(c=this.freebins[d],b===c.maxh&&
a===c.maxw)return this.allocFreebin(d,a,b,f);b>c.maxh||a>c.maxw||b<=c.maxh&&a<=c.maxw&&(m=c.maxw*c.maxh-a*b,m<t&&(t=m,g=d))}for(d=0;d<this.shelves.length;d++)if(e=this.shelves[d],w+=e.h,!(a>e.free)){if(b===e.h)return this.allocShelf(d,a,b,f);b>e.h||b<e.h&&(m=(e.h-b)*a,m<t&&(g=-1,t=m,q=d))}if(-1!==g)return this.allocFreebin(g,a,b,f);if(-1!==q)return this.allocShelf(q,a,b,f);if(b<=this.h-w&&a<=this.w)return e=new h(w,this.w,b),this.allocShelf(this.shelves.push(e)-1,a,b,f);if(this.autoResize){var v,
y,l,z;return v=y=this.h,l=z=this.w,(l<=v||a>l)&&(z=2*Math.max(a,l)),(v<l||b>v)&&(y=2*Math.max(b,v)),this.resize(z,y),this.packOne(a,b,f)}return null},b.prototype.allocFreebin=function(a,b,f,k){a=this.freebins.splice(a,1)[0];return a.id=k,a.w=b,a.h=f,a.refcount=0,this.bins[k]=a,this.ref(a),a},b.prototype.allocShelf=function(a,b,f,k){a=this.shelves[a].alloc(b,f,k);return this.bins[k]=a,this.ref(a),a},b.prototype.getBin=function(a){return this.bins[a]},b.prototype.ref=function(a){if(1===++a.refcount){var c=
a.h;this.stats[c]=(0|this.stats[c])+1}return a.refcount},b.prototype.unref=function(a){return 0===a.refcount?0:(0===--a.refcount&&(this.stats[a.h]--,delete this.bins[a.id],this.freebins.push(a)),a.refcount)},b.prototype.clear=function(){this.shelves=[];this.freebins=[];this.stats={};this.bins={};this.maxId=0},b.prototype.resize=function(a,b){this.w=a;this.h=b;for(var c=0;c<this.shelves.length;c++)this.shelves[c].resize(a);return!0},h.prototype.alloc=function(c,b,f){if(c>this.free||b>this.h)return null;
var e=this.x;return this.x+=c,this.free-=c,new a(f,e,this.y,c,b,c,this.h)},h.prototype.resize=function(a){return this.free+=a-this.w,this.w=a,!0},b})},{}],3:[function(g,l,d){function b(b,a,c,e){this.cx=3*b;this.bx=3*(c-b)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*a;this.by=3*(e-a)-this.cy;this.ay=1-this.cy-this.by;this.p1x=b;this.p1y=e;this.p2x=c;this.p2y=e}l.exports=b;b.prototype.sampleCurveX=function(b){return((this.ax*b+this.bx)*b+this.cx)*b};b.prototype.sampleCurveY=function(b){return((this.ay*
b+this.by)*b+this.cy)*b};b.prototype.sampleCurveDerivativeX=function(b){return(3*this.ax*b+2*this.bx)*b+this.cx};b.prototype.solveCurveX=function(b,a){"undefined"==typeof a&&(a=1E-6);var c,e,f;var k=b;for(e=0;8>e;e++){if(f=this.sampleCurveX(k)-b,Math.abs(f)<a)return k;var h=this.sampleCurveDerivativeX(k);if(1E-6>Math.abs(h))break;k-=f/h}if(c=0,e=1,k=b,k<c)return c;if(k>e)return e;for(;c<e&&!(f=this.sampleCurveX(k),Math.abs(f-b)<a);)b>f?c=k:e=k,k=.5*(e-c)+c;return k};b.prototype.solve=function(b,a){return this.sampleCurveY(this.solveCurveX(b,
a))}},{}],4:[function(g,l,d){!function(b,h){"object"==typeof d&&"undefined"!=typeof l?h(d):h(b.WhooTS=b.WhooTS||{})}(this,function(b){function h(c,b,f){b=Math.pow(2,f)-b-1;var e=a(256*c,256*b,f);c=a(256*(c+1),256*(b+1),f);return e[0]+","+e[1]+","+c[0]+","+c[1]}function a(a,b,f){f=12756274*Math.PI/256/Math.pow(2,f);return[a*f-12756274*Math.PI/2,b*f-12756274*Math.PI/2]}b.getURL=function(a,b,f,k,d,m){m=m||{};return a+"?"+["bbox="+h(f,k,d),"format="+(m.format||"image/png"),"service="+(m.service||"WMS"),
"version="+(m.version||"1.1.1"),"request="+(m.request||"GetMap"),"srs="+(m.srs||"EPSG:3857"),"width="+(m.width||256),"height="+(m.height||256),"layers="+b].join("&")};b.getTileBBox=h;b.getMercCoords=a;Object.defineProperty(b,"__esModule",{value:!0})})},{}],5:[function(g,l,d){function b(b,k,m){m=m||2;var d=k&&k.length,r=d?k[0]*m:b.length,g=h(b,0,r,m,!0),q=[];if(!g)return q;var u;if(d){var t=m,v;var y=[];d=0;for(v=k.length;d<v;d++){var B=k[d]*t;var x=d<v-1?k[d+1]*t:b.length;B=h(b,B,x,t,!1);B===B.next&&
(B.steiner=!0);y.push(n(B))}y.sort(e);for(d=0;d<y.length;d++){k=y[d];t=g;if(t=f(k,t))k=w(t,k),a(k,k.next);g=a(g,g.next)}}if(b.length>80*m){var l=u=b[0];var A=d=b[1];for(t=m;t<r;t+=m)y=b[t],k=b[t+1],y<l&&(l=y),k<A&&(A=k),y>u&&(u=y),k>d&&(d=k);u=Math.max(u-l,d-A)}return c(g,q,m,l,A,u),q}function h(a,c,b,e,f){if(f===0<z(a,c,b,e))for(f=c;f<b;f+=e)var k=v(f,a[f],a[f+1],k);else for(f=b-e;f>=c;f-=e)k=v(f,a[f],a[f+1],k);return k&&u(k,k.next)&&(y(k),k=k.next),k}function a(a,c){if(!a)return a;c||(c=a);var b,
e=a;do if(b=!1,e.steiner||!u(e,e.next)&&0!==r(e.prev,e,e.next))e=e.next;else{if(y(e),e=c=e.prev,e===e.next)return null;b=!0}while(b||e!==c);return c}function c(b,e,f,h,d,n,g){if(b){if(!g&&n){var v=b,x=v;do null===x.z&&(x.z=k(x.x,x.y,h,d,n)),x.prevZ=x.prev,x=x.nextZ=x.next;while(x!==v);x.prevZ.nextZ=null;x.prevZ=null;var v=x,l,B,C,A,z=1;do{x=v;var E=v=null;for(C=0;x;){C++;var D=x;for(l=A=0;l<z&&(A++,D=D.nextZ,D);l++);for(l=z;0<A||0<l&&D;)0===A?(B=D,D=D.nextZ,l--):0!==l&&D?x.z<=D.z?(B=x,x=x.nextZ,A--):
(B=D,D=D.nextZ,l--):(B=x,x=x.nextZ,A--),E?E.nextZ=B:v=B,B.prevZ=E,E=B;x=D}E.nextZ=null;z*=2}while(1<C)}for(x=b;b.prev!==b.next;){B=b.prev;v=b.next;if(n)a:{D=b;l=h;var G=d,H=n;E=D.prev;C=D;A=D.next;if(0<=r(E,C,A))D=!1;else{var Z=E.x>C.x?E.x>A.x?E.x:A.x:C.x>A.x?C.x:A.x,X=E.y>C.y?E.y>A.y?E.y:A.y:C.y>A.y?C.y:A.y,z=k(E.x<C.x?E.x<A.x?E.x:A.x:C.x<A.x?C.x:A.x,E.y<C.y?E.y<A.y?E.y:A.y:C.y<A.y?C.y:A.y,l,G,H);l=k(Z,X,l,G,H);for(G=D.nextZ;G&&G.z<=l;){if(G!==D.prev&&G!==D.next&&m(E.x,E.y,C.x,C.y,A.x,A.y,G.x,G.y)&&
0<=r(G.prev,G,G.next)){D=!1;break a}G=G.nextZ}for(G=D.prevZ;G&&G.z>=z;){if(G!==D.prev&&G!==D.next&&m(E.x,E.y,C.x,C.y,A.x,A.y,G.x,G.y)&&0<=r(G.prev,G,G.next)){D=!1;break a}G=G.prevZ}D=!0}}else a:if(D=b,E=D.prev,C=D,A=D.next,0<=r(E,C,A))D=!1;else{for(z=D.next.next;z!==D.prev;){if(m(E.x,E.y,C.x,C.y,A.x,A.y,z.x,z.y)&&0<=r(z.prev,z,z.next)){D=!1;break a}z=z.next}D=!0}if(D)e.push(B.i/f),e.push(b.i/f),e.push(v.i/f),y(b),x=b=v.next;else if(b=v,b===x){if(g)if(1===g){g=e;B=f;v=b;do x=v.prev,D=v.next.next,!u(x,
D)&&q(x,v,v.next,D)&&t(x,D)&&t(D,x)&&(g.push(x.i/B),g.push(v.i/B),g.push(D.i/B),y(v),y(v.next),v=b=D),v=v.next;while(v!==b);b=v;c(b,e,f,h,d,n,2)}else{if(2===g)a:{g=b;do{for(B=g.next.next;B!==g.prev;){if(v=g.i!==B.i){v=g;x=B;if(D=v.next.i!==x.i&&v.prev.i!==x.i){b:{D=v;do{if(D.i!==v.i&&D.next.i!==v.i&&D.i!==x.i&&D.next.i!==x.i&&q(D,D.next,v,x)){D=!0;break b}D=D.next}while(D!==v);D=!1}D=!D}if(D=D&&t(v,x)&&t(x,v)){D=v;E=!1;C=(v.x+x.x)/2;x=(v.y+x.y)/2;do D.y>x!=D.next.y>x&&C<(D.next.x-D.x)*(x-D.y)/(D.next.y-
D.y)+D.x&&(E=!E),D=D.next;while(D!==v);D=E}v=D}if(v){b=w(g,B);g=a(g,g.next);b=a(b,b.next);c(g,e,f,h,d,n);c(b,e,f,h,d,n);break a}B=B.next}g=g.next}while(g!==b)}}else c(a(b),e,f,h,d,n,1);break}}}}function e(a,b){return a.x-b.x}function f(a,b){var c=b,e=a.x,f=a.y,k=-(1/0);do{if(f<=c.y&&f>=c.next.y){var h=c.x+(f-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=e&&h>k){if(k=h,h===e){if(f===c.y)return c;if(f===c.next.y)return c.next}var d=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!d)return null;if(e===k)return d.prev;
for(var n,h=d,r=d.x,g=d.y,q=1/0,c=d.next;c!==h;)e>=c.x&&c.x>=r&&m(f<g?e:k,f,r,g,f<g?k:e,f,c.x,c.y)&&(n=Math.abs(f-c.y)/(e-c.x),(n<q||n===q&&c.x>d.x)&&t(c,a)&&(d=c,q=n)),c=c.next;return d}function k(a,c,b,e,f){return a=32767*(a-b)/f,c=32767*(c-e)/f,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),c=16711935&(c|c<<8),c=252645135&(c|c<<4),c=858993459&(c|c<<2),c=1431655765&(c|c<<1),a|c<<1}function n(a){var c=a,b=a;do c.x<b.x&&(b=c),c=c.next;while(c!==a);return b}function m(a,
c,b,e,f,k,h,m){return 0<=(f-h)*(c-m)-(a-h)*(k-m)&&0<=(a-h)*(e-m)-(b-h)*(c-m)&&0<=(b-h)*(k-m)-(f-h)*(e-m)}function r(a,c,b){return(c.y-a.y)*(b.x-c.x)-(c.x-a.x)*(b.y-c.y)}function u(a,c){return a.x===c.x&&a.y===c.y}function q(a,c,b,e){return!!(u(a,c)&&u(b,e)||u(a,e)&&u(b,c))||0<r(a,c,b)!=0<r(a,c,e)&&0<r(b,e,a)!=0<r(b,e,c)}function t(a,c){return 0>r(a.prev,a,a.next)?0<=r(a,c,a.next)&&0<=r(a,a.prev,c):0>r(a,c,a.prev)||0>r(a,a.next,c)}function w(a,c){var b=new A(a.i,a.x,a.y),e=new A(c.i,c.x,c.y),f=a.next,
k=c.prev;return a.next=c,c.prev=a,b.next=f,f.prev=b,e.next=b,b.prev=e,k.next=e,e.prev=k,e}function v(a,c,b,e){a=new A(a,c,b);return e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a),a}function y(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function A(a,c,b){this.i=a;this.x=c;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function z(a,c,b,e){for(var f=0,k=b-e;c<b;c+=e)f+=(a[k]-a[c])*(a[c+
1]+a[k+1]),k=c;return f}l.exports=b;b.deviation=function(a,c,b,e){var f=c&&c.length,k=Math.abs(z(a,0,f?c[0]*b:a.length,b));if(f)for(var f=0,h=c.length;f<h;f++)k-=Math.abs(z(a,c[f]*b,f<h-1?c[f+1]*b:a.length,b));for(f=c=0;f<e.length;f+=3){var h=e[f]*b,m=e[f+1]*b,d=e[f+2]*b;c+=Math.abs((a[h]-a[d])*(a[m+1]-a[h+1])-(a[h]-a[m])*(a[d+1]-a[h+1]))}return 0===k&&0===c?0:Math.abs((c-k)/k)};b.flatten=function(a){for(var c=a[0][0].length,b={vertices:[],holes:[],dimensions:c},e=0,f=0;f<a.length;f++){for(var k=
0;k<a[f].length;k++)for(var h=0;h<c;h++)b.vertices.push(a[f][k][h]);0<f&&(e+=a[f-1].length,b.holes.push(e))}return b}},{}],6:[function(g,l,d){function b(a){var c=0;if(a&&0<a.length)for(var c=c+Math.abs(h(a[0])),b=1;b<a.length;b++)c-=Math.abs(h(a[b]));return c}function h(c){var b=0;if(2<c.length){for(var f,k,h=0;h<c.length-1;h++)f=c[h],k=c[h+1],b+=(k[0]-f[0])*Math.PI/180*(2+Math.sin(f[1]*Math.PI/180)+Math.sin(k[1]*Math.PI/180));b=b*a.RADIUS*a.RADIUS/2}return b}var a=g("wgs84");l.exports.geometry=function(a){if("Polygon"===
a.type)return b(a.coordinates);if("MultiPolygon"===a.type){for(var c=0,f=0;f<a.coordinates.length;f++)c+=b(a.coordinates[f]);return c}return null};l.exports.ring=h},{wgs84:42}],7:[function(g,l,d){function b(c,e){switch(c&&c.type||null){case "FeatureCollection":return c.features=c.features.map(h(b,e)),c;case "Feature":return c.geometry=b(c.geometry,e),c;case "Polygon":case "MultiPolygon":return"Polygon"===c.type?c.coordinates=a(c.coordinates,e):"MultiPolygon"===c.type&&(c.coordinates=c.coordinates.map(h(a,
e))),c;default:return c}}function h(a,c){return function(b){return a(b,c)}}function a(a,b){b=!!b;a[0]=c(a[0],!b);for(var e=1;e<a.length;e++)a[e]=c(a[e],b);return a}function c(a,c){return 0<=e.ring(a)===c?a:a.reverse()}var e=g("geojson-area");l.exports=b},{"geojson-area":6}],8:[function(g,l,d){function b(a,c,b,f,k){return c.length&&(c.area=b,c.dist=f,void 0!==k&&(c.outer=k),a.push(c)),[]}l.exports=function(a,c,e,f,k,d,m,r){if(e/=c,f/=c,m>=e&&r<=f)return a;if(m>f||r<e)return null;c=[];for(m=0;m<a.length;m++){var n,
g;r=a[m];var t=r.geometry,w=r.type;if(n=r.min[k],g=r.max[k],n>=e&&g<=f)c.push(r);else if(!(n>f||g<e)){if(1===w){for(var v=e,y=f,l=k,z=[],B=0;B<t.length;B++){var x=t[B],E=x[l];E>=v&&E<=y&&z.push(x)}t=z}else{v=e;y=f;l=k;z=d;B=3===w;x=[];for(E=0;E<t.length;E++){var C,D=0,G=null,H=t[E],K=H.area,J=H.dist,I=H.outer,N=H.length,P=[];for(C=0;C<N-1;C++){var M=G||H[C];G=H[C+1];var S=D||M[l];D=G[l];S<v?D>y?(P.push(z(M,G,v),z(M,G,y)),B||(P=b(x,P,K,J,I))):D>=v&&P.push(z(M,G,v)):S>y?D<v?(P.push(z(M,G,y),z(M,G,v)),
B||(P=b(x,P,K,J,I))):D<=y&&P.push(z(M,G,y)):(P.push(M),D<v?(P.push(z(M,G,v)),B||(P=b(x,P,K,J,I))):D>y&&(P.push(z(M,G,y)),B||(P=b(x,P,K,J,I))))}M=H[N-1];S=M[l];S>=v&&S<=y&&P.push(M);M=P[P.length-1];B&&M&&(P[0][0]!==M[0]||P[0][1]!==M[1])&&P.push(P[0]);b(x,P,K,J,I)}t=x}t.length&&c.push(h(r.tags,w,t,r.id))}}return c.length?c:null};var h=g("./feature")},{"./feature":10}],9:[function(g,l,d){function b(c,k,d){if(null!==k.geometry){var f=k.geometry;var n=f.type;var g=f.coordinates,q=k.properties,t=k.id;if("Point"===
n)c.push(e(q,1,[a(g)],t));else if("MultiPoint"===n)c.push(e(q,1,h(g),t));else if("LineString"===n)c.push(e(q,2,[h(g,d)],t));else if("MultiLineString"===n||"Polygon"===n){f=[];for(k=0;k<g.length;k++){var w=h(g[k],d);"Polygon"===n&&(w.outer=0===k);f.push(w)}c.push(e(q,"Polygon"===n?3:2,f,t))}else if("MultiPolygon"===n){f=[];for(k=0;k<g.length;k++)for(n=0;n<g[k].length;n++)w=h(g[k][n],d),w.outer=0===n,f.push(w);c.push(e(q,3,f,t))}else{if("GeometryCollection"!==n)throw Error("Input data is not a valid GeoJSON object.");
for(k=0;k<f.geometries.length;k++)b(c,{geometry:f.geometries[k],properties:q},d)}}}function h(b,e){for(var f=[],k=0;k<b.length;k++)f.push(a(b[k]));if(e){c(f,e);for(var h,d=0,g=0,t=0;t<f.length-1;t++)k=h||f[t],h=f[t+1],d+=k[0]*h[1]-h[0]*k[1],g+=Math.abs(h[0]-k[0])+Math.abs(h[1]-k[1]);f.area=Math.abs(d/2);f.dist=g}return f}function a(a){var c=Math.sin(a[1]*Math.PI/180);a=a[0]/360+.5;c=.5-.25*Math.log((1+c)/(1-c))/Math.PI;return c=0>c?0:1<c?1:c,[a,c,0]}l.exports=function(a,c){var e=[];if("FeatureCollection"===
a.type)for(var f=0;f<a.features.length;f++)b(e,a.features[f],c);else"Feature"===a.type?b(e,a,c):b(e,{geometry:a},c);return e};var c=g("./simplify"),e=g("./feature")},{"./feature":10,"./simplify":12}],10:[function(g,l,d){function b(b,a,c){for(var e,f=0;f<c.length;f++)e=c[f],b[0]=Math.min(e[0],b[0]),a[0]=Math.max(e[0],a[0]),b[1]=Math.min(e[1],b[1]),a[1]=Math.max(e[1],a[1])}l.exports=function(h,a,c,e){h={id:e||null,type:a,geometry:c,tags:h||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};a=h.geometry;c=h.min;
e=h.max;if(1===h.type)b(c,e,a);else for(var f=0;f<a.length;f++)b(c,e,a[f]);return h}},{}],11:[function(g,l,d){function b(a,c){var b=Object.create(this.options),f=c,k;for(k in f)b[k]=f[k];c=this.options=b;(b=c.debug)&&console.time("preprocess data");f=e(a,c.tolerance/((1<<c.maxZoom)*c.extent));this.tiles={};this.tileCoords=[];b&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",c.indexMaxZoom,c.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=
0);f=n(f,c.buffer/c.extent,h);f.length&&this.splitTile(f,0,0,0);b&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function h(a,c,b){return[b,(b-a[0])*(c[1]-a[1])/(c[0]-a[0])+a[1],1]}function a(a,c,b){return[(b-a[1])*(c[0]-a[0])/(c[1]-a[1])+a[0],b,1]}function c(a,c,b){var e=a.source;if(1!==e.length)return!1;e=e[0];if(3!==e.type||1<e.geometry.length)return!1;
var k=e.geometry[0].length;if(5!==k)return!1;for(var h=0;h<k;h++){var m=f.point(e.geometry[0][h],c,a.z2,a.x,a.y);if(m[0]!==-b&&m[0]!==c+b||m[1]!==-b&&m[1]!==c+b)return!1}return!0}l.exports=function(a,c){return new b(a,c)};var e=g("./convert"),f=g("./transform"),k=g("./clip"),n=g("./wrap"),m=g("./tile");b.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0};b.prototype.splitTile=function(b,e,f,d,n,g,y){for(var r=[b,e,f,d],q=this.options,
u=q.debug,t=null;r.length;){d=r.pop();f=r.pop();e=r.pop();b=r.pop();var v=1<<e,w=32*((1<<e)*d+f)+e,l=this.tiles[w],G=e===q.maxZoom?0:q.tolerance/(v*q.extent);!l&&(1<u&&console.time("creation"),l=this.tiles[w]=m(b,v,f,d,G,e===q.maxZoom),this.tileCoords.push({z:e,x:f,y:d}),u)&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,f,d,l.numFeatures,l.numPoints,l.numSimplified),console.timeEnd("creation")),w="z"+e,this.stats[w]=(this.stats[w]||0)+1,this.total++);if(l.source=
b,n){if(e===q.maxZoom||e===n)continue;w=1<<n-e;if(f!==Math.floor(g/w)||d!==Math.floor(y/w))continue}else if(e===q.indexMaxZoom||l.numPoints<=q.indexMaxPoints)continue;if(q.solidChildren||!c(l,q.extent,q.buffer)){l.source=null;1<u&&console.time("clipping");var H,K,J=.5*q.buffer/q.extent,I=.5-J,N=.5+J,P=1+J,w=G=H=K=null;var M=k(b,v,f-J,f+N,0,h,l.min[0],l.max[0]);var S=k(b,v,f+I,f+P,0,h,l.min[0],l.max[0]);M&&(w=k(M,v,d-J,d+N,1,a,l.min[1],l.max[1]),G=k(M,v,d+I,d+P,1,a,l.min[1],l.max[1]));S&&(H=k(S,v,
d-J,d+N,1,a,l.min[1],l.max[1]),K=k(S,v,d+I,d+P,1,a,l.min[1],l.max[1]));1<u&&console.timeEnd("clipping");b.length&&(r.push(w||[],e+1,2*f,2*d),r.push(G||[],e+1,2*f,2*d+1),r.push(H||[],e+1,2*f+1,2*d),r.push(K||[],e+1,2*f+1,2*d+1))}else n&&(t=e)}return t};b.prototype.getTile=function(a,b,e){var k=this.options,h=k.extent,m=k.debug,d=1<<a;b=(b%d+d)%d;d=32*((1<<a)*e+b)+a;if(this.tiles[d])return f.tile(this.tiles[d],h);1<m&&console.log("drilling down to z%d-%d-%d",a,b,e);for(var n,g=a,r=b,q=e;!n&&0<g;)g--,
r=Math.floor(r/2),q=Math.floor(q/2),n=this.tiles[32*((1<<g)*q+r)+g];if(!n||!n.source)return null;if(1<m&&console.log("found parent tile z%d-%d-%d",g,r,q),c(n,h,k.buffer))return f.tile(n,h);1<m&&console.time("drilling down");k=this.splitTile(n.source,g,r,q,a,b,e);if(1<m&&console.timeEnd("drilling down"),null!==k)a=1<<a-k,d=32*((1<<k)*Math.floor(e/a)+Math.floor(b/a))+k;return this.tiles[d]?f.tile(this.tiles[d],h):null}},{"./clip":8,"./convert":9,"./tile":13,"./transform":14,"./wrap":15}],12:[function(g,
l,d){l.exports=function(b,h){var a,c,e=h*h,f=0,k=b.length-1,d=[];b[f][2]=1;for(b[k][2]=1;k;){var m=0;for(a=f+1;a<k;a++){var g=b[a],u=b[f],q=b[k];var t=u[0];var u=u[1],w=q[0],q=q[1],v=g[0],y=g[1],g=w-t,l=q-u;if(0!==g||0!==l){var z=((v-t)*g+(y-u)*l)/(g*g+l*l);1<z?(t=w,u=q):0<z&&(t+=g*z,u+=l*z)}t=(g=v-t,l=y-u,g*g+l*l);t>m&&(c=a,m=t)}m>e?(b[c][2]=m,d.push(f),d.push(c),f=c):(k=d.pop(),f=d.pop())}}},{}],13:[function(g,l,d){l.exports=function(b,h,a,c,e,f){h={features:[],numPoints:0,numSimplified:0,numFeatures:0,
source:null,x:a,y:c,z2:h,transformed:!1,min:[2,1],max:[-1,0]};for(a=0;a<b.length;a++){h.numFeatures++;var k=void 0,d,m;c=h;var g=b[a],u=e,q=f,t=g.geometry,w=g.type,v=[],y=u*u;if(1===w)for(m=0;m<t.length;m++)v.push(t[m]),c.numPoints++,c.numSimplified++;else for(m=0;m<t.length;m++)if(k=t[m],q||!(2===w&&k.dist<u||3===w&&k.area<y)){var l=[];for(d=0;d<k.length;d++){var z=k[d];(q||z[2]>y)&&(l.push(z),c.numSimplified++);c.numPoints++}if(3===w){var B,x=d=0,E=l.length;for(B=E-1;x<E;B=x++)z=l[x],B=l[B],d+=
(B[0]-z[0])*(z[1]+B[1]);0>d===k.outer&&l.reverse()}v.push(l)}else c.numPoints+=k.length;v.length&&(k={geometry:v,type:w,tags:g.tags||null},null!==g.id&&(k.id=g.id),c.features.push(k));c=b[a].min;g=b[a].max;c[0]<h.min[0]&&(h.min[0]=c[0]);c[1]<h.min[1]&&(h.min[1]=c[1]);g[0]>h.max[0]&&(h.max[0]=g[0]);g[1]>h.max[1]&&(h.max[1]=g[1])}return h}},{}],14:[function(g,l,d){function b(b,a,c,e,f){return[Math.round(a*(b[0]*c-e)),Math.round(a*(b[1]*c-f))]}d.tile=function(h,a){if(h.transformed)return h;var c,e,f=
h.z2,k=h.x,d=h.y;for(c=0;c<h.features.length;c++){var m=h.features[c];var g=m.geometry;if(1===m.type)for(m=0;m<g.length;m++)g[m]=b(g[m],a,f,k,d);else for(m=0;m<g.length;m++){var u=g[m];for(e=0;e<u.length;e++)u[e]=b(u[e],a,f,k,d)}}return h.transformed=!0,h};d.point=b},{}],15:[function(g,l,d){function b(a,b){for(var e=[],f=0;f<a.length;f++){var m=a[f],d=m.type;if(1===d)var g=h(m.geometry,b);else{g=[];for(var q=0;q<m.geometry.length;q++)g.push(h(m.geometry[q],b))}e.push(c(m.tags,d,g,m.id))}return e}
function h(a,c){var b=[];b.area=a.area;b.dist=a.dist;for(var e=0;e<a.length;e++)b.push([a[e][0]+c,a[e][1],a[e][2]]);return b}var a=g("./clip"),c=g("./feature");l.exports=function(c,f,k){var e=c,h=a(c,1,-1-f,f,0,k,-1,2),d=a(c,1,1-f,2+f,0,k,-1,2);return(h||d)&&(e=a(c,1,-f,1+f,0,k,-1,2)||[],h&&(e=b(h,1).concat(e)),d&&(e=e.concat(b(d,-1)))),e}},{"./clip":8,"./feature":10}],16:[function(g,l,d){function b(a,c,b){var e=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var k=new Int32Array(this.arrayBuffer);
a=k[0];c=k[1];b=k[2];this.d=c+2*b;for(var d=0;d<this.d*this.d;d++){var m=k[h+d],g=k[h+d+1];e.push(m===g?null:k.subarray(m,g))}d=k[h+e.length+1];this.keys=k.subarray(k[h+e.length],d);this.bboxes=k.subarray(d);this.insert=this._insertReadonly}else{this.d=c+2*b;for(k=0;k<this.d*this.d;k++)e.push([]);this.keys=[];this.bboxes=[]}this.n=c;this.extent=a;this.padding=b;this.scale=c/a;this.uid=0;c=b/c*a;this.min=-c;this.max=a+c}l.exports=b;var h=3;b.prototype.insert=function(a,c,b,f,k){this._forEachCell(c,
b,f,k,this._insertCell,this.uid++);this.keys.push(a);this.bboxes.push(c);this.bboxes.push(b);this.bboxes.push(f);this.bboxes.push(k)};b.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};b.prototype._insertCell=function(a,c,b,f,k,h){this.cells[k].push(h)};b.prototype.query=function(a,c,b,f){var e=this.min,h=this.max;if(a<=e&&c<=e&&h<=b&&h<=f)return Array.prototype.slice.call(this.keys);e=[];return this._forEachCell(a,c,b,f,this._queryCell,e,{}),
e};b.prototype._queryCell=function(a,c,b,f,k,h,m){k=this.cells[k];if(null!==k)for(var e=this.keys,d=this.bboxes,n=0;n<k.length;n++){var g=k[n];if(void 0===m[g]){var w=4*g;a<=d[w+2]&&c<=d[w+3]&&b>=d[w+0]&&f>=d[w+1]?(m[g]=!0,h.push(e[g])):m[g]=!1}}};b.prototype._forEachCell=function(a,c,b,f,k,h,m){for(var e=this._convertToCellCoord(a),d=this._convertToCellCoord(c),n=this._convertToCellCoord(b),g=this._convertToCellCoord(f);e<=n;e++)for(var w=d;w<=g;w++)if(k.call(this,a,c,b,f,this.d*w+e,h,m))return};
b.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))};b.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,c=h+this.cells.length+1+1,b=0,f=0;f<this.cells.length;f++)b+=this.cells[f].length;b=new Int32Array(c+b+this.keys.length+this.bboxes.length);b[0]=this.extent;b[1]=this.n;b[2]=this.padding;for(f=0;f<a.length;f++){var k=a[f];b[h+f]=c;b.set(k,c);c+=k.length}return b[h+a.length]=c,b.set(this.keys,
c),c+=this.keys.length,b[h+a.length+1]=c,b.set(this.bboxes,c),b.buffer}},{}],17:[function(g,l,d){d.read=function(b,h,a,c,e){var f=8*e-c-1;var k=(1<<f)-1,d=k>>1,m=-7;e=a?e-1:0;var g=a?-1:1,u=b[h+e];e+=g;a=u&(1<<-m)-1;u>>=-m;for(m+=f;0<m;a=256*a+b[h+e],e+=g,m-=8);f=a&(1<<-m)-1;a>>=-m;for(m+=c;0<m;f=256*f+b[h+e],e+=g,m-=8);if(0===a)a=1-d;else{if(a===k)return f?NaN:1/0*(u?-1:1);f+=Math.pow(2,c);a-=d}return(u?-1:1)*f*Math.pow(2,a-c)};d.write=function(b,h,a,c,e,f){var k,d,m,g=8*f-e-1,u=(1<<g)-1,q=u>>1,
t=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=c?0:f-1;c=c?1:-1;var w=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);for(isNaN(h)||h===1/0?(d=isNaN(h)?1:0,k=u):(k=Math.floor(Math.log(h)/Math.LN2),1>h*(m=Math.pow(2,-k))&&(k--,m*=2),h+=1<=k+q?t/m:t*Math.pow(2,1-q),2<=h*m&&(k++,m/=2),k+q>=u?(d=0,k=u):1<=k+q?(d=(h*m-1)*Math.pow(2,e),k+=q):(d=h*Math.pow(2,q-1)*Math.pow(2,e),k=0));8<=e;b[a+f]=255&d,f+=c,d/=256,e-=8);k=k<<e|d;for(g+=e;0<g;b[a+f]=255&k,f+=c,k/=256,g-=8);b[a+f-c]|=128*w}},{}],18:[function(g,l,d){function b(b,
e,f,d,g){e=e||h;f=f||a;g=g||Array;this.nodeSize=d||64;this.points=b;this.ids=new g(b.length);this.coords=new g(2*b.length);for(d=0;d<b.length;d++)this.ids[d]=d,this.coords[2*d]=e(b[d]),this.coords[2*d+1]=f(b[d]);c(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function h(a){return a[0]}function a(a){return a[1]}var c=g("./sort"),e=g("./range"),f=g("./within");l.exports=function(a,c,e,f,h){return new b(a,c,e,f,h)};b.prototype={range:function(a,c,b,f){return e(this.ids,this.coords,a,c,b,
f,this.nodeSize)},within:function(a,c,b){return f(this.ids,this.coords,a,c,b,this.nodeSize)}}},{"./range":19,"./sort":20,"./within":21}],19:[function(g,l,d){l.exports=function(b,h,a,c,e,f,k){for(var d,m,g=[0,b.length-1,0],u=[];g.length;){var q=g.pop(),t=g.pop(),w=g.pop();if(t-w<=k)for(q=w;q<=t;q++)d=h[2*q],m=h[2*q+1],d>=a&&d<=e&&m>=c&&m<=f&&u.push(b[q]);else{var v=Math.floor((w+t)/2);d=h[2*v];m=h[2*v+1];d>=a&&d<=e&&m>=c&&m<=f&&u.push(b[v]);var y=(q+1)%2;(0===q?a<=d:c<=m)&&(g.push(w),g.push(v-1),g.push(y));
(0===q?e>=d:f>=m)&&(g.push(v+1),g.push(t),g.push(y))}}return u}},{}],20:[function(g,l,d){function b(a,c,k,d,m,g){if(!(m-d<=k)){var e=Math.floor((d+m)/2);h(a,c,e,d,m,g%2);b(a,c,k,d,e-1,g+1);b(a,c,k,e+1,m,g+1)}}function h(c,b,k,d,m,g){for(;m>d;){if(600<m-d){var e=m-d+1,f=k-d+1,n=Math.log(e),r=.5*Math.exp(2*n/3),n=.5*Math.sqrt(n*r*(e-r)/e)*(0>f-e/2?-1:1);h(c,b,k,Math.max(d,Math.floor(k-f*r/e+n)),Math.min(m,Math.floor(k+(e-f)*r/e+n)),g)}e=b[2*k+g];f=d;r=m;a(c,b,d,k);for(b[2*m+g]>e&&a(c,b,d,m);f<r;){a(c,
b,f,r);f++;for(r--;b[2*f+g]<e;)f++;for(;b[2*r+g]>e;)r--}b[2*d+g]===e?a(c,b,d,r):(r++,a(c,b,r,m));r<=k&&(d=r+1);k<=r&&(m=r-1)}}function a(a,b,k,h){c(a,k,h);c(b,2*k,2*h);c(b,2*k+1,2*h+1)}function c(a,b,c){var e=a[b];a[b]=a[c];a[c]=e}l.exports=b},{}],21:[function(g,l,d){l.exports=function(b,h,a,c,e,f){for(var k=[0,b.length-1,0],d=[],m=e*e;k.length;){var g=k.pop(),u=k.pop(),q=k.pop();if(u-q<=f)for(g=q;g<=u;g++){var q=h[2*g]-a,t=h[2*g+1]-c;q*q+t*t<=m&&d.push(b[g])}else{var t=Math.floor((q+u)/2),w=h[2*
t],v=h[2*t+1],y=w-a,l=v-c;y*y+l*l<=m&&d.push(b[t]);y=(g+1)%2;(0===g?a-e<=w:c-e<=v)&&(k.push(q),k.push(t-1),k.push(y));(0===g?a+e>=w:c+e>=v)&&(k.push(t+1),k.push(u),k.push(y))}}return d}},{}],22:[function(g,l,d){function b(a){var c;if(c="undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&
Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&"Worker"in window&&"Uint8ClampedArray"in window){a=a&&a.failIfMajorPerformanceCaveat;if(void 0===
h[a]){c=h;var e=document.createElement("canvas");var f=Object.create(b.webGLContextAttributes);e=(f.failIfMajorPerformanceCaveat=a,e.probablySupportsContext?e.probablySupportsContext("webgl",f)||e.probablySupportsContext("experimental-webgl",f):e.supportsContext?e.supportsContext("webgl",f)||e.supportsContext("experimental-webgl",f):e.getContext("webgl",f)||e.getContext("experimental-webgl",f));c[a]=e}c=h[a]}return!!c}"undefined"!=typeof l&&l.exports?l.exports=b:window&&(window.mapboxgl=window.mapboxgl||
{},window.mapboxgl.supported=b);var h={};b.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],23:[function(g,l,d){(function(b){function h(a,b){for(var c=0,e=a.length-1;0<=e;e--){var f=a[e];"."===f?a.splice(e,1):".."===f?(a.splice(e,1),c++):c&&(a.splice(e,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function a(a,c){if(a.filter)return a.filter(c);for(var b=[],e=0;e<a.length;e++)c(a[e],e,a)&&b.push(a[e]);return b}var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
d.resolve=function(){for(var c="",e=!1,d=arguments.length-1;-1<=d&&!e;d--){var m=0<=d?arguments[d]:b.cwd();if("string"!=typeof m)throw new TypeError("Arguments to path.resolve must be strings");m&&(c=m+"/"+c,e="/"===m.charAt(0))}return c=h(a(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."};d.normalize=function(c){var b=d.isAbsolute(c),f="/"===e(c,-1);return c=h(a(c.split("/"),function(a){return!!a}),!b).join("/"),c||b||(c="."),c&&f&&(c+="/"),(b?"/":"")+c};d.isAbsolute=function(a){return"/"===
a.charAt(0)};d.join=function(){var c=Array.prototype.slice.call(arguments,0);return d.normalize(a(c,function(a,c){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))};d.relative=function(a,c){function b(a){for(var c=0;c<a.length&&""===a[c];c++);for(var b=a.length-1;0<=b&&""===a[b];b--);return c>b?[]:a.slice(c,b-c+1)}a=d.resolve(a).substr(1);c=d.resolve(c).substr(1);for(var e=b(a.split("/")),f=b(c.split("/")),k=Math.min(e.length,f.length),h=k,g=
0;g<k;g++)if(e[g]!==f[g]){h=g;break}k=[];for(g=h;g<e.length;g++)k.push("..");return k=k.concat(f.slice(h)),k.join("/")};d.sep="/";d.delimiter=":";d.dirname=function(a){var b=c.exec(a).slice(1);a=b[0];b=b[1];return a||b?(b&&(b=b.substr(0,b.length-1)),a+b):"."};d.basename=function(a,b){var e=c.exec(a).slice(1)[2];return b&&e.substr(-1*b.length)===b&&(e=e.substr(0,e.length-b.length)),e};d.extname=function(a){return c.exec(a).slice(1)[3]};var e="b"==="ab".substr(-1)?function(a,c,b){return a.substr(c,
b)}:function(a,c,b){return 0>c&&(c=a.length+c),a.substr(c,b)}}).call(this,g("_process"))},{_process:27}],24:[function(g,l,d){function b(a){var c;a&&a.length&&(c=a,a=c.length);a=new Uint8Array(a||0);return c&&a.set(c),a.readUInt32LE=f.readUInt32LE,a.writeUInt32LE=f.writeUInt32LE,a.readInt32LE=f.readInt32LE,a.writeInt32LE=f.writeInt32LE,a.readFloatLE=f.readFloatLE,a.writeFloatLE=f.writeFloatLE,a.readDoubleLE=f.readDoubleLE,a.writeDoubleLE=f.writeDoubleLE,a.toString=f.toString,a.write=f.write,a.slice=
f.slice,a.copy=f.copy,a._isBuffer=!0,a}function h(a){for(var c,b,e=a.length,f=[],k=0;k<e;k++){if(c=a.charCodeAt(k),55295<c&&57344>c){if(!b){56319<c||k+1===e?f.push(239,191,189):b=c;continue}if(56320>c){f.push(239,191,189);b=c;continue}c=b-55296<<10|c-56320|65536;b=null}else b&&(f.push(239,191,189),b=null);128>c?f.push(c):2048>c?f.push(c>>6|192,63&c|128):65536>c?f.push(c>>12|224,c>>6&63|128,63&c|128):f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}return f}l.exports=b;var a=g("ieee754"),c,e;var f=
{readUInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},writeUInt32LE:function(a,c){this[c]=a;this[c+1]=a>>>8;this[c+2]=a>>>16;this[c+3]=a>>>24},readInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},readFloatLE:function(c){return a.read(this,c,!0,23,4)},readDoubleLE:function(c){return a.read(this,c,!0,52,8)},writeFloatLE:function(c,b){return a.write(this,c,b,!0,23,4)},writeDoubleLE:function(c,b){return a.write(this,c,b,!0,52,8)},toString:function(a,
c,b){var e=a="";b=Math.min(this.length,b||this.length);for(c=c||0;c<b;c++){var f=this[c];127>=f?(a+=decodeURIComponent(e)+String.fromCharCode(f),e=""):e+="%"+f.toString(16)}return a+decodeURIComponent(e)},write:function(a,b){for(var f=a===c?e:h(a),k=0;k<f.length;k++)this[b+k]=f[k]},slice:function(a,c){return this.subarray(a,c)},copy:function(a,c){c=c||0;for(var b=0;b<this.length;b++)a[c+b]=this[b]}};f.writeInt32LE=f.writeUInt32LE;b.byteLength=function(a){return c=a,e=h(a),e.length};b.isBuffer=function(a){return!(!a||
!a._isBuffer)}},{ieee754:17}],25:[function(g,l,d){(function(b){function h(a){this.buf=q.isBuffer(a)?a:new q(a||0);this.pos=0;this.length=this.buf.length}function a(a,c){for(var b=0;b<a.length;b++)c.writeVarint(a[b])}function c(a,c){for(var b=0;b<a.length;b++)c.writeSVarint(a[b])}function e(a,c){for(var b=0;b<a.length;b++)c.writeFloat(a[b])}function f(a,c){for(var b=0;b<a.length;b++)c.writeDouble(a[b])}function k(a,c){for(var b=0;b<a.length;b++)c.writeBoolean(a[b])}function d(a,c){for(var b=0;b<a.length;b++)c.writeFixed32(a[b])}
function m(a,c){for(var b=0;b<a.length;b++)c.writeSFixed32(a[b])}function r(a,c){for(var b=0;b<a.length;b++)c.writeFixed64(a[b])}function u(a,c){for(var b=0;b<a.length;b++)c.writeSFixed64(a[b])}l.exports=h;var q=b.Buffer||g("./buffer");h.Varint=0;h.Fixed64=1;h.Bytes=2;h.Fixed32=5;var t=1/4294967296,w=Math.pow(2,63);h.prototype={destroy:function(){this.buf=null},readFields:function(a,c,b){for(b=b||this.length;this.pos<b;){var e=this.readVarint(),f=this.pos;a(e>>3,c,this);this.pos===f&&this.skip(e)}return c},
readMessage:function(a,c){return this.readFields(a,c,this.readVarint()+this.pos)},readFixed32:function(){var a=this.buf.readUInt32LE(this.pos);return this.pos+=4,a},readSFixed32:function(){var a=this.buf.readInt32LE(this.pos);return this.pos+=4,a},readFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+4294967296*this.buf.readUInt32LE(this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+4294967296*this.buf.readInt32LE(this.pos+4);return this.pos+=8,
a},readFloat:function(){var a=this.buf.readFloatLE(this.pos);return this.pos+=4,a},readDouble:function(){var a=this.buf.readDoubleLE(this.pos);return this.pos+=8,a},readVarint:function(){var a=this.buf;var c=a[this.pos++];var b=127&c;if(128>c)var e=b;else if(c=a[this.pos++],b|=(127&c)<<7,128>c)e=b;else if(c=a[this.pos++],b|=(127&c)<<14,128>c)e=b;else if(c=a[this.pos++],b|=(127&c)<<21,128>c)e=b;else if(c=this.buf,(e=c[this.pos++],b+=268435456*(127&e),128>e)||(e=c[this.pos++],b+=34359738368*(127&e),
128>e)||(e=c[this.pos++],b+=4398046511104*(127&e),128>e)||(e=c[this.pos++],b+=562949953421312*(127&e),128>e)||(e=c[this.pos++],b+=72057594037927936*(127&e),128>e)||(e=c[this.pos++],b+=0x7fffffffffffffff*(127&e),128>e))e=b;else throw Error("Expected varint not more than 10 bytes");return e},readVarint64:function(){var a=this.pos,c=this.readVarint();if(c<w)return c;for(var b=this.pos-2;255===this.buf[b];)b--;b<a&&(b=a);for(var e=c=0;e<b-a+1;e++)var f=127&~this.buf[a+e],c=c+(4>e?f<<7*e:f*Math.pow(2,
7*e));return-c-1},readSVarint:function(){var a=this.readVarint();return 1===a%2?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,c=this.buf.toString("utf8",this.pos,a);return this.pos=a,c},readBytes:function(){var a=this.readVarint()+this.pos,c=this.buf.slice(this.pos,a);return this.pos=a,c},readPackedVarint:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readVarint());return c},readPackedSVarint:function(){for(var a=
this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(){for(var a=this.readVarint()+this.pos,
c=[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(){for(var a=this.readVarint()+this.pos,c=[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(a){a&=7;if(a===h.Varint)for(;127<this.buf[this.pos++];);else if(a===h.Bytes)this.pos=
this.readVarint()+this.pos;else if(a===h.Fixed32)this.pos+=4;else{if(a!==h.Fixed64)throw Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(a,c){this.writeVarint(a<<3|c)},realloc:function(a){for(var c=this.length||16;c<this.pos+a;)c*=2;c!==this.length&&(a=new q(c),this.buf.copy(a),this.buf=a,this.length=c)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(a){this.realloc(4);this.buf.writeUInt32LE(a,this.pos);this.pos+=4},writeSFixed32:function(a){this.realloc(4);
this.buf.writeInt32LE(a,this.pos);this.pos+=4},writeFixed64:function(a){this.realloc(8);this.buf.writeInt32LE(a&-1,this.pos);this.buf.writeUInt32LE(Math.floor(a*t),this.pos+4);this.pos+=8},writeSFixed64:function(a){this.realloc(8);this.buf.writeInt32LE(a&-1,this.pos);this.buf.writeInt32LE(Math.floor(a*t),this.pos+4);this.pos+=8},writeVarint:function(a){a=+a;var c;if(268435455<a){this.realloc(10);for(c=this.pos+10;1<=a;){if(this.pos>=c)throw Error("Given varint doesn't fit into 10 bytes");var b=255&
a;this.buf[this.pos++]=b|(128<=a?128:0);a/=128}c=void 0}else c=(this.realloc(4),this.buf[this.pos++]=127&a|(127<a?128:0),void(127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(127<a?128:0),127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(127<a?128:0),127>=a||(this.buf[this.pos++]=a>>>7&127)))));return c},writeSVarint:function(a){this.writeVarint(0>a?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a);var c=q.byteLength(a);this.writeVarint(c);this.realloc(c);this.buf.write(a,
this.pos);this.pos+=c},writeFloat:function(a){this.realloc(4);this.buf.writeFloatLE(a,this.pos);this.pos+=4},writeDouble:function(a){this.realloc(8);this.buf.writeDoubleLE(a,this.pos);this.pos+=8},writeBytes:function(a){var c=a.length;this.writeVarint(c);this.realloc(c);for(var b=0;b<c;b++)this.buf[this.pos++]=a[b]},writeRawMessage:function(a,c){this.pos++;var b=this.pos;a(c,this);var e=this.pos-b;if(128<=e){var f=16383>=e?1:2097151>=e?2:268435455>=e?3:Math.ceil(Math.log(e)/(7*Math.LN2));this.realloc(f);
for(var k=this.pos-1;k>=b;k--)this.buf[k+f]=this.buf[k]}this.pos=b-1;this.writeVarint(e);this.pos+=e},writeMessage:function(a,c,b){this.writeTag(a,h.Bytes);this.writeRawMessage(c,b)},writePackedVarint:function(c,b){this.writeMessage(c,a,b)},writePackedSVarint:function(a,b){this.writeMessage(a,c,b)},writePackedBoolean:function(a,c){this.writeMessage(a,k,c)},writePackedFloat:function(a,c){this.writeMessage(a,e,c)},writePackedDouble:function(a,c){this.writeMessage(a,f,c)},writePackedFixed32:function(a,
c){this.writeMessage(a,d,c)},writePackedSFixed32:function(a,c){this.writeMessage(a,m,c)},writePackedFixed64:function(a,c){this.writeMessage(a,r,c)},writePackedSFixed64:function(a,c){this.writeMessage(a,u,c)},writeBytesField:function(a,c){this.writeTag(a,h.Bytes);this.writeBytes(c)},writeFixed32Field:function(a,c){this.writeTag(a,h.Fixed32);this.writeFixed32(c)},writeSFixed32Field:function(a,c){this.writeTag(a,h.Fixed32);this.writeSFixed32(c)},writeFixed64Field:function(a,c){this.writeTag(a,h.Fixed64);
this.writeFixed64(c)},writeSFixed64Field:function(a,c){this.writeTag(a,h.Fixed64);this.writeSFixed64(c)},writeVarintField:function(a,c){this.writeTag(a,h.Varint);this.writeVarint(c)},writeSVarintField:function(a,c){this.writeTag(a,h.Varint);this.writeSVarint(c)},writeStringField:function(a,c){this.writeTag(a,h.Bytes);this.writeString(c)},writeFloatField:function(a,c){this.writeTag(a,h.Fixed32);this.writeFloat(c)},writeDoubleField:function(a,c){this.writeTag(a,h.Fixed64);this.writeDouble(c)},writeBooleanField:function(a,
c){this.writeVarintField(a,!!c)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./buffer":24}],26:[function(g,l,d){function b(b,a){this.x=b;this.y=a}l.exports=b;b.prototype={clone:function(){return new b(this.x,this.y)},add:function(b){return this.clone()._add(b)},sub:function(b){return this.clone()._sub(b)},mult:function(b){return this.clone()._mult(b)},div:function(b){return this.clone()._div(b)},rotate:function(b){return this.clone()._rotate(b)},
matMult:function(b){return this.clone()._matMult(b)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.distSqr(b))},distSqr:function(b){var a=b.x-this.x;b=b.y-this.y;return a*a+b*b},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-
b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(b,a){return Math.atan2(this.x*a-this.y*b,this.x*b+this.y*a)},_matMult:function(b){var a=b[2]*this.x+b[3]*this.y;return this.x=b[0]*this.x+b[1]*this.y,this.y=a,this},_add:function(b){return this.x+=b.x,this.y+=b.y,this},_sub:function(b){return this.x-=b.x,this.y-=b.y,this},_mult:function(b){return this.x*=b,this.y*=b,this},_div:function(b){return this.x/=b,this.y/=b,this},_unit:function(){return this._div(this.mag()),
this},_perp:function(){var b=this.y;return this.y=this.x,this.x=-b,this},_rotate:function(b){var a=Math.cos(b);b=Math.sin(b);var c=b*this.x+a*this.y;return this.x=a*this.x-b*this.y,this.y=c,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};b.convert=function(d){return d instanceof b?d:Array.isArray(d)?new b(d[0],d[1]):d}},{}],27:[function(g,l,d){function b(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");
}function a(a){if(m===setTimeout)return setTimeout(a,0);if((m===b||!m)&&setTimeout)return m=setTimeout,setTimeout(a,0);try{return m(a,0)}catch(y){try{return m.call(null,a,0)}catch(A){return m.call(this,a,0)}}}function c(a){if(r===clearTimeout)return clearTimeout(a);if((r===h||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(a);try{return r(a)}catch(y){try{return r.call(null,a)}catch(A){return r.call(this,a)}}}function e(){q&&t&&(q=!1,t.length?u=t.concat(u):w=-1,u.length&&f())}function f(){if(!q){var b=
a(e);q=!0;for(var f=u.length;f;){t=u;for(u=[];++w<f;)t&&t[w].run();w=-1;f=u.length}t=null;q=!1;c(b)}}function k(a,c){this.fun=a;this.array=c}function n(){}g=l.exports={};try{var m="function"==typeof setTimeout?setTimeout:b}catch(v){m=b}try{var r="function"==typeof clearTimeout?clearTimeout:h}catch(v){r=h}!0;var u=[],q=!1,t,w=-1;g.nextTick=function(c){var b=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)b[e-1]=arguments[e];u.push(new k(c,b));1!==u.length||q||a(f)};
k.prototype.run=function(){this.fun.apply(null,this.array)};g.title="browser";g.browser=!0;g.env={};g.argv=[];g.version="";g.versions={};g.on=n;g.addListener=n;g.once=n;g.off=n;g.removeListener=n;g.removeAllListeners=n;g.emit=n;g.binding=function(a){throw Error("process.binding is not supported");};g.cwd=function(){return"/"};g.chdir=function(a){throw Error("process.chdir is not supported");};g.umask=function(){return 0}},{}],28:[function(g,l,d){function b(c,e,f,k,d){f=f||0;k=k||c.length-1;for(d=
d||a;k>f;){if(600<k-f){var m=k-f+1,n=e-f+1,g=Math.log(m),q=.5*Math.exp(2*g/3),g=.5*Math.sqrt(g*q*(m-q)/m)*(0>n-m/2?-1:1);b(c,e,Math.max(f,Math.floor(e-n*q/m+g)),Math.min(k,Math.floor(e+(m-n)*q/m+g)),d)}m=c[e];n=f;q=k;h(c,f,e);for(0<d(c[k],m)&&h(c,f,k);n<q;){h(c,n,q);n++;for(q--;0>d(c[n],m);)n++;for(;0<d(c[q],m);)q--}0===d(c[f],m)?h(c,f,q):(q++,h(c,q,k));q<=e&&(f=q+1);e<=q&&(k=q-1)}}function h(a,b,f){var c=a[b];a[b]=a[f];a[f]=c}function a(a,b){return a<b?-1:a>b?1:0}l.exports=b},{}],29:[function(g,
l,d){function b(a){var c=Object.create(this.options),b;for(b in a)c[b]=a[b];this.options=c;this.trees=Array(this.options.maxZoom+1)}function h(a,c){var b=a.geometry.coordinates,f=e(b[1]);return{x:b[0]/360+.5,y:f,zoom:1/0,id:c,numPoints:1}}function a(a){return{type:"Feature",properties:c(a),geometry:{type:"Point",coordinates:[360*(a.x-.5),360*Math.atan(Math.exp((180-360*a.y)*Math.PI/180))/Math.PI-90]}}}function c(a){a=a.numPoints;return{cluster:!0,point_count:a,point_count_abbreviated:1E4<=a?Math.round(a/
1E3)+"k":1E3<=a?Math.round(a/100)/10+"k":a}}function e(a){a=Math.sin(a*Math.PI/180);a=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return 0>a?0:1<a?1:a}function f(a){return a.x}function k(a){return a.y}var n=g("kdbush");l.exports=function(a){return new b(a)};b.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(a){var c=this.options.log;c&&console.time("total time");var b="prepare "+a.length+" points";c&&console.time(b);this.points=a;a=a.map(h);c&&console.timeEnd(b);
for(b=this.options.maxZoom;b>=this.options.minZoom;b--){var e=+Date.now();this.trees[b+1]=n(a,f,k,this.options.nodeSize,Float32Array);a=this._cluster(a,b);c&&console.log("z%d: %d clusters in %dms",b,a.length,+Date.now()-e)}return this.trees[this.options.minZoom]=n(a,f,k,this.options.nodeSize,Float32Array),c&&console.timeEnd("total time"),this},getClusters:function(c,b){for(var f=this.trees[this._limitZoom(b)],k=f.range(c[0]/360+.5,e(c[3]),c[2]/360+.5,e(c[1])),d=[],h=0;h<k.length;h++){var m=f.points[k[h]];
d.push(-1!==m.id?this.points[m.id]:a(m))}return d},getTile:function(a,c,b){var e=this.trees[this._limitZoom(a)];a=Math.pow(2,a);var f=this.options.radius/this.options.extent,k=(b-f)/a,d=(b+1+f)/a,h={features:[]};return this._addTileFeatures(e.range((c-f)/a,k,(c+1+f)/a,d),e.points,c,b,a,h),0===c&&this._addTileFeatures(e.range(1-f/a,k,1,d),e.points,a,b,a,h),c===a-1&&this._addTileFeatures(e.range(0,k,f/a,d),e.points,-1,b,a,h),h.features.length?h:null},_addTileFeatures:function(a,b,e,f,k,d){for(var h=
0;h<a.length;h++){var m=b[a[h]];d.features.push({type:1,geometry:[[Math.round(this.options.extent*(m.x*k-e)),Math.round(this.options.extent*(m.y*k-f))]],tags:-1!==m.id?this.points[m.id].properties:c(m)})}},_limitZoom:function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))},_cluster:function(a,c){for(var b=[],e=this.options.radius/(this.options.extent*Math.pow(2,c)),f=0;f<a.length;f++){var k=a[f];if(!(k.zoom<=c)){k.zoom=c;for(var d=this.trees[c+1],h=d.within(k.x,k.y,e),
m=!1,n=k.numPoints,g=k.x*n,r=k.y*n,l=0;l<h.length;l++){var C=d.points[h[l]];c<C.zoom&&(m=!0,C.zoom=c,g+=C.x*C.numPoints,r+=C.y*C.numPoints,n+=C.numPoints)}b.push(m?{x:g/n,y:r/n,zoom:1/0,id:-1,numPoints:n}:k)}}return b}}},{kdbush:18}],30:[function(g,l,d){function b(a,c){if(!(this instanceof b))return new b(a,c);if(this.data=a||[],this.length=this.data.length,this.compare=c||h,a)for(var e=Math.floor(this.length/2);0<=e;e--)this._down(e)}function h(a,c){return a<c?-1:a>c?1:0}l.exports=b;b.prototype=
{push:function(a){this.data.push(a);this.length++;this._up(this.length-1)},pop:function(){var a=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),a},peek:function(){return this.data[0]},_up:function(a){for(var c=this.data,b=this.compare;0<a;){var f=Math.floor((a-1)/2);if(!(0>b(c[a],c[f])))break;var k=c,d=k[f];k[f]=k[a];k[a]=d;a=f}},_down:function(a){for(var c=this.data,b=this.compare,f=this.length;;){var k=2*a+1,d=k+1,h=a;if(k<f&&0>b(c[k],c[h])&&
(h=k),d<f&&0>b(c[d],c[h])&&(h=d),h===a)break;k=c;d=k[h];k[h]=k[a];k[a]=d;a=h}}}},{}],31:[function(g,l,d){"function"==typeof Object.create?l.exports=function(b,d){b.super_=d;b.prototype=Object.create(d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})}:l.exports=function(b,d){b.super_=d;var a=function(){};a.prototype=d.prototype;b.prototype=new a;b.prototype.constructor=b}},{}],32:[function(g,l,d){l.exports=function(b){return b&&"object"==typeof b&&"function"==typeof b.copy&&
"function"==typeof b.fill&&"function"==typeof b.readUInt8}},{}],33:[function(g,l,d){(function(b,h){function a(a,b){var f={seen:[],stylize:e};return 3<=arguments.length&&(f.depth=arguments[2]),4<=arguments.length&&(f.colors=arguments[3]),w(b)?f.showHidden=b:b&&d._extend(f,b),A(f.showHidden)&&(f.showHidden=!1),A(f.depth)&&(f.depth=2),A(f.colors)&&(f.colors=!1),A(f.customInspect)&&(f.customInspect=!0),f.colors&&(f.stylize=c),k(f,a,f.depth)}function c(c,b){var e=a.styles[b];return e?"\u001b["+a.colors[e][0]+
"m"+c+"\u001b["+a.colors[e][1]+"m":c}function e(a,c){return a}function f(a){var c={};return a.forEach(function(a,b){c[a]=!0}),c}function k(a,c,b){if(a.customInspect&&c&&C(c.inspect)&&c.inspect!==d.inspect&&(!c.constructor||c.constructor.prototype!==c)){var e=c.inspect(b,a);return l(e)||(e=k(a,e,b)),e}var h=n(a,c);if(h)return h;var h=Object.keys(c),g=f(h);if(a.showHidden&&(h=Object.getOwnPropertyNames(c)),E(c)&&(0<=h.indexOf("message")||0<=h.indexOf("description")))return m(c);if(0===h.length){if(C(c))return a.stylize("[Function"+
(c.name?": "+c.name:"")+"]","special");if(z(c))return a.stylize(RegExp.prototype.toString.call(c),"regexp");if(x(c))return a.stylize(Date.prototype.toString.call(c),"date");if(E(c))return m(c)}var v="",w=!1,y=["{","}"];if(t(c)&&(w=!0,y=["[","]"]),C(c))v=" [Function"+(c.name?": "+c.name:"")+"]";if(z(c)&&(v=" "+RegExp.prototype.toString.call(c)),x(c)&&(v=" "+Date.prototype.toUTCString.call(c)),E(c)&&(v=" "+m(c)),0===h.length&&(!w||0==c.length))return y[0]+v+y[1];if(0>b)return z(c)?a.stylize(RegExp.prototype.toString.call(c),
"regexp"):a.stylize("[Object]","special");a.seen.push(c);return e=w?r(a,c,b,g,h):h.map(function(e){return u(a,c,b,g,e,w)}),a.seen.pop(),q(e,v,y)}function n(a,c){if(A(c))return a.stylize("undefined","undefined");if(l(c)){var b="'"+JSON.stringify(c).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(b,"string")}return v(c)?a.stylize(""+c,"number"):w(c)?a.stylize(""+c,"boolean"):null===c?a.stylize("null","null"):void 0}function m(a){return"["+Error.prototype.toString.call(a)+
"]"}function r(a,c,b,e,f){for(var k=[],d=0,h=c.length;d<h;++d)Object.prototype.hasOwnProperty.call(c,String(d))?k.push(u(a,c,b,e,String(d),!0)):k.push("");return f.forEach(function(f){f.match(/^\d+$/)||k.push(u(a,c,b,e,f,!0))}),k}function u(a,c,b,e,f,d){var h,m,n;if(n=Object.getOwnPropertyDescriptor(c,f)||{value:c[f]},n.get?m=n.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):n.set&&(m=a.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(e,f)||(h="["+f+"]"),
m||(0>a.seen.indexOf(n.value)?(m=null===b?k(a,n.value,null):k(a,n.value,b-1),-1<m.indexOf("\n")&&(m=d?m.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+m.split("\n").map(function(a){return"   "+a}).join("\n"))):m=a.stylize("[Circular]","special")),A(h)){if(d&&f.match(/^\d+$/))return m;h=JSON.stringify(""+f);h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=a.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=a.stylize(h,
"string"))}return h+": "+m}function q(a,c,b){var e=0;return 60<a.reduce(function(a,c){return e++,0<=c.indexOf("\n")&&e++,a+c.replace(/\u001b\[\d\d?m/g,"").length+1},0)?b[0]+(""===c?"":c+"\n ")+" "+a.join(",\n  ")+" "+b[1]:b[0]+c+" "+a.join(", ")+" "+b[1]}function t(a){return Array.isArray(a)}function w(a){return"boolean"==typeof a}function v(a){return"number"==typeof a}function l(a){return"string"==typeof a}function A(a){return void 0===a}function z(a){return B(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}
function B(a){return"object"==typeof a&&null!==a}function x(a){return B(a)&&"[object Date]"===Object.prototype.toString.call(a)}function E(a){return B(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function C(a){return"function"==typeof a}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function G(){var a=new Date,c=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),I[a.getMonth()],c].join(" ")}var H=/%[sdj%]/g;d.format=function(c){if(!l(c)){for(var b=
[],e=0;e<arguments.length;e++)b.push(a(arguments[e]));return b.join(" ")}for(var e=1,f=arguments,k=f.length,b=String(c).replace(H,function(a){if("%%"===a)return"%";if(e>=k)return a;switch(a){case "%s":return String(f[e++]);case "%d":return Number(f[e++]);case "%j":try{return JSON.stringify(f[e++])}catch(W){return"[Circular]"}default:return a}}),d=f[e];e<k;d=f[++e])b+=null!==d&&B(d)?" "+a(d):" "+d;return b};d.deprecate=function(a,c){if(A(h.process))return function(){return d.deprecate(a,c).apply(this,
arguments)};if(!0===b.noDeprecation)return a;var e=!1;return function(){if(!e){if(b.throwDeprecation)throw Error(c);b.traceDeprecation?console.trace(c):console.error(c);e=!0}return a.apply(this,arguments)}};var K={},J;d.debuglog=function(a){if(A(J)&&(J=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!K[a])if((new RegExp("\\b"+a+"\\b","i")).test(J)){var c=b.pid;K[a]=function(){var b=d.format.apply(d,arguments);console.error("%s %d: %s",a,c,b)}}else K[a]=function(){};return K[a]};d.inspect=a;a.colors={bold:[1,
22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};a.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};d.isArray=t;d.isBoolean=w;d.isNull=function(a){return null===a};d.isNullOrUndefined=function(a){return null==a};d.isNumber=v;d.isString=l;d.isSymbol=function(a){return"symbol"==typeof a};d.isUndefined=
A;d.isRegExp=z;d.isObject=B;d.isDate=x;d.isError=E;d.isFunction=C;d.isPrimitive=function(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a};d.isBuffer=g("./support/isBuffer");var I="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");d.log=function(){console.log("%s - %s",G(),d.format.apply(d,arguments))};d.inherits=g("inherits");d._extend=function(a,c){if(!c||!B(c))return a;for(var b=Object.keys(c),e=b.length;e--;)a[b[e]]=
c[b[e]];return a}}).call(this,g("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":32,_process:27,inherits:31}],34:[function(g,l,d){l.exports.VectorTile=g("./lib/vectortile.js");l.exports.VectorTileFeature=g("./lib/vectortilefeature.js");l.exports.VectorTileLayer=g("./lib/vectortilelayer.js")},{"./lib/vectortile.js":35,"./lib/vectortilefeature.js":36,"./lib/vectortilelayer.js":37}],35:[function(g,l,d){function b(a,
c,b){3===a&&(a=new h(b,b.readVarint()+b.pos),a.length&&(c[a.name]=a))}var h=g("./vectortilelayer");l.exports=function(a,c){this.layers=a.readFields(b,{},c)}},{"./vectortilelayer":37}],36:[function(g,l,d){function b(a,c,b,d,m){this.properties={};this.extent=b;this.type=0;this._pbf=a;this._geometry=-1;this._keys=d;this._values=m;a.readFields(h,this,c)}function h(a,c,b){if(1==a)c.id=b.readVarint();else if(2==a)for(a=b.readVarint()+b.pos;b.pos<a;){var e=c._keys[b.readVarint()],f=c._values[b.readVarint()];
c.properties[e]=f}else 3==a?c.type=b.readVarint():4==a&&(c._geometry=b.pos)}function a(a){var c=a.length;if(1>=c)return[a];for(var b,e,d=[],h=0;h<c;h++){var g,q=a[h],t=0,w=0,v=q.length;for(g=v-1;w<v;g=w++){var l=q[w];g=q[g];t+=(g.x-l.x)*(l.y+g.y)}l=t;0!==l&&(void 0===e&&(e=0>l),e===0>l?(b&&d.push(b),b=[a[h]]):b.push(a[h]))}return b&&d.push(b),d}var c=g("point-geometry");l.exports=b;b.types=["Unknown","Point","LineString","Polygon"];b.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;
for(var b,k=a.readVarint()+a.pos,d=1,h=0,g=0,u=0,q=[];a.pos<k;)if(h||(h=a.readVarint(),d=7&h,h>>=3),h--,1===d||2===d)g+=a.readSVarint(),u+=a.readSVarint(),1===d&&(b&&q.push(b),b=[]),b.push(new c(g,u));else{if(7!==d)throw Error("unknown command "+d);b&&b.push(b[0].clone())}return b&&q.push(b),q};b.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var c=a.readVarint()+a.pos,b=1,d=0,h=0,g=0,u=1/0,q=-(1/0),t=1/0,w=-(1/0);a.pos<c;)if(d||(d=a.readVarint(),b=7&d,d>>=3),d--,1===b||2===b)h+=
a.readSVarint(),g+=a.readSVarint(),h<u&&(u=h),h>q&&(q=h),g<t&&(t=g),g>w&&(w=g);else if(7!==b)throw Error("unknown command "+b);return[u,t,q,w]};b.prototype.toGeoJSON=function(c,f,k){function e(a){for(var c=0;c<a.length;c++){var b=a[c];a[c]=[360*(b.x+h)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(b.y+g)/d)*Math.PI/180))-90]}}var d=this.extent*Math.pow(2,k),h=this.extent*c,g=this.extent*f;f=this.loadGeometry();k=b.types[this.type];switch(this.type){case 1:var q=[];for(c=0;c<f.length;c++)q[c]=f[c][0];
f=q;e(f);break;case 2:for(c=0;c<f.length;c++)e(f[c]);break;case 3:for(f=a(f),c=0;c<f.length;c++)for(q=0;q<f[c].length;q++)e(f[c][q])}1===f.length?f=f[0]:k="Multi"+k;c={type:"Feature",geometry:{type:k,coordinates:f},properties:this.properties};return"id"in this&&(c.id=this.id),c}},{"point-geometry":26}],37:[function(g,l,d){function b(a,c){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=a;this._keys=[];this._values=[];this._features=[];a.readFields(h,this,c);this.length=this._features.length}
function h(c,b,k){15===c?b.version=k.readVarint():1===c?b.name=k.readString():5===c?b.extent=k.readVarint():2===c?b._features.push(k.pos):3===c?b._keys.push(k.readString()):4===c&&b._values.push(a(k))}function a(a){for(var c=null,b=a.readVarint()+a.pos;a.pos<b;)c=a.readVarint()>>3,c=1===c?a.readString():2===c?a.readFloat():3===c?a.readDouble():4===c?a.readVarint64():5===c?a.readVarint():6===c?a.readSVarint():7===c?a.readBoolean():null;return c}var c=g("./vectortilefeature.js");l.exports=b;b.prototype.feature=
function(a){if(0>a||a>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[a];a=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,a,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":36}],38:[function(g,l,d){function b(b){var e=[],f;for(f in b.layers)e.push(h(b.layers[f]));b=new a;return c.tile.write({layers:e},b),b.finish()}function h(a){for(var c={name:a.name||"",version:a.version||1,extent:a.extent||4096,keys:[],values:[],features:[]},
b={},e={},f=0;f<a.length;f++){for(var d=a.feature(f),h=d,g=d.loadGeometry(),w=[],v=0,l=0,A=g.length,z=0;z<A;z++){var B=g[z];w.push(9);for(var x=0;x<B.length;x++){1===x&&w.push((B.length-1<<3)+2);var E=B[x].x-v,C=B[x].y-l;w.push(E<<1^E>>31,C<<1^C>>31);v+=E;l+=C}}h.geometry=w;var h=[],D;for(D in d.properties)g=b[D],"undefined"==typeof g&&(c.keys.push(D),g=c.keys.length-1,b[D]=g),v=void 0,l=d.properties[D],w=typeof l,w=("string"===w?v={string_value:l}:"boolean"===w?v={bool_value:l}:"number"===w?v=0!==
l%1?{double_value:l}:0>l?{sint_value:l}:{uint_value:l}:(l=JSON.stringify(l),v={string_value:l}),v.key=w+":"+l,v),v=e[w.key],"undefined"==typeof v&&(c.values.push(w),v=c.values.length-1,e[w.key]=v),h.push(g),h.push(v);d.tags=h;c.features.push(d)}return c}var a=g("pbf"),c=g("./vector-tile-pb"),e=g("./lib/geojson_wrapper");l.exports=b;l.exports.fromVectorTileJs=b;l.exports.fromGeojsonVt=function(a){var c={},f;for(f in a)c[f]=new e(a[f].features),c[f].name=f;return b({layers:c})};l.exports.GeoJSONWrapper=
e},{"./lib/geojson_wrapper":39,"./vector-tile-pb":40,pbf:25}],39:[function(g,l,d){function b(a){this.features=a;this.length=a.length}function h(a){this.id="number"==typeof a.id?a.id:void 0;this.type=a.type;this.rawGeometry=1===a.type?[a.geometry]:a.geometry;this.properties=a.tags;this.extent=4096}var a=g("point-geometry");g=g("vector-tile").VectorTileFeature;l.exports=b;b.prototype.feature=function(a){return new h(this.features[a])};h.prototype.loadGeometry=function(){var c=this.rawGeometry;this.geometry=
[];for(var b=0;b<c.length;b++){for(var f=c[b],k=[],d=0;d<f.length;d++)k.push(new a(f[d][0],f[d][1]));this.geometry.push(k)}return this.geometry};h.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,f=-(1/0),k=1/0,d=-(1/0),h=0;h<a.length;h++)for(var g=a[h],u=0;u<g.length;u++)var q=g[u],b=Math.min(b,q.x),f=Math.max(f,q.x),k=Math.min(k,q.y),d=Math.max(d,q.y);return[b,k,f,d]};h.prototype.toGeoJSON=g.prototype.toGeoJSON},{"point-geometry":26,"vector-tile":34}],40:[function(g,
l,d){function b(a,c,b){3===a&&c.layers.push(n(b,b.readVarint()+b.pos))}function h(c,b){return c.readFields(a,{},b)}function a(a,c,b){1===a?c.string_value=b.readString():2===a?c.float_value=b.readFloat():3===a?c.double_value=b.readDouble():4===a?c.int_value=b.readVarint():5===a?c.uint_value=b.readVarint():6===a?c.sint_value=b.readSVarint():7===a&&(c.bool_value=b.readBoolean())}function c(a,c){void 0!==a.string_value&&c.writeStringField(1,a.string_value);void 0!==a.float_value&&c.writeFloatField(2,
a.float_value);void 0!==a.double_value&&c.writeDoubleField(3,a.double_value);void 0!==a.int_value&&c.writeVarintField(4,a.int_value);void 0!==a.uint_value&&c.writeVarintField(5,a.uint_value);void 0!==a.sint_value&&c.writeSVarintField(6,a.sint_value);void 0!==a.bool_value&&c.writeBooleanField(7,a.bool_value)}function e(a,c){var b=a.readFields(f,{},c);return void 0===b.type&&(b.type="Unknown"),b}function f(a,c,b){1===a?c.id=b.readVarint():2===a?c.tags=b.readPackedVarint():3===a?c.type=b.readVarint():
4===a&&(c.geometry=b.readPackedVarint())}function k(a,c){void 0!==a.id&&c.writeVarintField(1,a.id);void 0!==a.tags&&c.writePackedVarint(2,a.tags);void 0!==a.type&&c.writeVarintField(3,a.type);void 0!==a.geometry&&c.writePackedVarint(4,a.geometry)}function n(a,c){return a.readFields(m,{features:[],keys:[],values:[]},c)}function m(a,c,b){15===a?c.version=b.readVarint():1===a?c.name=b.readString():2===a?c.features.push(e(b,b.readVarint()+b.pos)):3===a?c.keys.push(b.readString()):4===a?c.values.push(h(b,
b.readVarint()+b.pos)):5===a&&(c.extent=b.readVarint())}function r(a,b){void 0!==a.version&&b.writeVarintField(15,a.version);void 0!==a.name&&b.writeStringField(1,a.name);var e;if(void 0!==a.features)for(e=0;e<a.features.length;e++)b.writeMessage(2,k,a.features[e]);if(void 0!==a.keys)for(e=0;e<a.keys.length;e++)b.writeStringField(3,a.keys[e]);if(void 0!==a.values)for(e=0;e<a.values.length;e++)b.writeMessage(4,c,a.values[e]);void 0!==a.extent&&b.writeVarintField(5,a.extent)}g=d.tile={read:function(a,
c){return a.readFields(b,{layers:[]},c)},write:function(a,c){var b;if(void 0!==a.layers)for(b=0;b<a.layers.length;b++)c.writeMessage(3,r,a.layers[b])}};g.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3};g.value={read:h,write:c};g.feature={read:e,write:k};g.layer={read:n,write:r}},{}],41:[function(g,l,d,b,h,a){var c=JSON.stringify;l.exports=function(e,f){function k(a){w[a]=!0;for(var c in h[a][1]){var b=h[a][1][c];w[b]||k(b)}}for(var d,m,g=Object.keys(a),u=0,q=g.length;u<q;u++){d=g[u];var t=a[d].exports;
if(t===e||t&&t["default"]===e){m=d;break}}if(!m){m=Math.floor(Math.pow(16,8)*Math.random()).toString(16);t={};u=0;for(q=g.length;u<q;u++)d=g[u],t[d]=d;h[m]=[Function(["require","module","exports"],"("+e+")(self)"),t]}d=Math.floor(Math.pow(16,8)*Math.random()).toString(16);g={};g[m]=m;h[d]=[Function(["require"],"var f = require("+c(m)+");(f.default ? f.default : f)(self);"),g];var w={};k(d);d="("+b+")({"+Object.keys(w).map(function(a){return c(a)+":["+h[a][0]+","+c(h[a][1])+"]"}).join(",")+"},{},["+
c(d)+"])";m=window.URL||window.webkitURL||window.mozURL||window.msURL;d=new Blob([d],{type:"text/javascript"});if(f&&f.bare)return d;m=m.createObjectURL(d);d=new Worker(m);return d.objectURL=m,d}},{}],42:[function(g,l,d){l.exports.RADIUS=6378137;l.exports.FLATTENING=1/298.257223563;l.exports.POLAR_RADIUS=6356752.3142},{}],43:[function(g,l,d){l.exports={version:"0.35.1"}},{}],44:[function(g,l,d){var b=g("./program_configuration"),h=g("./vertex_array_type"),a=function(a,c){this.vertexOffset=a;this.primitiveOffset=
c;this.primitiveLength=this.vertexLength=0},c=function(a,c,k){this.globalProperties={zoom:k};this.layoutVertexArray=new (h(a.layoutAttributes));var e=a.elementArrayType;e&&(this.elementArray=new e);(e=a.elementArrayType2)&&(this.elementArray2=new e);this.layerData={};for(e=0;e<c.length;e+=1){var f=c[e],d=b.createDynamic(a.paintAttributes||[],f,k);this.layerData[f.id]={layer:f,programConfiguration:d,paintVertexArray:new d.PaintVertexArray,paintPropertyStatistics:d.createPaintPropertyStatistics()}}this.segments=
[];this.segments2=[]};c.prototype.prepareSegment=function(b){var e=this.segments[this.segments.length-1];return(!e||e.vertexLength+b>c.MAX_VERTEX_ARRAY_LENGTH)&&(e=new a(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(e)),e};c.prototype.prepareSegment2=function(b){var e=this.segments2[this.segments2.length-1];return(!e||e.vertexLength+b>c.MAX_VERTEX_ARRAY_LENGTH)&&(e=new a(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(e)),e};c.prototype.populatePaintArrays=
function(a){for(var c in this.layerData){var b=this.layerData[c];0!==b.paintVertexArray.bytesPerElement&&b.programConfiguration.populatePaintArray(b.layer,b.paintVertexArray,b.paintPropertyStatistics,this.layoutVertexArray.length,this.globalProperties,a)}};c.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};c.prototype.serialize=function(a){var c=this.layoutVertexArray.serialize(a),b=this.elementArray&&this.elementArray.serialize(a),e=this.elementArray2&&this.elementArray2.serialize(a),
d=this.layerData,h={},g;for(g in d){var q=d[g].paintVertexArray;if(0!==q.length){var t=q.serialize(a),q=q.constructor.serialize();h[g]={array:t,type:q}}}return{layoutVertexArray:c,elementArray:b,elementArray2:e,paintVertexArrays:h,segments:this.segments,segments2:this.segments2}};c.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;l.exports=c},{"./program_configuration":58,"./vertex_array_type":60}],45:[function(g,l,d){var b=g("./array_group"),h=g("./buffer_group"),a=g("../util/util");g=function(a,e){this.zoom=
a.zoom;this.overscaling=a.overscaling;this.layers=a.layers;this.index=a.index;a.arrays?this.buffers=new h(e,a.layers,a.zoom,a.arrays):this.arrays=new b(e,a.layers,a.zoom)};g.prototype.populate=function(a,b){for(var c=0;c<a.length;c+=1){var e=a[c];this.layers[0].filter(e)&&(this.addFeature(e),b.featureIndex.insert(e,this.index))}};g.prototype.getPaintPropertyStatistics=function(){return a.mapObject(this.arrays.layerData,function(a){return a.paintPropertyStatistics})};g.prototype.isEmpty=function(){return this.arrays.isEmpty()};
g.prototype.serialize=function(a){return{zoom:this.zoom,layerIds:this.layers.map(function(a){return a.id}),arrays:this.arrays.serialize(a)}};g.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)};l.exports=g;g.deserialize=function(c,b){if(b){for(var e={},k=0;k<c.length;k+=1){var d=c[k],h=d.layerIds.map(function(a){return b.getLayer(a)}).filter(Boolean);if(0!==h.length)for(var d=h[0].createBucket(a.extend({layers:h},d)),g=0;g<h.length;g+=1)e[h[g].id]=d}return e}}},
{"../util/util":214,"./array_group":44,"./buffer_group":52}],46:[function(g,l,d){function b(a,c,b,e,d){a.emplaceBack(2*c+(e+1)/2,2*b+(d+1)/2)}d=g("../bucket");var h=g("../element_array_type"),a=g("../load_geometry"),c=g("../extent"),e={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:h(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",
type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]};g=function(f){function k(a){f.call(this,a,e)}return f&&(k.__proto__=f),k.prototype=Object.create(f&&f.prototype),k.prototype.constructor=k,k.prototype.addFeature=function(e){for(var f=this.arrays,k=0,d=a(e);k<d.length;k+=1)for(var h=0,g=d[k];h<g.length;h+=1){var n=g[h],v=n.x,n=n.y;if(!(0>v||v>=c||0>
n||n>=c)){var l=f.prepareSegment(4),A=l.vertexLength;b(f.layoutVertexArray,v,n,-1,-1);b(f.layoutVertexArray,v,n,1,-1);b(f.layoutVertexArray,v,n,1,1);b(f.layoutVertexArray,v,n,-1,1);f.elementArray.emplaceBack(A,A+1,A+2);f.elementArray.emplaceBack(A,A+3,A+2);l.vertexLength+=4;l.primitiveLength+=2}}f.populatePaintArrays(e.properties)},k}(d);g.programInterface=e;l.exports=g},{"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56}],47:[function(g,l,d){d=g("../bucket");var b=g("../element_array_type"),
h=g("../load_geometry"),a=g("earcut"),c=g("../../util/classify_rings"),e={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:b(3),elementArrayType2:b(2),paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",multiplier:255}]};g=function(b){function f(a){b.call(this,a,e)}return b&&(f.__proto__=b),f.prototype=Object.create(b&&b.prototype),f.prototype.constructor=f,f.prototype.addFeature=function(b){for(var e=
this.arrays,f=0,k=c(h(b),500);f<k.length;f+=1){for(var d=k[f],g=0,n=0,v=d;n<v.length;n+=1)g+=v[n].length;for(var n=e.prepareSegment(g),v=n.vertexLength,l=[],A=[],z=0,B=d;z<B.length;z+=1){var x=B[z];if(0!==x.length){x!==d[0]&&A.push(l.length/2);var E=e.prepareSegment2(x.length),C=E.vertexLength;e.layoutVertexArray.emplaceBack(x[0].x,x[0].y);e.elementArray2.emplaceBack(C+x.length-1,C);l.push(x[0].x);l.push(x[0].y);for(var D=1;D<x.length;D++)e.layoutVertexArray.emplaceBack(x[D].x,x[D].y),e.elementArray2.emplaceBack(C+
D-1,C+D),l.push(x[D].x),l.push(x[D].y);E.vertexLength+=x.length;E.primitiveLength+=x.length}}d=a(l,A);for(l=0;l<d.length;l+=3)e.elementArray.emplaceBack(v+d[l],v+d[l+1],v+d[l+2]);n.vertexLength+=g;n.primitiveLength+=d.length/3}e.populatePaintArrays(b.properties)},f}(d);g.programInterface=e;l.exports=g},{"../../util/classify_rings":197,"../bucket":45,"../element_array_type":53,"../load_geometry":56,earcut:5}],48:[function(g,l,d){function b(a,c,b,e,f,k,d,h){a.emplaceBack(c,b,2*Math.floor(e*n)+d,f*n*
2,k*n*2,Math.round(h))}d=g("../bucket");var h=g("../element_array_type"),a=g("../load_geometry"),c=g("../extent"),e=g("earcut"),f=g("../../util/classify_rings"),k={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],elementArrayType:h(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},
n=Math.pow(2,13);g=function(d){function h(a){d.call(this,a,k)}return d&&(h.__proto__=d),h.prototype=Object.create(d&&d.prototype),h.prototype.constructor=h,h.prototype.addFeature=function(k){for(var d=this.arrays,h=0,m=f(a(k),500);h<m.length;h+=1){for(var g=m[h],n=0,r=0,u=g;r<u.length;r+=1)n+=u[r].length;for(var n=d.prepareSegment(5*n),u=[],l=[],r=[],x=0,E=g;x<E.length;x+=1){var C=E[x];if(0!==C.length){C!==g[0]&&l.push(u.length/2);for(var D=0,G=0;G<C.length;G++){var H=C[G];if(b(d.layoutVertexArray,
H.x,H.y,0,0,1,1,0),r.push(n.vertexLength++),1<=G){var K=C[G-1];if(!(H.x===K.x&&(0>H.x||H.x>c)||H.y===K.y&&(0>H.y||H.y>c))){var J=H.sub(K)._perp()._unit();b(d.layoutVertexArray,H.x,H.y,J.x,J.y,0,0,D);b(d.layoutVertexArray,H.x,H.y,J.x,J.y,0,1,D);D+=K.dist(H);b(d.layoutVertexArray,K.x,K.y,J.x,J.y,0,0,D);b(d.layoutVertexArray,K.x,K.y,J.x,J.y,0,1,D);K=n.vertexLength;d.elementArray.emplaceBack(K,K+1,K+2);d.elementArray.emplaceBack(K+1,K+2,K+3);n.vertexLength+=4;n.primitiveLength+=2}}u.push(H.x);u.push(H.y)}}}g=
e(u,l);for(u=0;u<g.length;u+=3)d.elementArray.emplaceBack(r[g[u]],r[g[u+1]],r[g[u+2]]);n.primitiveLength+=g.length/3}d.populatePaintArrays(k.properties)},h}(d);g.programInterface=k;l.exports=g},{"../../util/classify_rings":197,"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,earcut:5}],49:[function(g,l,d){function b(a,c,b,e,k,d,h){a.emplaceBack(c.x<<1|e,c.y<<1|k,Math.round(f*b.x)+128,Math.round(f*b.y)+128,(0===d?0:0>d?-1:1)+1|(h*n&63)<<2,h*n>>6)}d=g("../bucket");var h=
g("../element_array_type"),a=g("../load_geometry"),c=g("../extent"),e=g("vector-tile").VectorTileFeature,f=63,k=Math.cos(Math.PI/180*37.5),n=.5,m=Math.pow(2,14)/n,r={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",name:"a_gapwidth"},{property:"line-offset",
multiplier:1,type:"Int8"}],elementArrayType:h()};g=function(f){function d(a){f.call(this,a,r)}return f&&(d.__proto__=f),d.prototype=Object.create(f&&f.prototype),d.prototype.constructor=d,d.prototype.addFeature=function(c){for(var b=this.layers[0].layout,e=b["line-join"],f=b["line-cap"],k=b["line-miter-limit"],b=b["line-round-limit"],d=0,h=a(c,15);d<h.length;d+=1)this.addLine(h[d],c,e,f,k,b)},d.prototype.addLine=function(a,b,f,d,h,m){var g=b.properties;b="Polygon"===e.types[b.type];for(var n=a.length;2<=
n&&a[n-1].equals(a[n-2]);)n--;if(!(n<(b?3:2))){"bevel"===f&&(h=1.05);var r=c/(512*this.overscaling)*15,q=a[0],t=this.arrays,u=t.prepareSegment(10*n);this.distance=0;var v,l,w,y,z,A,M,S=b?"butt":d,U=!0;this.e1=this.e2=this.e3=-1;b&&(v=a[n-2],z=q.sub(v)._unit()._perp());for(q=0;q<n;q++)if(w=b&&q===n-1?a[1]:a[q+1],!w||!a[q].equals(w)){z&&(y=z);v&&(l=v);v=a[q];z=w?w.sub(v)._unit()._perp():y;y=y||z;var T=y.add(z);0===T.x&&0===T.y||T._unit();var Y=T.x*z.x+T.y*z.y,W=0!==Y?1/Y:1/0,Z=Y<k&&l&&w;if(Z&&0<q){var X=
v.dist(l);X>2*r&&(X=v.sub(v.sub(l)._mult(r/X)._round()),this.distance+=X.dist(l),this.addCurrentVertex(X,this.distance,y.mult(1),0,0,!1,u),l=X)}var ba=(X=l&&w)?f:w?d:S;if(X&&"round"===ba&&(W<m?ba="miter":2>=W&&(ba="fakeround")),"miter"===ba&&W>h&&(ba="bevel"),"bevel"===ba&&(2<W&&(ba="flipbevel"),W<h&&(ba="miter")),l&&(this.distance+=v.dist(l)),"miter"===ba)T._mult(W),this.addCurrentVertex(v,this.distance,T,0,0,!1,u);else if("flipbevel"===ba)100<W?T=z.clone().mult(-1):(U=0<y.x*z.y-y.y*z.x?-1:1,X=W*
y.add(z).mag()/y.sub(z).mag(),T._perp()._mult(X*U)),this.addCurrentVertex(v,this.distance,T,0,0,!1,u),this.addCurrentVertex(v,this.distance,T.mult(-1),0,0,!1,u);else if("bevel"===ba||"fakeround"===ba){X=0<y.x*z.y-y.y*z.x;W=-Math.sqrt(W*W-1);if(X?(M=0,A=W):(A=0,M=W),U||this.addCurrentVertex(v,this.distance,y,A,M,!1,u),"fakeround"===ba){U=Math.floor(8*(.5-(Y-.5)));for(W=0;W<U;W++)Y=z.mult((W+1)/(U+1))._add(y)._unit(),this.addPieSliceVertex(v,this.distance,Y,X,u);this.addPieSliceVertex(v,this.distance,
T,X,u);for(T=U-1;0<=T;T--)Y=y.mult((T+1)/(U+1))._add(z)._unit(),this.addPieSliceVertex(v,this.distance,Y,X,u)}w&&this.addCurrentVertex(v,this.distance,z,-A,-M,!1,u)}else"butt"===ba?(U||this.addCurrentVertex(v,this.distance,y,0,0,!1,u),w&&this.addCurrentVertex(v,this.distance,z,0,0,!1,u)):"square"===ba?(U||(this.addCurrentVertex(v,this.distance,y,1,1,!1,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(v,this.distance,z,-1,-1,!1,u)):"round"===ba&&(U||(this.addCurrentVertex(v,this.distance,y,0,0,!1,u),
this.addCurrentVertex(v,this.distance,y,1,1,!0,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(v,this.distance,z,-1,-1,!0,u),this.addCurrentVertex(v,this.distance,z,0,0,!1,u)));Z&&q<n-1&&(Z=v.dist(w),Z>2*r&&(Z=v.add(w.sub(v)._mult(r/Z)._round()),this.distance+=Z.dist(v),this.addCurrentVertex(Z,this.distance,z.mult(1),0,0,!1,u),v=Z));U=!1}t.populatePaintArrays(g)}},d.prototype.addCurrentVertex=function(a,c,e,f,k,d,h){var g=d?1:0;var n=this.arrays;var r=n.layoutVertexArray,q=n.elementArray;n=e.clone();
f&&n._sub(e.perp()._mult(f));b(r,a,n,g,0,f,c);this.e3=h.vertexLength++;0<=this.e1&&0<=this.e2&&(q.emplaceBack(this.e1,this.e2,this.e3),h.primitiveLength++);this.e1=this.e2;this.e2=this.e3;n=e.mult(-1);k&&n._sub(e.perp()._mult(k));b(r,a,n,g,1,-k,c);this.e3=h.vertexLength++;0<=this.e1&&0<=this.e2&&(q.emplaceBack(this.e1,this.e2,this.e3),h.primitiveLength++);this.e1=this.e2;this.e2=this.e3;c>m/2&&(this.distance=0,this.addCurrentVertex(a,this.distance,e,f,k,d,h))},d.prototype.addPieSliceVertex=function(a,
c,e,f,k){var d=f?1:0;e=e.mult(f?-1:1);var h=this.arrays,m=h.elementArray;b(h.layoutVertexArray,a,e,0,d,0,c);this.e3=k.vertexLength++;0<=this.e1&&0<=this.e2&&(m.emplaceBack(this.e1,this.e2,this.e3),k.primitiveLength++);f?this.e2=this.e3:this.e1=this.e3},d}(d);g.programInterface=r;l.exports=g},{"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,"vector-tile":34}],50:[function(g,l,d){function b(a,c,b,e,f,k,d,h,m,g,n,q){a.emplaceBack(c,b,Math.round(64*e),Math.round(64*f),k/
4,d/4,r(10*(n||0),q%256),r(10*(m||0),10*Math.min(g||25,25)),h?h[0]:void 0,h?h[1]:void 0,h?h[2]:void 0)}function h(a,c,b,e,f){return a.emplaceBack(c.x,c.y,Math.round(b.x),Math.round(b.y),10*e,10*f)}function a(a,c,b){var e={isFeatureConstant:c.isLayoutValueFeatureConstant(b),isZoomConstant:c.isLayoutValueZoomConstant(b)};if(e.isFeatureConstant&&(e.layoutSize=c.getLayoutValue(b,{zoom:a+1})),!e.isZoomConstant){for(var f=c.getLayoutValueStopZoomLevels(b),k=0;k<f.length&&f[k]<=a;)k++;for(var d=k=Math.max(0,
k-1);d<f.length&&f[d]<a+1;)d++;d=Math.min(f.length-1,d);e.coveringZoomRange=[f[k],f[d]];c.isLayoutValueFeatureConstant(b)&&(e.coveringStopValues=[c.getLayoutValue(b,{zoom:f[k]}),c.getLayoutValue(b,{zoom:f[d]})]);e.functionBase=c.getLayoutProperty(b).base;"undefined"==typeof e.functionBase&&(e.functionBase=1);e.functionType=c.getLayoutProperty(b).type||"exponential"}return e}function c(a,c){return a.isLayoutValueZoomConstant(c)&&!a.isLayoutValueFeatureConstant(c)?[{name:"a_size",components:1,type:"Uint16"}]:
a.isLayoutValueZoomConstant(c)||a.isLayoutValueFeatureConstant(c)?[]:[{name:"a_size",components:3,type:"Uint16"}]}function e(a,c,b,e,f){return a.isLayoutValueZoomConstant(e)&&!a.isLayoutValueFeatureConstant(e)?[10*a.getLayoutValue(e,{},f)]:a.isLayoutValueZoomConstant(e)||a.isLayoutValueFeatureConstant(e)?null:[10*a.getLayoutValue(e,{zoom:b[0]},f),10*a.getLayoutValue(e,{zoom:b[1]},f),10*a.getLayoutValue(e,{zoom:1+c},f)]}var f=g("point-geometry"),k=g("../array_group"),n=g("../buffer_group");d=g("../element_array_type");
var m=g("../extent"),r=g("../../shaders/encode_attribute").packUint8ToFloat,u=g("../../symbol/anchor"),q=g("../../symbol/get_anchors"),t=g("../../util/token"),w=g("../../symbol/quads"),v=g("../../symbol/shaping"),y=g("../../symbol/transform_text"),A=g("../../symbol/mergelines"),z=g("../../symbol/clip_line"),B=g("../../util/util"),x=g("../../util/script_detection"),E=g("../load_geometry"),C=g("../../symbol/collision_feature"),D=g("../../util/find_pole_of_inaccessibility"),G=g("../../util/classify_rings"),
H=g("vector-tile").VectorTileFeature,K=v.shapeText,J=v.shapeIcon,I=v.WritingMode,N=w.getGlyphQuads,P=w.getIconQuads;g=d();var w=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],M={glyph:{layoutAttributes:w,elementArrayType:g,paintAttributes:[{name:"a_fill_color",property:"text-color",type:"Uint8"},{name:"a_halo_color",property:"text-halo-color",type:"Uint8"},{name:"a_halo_width",property:"text-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",
property:"text-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"text-opacity",type:"Uint8",multiplier:255}]},icon:{layoutAttributes:w,elementArrayType:g,paintAttributes:[{name:"a_fill_color",property:"icon-color",type:"Uint8"},{name:"a_halo_color",property:"icon-halo-color",type:"Uint8"},{name:"a_halo_width",property:"icon-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"icon-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"icon-opacity",
type:"Uint8",multiplier:255}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}],elementArrayType:d(2)}},S=function(b){this.collisionBoxArray=b.collisionBoxArray;this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.index=b.index;this.sdfIcons=b.sdfIcons;this.iconsNeedLinear=b.iconsNeedLinear;this.fontstack=b.fontstack;var e=this.layers[0];if(this.symbolInterfaces={glyph:B.extend({},
M.glyph,{layoutAttributes:[].concat(M.glyph.layoutAttributes,c(e,"text-size"))}),icon:B.extend({},M.icon,{layoutAttributes:[].concat(M.icon.layoutAttributes,c(e,"icon-size"))}),collisionBox:B.extend({},M.collisionBox,{layoutAttributes:[].concat(M.collisionBox.layoutAttributes)})},b.arrays){this.buffers={};for(var f in b.arrays)b.arrays[f]&&(this.buffers[f]=new n(this.symbolInterfaces[f],b.layers,b.zoom,b.arrays[f]));this.textSizeData=b.textSizeData;this.iconSizeData=b.iconSizeData}else this.textSizeData=
a(this.zoom,e,"text-size"),this.iconSizeData=a(this.zoom,e,"icon-size")};S.prototype.populate=function(a,c){var b=this.layers[0],e=b.layout,f=e["text-font"],k=(!b.isLayoutValueFeatureConstant("text-field")||e["text-field"])&&f,d=!b.isLayoutValueFeatureConstant("icon-image")||e["icon-image"];if(this.features=[],k||d){for(var h=c.iconDependencies,m=c.glyphDependencies,f=m[f]=m[f]||{},m={zoom:this.zoom},g=0;g<a.length;g++){var n=a[g];if(b.filter(n)){var r=void 0;k&&(r=b.getLayoutValue("text-field",m,
n.properties),b.isLayoutValueFeatureConstant("text-field")&&(r=t(n.properties,r)),r=y(r,b,m,n.properties));var q=void 0;if(d&&(q=b.getLayoutValue("icon-image",m,n.properties),b.isLayoutValueFeatureConstant("icon-image")&&(q=t(n.properties,q))),(r||q)&&(this.features.push({text:r,icon:q,index:g,sourceLayerIndex:n.sourceLayerIndex,geometry:E(n),properties:n.properties,type:H.types[n.type]}),q&&(h[q]=!0),r))for(n=0;n<r.length;n++)f[r.charCodeAt(n)]=!0}}"line"===e["symbol-placement"]&&(this.features=
A(this.features))}};S.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()};S.prototype.getPaintPropertyStatistics=function(){for(var a={},c=0,b=this.layers;c<b.length;c+=1){var e=b[c];a[e.id]=B.extend({},this.arrays.icon.layerData[e.id].paintPropertyStatistics,this.arrays.glyph.layerData[e.id].paintPropertyStatistics)}return a};S.prototype.serialize=function(a){return{zoom:this.zoom,layerIds:this.layers.map(function(a){return a.id}),
sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,fontstack:this.fontstack,arrays:B.mapObject(this.arrays,function(c){return c.isEmpty()?null:c.serialize(a)})}};S.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)};S.prototype.createArrays=function(){var a=this;
this.arrays=B.mapObject(this.symbolInterfaces,function(c){return new k(c,a.layers,a.zoom)})};S.prototype.prepare=function(a,c){this.symbolInstances=[];this.tilePixelRatio=m/(512*this.overscaling);this.compareText={};this.iconsNeedLinear=!1;var b=this.layers[0].layout,e=.5,f=.5;switch(b["text-anchor"]){case "right":case "top-right":case "bottom-right":e=1;break;case "left":case "top-left":case "bottom-left":e=0}switch(b["text-anchor"]){case "bottom":case "bottom-right":case "bottom-left":f=1;break;
case "top":case "top-right":case "top-left":f=0}for(var k="right"===b["text-justify"]?1:"left"===b["text-justify"]?0:.5,d=24*b["text-line-height"],h="line"!==b["symbol-placement"]?24*b["text-max-width"]:0,g=24*b["text-letter-spacing"],n=this.fontstack=b["text-font"].join(","),r="map"===b["text-rotation-alignment"]&&"line"===b["symbol-placement"],q=0,t=this.features;q<t.length;q+=1){var u=t[q],v=void 0;if(u.text){var l=x.allowsVerticalWritingMode(u.text),p=this.layers[0].getLayoutValue("text-offset",
{zoom:this.zoom},u.properties).map(function(a){return 24*a}),v={};v[I.horizontal]=K(u.text,a[n],h,d,e,f,k,g,p,24,I.horizontal);v[I.vertical]=l&&r&&K(u.text,a[n],h,d,e,f,k,g,p,24,I.vertical)}else v={};p=void 0;u.icon&&(l=c[u.icon],p=this.layers[0].getLayoutValue("icon-offset",{zoom:this.zoom},u.properties),p=J(l,p),l&&(void 0===this.sdfIcons?this.sdfIcons=l.sdf:this.sdfIcons!==l.sdf&&B.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==l.pixelRatio?this.iconsNeedLinear=
!0:0===b["icon-rotate"]&&this.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0)));(v[I.horizontal]||p)&&this.addFeature(u,v,p)}};S.prototype.addFeature=function(a,b,c){var e=this,f=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1},a.properties),k=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1},a.properties),d=this.layers[0].getLayoutValue("text-size",{zoom:18},a.properties);void 0===d&&(d=f);var h=this.layers[0].layout,g=f/24*this.tilePixelRatio,
f=this.tilePixelRatio*d/24,n=this.tilePixelRatio*k,d=this.tilePixelRatio*h["symbol-spacing"],r=h["symbol-avoid-edges"],t=h["text-padding"]*this.tilePixelRatio,v=h["icon-padding"]*this.tilePixelRatio,l=h["text-max-angle"]/180*Math.PI,w="map"===h["text-rotation-alignment"]&&"line"===h["symbol-placement"],y="map"===h["icon-rotation-alignment"]&&"line"===h["symbol-placement"],p=h["text-allow-overlap"]||h["icon-allow-overlap"]||h["text-ignore-placement"]||h["icon-ignore-placement"],x=d/2,k=function(f,
d){var k=!(0>d.x||d.x>m||0>d.y||d.y>m);r&&!k||e.addSymbolInstance(d,f,b,c,e.layers[0],k||p,e.collisionBoxArray,a.index,a.sourceLayerIndex,e.index,g,t,w,n,v,y,{zoom:e.zoom},a.properties)};if("line"===h["symbol-placement"])for(var h=0,C=z(a.geometry,0,0,m,m);h<C.length;h+=1)for(var B=C[h],A=0,E=q(B,d,l,b[I.vertical]||b[I.horizontal],c,24,f,e.overscaling,m);A<E.length;A+=1){var J=E[A],H=b[I.horizontal];H&&e.anchorIsTooClose(H.text,x,J)||k(B,J)}else if("Polygon"===a.type)for(f=0,d=G(a.geometry,0);f<d.length;f+=
1)l=d[f],x=D(l,16),k(l[0],new u(x.x,x.y,0));else if("LineString"===a.type)for(f=0,d=a.geometry;f<d.length;f+=1)l=d[f],k(l,new u(l[0].x,l[0].y,0));else if("Point"===a.type)for(f=0,d=a.geometry;f<d.length;f+=1)for(l=0,x=d[f];l<x.length;l+=1)h=x[l],k([h],new u(h.x,h.y,0))};S.prototype.anchorIsTooClose=function(a,b,c){var e=this.compareText;if(a in e)for(var f=e[a],d=f.length-1;0<=d;d--){if(c.dist(f[d])<b)return!0}else e[a]=[];return e[a].push(c),!1};S.prototype.place=function(a,b){this.createArrays();
var c=this.layers[0],f=c.layout,d=a.maxScale,k="map"===f["text-rotation-alignment"]&&"line"===f["symbol-placement"],h="map"===f["icon-rotation-alignment"]&&"line"===f["symbol-placement"];if(f["text-allow-overlap"]||f["icon-allow-overlap"]||f["text-ignore-placement"]||f["icon-ignore-placement"]){var m=a.angle,g=Math.sin(m),n=Math.cos(m);this.symbolInstances.sort(function(a,b){return(g*a.anchor.x+n*a.anchor.y|0)-(g*b.anchor.x+n*b.anchor.y|0)||b.featureIndex-a.featureIndex})}for(var m=0,r=this.symbolInstances;m<
r.length;m+=1){var q=r[m],t={boxStartIndex:q.textBoxStartIndex,boxEndIndex:q.textBoxEndIndex},u={boxStartIndex:q.iconBoxStartIndex,boxEndIndex:q.iconBoxEndIndex},v=q.textBoxStartIndex!==q.textBoxEndIndex,l=q.iconBoxStartIndex!==q.iconBoxEndIndex,p=f["text-optional"]||!v,w=f["icon-optional"]||!l,y=v?a.placeCollisionFeature(t,f["text-allow-overlap"],f["symbol-avoid-edges"]):a.minScale,x=l?a.placeCollisionFeature(u,f["icon-allow-overlap"],f["symbol-avoid-edges"]):a.minScale;if(p||w?!w&&y?y=Math.max(x,
y):!p&&x&&(x=Math.max(x,y)):x=y=Math.max(x,y),v&&(a.insertCollisionFeature(t,y,f["text-ignore-placement"]),y<=d))t=e(c,this.zoom,this.textSizeData.coveringZoomRange,"text-size",q.featureProperties),this.addSymbols(this.arrays.glyph,q.glyphQuads,y,t,f["text-keep-upright"],k,a.angle,q.featureProperties,q.writingModes);l&&(a.insertCollisionFeature(u,x,f["icon-ignore-placement"]),x<=d)&&(u=e(c,this.zoom,this.iconSizeData.coveringZoomRange,"icon-size",q.featureProperties),this.addSymbols(this.arrays.icon,
q.iconQuads,x,u,f["icon-keep-upright"],h,a.angle,q.featureProperties))}b&&this.addToDebugBuffers(a)};S.prototype.addSymbols=function(a,c,e,f,d,k,h,m,g){var n=a.elementArray,r=a.layoutVertexArray,q=this.zoom;e=Math.max(Math.log(e)/Math.LN2+q,0);for(var t=0;t<c.length;t+=1){var u=c[t],v=(u.anchorAngle+h+Math.PI)%(2*Math.PI);if(g&I.vertical)if(k&&u.writingMode===I.vertical){if(d&&k&&v<=5*Math.PI/4||v>7*Math.PI/4)continue}else{if(d&&k&&v<=3*Math.PI/4||v>5*Math.PI/4)continue}else if(d&&k&&(v<=Math.PI/
2||v>3*Math.PI/2))continue;var v=u.tl,l=u.tr,p=u.bl,w=u.br,y=u.tex,x=u.anchorPoint,C=Math.max(q+Math.log(u.minScale)/Math.LN2,e),z=Math.min(q+Math.log(u.maxScale)/Math.LN2,25);if(!(z<=C)){C===e&&(C=0);var u=Math.round(u.glyphAngle/(2*Math.PI)*256),B=a.prepareSegment(4),A=B.vertexLength;b(r,x.x,x.y,v.x,v.y,y.x,y.y,f,C,z,e,u);b(r,x.x,x.y,l.x,l.y,y.x+y.w,y.y,f,C,z,e,u);b(r,x.x,x.y,p.x,p.y,y.x,y.y+y.h,f,C,z,e,u);b(r,x.x,x.y,w.x,w.y,y.x+y.w,y.y+y.h,f,C,z,e,u);n.emplaceBack(A,A+1,A+2);n.emplaceBack(A+1,
A+2,A+3);B.vertexLength+=4;B.primitiveLength+=2}}a.populatePaintArrays(m)};S.prototype.addToDebugBuffers=function(a){var b=this.arrays.collisionBox,c=b.layoutVertexArray,e=b.elementArray,d=-a.angle;a=a.yStretch;for(var k=0,m=this.symbolInstances;k<m.length;k+=1){var g=m[k];g.textCollisionFeature={boxStartIndex:g.textBoxStartIndex,boxEndIndex:g.textBoxEndIndex};g.iconCollisionFeature={boxStartIndex:g.iconBoxStartIndex,boxEndIndex:g.iconBoxEndIndex};for(var n=0;2>n;n++){var r=g[0===n?"textCollisionFeature":
"iconCollisionFeature"];if(r)for(var q=r.boxStartIndex;q<r.boxEndIndex;q++){var t=this.collisionBoxArray.get(q),u=t.anchorPoint,v=(new f(t.x1,t.y1*a))._rotate(d),l=(new f(t.x2,t.y1*a))._rotate(d),w=(new f(t.x1,t.y2*a))._rotate(d),p=(new f(t.x2,t.y2*a))._rotate(d),y=Math.max(0,Math.min(25,this.zoom+Math.log(t.maxScale)/Math.LN2)),t=Math.max(0,Math.min(25,this.zoom+Math.log(t.placementScale)/Math.LN2)),x=b.prepareSegment(4),C=x.vertexLength;h(c,u,v,y,t);h(c,u,l,y,t);h(c,u,p,y,t);h(c,u,w,y,t);e.emplaceBack(C,
C+1);e.emplaceBack(C+1,C+2);e.emplaceBack(C+2,C+3);e.emplaceBack(C+3,C);x.vertexLength+=4;x.primitiveLength+=4}}}};S.prototype.addSymbolInstance=function(a,b,c,e,f,d,k,h,m,g,n,r,q,t,u,v,l,w){var p,y,x=[],z=[],A;for(A in c){var E=parseInt(A,10);c[E]&&(z=z.concat(d?N(a,c[E],n,b,f,q,l,w):[]),p=new C(k,b,a,h,m,g,c[E],n,r,q,!1))}n=p?p.boxStartIndex:this.collisionBoxArray.length;p=p?p.boxEndIndex:this.collisionBoxArray.length;e&&(x=d?P(a,e,t,b,f,v,c[I.horizontal],l,w):[],y=new C(k,b,a,h,m,g,e,t,u,v,!0));
b=y?y.boxStartIndex:this.collisionBoxArray.length;y=y?y.boxEndIndex:this.collisionBoxArray.length;p>S.MAX_INSTANCES&&B.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");y>S.MAX_INSTANCES&&B.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");this.symbolInstances.push({textBoxStartIndex:n,textBoxEndIndex:p,iconBoxStartIndex:b,iconBoxEndIndex:y,glyphQuads:z,iconQuads:x,anchor:a,featureIndex:h,
featureProperties:w,writingModes:(c[I.vertical]?I.vertical:0)|(c[I.horizontal]?I.horizontal:0)})};S.programInterfaces=M;S.MAX_INSTANCES=65535;l.exports=S},{"../../shaders/encode_attribute":81,"../../symbol/anchor":159,"../../symbol/clip_line":161,"../../symbol/collision_feature":163,"../../symbol/get_anchors":165,"../../symbol/mergelines":168,"../../symbol/quads":169,"../../symbol/shaping":170,"../../symbol/transform_text":172,"../../util/classify_rings":197,"../../util/find_pole_of_inaccessibility":203,
"../../util/script_detection":211,"../../util/token":213,"../../util/util":214,"../array_group":44,"../buffer_group":52,"../element_array_type":53,"../extent":54,"../load_geometry":56,"point-geometry":26,"vector-tile":34}],51:[function(g,l,d){var b={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"},h=function(a,b,e){this.arrayBuffer=a.arrayBuffer;this.length=a.length;this.attributes=b.members;this.itemSize=b.bytesPerElement;this.type=e;this.arrayType=b};h.fromStructArray=function(a,
b){return new h(a.serialize(),a.constructor.serialize(),b)};h.prototype.bind=function(a){var b=a[this.type];this.buffer?a.bindBuffer(b,this.buffer):(this.gl=a,this.buffer=a.createBuffer(),a.bindBuffer(b,this.buffer),a.bufferData(b,this.arrayBuffer,a.STATIC_DRAW),this.arrayBuffer=null)};h.prototype.enableAttributes=function(a,b){for(var c=0;c<this.attributes.length;c++){var f=b[this.attributes[c].name];void 0!==f&&a.enableVertexAttribArray(f)}};h.prototype.setVertexAttribPointers=function(a,c,e){for(var f=
0;f<this.attributes.length;f++){var d=this.attributes[f],h=c[d.name];void 0!==h&&a.vertexAttribPointer(h,d.components,a[b[d.type]],!1,this.arrayType.bytesPerElement,d.offset+(this.arrayType.bytesPerElement*e||0))}};h.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)};h.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"};l.exports=h},{}],52:[function(g,l,d){var b=g("../util/util"),h=g("./buffer"),a=g("./program_configuration"),c=g("./vertex_array_type"),e=g("../render/vertex_array_object");
g=function(f,d,g,m){var k=c(f.layoutAttributes);this.layoutVertexBuffer=new h(m.layoutVertexArray,k.serialize(),h.BufferType.VERTEX);m.elementArray&&(this.elementBuffer=new h(m.elementArray,f.elementArrayType.serialize(),h.BufferType.ELEMENT));m.elementArray2&&(this.elementBuffer2=new h(m.elementArray2,f.elementArrayType2.serialize(),h.BufferType.ELEMENT));this.layerData={};for(k=0;k<d.length;k+=1){var n=d[k],q=m.paintVertexArrays&&m.paintVertexArrays[n.id],t=a.createDynamic(f.paintAttributes||[],
n,g),q=q?new h(q.array,q.type,h.BufferType.VERTEX):null;this.layerData[n.id]={programConfiguration:t,paintVertexBuffer:q}}this.segments=m.segments;this.segments2=m.segments2;f=0;for(d=[this.segments,this.segments2];f<d.length;f+=1)for(g=0,m=d[f]||[];g<m.length;g+=1)m[g].vaos=b.mapObject(this.layerData,function(){return new e})};g.prototype.destroy=function(){this.layoutVertexBuffer.destroy();this.elementBuffer&&this.elementBuffer.destroy();this.elementBuffer2&&this.elementBuffer2.destroy();for(var a in this.layerData){var b=
this.layerData[a].paintVertexBuffer;b&&b.destroy()}a=0;for(b=[this.segments,this.segments2];a<b.length;a+=1)for(var c=0,e=b[a]||[];c<e.length;c+=1){var d=e[c],h;for(h in d.vaos)d.vaos[h].destroy()}};l.exports=g},{"../render/vertex_array_object":80,"../util/util":214,"./buffer":51,"./program_configuration":58,"./vertex_array_type":60}],53:[function(g,l,d){var b=g("../util/struct_array");l.exports=function(d){return b({members:[{type:"Uint16",name:"vertices",components:d||3}]})}},{"../util/struct_array":212}],
54:[function(g,l,d){l.exports=8192},{}],55:[function(g,l,d){function b(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function h(a,b){return b-a}function a(a,b){return 0<b?b+2*a:a}function c(a,b,c,f,d){if(!b[0]&&!b[1])return a;b=e.convert(b);"viewport"===c&&b._rotate(-f);c=[];for(f=0;f<a.length;f++){for(var k=a[f],h=[],m=0;m<k.length;m++)h.push(k[m].sub(b._mult(d)));c.push(h)}return c}var e=g("point-geometry"),f=g("./load_geometry"),k=g("./extent"),n=g("../style-spec/feature_filter");d=g("../util/struct_array");
var m=g("grid-index"),r=g("../util/dictionary_coder"),u=g("vector-tile"),q=g("pbf"),t=g("../util/vectortile_to_geojson"),w=g("../util/util").arraysIntersect;g=g("../util/intersection_tests");var v=g.multiPolygonIntersectsBufferedMultiPoint,y=g.multiPolygonIntersectsMultiPolygon,A=g.multiPolygonIntersectsBufferedMultiLine,z=d({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});g=function(a,b,c){if(a.grid){var e=a,f=b;a=e.coord;
b=e.overscaling;this.grid=new m(e.grid);this.featureIndexArray=new z(e.featureIndexArray);this.rawTileData=f;this.bucketLayerIDs=e.bucketLayerIDs;this.paintPropertyStatistics=e.paintPropertyStatistics}else this.grid=new m(k,16,0),this.featureIndexArray=new z;this.coord=a;this.overscaling=b;this.x=a.x;this.y=a.y;this.z=a.z-Math.log(b)/Math.LN2;this.setCollisionTile(c)};g.prototype.insert=function(a,b){var c=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a.index,a.sourceLayerIndex,
b);for(var e=f(a),d=0;d<e.length;d++){for(var k=e[d],h=[1/0,1/0,-(1/0),-(1/0)],m=0;m<k.length;m++){var g=k[m];h[0]=Math.min(h[0],g.x);h[1]=Math.min(h[1],g.y);h[2]=Math.max(h[2],g.x);h[3]=Math.max(h[3],g.y)}this.grid.insert(c,h[0],h[1],h[2],h[3])}};g.prototype.setCollisionTile=function(a){this.collisionTile=a};g.prototype.serialize=function(a){var b=this.grid.toArrayBuffer();return a&&a.push(b),{coord:this.coord,overscaling:this.overscaling,grid:b,featureIndexArray:this.featureIndexArray.serialize(a),
bucketLayerIDs:this.bucketLayerIDs,paintPropertyStatistics:this.paintPropertyStatistics}};g.prototype.query=function(c,f){this.vtLayers||(this.vtLayers=(new u.VectorTile(new q(this.rawTileData))).layers,this.sourceLayerCoder=new r(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var d={},m=c.params||{},g=k/c.tileSize/c.scale,t=n(m.filter),v=0;for(x in f)if(this.hasLayer(x)){var l=f[x],w=0;if("line"===l.type)var w=a(this.getPaintValue("line-width",l),this.getPaintValue("line-gap-width",
l)),y=this.getPaintValue("line-offset",l),l=this.getPaintValue("line-translate",l),w=w/2+Math.abs(y)+b(l);else"fill"===l.type?w=b(this.getPaintValue("fill-translate",l)):"fill-extrusion"===l.type?w=b(this.getPaintValue("fill-extrusion-translate",l)):"circle"===l.type&&(w=this.getPaintValue("circle-radius",l)+b(this.getPaintValue("circle-translate",l)));v=Math.max(v,w*g)}var x=c.queryGeometry.map(function(a){return a.map(function(a){return new e(a.x,a.y)})});for(var l=1/0,w=1/0,y=-(1/0),z=-(1/0),A=
0;A<x.length;A++)for(var B=x[A],U=0;U<B.length;U++)var T=B[U],l=Math.min(l,T.x),w=Math.min(w,T.y),y=Math.max(y,T.x),z=Math.max(z,T.y);v=this.grid.query(l-v,w-v,y+v,z+v);v.sort(h);this.filterMatching(d,v,this.featureIndexArray,x,t,m.layers,f,c.bearing,g);v=this.collisionTile.queryRenderedSymbols(x,c.scale);return v.sort(),this.filterMatching(d,v,this.collisionTile.collisionBoxArray,x,t,m.layers,f,c.bearing,g),d};g.prototype.filterMatching=function(b,d,k,h,m,g,n,r,q){for(var u,l=0;l<d.length;l++){var x=
d[l];if(x!==u){u=x;var C=k.get(x),x=this.bucketLayerIDs[C.bucketIndex];if(!g||w(g,x)){var z=this.sourceLayerCoder.decode(C.sourceLayerIndex),C=this.vtLayers[z].feature(C.featureIndex);if(m(C))for(var B=null,z=0;z<x.length;z++){var E=x[z];if(!(g&&0>g.indexOf(E))){var D=n[E];if(D){var J=void 0;if("symbol"!==D.type)if(B||(B=f(C)),"line"===D.type){var J=c(h,this.getPaintValue("line-translate",D,C),this.getPaintValue("line-translate-anchor",D,C),r,q),G=q/2*a(this.getPaintValue("line-width",D,C),this.getPaintValue("line-gap-width",
D,C)),H=this.getPaintValue("line-offset",D,C);if(H){for(var H=H*q,K=[],ga=new e(0,0),fa=0;fa<B.length;fa++){for(var oa=B[fa],ua=[],ia=0;ia<oa.length;ia++){var da=oa[ia-1],Aa=oa[ia],ea=oa[ia+1],da=0===ia?ga:Aa.sub(da)._unit()._perp(),ea=ia===oa.length-1?ga:ea.sub(Aa)._unit()._perp(),da=da._add(ea)._unit();da._mult(1/(da.x*ea.x+da.y*ea.y));ua.push(da._mult(H)._add(Aa))}K.push(ua)}B=K}if(!A(J,B,G))continue}else if("fill"===D.type||"fill-extrusion"===D.type){if(G=D.type,J=c(h,this.getPaintValue(G+"-translate",
D,C),this.getPaintValue(G+"-translate-anchor",D,C),r,q),!y(J,B))continue}else if("circle"===D.type&&(J=c(h,this.getPaintValue("circle-translate",D,C),this.getPaintValue("circle-translate-anchor",D,C),r,q),G=this.getPaintValue("circle-radius",D,C)*q,!v(J,B,G)))continue;J=new t(C,this.z,this.x,this.y);J.layer=D.serialize();D=b[E];void 0===D&&(D=b[E]=[]);D.push(J)}}}}}}};g.prototype.hasLayer=function(a){for(var b in this.bucketLayerIDs)for(var c=0,e=this.bucketLayerIDs[b];c<e.length;c+=1)if(a===e[c])return!0;
return!1};g.prototype.getPaintValue=function(a,b,c){return b.isPaintValueFeatureConstant(a)||c?b.getPaintValue(a,{zoom:this.z},c?c.properties:{}):this.paintPropertyStatistics[b.id][a].max};l.exports=g},{"../style-spec/feature_filter":105,"../util/dictionary_coder":199,"../util/intersection_tests":207,"../util/struct_array":212,"../util/util":214,"../util/vectortile_to_geojson":215,"./extent":54,"./load_geometry":56,"grid-index":16,pbf:25,"point-geometry":26,"vector-tile":34}],56:[function(g,l,d){function b(a){return{min:-1*
Math.pow(2,a-1),max:Math.pow(2,a-1)-1}}var h=g("../util/util"),a=g("./extent"),c={15:b(15),16:b(16)};l.exports=function(b,f){for(var e=c[f||16],d=a/b.extent,m=b.loadGeometry(),g=0;g<m.length;g++)for(var u=m[g],q=0;q<u.length;q++){var t=u[q];t.x=Math.round(t.x*d);t.y=Math.round(t.y*d);(t.x<e.min||t.x>e.max||t.y<e.min||t.y>e.max)&&h.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return m}},{"../util/util":214,"./extent":54}],57:[function(g,l,d){g=g("../util/struct_array")({members:[{name:"a_pos",
type:"Int16",components:2}]});l.exports=g},{"../util/struct_array":212}],58:[function(g,l,d){function b(b,c,d,h){if(!b.zoomStops)return c.getPaintValue(b.property,d,h);var e=b.zoomStops.map(function(e){return c.getPaintValue(b.property,a.extend({},d,{zoom:e}),h)});return 1===e.length?e[0]:e}var h=g("./vertex_array_type"),a=g("../util/util"),c=function(){this.attributes=[];this.uniforms=[];this.interpolationUniforms=[];this.pragmas={vertex:{},fragment:{}};this.cacheKey=""};c.createDynamic=function(b,
f,d){for(var e=new c,k=0;k<b.length;k+=1){var g=b[k];var u=f,q=g.name;q||(q=g.property.replace(u.type+"-","").replace(/-/g,"_"));u="color"===u._paintSpecifications[g.property].type;g=a.extend({name:"a_"+q,components:u?4:1,multiplier:u?255:1,dimensions:u?4:1},g);q=g.name.slice(2);f.isPaintValueFeatureConstant(g.property)?e.addZoomAttribute(q,g):f.isPaintValueZoomConstant(g.property)?e.addPropertyAttribute(q,g):e.addZoomAndPropertyAttribute(q,g,f,d)}return e.PaintVertexArray=h(e.attributes),e};c.createStatic=
function(a){for(var b=new c,e=0;e<a.length;e+=1){var d=a[e];b.addUniform(d,"u_"+d)}return b};c.prototype.addUniform=function(a,b){var c=this.getPragmas(a);c.define.push("uniform {precision} {type} "+b+";");c.initialize.push("{precision} {type} "+a+" = "+b+";");this.cacheKey+="/u_"+a};c.prototype.addZoomAttribute=function(a,b){this.uniforms.push(b);this.addUniform(a,b.name)};c.prototype.addPropertyAttribute=function(a,b){var c=this.getPragmas(a);this.attributes.push(b);c.define.push("varying {precision} {type} "+
a+";");c.vertex.define.push("attribute {precision} {type} "+b.name+";");c.vertex.initialize.push(a+" = "+b.name+" / "+b.multiplier+".0;");this.cacheKey+="/a_"+a};c.prototype.addZoomAndPropertyAttribute=function(b,c,d,h){var e=this.getPragmas(b);e.define.push("varying {precision} {type} "+b+";");var f=d.getPaintValueStopZoomLevels(c.property),k=0;if(4<f.length)for(;k<f.length-2&&f[k]<h;)k++;h="u_"+b+"_t";e.vertex.define.push("uniform lowp float "+h+";");this.interpolationUniforms.push({name:h,property:c.property,
stopOffset:k});d=[];for(var g=0;4>g;g++)d.push(f[Math.min(k+g,f.length-1)]);f=[];if(1===c.components)this.attributes.push(a.extend({},c,{components:4,zoomStops:d})),e.vertex.define.push("attribute {precision} vec4 "+c.name+";"),f.push(c.name);else for(k=0;4>k;k++)g=c.name+k,f.push(g),this.attributes.push(a.extend({},c,{name:g,zoomStops:[d[k]]})),e.vertex.define.push("attribute {precision} {type} "+g+";");e.vertex.initialize.push(b+" = evaluate_zoom_function_"+c.components+"(            "+f.join(", ")+
", "+h+") / "+c.multiplier+".0;");this.cacheKey+="/z_"+b};c.prototype.getPragmas=function(a){return this.pragmas[a]||(this.pragmas[a]={define:[],initialize:[]},this.pragmas[a].fragment={define:[],initialize:[]},this.pragmas[a].vertex={define:[],initialize:[]}),this.pragmas[a]};c.prototype.applyPragmas=function(a,b){var c=this;return a.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(a,e,f,d,k){return c.pragmas[k][e].concat(c.pragmas[k][b][e]).join("\n").replace(/{type}/g,d).replace(/{precision}/g,
f)})};c.prototype.createPaintPropertyStatistics=function(){for(var a={},b=0,c=this.attributes;b<c.length;b+=1){var d=c[b];1===d.dimensions&&(a[d.property]={max:-(1/0)})}return a};c.prototype.populatePaintArray=function(a,c,d,h,m,g){var e=c.length;c.resize(h);for(var f=0,k=this.attributes;f<k.length;f+=1)for(var n=k[f],r=b(n,a,m,g),l=e;l<h;l++){var A=c.get(l);if(4===n.components)for(var z=0;4>z;z++)A[n.name+z]=r[z]*n.multiplier;else A[n.name]=r*n.multiplier;1===n.dimensions&&(A=d[n.property],A.max=
Math.max(A.max,1===n.components?r:Math.max.apply(Math,r)))}};c.prototype.setUniforms=function(a,b,c,d){for(var e=0,f=this.uniforms;e<f.length;e+=1){var k=f[e],h=c.getPaintValue(k.property,d);4===k.components?a.uniform4fv(b[k.name],h):a.uniform1f(b[k.name],h)}e=0;for(f=this.interpolationUniforms;e<f.length;e+=1)k=f[e],h=c.getPaintInterpolationT(k.property,d),a.uniform1f(b[k.name],Math.max(0,Math.min(3,h-k.stopOffset)))};l.exports=c},{"../util/util":214,"./vertex_array_type":60}],59:[function(g,l,d){g=
g("../util/struct_array")({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});l.exports=g},{"../util/struct_array":212}],60:[function(g,l,d){var b=g("../util/struct_array");l.exports=function(d){return b({members:d,alignment:4})}},{"../util/struct_array":212}],61:[function(g,l,d){var b=function(b,a,c){this.column=b;this.row=a;this.zoom=c};b.prototype.clone=function(){return new b(this.column,this.row,this.zoom)};b.prototype.zoomTo=function(b){return this.clone()._zoomTo(b)};
b.prototype.sub=function(b){return this.clone()._sub(b)};b.prototype._zoomTo=function(b){var a=Math.pow(2,b-this.zoom);return this.column*=a,this.row*=a,this.zoom=b,this};b.prototype._sub=function(b){return b=b.zoomTo(this.zoom),this.column-=b.column,this.row-=b.row,this};l.exports=b},{}],62:[function(g,l,d){var b=g("../util/util").wrap,h=function(a,b){if(isNaN(a)||isNaN(b))throw Error("Invalid LngLat object: ("+a+", "+b+")");if(this.lng=+a,this.lat=+b,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");
};h.prototype.wrap=function(){return new h(b(this.lng,-180,180),this.lat)};h.prototype.wrapToBestWorld=function(a){var b=new h(this.lng,this.lat);return 180<Math.abs(this.lng-a.lng)&&(0>a.lng?b.lng-=360:b.lng+=360),b};h.prototype.toArray=function(){return[this.lng,this.lat]};h.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};h.convert=function(a){if(a instanceof h)return a;if(a&&a.hasOwnProperty("lng")&&a.hasOwnProperty("lat"))return new h(a.lng,a.lat);if(Array.isArray(a)&&
2===a.length)return new h(a[0],a[1]);throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");};l.exports=h},{"../util/util":214}],63:[function(g,l,d){var b=g("./lng_lat"),h=function(a,b){a&&(b?this.setSouthWest(a).setNorthEast(b):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))};h.prototype.setNorthEast=function(a){return this._ne=b.convert(a),this};
h.prototype.setSouthWest=function(a){return this._sw=b.convert(a),this};h.prototype.extend=function(a){var c,e=this._sw,f=this._ne;if(a instanceof b)var d=c=a;else{if(!(a instanceof h))return Array.isArray(a)?a.every(Array.isArray)?this.extend(h.convert(a)):this.extend(b.convert(a)):this;if(c=a._sw,d=a._ne,!c||!d)return this}return e||f?(e.lng=Math.min(c.lng,e.lng),e.lat=Math.min(c.lat,e.lat),f.lng=Math.max(d.lng,f.lng),f.lat=Math.max(d.lat,f.lat)):(this._sw=new b(c.lng,c.lat),this._ne=new b(d.lng,
d.lat)),this};h.prototype.getCenter=function(){return new b((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};h.prototype.getSouthWest=function(){return this._sw};h.prototype.getNorthEast=function(){return this._ne};h.prototype.getNorthWest=function(){return new b(this.getWest(),this.getNorth())};h.prototype.getSouthEast=function(){return new b(this.getEast(),this.getSouth())};h.prototype.getWest=function(){return this._sw.lng};h.prototype.getSouth=function(){return this._sw.lat};h.prototype.getEast=
function(){return this._ne.lng};h.prototype.getNorth=function(){return this._ne.lat};h.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};h.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};h.convert=function(a){return!a||a instanceof h?a:new h(a)};l.exports=h},{"./lng_lat":62}],64:[function(g,l,d){var b=g("./lng_lat"),h=g("point-geometry"),a=g("./coordinate"),c=g("../util/util"),e=g("../util/interpolate"),f=g("../source/tile_coord"),
k=g("../data/extent");g=g("@mapbox/gl-matrix");var n=g.vec4,m=g.mat4,r=g.mat2;g=function(a,c,e){this.tileSize=512;this._renderWorldCopies=void 0===e||e;this._minZoom=a||0;this._maxZoom=c||22;this.latRange=[-85.05113,85.05113];this.height=this.width=0;this._center=new b(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0};d={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},
x:{},y:{},point:{}};d.minZoom.get=function(){return this._minZoom};d.minZoom.set=function(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))};d.maxZoom.get=function(){return this._maxZoom};d.maxZoom.set=function(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))};d.renderWorldCopies.get=function(){return this._renderWorldCopies};d.worldSize.get=function(){return this.tileSize*this.scale};d.centerPoint.get=function(){return this.size._div(2)};d.size.get=function(){return new h(this.width,
this.height)};d.bearing.get=function(){return-this.angle/Math.PI*180};d.bearing.set=function(a){a=-c.wrap(a,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=r.create(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};d.pitch.get=function(){return this._pitch/Math.PI*180};d.pitch.set=function(a){a=c.clamp(a,0,60)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())};d.fov.get=function(){return this._fov/
Math.PI*180};d.fov.set=function(a){a=Math.max(.01,Math.min(60,a));this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())};d.zoom.get=function(){return this._zoom};d.zoom.set=function(a){a=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())};d.center.get=function(){return this._center};d.center.set=
function(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())};g.prototype.coveringZoomLevel=function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))};g.prototype.getVisibleWrappedCoordinates=function(a){for(var b=this.pointCoordinate(new h(0,0),0),c=this.pointCoordinate(new h(this.width,0),0),c=Math.floor(c.column),e=[a],b=Math.floor(b.column);b<=c;b++)0!==b&&e.push(new f(a.z,
a.x,a.y,b));return e};g.prototype.coveringTiles=function(a){var b=this.coveringZoomLevel(a),c=b;if(b<a.minzoom)return[];b>a.maxzoom&&(b=a.maxzoom);var e=this.pointCoordinate(this.centerPoint,b),d=new h(e.column-.5,e.row-.5),e=[this.pointCoordinate(new h(0,0),b),this.pointCoordinate(new h(this.width,0),b),this.pointCoordinate(new h(this.width,this.height),b),this.pointCoordinate(new h(0,this.height),b)];return f.cover(b,e,a.reparseOverscaled?c:b,this._renderWorldCopies).sort(function(a,b){return d.dist(a)-
d.dist(b)})};g.prototype.resize=function(a,b){this.width=a;this.height=b;this.pixelsToGLUnits=[2/a,-2/b];this._constrain();this._calcMatrices()};d.unmodified.get=function(){return this._unmodified};g.prototype.zoomScale=function(a){return Math.pow(2,a)};g.prototype.scaleZoom=function(a){return Math.log(a)/Math.LN2};g.prototype.project=function(a){return new h(this.lngX(a.lng),this.latY(a.lat))};g.prototype.unproject=function(a){return new b(this.xLng(a.x),this.yLat(a.y))};d.x.get=function(){return this.lngX(this.center.lng)};
d.y.get=function(){return this.latY(this.center.lat)};d.point.get=function(){return new h(this.x,this.y)};g.prototype.lngX=function(a){return(180+a)*this.worldSize/360};g.prototype.latY=function(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))*this.worldSize/360};g.prototype.xLng=function(a){return 360*a/this.worldSize-180};g.prototype.yLat=function(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a/this.worldSize)*Math.PI/180))-90};g.prototype.setLocationAtPoint=function(a,
b){var c=this.pointCoordinate(b)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(a)._sub(c));this._renderWorldCopies&&(this.center=this.center.wrap())};g.prototype.locationPoint=function(a){return this.coordinatePoint(this.locationCoordinate(a))};g.prototype.pointLocation=function(a){return this.coordinateLocation(this.pointCoordinate(a))};g.prototype.locationCoordinate=function(b){return(new a(this.lngX(b.lng)/this.tileSize,this.latY(b.lat)/
this.tileSize,this.zoom)).zoomTo(this.tileZoom)};g.prototype.coordinateLocation=function(a){a=a.zoomTo(this.zoom);return new b(this.xLng(a.column*this.tileSize),this.yLat(a.row*this.tileSize))};g.prototype.pointCoordinate=function(b,c){void 0===c&&(c=this.tileZoom);var f=[b.x,b.y,0,1],d=[b.x,b.y,1,1];n.transformMat4(f,f,this.pixelMatrixInverse);n.transformMat4(d,d,this.pixelMatrixInverse);var k=f[3],h=d[3],m=f[1]/k,g=d[1]/h,r=f[2]/k,q=d[2]/h,r=r===q?0:(0-r)/(q-r);return(new a(e(f[0]/k,d[0]/h,r)/this.tileSize,
e(m,g,r)/this.tileSize,this.zoom))._zoomTo(c)};g.prototype.coordinatePoint=function(a){a=a.zoomTo(this.zoom);a=[a.column*this.tileSize,a.row*this.tileSize,0,1];return n.transformMat4(a,a,this.pixelMatrix),new h(a[0]/a[3],a[1]/a[3])};g.prototype.calculatePosMatrix=function(a,b){var c=a.toCoordinate(b),e=this.worldSize/this.zoomScale(c.zoom),f=m.identity(new Float64Array(16));return m.translate(f,f,[c.column*e,c.row*e,0]),m.scale(f,f,[e/k,e/k,1]),m.multiply(f,this.projMatrix,f),new Float32Array(f)};
g.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,b,c,e,f,d,k,m,g=this.size,n=this._unmodified;this.latRange&&(a=this.latY(this.latRange[1]),b=this.latY(this.latRange[0]),f=b-a<g.y?g.y/(b-a):0);this.lngRange&&(c=this.lngX(this.lngRange[0]),e=this.lngX(this.lngRange[1]),d=e-c<g.x?g.x/(e-c):0);var r=Math.max(d||0,f||0);if(r)return this.center=this.unproject(new h(d?(e+c)/2:this.x,f?(b+a)/2:this.y)),this.zoom+=this.scaleZoom(r),
this._unmodified=n,void(this._constraining=!1);this.latRange&&(f=this.y,d=g.y/2,f-d<a&&(m=a+d),f+d>b&&(m=b-d));this.lngRange&&(a=this.x,g=g.x/2,a-g<c&&(k=c+g),a+g>e&&(k=e-g));void 0===k&&void 0===m||(this.center=this.unproject(new h(void 0!==k?k:this.x,void 0!==m?m:this.y)));this._unmodified=n;this._constraining=!1}};g.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var a=this._fov/2,a=1.01*(Math.sin(a)*this.cameraToCenterDistance/
Math.sin(Math.PI-(Math.PI/2+this._pitch)-a)*Math.cos(Math.PI/2-this._pitch)+this.cameraToCenterDistance),b=new Float64Array(16);m.perspective(b,this._fov,this.width/this.height,1,a);m.scale(b,b,[1,-1,1]);m.translate(b,b,[0,0,-this.cameraToCenterDistance]);m.rotateX(b,b,this._pitch);m.rotateZ(b,b,this.angle);m.translate(b,b,[-this.x,-this.y,0]);if(m.scale(b,b,[1,1,this.worldSize/(12756274*Math.PI*Math.abs(Math.cos(Math.PI/180*this.center.lat))),1]),this.projMatrix=b,b=m.create(),m.scale(b,b,[this.width/
2,-this.height/2,1]),m.translate(b,b,[1,-1,0]),this.pixelMatrix=m.multiply(new Float64Array(16),b,this.projMatrix),b=m.invert(new Float64Array(16),this.pixelMatrix),!b)throw Error("failed to invert matrix");this.pixelMatrixInverse=b}};Object.defineProperties(g.prototype,d);l.exports=g},{"../data/extent":54,"../source/tile_coord":96,"../util/interpolate":206,"../util/util":214,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":1,"point-geometry":26}],65:[function(g,l,d){d=g("./util/browser");l=l.exports=
{};l.version=g("../package.json").version;l.workerCount=Math.max(Math.floor(d.hardwareConcurrency/2),1);l.Map=g("./ui/map");l.NavigationControl=g("./ui/control/navigation_control");l.GeolocateControl=g("./ui/control/geolocate_control");l.AttributionControl=g("./ui/control/attribution_control");l.ScaleControl=g("./ui/control/scale_control");l.FullscreenControl=g("./ui/control/fullscreen_control");l.Popup=g("./ui/popup");l.Marker=g("./ui/marker");l.Style=g("./style/style");l.LngLat=g("./geo/lng_lat");
l.LngLatBounds=g("./geo/lng_lat_bounds");l.Point=g("point-geometry");l.Evented=g("./util/evented");l.supported=g("./util/browser").supported;var b=g("./util/config");l.config=b;g=g("./source/rtl_text_plugin");l.setRTLTextPlugin=g.setRTLTextPlugin;Object.defineProperty(l,"accessToken",{get:function(){return b.ACCESS_TOKEN},set:function(d){b.ACCESS_TOKEN=d}})},{"../package.json":43,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":91,"./style/style":148,"./ui/control/attribution_control":175,
"./ui/control/fullscreen_control":176,"./ui/control/geolocate_control":177,"./ui/control/navigation_control":179,"./ui/control/scale_control":180,"./ui/map":189,"./ui/marker":190,"./ui/popup":191,"./util/browser":194,"./util/config":198,"./util/evented":202,"point-geometry":26}],66:[function(g,l,d){var b=g("./pattern");l.exports=function(d,a,c){a=d.gl;var e=d.transform,f=e.tileSize,k=c.paint["background-color"],h=c.paint["background-pattern"];c=c.paint["background-opacity"];if(d.isOpaquePass===(!h&&
1===k[3]&&1===c)){a.disable(a.STENCIL_TEST);d.setDepthSublayer(0);var m;h?(m=d.useProgram("fillPattern",d.basicFillProgramConfiguration),b.prepare(h,d,m),d.tileExtentPatternVAO.bind(a,m,d.tileExtentBuffer)):(m=d.useProgram("fill",d.basicFillProgramConfiguration),a.uniform4fv(m.u_color,k),d.tileExtentVAO.bind(a,m,d.tileExtentBuffer));a.uniform1f(m.u_opacity,c);c=0;for(e=e.coveringTiles({tileSize:f});c<e.length;c+=1)k=e[c],h&&b.setTile({coord:k,tileSize:f},d,m),a.uniformMatrix4fv(m.u_matrix,!1,d.transform.calculatePosMatrix(k)),
a.drawArrays(a.TRIANGLE_STRIP,0,d.tileExtentBuffer.length)}}},{"./pattern":78}],67:[function(g,l,d){var b=g("../util/browser");l.exports=function(d,a,c,e){if(!d.isOpaquePass){var f=d.gl;d.setDepthSublayer(0);d.depthMask(!1);f.disable(f.STENCIL_TEST);for(var k=0;k<e.length;k++){var h=e[k],m=a.getTile(h),g=m.getBucket(c);if(g){var g=g.buffers,u=g.layerData[c.id],q=u.programConfiguration,t=d.useProgram("circle",q);q.setUniforms(f,t,c,{zoom:d.transform.zoom});"map"===c.paint["circle-pitch-scale"]?(f.uniform1i(t.u_scale_with_map,
!0),f.uniform2f(t.u_extrude_scale,d.transform.pixelsToGLUnits[0]*d.transform.cameraToCenterDistance,d.transform.pixelsToGLUnits[1]*d.transform.cameraToCenterDistance)):(f.uniform1i(t.u_scale_with_map,!1),f.uniform2fv(t.u_extrude_scale,d.transform.pixelsToGLUnits));f.uniform1f(t.u_devicepixelratio,b.devicePixelRatio);f.uniformMatrix4fv(t.u_matrix,!1,d.translatePosMatrix(h.posMatrix,m,c.paint["circle-translate"],c.paint["circle-translate-anchor"]));h=0;for(m=g.segments;h<m.length;h+=1)q=m[h],q.vaos[c.id].bind(f,
t,g.layoutVertexBuffer,g.elementBuffer,u.paintVertexBuffer,q.vertexOffset),f.drawElements(f.TRIANGLES,3*q.primitiveLength,f.UNSIGNED_SHORT,6*q.primitiveOffset)}}}}},{"../util/browser":194}],68:[function(g,l,d){l.exports=function(b,d,a,c){var e=b.gl;e.enable(e.STENCIL_TEST);for(var f=b.useProgram("collisionBox"),k=0;k<c.length;k++){var h=c[k],m=d.getTile(h),g=m.getBucket(a);if(g&&(g=g.buffers.collisionBox))for(e.uniformMatrix4fv(f.u_matrix,!1,h.posMatrix),b.enableTileClippingMask(h),b.lineWidth(1),
e.uniform1f(f.u_scale,Math.pow(2,b.transform.zoom-m.coord.z)),e.uniform1f(f.u_zoom,10*b.transform.zoom),e.uniform1f(f.u_maxzoom,10*(m.coord.z+1)),h=0,m=g.segments;h<m.length;h+=1){var u=m[h];u.vaos[a.id].bind(e,f,g.layoutVertexBuffer,g.elementBuffer,null,u.vertexOffset);e.drawElements(e.LINES,2*u.primitiveLength,e.UNSIGNED_SHORT,4*u.primitiveOffset)}}}},{}],69:[function(g,l,d){var b=g("../util/browser"),h=g("@mapbox/gl-matrix").mat4,a=g("../data/extent"),c=g("../data/buffer"),e=g("./vertex_array_object"),
f=g("../data/pos_array");l.exports=function(d,m,g){for(var n=0;n<g.length;n++){var r=d,t=m,l=g[n],v=r.gl;v.disable(v.STENCIL_TEST);r.lineWidth(1*b.devicePixelRatio);var y=l.posMatrix,A=r.useProgram("debug");v.uniformMatrix4fv(A.u_matrix,!1,y);v.uniform4f(A.u_color,1,0,0,1);r.debugVAO.bind(v,A,r.debugBuffer);v.drawArrays(v.LINE_STRIP,0,r.debugBuffer.length);var z=void 0,B=void 0,x,E,C,D=l.toString(),G=50,H=5,H=H||1,K=[];var J=0;for(C=D.length;J<C;J++)if(x=k[D[J]]){var I=null;var N=0;for(E=x[1].length;N<
E;N+=2)-1===x[1][N]&&-1===x[1][N+1]?I=null:(B=G+x[1][N]*H,z=200-x[1][N+1]*H,I&&K.push(I.x,I.y,B,z),I={x:B,y:z});G+=x[0]*H}I=K;z=new f;for(B=0;B<I.length;B+=2)z.emplaceBack(I[B],I[B+1]);I=c.fromStructArray(z,c.BufferType.VERTEX);(new e).bind(v,A,I);v.uniform4f(A.u_color,1,1,1,1);t=t.getTile(l).tileSize;r=a/(Math.pow(2,r.transform.zoom-l.z)*t);l=[[-1,-1],[-1,1],[1,-1],[1,1]];for(t=0;t<l.length;t++)z=l[t],v.uniformMatrix4fv(A.u_matrix,!1,h.translate([],y,[r*z[0],r*z[1],0])),v.drawArrays(v.LINES,0,I.length);
v.uniform4f(A.u_color,0,0,0,1);v.uniformMatrix4fv(A.u_matrix,!1,y);v.drawArrays(v.LINES,0,I.length)}};var k={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,
21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],
"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,
21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,
4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,
6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,
18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,
12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,
-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,
-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,
3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,
21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,
8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,
3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,
18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/buffer":51,"../data/extent":54,"../data/pos_array":57,"../util/browser":194,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],70:[function(g,l,d){function b(a,b,c,e,d){for(var f=!0,k=0;k<e.length;k+=1){var h=e[k],m=b.getTile(h),g=m.getBucket(c);g&&(a.enableTileClippingMask(h),d(a,b,c,m,h,g.buffers,f),f=!1)}}function h(a,b,e,d,h,g,q){b=a.gl;var f=g.layerData[e.id];a=c("fill",e.paint["fill-pattern"],a,f,e,
d,h,q);d=0;for(h=g.segments;d<h.length;d+=1)q=h[d],q.vaos[e.id].bind(b,a,g.layoutVertexBuffer,g.elementBuffer,f.paintVertexBuffer,q.vertexOffset),b.drawElements(b.TRIANGLES,3*q.primitiveLength,b.UNSIGNED_SHORT,6*q.primitiveOffset)}function a(a,b,e,d,h,g,q){b=a.gl;var f=g.layerData[e.id],k=e.paint["fill-pattern"]&&!e.getPaintProperty("fill-outline-color");a=c("fillOutline",k,a,f,e,d,h,q);b.uniform2f(a.u_world,b.drawingBufferWidth,b.drawingBufferHeight);d=0;for(h=g.segments2;d<h.length;d+=1)q=h[d],
q.vaos[e.id].bind(b,a,g.layoutVertexBuffer,g.elementBuffer2,f.paintVertexBuffer,q.vertexOffset),b.drawElements(b.LINES,2*q.primitiveLength,b.UNSIGNED_SHORT,4*q.primitiveOffset)}function c(a,b,c,d,h,g,q,t){var f,k=c.currentProgram;return b?(f=c.useProgram(a+"Pattern",d.programConfiguration),(t||f!==k)&&(d.programConfiguration.setUniforms(c.gl,f,h,{zoom:c.transform.zoom}),e.prepare(h.paint["fill-pattern"],c,f)),e.setTile(g,c,f)):(f=c.useProgram(a,d.programConfiguration),(t||f!==k)&&d.programConfiguration.setUniforms(c.gl,
f,h,{zoom:c.transform.zoom})),c.gl.uniformMatrix4fv(f.u_matrix,!1,c.translatePosMatrix(q.posMatrix,g,h.paint["fill-translate"],h.paint["fill-translate-anchor"])),f}var e=g("./pattern");l.exports=function(c,e,d,m){var f=c.gl;f.enable(f.STENCIL_TEST);f=!d.paint["fill-pattern"]&&d.isPaintValueFeatureConstant("fill-color")&&d.isPaintValueFeatureConstant("fill-opacity")&&1===d.paint["fill-color"][3]&&1===d.paint["fill-opacity"];c.isOpaquePass===f&&(c.setDepthSublayer(1),b(c,e,d,m,h));!c.isOpaquePass&&
d.paint["fill-antialias"]&&(c.lineWidth(2),c.depthMask(!1),c.setDepthSublayer(d.getPaintProperty("fill-outline-color")?2:0),b(c,e,d,m,a))}},{"./pattern":78}],71:[function(g,l,d){function b(a,b,c){this.gl=a;this.width=b.width;this.height=b.height;this.painter=b;this.layer=c;this.fbo=this.texture=null;this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}d=g("@mapbox/gl-matrix");var h=g("../data/buffer"),a=g("./vertex_array_object"),c=g("../data/pos_array"),e=g("./pattern"),
f=d.mat3,k=d.mat4,n=d.vec3;l.exports=function(a,c,d,k){if(0!==d.paint["fill-extrusion-opacity"]){var h=a.gl;h.disable(h.STENCIL_TEST);h.enable(h.DEPTH_TEST);a.depthMask(!0);var m=new b(h,a,d);m.bindFramebuffer();h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);for(h=0;h<k.length;h++){var g=a,r=d,q=k[h];if(!g.isOpaquePass){var u=c.getTile(q),l=u.getBucket(r);if(l){var l=l.buffers,x=g.gl,E=r.paint["fill-extrusion-pattern"],C=l.layerData[r.id],D=C.programConfiguration,G=g.useProgram(E?
"fillExtrusionPattern":"fillExtrusion",D);D.setUniforms(x,G,r,{zoom:g.transform.zoom});E&&(e.prepare(E,g,G),e.setTile(u,g,G),x.uniform1f(G.u_height_factor,-Math.pow(2,q.z)/u.tileSize/8));g.gl.uniformMatrix4fv(G.u_matrix,!1,g.translatePosMatrix(q.posMatrix,u,r.paint["fill-extrusion-translate"],r.paint["fill-extrusion-translate-anchor"]));var q=G,u=g.gl,E=g.style.light,D=E.calculated.position,D=[D.x,D.y,D.z],H=f.create();"viewport"===E.calculated.anchor&&f.fromRotation(H,-g.transform.angle);n.transformMat3(D,
D,H);u.uniform3fv(q.u_lightpos,D);u.uniform1f(q.u_lightintensity,E.calculated.intensity);u.uniform3fv(q.u_lightcolor,E.calculated.color.slice(0,3));q=0;for(g=l.segments;q<g.length;q+=1)u=g[q],u.vaos[r.id].bind(x,G,l.layoutVertexBuffer,l.elementBuffer,C.paintVertexBuffer,u.vertexOffset),x.drawElements(x.TRIANGLES,3*u.primitiveLength,x.UNSIGNED_SHORT,6*u.primitiveOffset)}}}m.unbindFramebuffer();m.renderToMap()}};b.prototype.bindFramebuffer=function(){var a=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,
this.height),a.activeTexture(a.TEXTURE1),this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,null),
this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),a.bindFramebuffer(a.FRAMEBUFFER,this.fbo);else{this.fbo=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,this.fbo);var b=a.createRenderbuffer(),c=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,b);a.bindRenderbuffer(a.RENDERBUFFER,c);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,this.width,this.height);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,this.width,this.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.COLOR_ATTACHMENT0,a.RENDERBUFFER,b);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,c)}a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0)};b.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer();this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]);this.painter.saveViewportTexture(this.texture)};b.prototype.renderToMap=
function(){var b=this.gl,e=this.painter,f=e.useProgram("extrusionTexture");b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.texture);b.uniform1f(f.u_opacity,this.layer.paint["fill-extrusion-opacity"]);b.uniform1i(f.u_image,1);b.uniformMatrix4fv(f.u_matrix,!1,k.ortho(k.create(),0,e.width,e.height,0,0,1));b.disable(b.DEPTH_TEST);b.uniform2f(f.u_world,b.drawingBufferWidth,b.drawingBufferHeight);e=new c;e.emplaceBack(0,0);e.emplaceBack(1,0);e.emplaceBack(0,1);e.emplaceBack(1,1);e=h.fromStructArray(e,
h.BufferType.VERTEX);(new a).bind(b,f,e);b.drawArrays(b.TRIANGLE_STRIP,0,4);b.enable(b.DEPTH_TEST)}},{"../data/buffer":51,"../data/pos_array":57,"./pattern":78,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],72:[function(g,l,d){var b=g("../util/browser"),h=g("../source/pixels_to_tile_units");l.exports=function(a,c,e,f){if(!a.isOpaquePass){a.setDepthSublayer(0);a.depthMask(!1);var d=a.gl;if(d.enable(d.STENCIL_TEST),!(0>=e.paint["line-width"]))for(var g,d=e.paint["line-dasharray"]?"lineSDF":e.paint["line-pattern"]?
"linePattern":"line",m=!0,r=0;r<f.length;r+=1){var u=f[r],q=c.getTile(u),t=q.getBucket(e);if(t){var l=t.buffers.layerData[e.id],v=a.currentProgram,y=a.useProgram(d,l.programConfiguration),A=m||y!==v,z=g!==q.coord.z;A&&l.programConfiguration.setUniforms(a.gl,y,e,{zoom:a.transform.zoom});a:{var B=v=m=void 0,x=void 0,E=a,C=q,t=t.buffers;g=e;var D=u,u=E.gl,G=g.paint["line-dasharray"],H=g.paint["line-pattern"];if(A||z){z=1/h(C,1,E.transform.tileZoom);if(G){var x=E.lineAtlas.getDash(G.from,"round"===g.layout["line-cap"]),
B=E.lineAtlas.getDash(G.to,"round"===g.layout["line-cap"]),K=x.width*G.fromScale,J=B.width*G.toScale;u.uniform2f(y.u_patternscale_a,z/K,-x.height/2);u.uniform2f(y.u_patternscale_b,z/J,-B.height/2);u.uniform1f(y.u_sdfgamma,E.lineAtlas.width/(256*Math.min(K,J)*b.devicePixelRatio)/2)}else if(H){if(v=E.spriteAtlas.getPosition(H.from,!0),m=E.spriteAtlas.getPosition(H.to,!0),!v||!m)break a;u.uniform2f(y.u_pattern_size_a,v.size[0]*H.fromScale/z,m.size[1]);u.uniform2f(y.u_pattern_size_b,m.size[0]*H.toScale/
z,m.size[1])}u.uniform2f(y.u_gl_units_to_pixels,1/E.transform.pixelsToGLUnits[0],1/E.transform.pixelsToGLUnits[1])}A&&(G?(u.uniform1i(y.u_image,0),u.activeTexture(u.TEXTURE0),E.lineAtlas.bind(u),u.uniform1f(y.u_tex_y_a,x.y),u.uniform1f(y.u_tex_y_b,B.y),u.uniform1f(y.u_mix,G.t)):H&&(u.uniform1i(y.u_image,0),u.activeTexture(u.TEXTURE0),E.spriteAtlas.bind(u,!0),u.uniform2fv(y.u_pattern_tl_a,v.tl),u.uniform2fv(y.u_pattern_br_a,v.br),u.uniform2fv(y.u_pattern_tl_b,m.tl),u.uniform2fv(y.u_pattern_br_b,m.br),
u.uniform1f(y.u_fade,H.t)),u.uniform1f(y.u_width,g.paint["line-width"]));E.enableTileClippingMask(D);m=E.translatePosMatrix(D.posMatrix,C,g.paint["line-translate"],g.paint["line-translate-anchor"]);u.uniformMatrix4fv(y.u_matrix,!1,m);u.uniform1f(y.u_ratio,1/h(C,1,E.transform.zoom));m=0;for(v=t.segments;m<v.length;m+=1)B=v[m],B.vaos[g.id].bind(u,y,t.layoutVertexBuffer,t.elementBuffer,l.paintVertexBuffer,B.vertexOffset),u.drawElements(u.TRIANGLES,3*B.primitiveLength,u.UNSIGNED_SHORT,6*B.primitiveOffset)}g=
q.coord.z;m=!1}}}}},{"../source/pixels_to_tile_units":88,"../util/browser":194}],73:[function(g,l,d){function b(a){a*=Math.PI/180;var b=Math.sin(a);a=Math.cos(a);return[(2*a+1)/3,(-Math.sqrt(3)*b-a+1)/3,(Math.sqrt(3)*b-a+1)/3]}function h(a){return 0<a?1/(1-a):1+a}function a(a){return 0<a?1-1/(1.001-a):-a}var c=g("../util/util");l.exports=function(e,f,d,g){if(!e.isOpaquePass){var k=e.gl;k.enable(k.DEPTH_TEST);e.depthMask(!0);k.depthFunc(k.LESS);for(var n=g.length&&g[0].z,u=0;u<g.length;u++){var q=
g[u];e.setDepthSublayer(q.z-n);var t=void 0,l=void 0,v=e,y=f,A=d,z=q,q=v.gl;q.disable(q.STENCIL_TEST);var B=y.getTile(z),x=v.transform.calculatePosMatrix(z,y.getSource().maxzoom);B.registerFadeDuration(v.style.animationLoop,A.paint["raster-fade-duration"]);y=v.useProgram("raster");q.uniformMatrix4fv(y.u_matrix,!1,x);q.uniform1f(y.u_brightness_low,A.paint["raster-brightness-min"]);q.uniform1f(y.u_brightness_high,A.paint["raster-brightness-max"]);q.uniform1f(y.u_saturation_factor,a(A.paint["raster-saturation"]));
q.uniform1f(y.u_contrast_factor,h(A.paint["raster-contrast"]));q.uniform3fv(y.u_spin_weights,b(A.paint["raster-hue-rotate"]));z=B.sourceCache&&B.sourceCache.findLoadedParent(z,0,{});var x=B,E=z,C=v.transform,D=A.paint["raster-fade-duration"];if(x.sourceCache&&0<D)var G=Date.now(),H=(G-x.timeAdded)/D,D=E?(G-E.timeAdded)/D:-1,G=x.sourceCache.getSource(),C=C.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),C=(C=!E||Math.abs(E.coord.z-C)>Math.abs(x.coord.z-C))&&x.refreshedUponExpiration?
1:c.clamp(C?H:1-D,0,1),x=(x.refreshedUponExpiration&&1<=H&&(x.refreshedUponExpiration=!1),E?{opacity:1,mix:1-C}:{opacity:C,mix:0});else x={opacity:1,mix:0};q.activeTexture(q.TEXTURE0);q.bindTexture(q.TEXTURE_2D,B.texture);q.activeTexture(q.TEXTURE1);z?(q.bindTexture(q.TEXTURE_2D,z.texture),l=Math.pow(2,z.coord.z-B.coord.z),t=[B.coord.x*l%1,B.coord.y*l%1]):q.bindTexture(q.TEXTURE_2D,B.texture);q.uniform2fv(y.u_tl_parent,t||[0,0]);q.uniform1f(y.u_scale_parent,l||1);q.uniform1f(y.u_buffer_scale,1);q.uniform1f(y.u_fade_t,
x.mix);q.uniform1f(y.u_opacity,x.opacity*A.paint["raster-opacity"]);q.uniform1i(y.u_image0,0);q.uniform1i(y.u_image1,1);t=B.boundsBuffer||v.rasterBoundsBuffer;(B.boundsVAO||v.rasterBoundsVAO).bind(q,y,t);q.drawArrays(q.TRIANGLE_STRIP,0,t.length)}k.depthFunc(k.LEQUAL)}}},{"../util/util":214}],74:[function(g,l,d){function b(b,e,d,g,q,t,l,v,y){if(q||!b.style.sprite||b.style.sprite.loaded()){var m=b.gl;v="map"===v;(y="map"===y)?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST);for(var n,r,u=0;u<g.length;u+=
1){var w=g[u],C=e.getTile(w),D=C.getBucket(d);if(D){var G=q?D.buffers.glyph:D.buffers.icon;if(G&&G.segments.length){var H=G.layerData[d.id].programConfiguration,K=q||D.sdfIcons,J=q?D.textSizeData:D.iconSizeData;if(!n||D.fontstack!==r)a:{n=b.useProgram(K?"symbolSDF":"symbolIcon",H),H.setUniforms(m,n,d,{zoom:b.transform.zoom}),r=n;var I=b;var N=d,P=q,M=K,S=y,U=D.fontstack,T=D.iconsNeedLinear,H=J,J=I.gl,Y=I.transform;if(J.uniform1i(r.u_rotate_with_map,v),J.uniform1i(r.u_pitch_with_map,S),J.activeTexture(J.TEXTURE0),
J.uniform1i(r.u_texture,0),J.uniform1f(r.u_is_text,P?1:0),P){M=U&&I.glyphSource.getGlyphAtlas(U);if(!M)break a;M.updateTexture(J);J.uniform2f(r.u_texsize,M.width/4,M.height/4)}else U=I.options.rotating||I.options.zooming,T=!N.isLayoutValueFeatureConstant("icon-size")||!N.isLayoutValueZoomConstant("icon-size")||1!==N.getLayoutValue("icon-size",{zoom:Y.zoom})||c.devicePixelRatio!==I.spriteAtlas.pixelRatio||T,S=S||Y.pitch,I.spriteAtlas.bind(J,M||U||T||S),J.uniform2f(r.u_texsize,I.spriteAtlas.width/4,
I.spriteAtlas.height/4);(J.activeTexture(J.TEXTURE1),I.frameHistory.bind(J),J.uniform1i(r.u_fadetexture,1),J.uniform1f(r.u_zoom,Y.zoom),J.uniform1f(r.u_pitch,Y.pitch/360*2*Math.PI),J.uniform1f(r.u_bearing,Y.bearing/360*2*Math.PI),J.uniform1f(r.u_aspect_ratio,Y.width/Y.height),J.uniform1i(r.u_is_size_zoom_constant,H.isZoomConstant?1:0),J.uniform1i(r.u_is_size_feature_constant,H.isFeatureConstant?1:0),H.isZoomConstant||H.isFeatureConstant)?H.isFeatureConstant&&!H.isZoomConstant?("interval"===H.functionType?
I=N.getLayoutValue(P?"text-size":"icon-size",{zoom:Y.zoom}):(I="interval"===H.functionType?0:k(Y.zoom,H.functionBase,H.coveringZoomRange[0],H.coveringZoomRange[1]),N=H.coveringStopValues[0],I=N+(H.coveringStopValues[1]-N)*a.clamp(I,0,1)),J.uniform1f(r.u_size,I),J.uniform1f(r.u_layout_size,H.layoutSize)):H.isFeatureConstant&&H.isZoomConstant&&J.uniform1f(r.u_size,H.layoutSize):(H=k(Y.zoom,H.functionBase,H.coveringZoomRange[0],H.coveringZoomRange[1]),J.uniform1f(r.u_size_t,a.clamp(H,0,1)))}b.enableTileClippingMask(w);
m.uniformMatrix4fv(n.u_matrix,!1,b.translatePosMatrix(w.posMatrix,C,t,l));w=n;r=d;I=q;N=K;K=y;J=b.gl;H=b.transform;K?(C=f(C,1,H.zoom),J.uniform2f(w.u_extrude_scale,C,C)):(C=H.cameraToCenterDistance,J.uniform2f(w.u_extrude_scale,H.pixelsToGLUnits[0]*C,H.pixelsToGLUnits[1]*C));N&&(C=(I?"text":"icon")+"-halo-width",C=!r.isPaintValueFeatureConstant(C)||r.paint[C],J.uniform1f(w.u_gamma_scale,(K?Math.cos(H._pitch):1)*H.cameraToCenterDistance),C&&(J.uniform1f(w.u_is_halo,1),h(G,r,J,w)),J.uniform1f(w.u_is_halo,
0));h(G,r,J,w);r=D.fontstack}}}y||m.enable(m.DEPTH_TEST)}}function h(a,b,c,e){for(var f=a.layerData[b.id],f=f&&f.paintVertexBuffer,d=0,k=a.segments;d<k.length;d+=1){var h=k[d];h.vaos[b.id].bind(c,e,a.layoutVertexBuffer,a.elementBuffer,f,h.vertexOffset);c.drawElements(c.TRIANGLES,3*h.primitiveLength,c.UNSIGNED_SHORT,6*h.primitiveOffset)}}var a=g("../util/util"),c=g("../util/browser"),e=g("./draw_collision_debug"),f=g("../source/pixels_to_tile_units"),k=g("../style-spec/function").interpolationFactor;
l.exports=function(a,c,f,d){if(!a.isOpaquePass){var k=a.gl;f.layout["text-allow-overlap"]||f.layout["icon-allow-overlap"]||f.layout["text-ignore-placement"]||f.layout["icon-ignore-placement"]?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST);a.setDepthSublayer(0);a.depthMask(!1);b(a,c,f,d,!1,f.paint["icon-translate"],f.paint["icon-translate-anchor"],f.layout["icon-rotation-alignment"],f.layout["icon-rotation-alignment"]);b(a,c,f,d,!0,f.paint["text-translate"],f.paint["text-translate-anchor"],f.layout["text-rotation-alignment"],
f.layout["text-pitch-alignment"]);c.map.showCollisionBoxes&&e(a,c,f,d)}}},{"../source/pixels_to_tile_units":88,"../style-spec/function":107,"../util/browser":194,"../util/util":214,"./draw_collision_debug":68}],75:[function(g,l,d){g=function(){this.changeTimes=new Float64Array(256);this.changeOpacities=new Uint8Array(256);this.opacities=new Uint8ClampedArray(256);this.array=new Uint8Array(this.opacities.buffer);this.previousZoom=0;this.firstFrame=!0};g.prototype.record=function(b,d,a){this.firstFrame&&
(b=0,this.firstFrame=!1);d=Math.floor(10*d);var c;if(d<this.previousZoom)for(c=d+1;c<=this.previousZoom;c++)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];else for(c=d;c>this.previousZoom;c--)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];for(c=0;256>c;c++){var e=b-this.changeTimes[c],e=255*(a?e/a:1);c<=d?this.opacities[c]=this.changeOpacities[c]+e:this.opacities[c]=this.changeOpacities[c]-e}this.changed=!0;this.previousZoom=d};g.prototype.bind=function(b){this.texture?
(b.bindTexture(b.TEXTURE_2D,this.texture),this.changed&&(b.texSubImage2D(b.TEXTURE_2D,0,0,0,256,1,b.ALPHA,b.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texImage2D(b.TEXTURE_2D,0,
b.ALPHA,256,1,0,b.ALPHA,b.UNSIGNED_BYTE,this.array))};l.exports=g},{}],76:[function(g,l,d){var b=g("../util/util");g=function(b,a){this.width=b;this.height=a;this.nextRow=0;this.bytes=4;this.data=new Uint8Array(this.width*this.height*this.bytes);this.positions={}};g.prototype.setSprite=function(b){this.sprite=b};g.prototype.getDash=function(b,a){var c=b.join(",")+a;return this.positions[c]||(this.positions[c]=this.addDash(b,a)),this.positions[c]};g.prototype.addDash=function(d,a){var c=a?7:0,e=2*
c+1;if(this.nextRow+e>this.height)return b.warnOnce("LineAtlas out of space"),null;for(var f=0,k=0;k<d.length;k++)f+=d[k];for(var k=this.width/f,h=k/2,g=1===d.length%2,r=-c;r<=c;r++)for(var u=this.width*(this.nextRow+c+r),q=g?-d[d.length-1]:0,t=d[0],l=1,v=0;v<this.width;v++){for(;t<v/k;)q=t,t+=d[l],g&&l===d.length-1&&(t+=d[0]),l++;var y=Math.min(Math.abs(v-q*k),Math.abs(v-t*k)),A=1===l%2;if(a){var z=c?r/c*(h+1):0;A?(A=h-Math.abs(z),y=Math.sqrt(y*y+A*A)):y=h-Math.sqrt(y*y+z*z)}else y*=A?1:-1;this.data[3+
4*(u+v)]=Math.max(0,Math.min(255,y+128))}c={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:f};return this.nextRow+=e,this.dirty=!0,c};g.prototype.bind=function(b){this.texture?(b.bindTexture(b.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.width,this.height,b.RGBA,b.UNSIGNED_BYTE,this.data))):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.width,this.height,0,b.RGBA,b.UNSIGNED_BYTE,this.data))};l.exports=g},{"../util/util":214}],77:[function(g,l,d){var b=g("../util/browser"),h=g("@mapbox/gl-matrix").mat4,a=g("./frame_history"),c=g("../source/source_cache"),e=g("../data/extent"),f=g("../source/pixels_to_tile_units"),k=g("../util/util"),n=g("../data/buffer"),
m=g("./vertex_array_object"),r=g("../data/raster_bounds_array"),u=g("../data/pos_array"),q=g("../data/program_configuration"),t=g("./shaders"),w={symbol:g("./draw_symbol"),circle:g("./draw_circle"),line:g("./draw_line"),fill:g("./draw_fill"),"fill-extrusion":g("./draw_fill_extrusion"),raster:g("./draw_raster"),background:g("./draw_background"),debug:g("./draw_debug")};g=function(b,e){this.gl=b;this.transform=e;this.reusableTextures={tiles:{},viewport:null};this.preFbos={};this.frameHistory=new a;
this.setup();this.numSublayers=c.maxUnderzooming+c.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.lineWidthRange=b.getParameter(b.ALIASED_LINE_WIDTH_RANGE);this.basicFillProgramConfiguration=q.createStatic(["color","opacity"]);this.emptyProgramConfiguration=new q};g.prototype.resize=function(a,c){var e=this.gl;this.width=a*b.devicePixelRatio;this.height=c*b.devicePixelRatio;e.viewport(0,0,this.width,this.height)};g.prototype.setup=function(){var a=this.gl;a.verbose=!0;a.enable(a.BLEND);
a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);a.enable(a.STENCIL_TEST);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);this._depthMask=!1;a.depthMask(!1);var b=new u;b.emplaceBack(0,0);b.emplaceBack(e,0);b.emplaceBack(0,e);b.emplaceBack(e,e);this.tileExtentBuffer=n.fromStructArray(b,n.BufferType.VERTEX);this.tileExtentVAO=new m;this.tileExtentPatternVAO=new m;b=new u;b.emplaceBack(0,0);b.emplaceBack(e,0);b.emplaceBack(e,e);b.emplaceBack(0,e);b.emplaceBack(0,0);this.debugBuffer=n.fromStructArray(b,n.BufferType.VERTEX);
this.debugVAO=new m;b=new r;b.emplaceBack(0,0,0,0);b.emplaceBack(e,0,32767,0);b.emplaceBack(0,e,0,32767);b.emplaceBack(e,e,32767,32767);this.rasterBoundsBuffer=n.fromStructArray(b,n.BufferType.VERTEX);this.rasterBoundsVAO=new m;(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))};
g.prototype.clearColor=function(){var a=this.gl;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)};g.prototype.clearStencil=function(){var a=this.gl;a.clearStencil(0);a.stencilMask(255);a.clear(a.STENCIL_BUFFER_BIT)};g.prototype.clearDepth=function(){var a=this.gl;a.clearDepth(1);this.depthMask(!0);a.clear(a.DEPTH_BUFFER_BIT)};g.prototype._renderTileClippingMasks=function(a){var b=this.gl;b.colorMask(!1,!1,!1,!1);this.depthMask(!1);b.disable(b.DEPTH_TEST);b.enable(b.STENCIL_TEST);b.stencilMask(248);
b.stencilOp(b.KEEP,b.KEEP,b.REPLACE);var c=1;this._tileClippingMaskIDs={};for(var e=0;e<a.length;e+=1){var f=a[e],d=this._tileClippingMaskIDs[f.id]=c++<<3;b.stencilFunc(b.ALWAYS,d,248);d=this.useProgram("fill",this.basicFillProgramConfiguration);b.uniformMatrix4fv(d.u_matrix,!1,f.posMatrix);this.tileExtentVAO.bind(b,d,this.tileExtentBuffer);b.drawArrays(b.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}b.stencilMask(0);b.colorMask(!0,!0,!0,!0);this.depthMask(!0);b.enable(b.DEPTH_TEST)};g.prototype.enableTileClippingMask=
function(a){var b=this.gl;b.stencilFunc(b.EQUAL,this._tileClippingMaskIDs[a.id],248)};g.prototype.prepareBuffers=function(){};g.prototype.bindDefaultFramebuffer=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)};g.prototype.render=function(a,b){if(this.style=a,this.options=b,this.lineAtlas=a.lineAtlas,this.spriteAtlas=a.spriteAtlas,this.spriteAtlas.setSprite(a.sprite),this.glyphSource=a.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,a.getTransition().duration),this.prepareBuffers(),
this.clearColor(),this.clearDepth(),this.showOverdrawInspector(b.showOverdrawInspector),this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var c=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];c&&w.debug(this,c,c.getVisibleCoordinates())}};g.prototype.renderPass=function(){var a,b,c=this.style._order;this.currentLayer=this.isOpaquePass?c.length-1:0;this.isOpaquePass?
this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND);for(var e=0;e<c.length;e++){var f=this.style._layers[c[this.currentLayer]];f.source!==(a&&a.id)&&(a=this.style.sourceCaches[f.source],b=[],a&&(a.prepare&&a.prepare(),this.clearStencil(),b=a.getVisibleCoordinates(),a.getSource().isTileClipped&&this._renderTileClippingMasks(b)),this.isOpaquePass||b.reverse());this.renderLayer(this,a,f,b);this.currentLayer+=this.isOpaquePass?-1:1}};g.prototype.depthMask=function(a){a!==
this._depthMask&&(this._depthMask=a,this.gl.depthMask(a))};g.prototype.renderLayer=function(a,b,c,e){c.isHidden(this.transform.zoom)||("background"===c.type||e.length)&&(this.id=c.id,w[c.type](a,b,c,e))};g.prototype.setDepthSublayer=function(a){a=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;this.gl.depthRange(a-1+this.depthRange,a)};g.prototype.translatePosMatrix=function(a,b,c,e){if(!c[0]&&!c[1])return a;if("viewport"===e){e=Math.sin(-this.transform.angle);var d=Math.cos(-this.transform.angle);
c=[c[0]*d-c[1]*e,c[0]*e+c[1]*d]}b=[f(b,c[0],this.transform.zoom),f(b,c[1],this.transform.zoom),0];c=new Float32Array(16);return h.translate(c,a,b),c};g.prototype.saveTileTexture=function(a){var b=this.reusableTextures.tiles[a.size];b?b.push(a):this.reusableTextures.tiles[a.size]=[a]};g.prototype.saveViewportTexture=function(a){this.reusableTextures.viewport=a};g.prototype.getTileTexture=function(a){return(a=this.reusableTextures.tiles[a])&&0<a.length?a.pop():null};g.prototype.getViewportTexture=function(a,
b){var c=this.reusableTextures.viewport;if(c)return c.width===a&&c.height===b?c:(this.gl.deleteTexture(c),void(this.reusableTextures.viewport=null))};g.prototype.lineWidth=function(a){this.gl.lineWidth(k.clamp(a,this.lineWidthRange[0],this.lineWidthRange[1]))};g.prototype.showOverdrawInspector=function(a){if(a||this._showOverdrawInspector){this._showOverdrawInspector=a;var b=this.gl;a?(b.blendFunc(b.CONSTANT_COLOR,b.ONE),b.blendColor(.125,.125,.125,0),b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)):
b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)}};g.prototype.createProgram=function(a,c){var e=this.gl,f=e.createProgram(),d=t[a],k="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+b.devicePixelRatio.toFixed(1)+"\n";this._showOverdrawInspector&&(k+="#define OVERDRAW_INSPECTOR;\n");var h=c.applyPragmas(k+t.prelude.fragmentSource+d.fragmentSource,"fragment"),d=c.applyPragmas(k+t.prelude.vertexSource+d.vertexSource,"vertex"),k=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(k,h);e.compileShader(k);e.attachShader(f,
k);h=e.createShader(e.VERTEX_SHADER);e.shaderSource(h,d);e.compileShader(h);e.attachShader(f,h);e.linkProgram(f);d=e.getProgramParameter(f,e.ACTIVE_ATTRIBUTES);h={program:f,numAttributes:d};for(k=0;k<d;k++){var g=e.getActiveAttrib(f,k);h[g.name]=e.getAttribLocation(f,g.name)}d=e.getProgramParameter(f,e.ACTIVE_UNIFORMS);for(k=0;k<d;k++)g=e.getActiveUniform(f,k),h[g.name]=e.getUniformLocation(f,g.name);return h};g.prototype._createProgramCached=function(a,b){this.cache=this.cache||{};var c=""+a+(b.cacheKey||
"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=this.createProgram(a,b)),this.cache[c]};g.prototype.useProgram=function(a,b){var c=this.gl,e=this._createProgramCached(a,b||this.emptyProgramConfiguration);return this.currentProgram!==e&&(c.useProgram(e.program),this.currentProgram=e),e};l.exports=g},{"../data/buffer":51,"../data/extent":54,"../data/pos_array":57,"../data/program_configuration":58,"../data/raster_bounds_array":59,"../source/pixels_to_tile_units":88,
"../source/source_cache":93,"../util/browser":194,"../util/util":214,"./draw_background":66,"./draw_circle":67,"./draw_debug":69,"./draw_fill":70,"./draw_fill_extrusion":71,"./draw_line":72,"./draw_raster":73,"./draw_symbol":74,"./frame_history":75,"./shaders":79,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],78:[function(g,l,d){var b=g("../source/pixels_to_tile_units");d.prepare=function(b,a,c){var e=a.gl,f=a.spriteAtlas.getPosition(b.from,!0),d=a.spriteAtlas.getPosition(b.to,!0);f&&d&&(e.uniform1i(c.u_image,
0),e.uniform2fv(c.u_pattern_tl_a,f.tl),e.uniform2fv(c.u_pattern_br_a,f.br),e.uniform2fv(c.u_pattern_tl_b,d.tl),e.uniform2fv(c.u_pattern_br_b,d.br),e.uniform1f(c.u_mix,b.t),e.uniform2fv(c.u_pattern_size_a,f.size),e.uniform2fv(c.u_pattern_size_b,d.size),e.uniform1f(c.u_scale_a,b.fromScale),e.uniform1f(c.u_scale_b,b.toScale),e.activeTexture(e.TEXTURE0),a.spriteAtlas.bind(e,!0))};d.setTile=function(d,a,c){var e=a.gl;e.uniform1f(c.u_tile_units_to_pixels,1/b(d,1,a.transform.tileZoom));var f=Math.pow(2,
d.coord.z);a=d.tileSize*Math.pow(2,a.transform.tileZoom)/f;f=a*(d.coord.x+d.coord.w*f);d=a*d.coord.y;e.uniform2f(c.u_pixel_coord_upper,f>>16,d>>16);e.uniform2f(c.u_pixel_coord_lower,65535&f,65535&d)}},{"../source/pixels_to_tile_units":88}],79:[function(g,l,d){g("path");l.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",
vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\n\n// To minimize the number of attributes needed in the mapbox-gl-native shaders,\n// we encode a 4-component color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},
circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},
collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",
vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},
fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},
fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},
fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},
fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},
fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},
fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},
extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},
line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},
linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},
lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},
raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:'\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\n\n// icon-size data (see symbol_sdf.vertex.glsl for more)\nattribute vec3 a_size;\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform mediump float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform mediump float u_size; // used when size is both zoom and feature constant\nuniform mediump float u_layout_size; // used when size is feature constant\n\n#pragma mapbox: define lowp float opacity\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform bool u_is_text;\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    mediump vec2 label_data = unpack_float(a_data[2]);\n    mediump float a_labelminzoom = label_data[0];\n    mediump vec2 a_zoom = unpack_float(a_data[3]);\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    float size;\n    // In order to accommodate placing labels around corners in\n    // symbol-placement: line, each glyph in a label could have multiple\n    // "quad"s only one of which should be shown at a given zoom level.\n    // The min/max zoom assigned to each quad is based on the font size at\n    // the vector tile\'s zoom level, which might be different than at the\n    // currently rendered zoom level if text-size is zoom-dependent.\n    // Thus, we compensate for this difference by calculating an adjustment\n    // based on the scale of rendered text size relative to layout text size.\n    mediump float layoutSize;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n        layoutSize = a_size[2] / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n        layoutSize = size;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n        layoutSize = u_layout_size;\n    } else {\n        size = u_size;\n        layoutSize = u_size;\n    }\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    mediump float zoomAdjust = log2(size / layoutSize);\n    mediump float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\n    mediump float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\n\n    vec2 extrude = fontScale * u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n'},
symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\nvarying float v_size;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    highp float gamma_scaled = gamma * v_gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature),\n//   layoutSize == text-size(layoutZoomLevel, feature) ]\nattribute vec3 a_size;\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform mediump float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform mediump float u_size; // used when size is both zoom and feature constant\nuniform mediump float u_layout_size; // used when size is feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform bool u_is_text;\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\nvarying float v_size;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n\n    mediump vec2 label_data = unpack_float(a_data[2]);\n    mediump float a_labelminzoom = label_data[0];\n    mediump float a_labelangle = label_data[1];\n\n    mediump vec2 a_zoom = unpack_float(a_data[3]);\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // In order to accommodate placing labels around corners in\n    // symbol-placement: line, each glyph in a label could have multiple\n    // \"quad\"s only one of which should be shown at a given zoom level.\n    // The min/max zoom assigned to each quad is based on the font size at\n    // the vector tile's zoom level, which might be different than at the\n    // currently rendered zoom level if text-size is zoom-dependent.\n    // Thus, we compensate for this difference by calculating an adjustment\n    // based on the scale of rendered text size relative to layout text size.\n    mediump float layoutSize;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        v_size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n        layoutSize = a_size[2] / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        v_size = a_size[0] / 10.0;\n        layoutSize = v_size;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        v_size = u_size;\n        layoutSize = u_layout_size;\n    } else {\n        v_size = u_size;\n        layoutSize = u_size;\n    }\n\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\n\n    mediump float zoomAdjust = log2(v_size / layoutSize);\n    mediump float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\n    // Used below to move the vertex out of the clip space for when the current\n    // zoom is out of the glyph's zoom range.\n    mediump float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_labelangle / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = fontScale * u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_labelangle / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = fontScale * u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = fontScale * u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},
{path:23}],80:[function(g,l,d){g=function(){this.vao=this.boundVertexOffset=this.boundElementBuffer=this.boundVertexBuffer2=this.boundVertexBuffer=this.boundProgram=null};g.prototype.bind=function(b,d,a,c,e,f){void 0===b.extVertexArrayObject&&(b.extVertexArrayObject=b.getExtension("OES_vertex_array_object"));var k=!this.vao||this.boundProgram!==d||this.boundVertexBuffer!==a||this.boundVertexBuffer2!==e||this.boundElementBuffer!==c||this.boundVertexOffset!==f;!b.extVertexArrayObject||k?(this.freshBind(b,
d,a,c,e,f),this.gl=b):b.extVertexArrayObject.bindVertexArrayOES(this.vao)};g.prototype.freshBind=function(b,d,a,c,e,f){var k=d.numAttributes;if(b.extVertexArrayObject)this.vao&&this.destroy(),this.vao=b.extVertexArrayObject.createVertexArrayOES(),b.extVertexArrayObject.bindVertexArrayOES(this.vao),this.boundProgram=d,this.boundVertexBuffer=a,this.boundVertexBuffer2=e,this.boundElementBuffer=c,this.boundVertexOffset=f;else{var h=b.currentNumAttributes||0;for(var g=k;g<h;g++)b.disableVertexAttribArray(g)}a.enableAttributes(b,
d);e&&e.enableAttributes(b,d);a.bind(b);a.setVertexAttribPointers(b,d,f);e&&(e.bind(b),e.setVertexAttribPointers(b,d,f));c&&c.bind(b);b.currentNumAttributes=k};g.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};l.exports=g},{}],81:[function(g,l,d){var b=g("../util/util");d.packUint8ToFloat=function(d,a){return d=b.clamp(Math.floor(d),0,255),a=b.clamp(Math.floor(a),0,255),256*d+a}},{"../util/util":214}],82:[function(g,l,d){d=g("./image_source");
var b=g("../util/window");g=function(d){function a(a,b,f,k){d.call(this,a,b,f,k);this.options=b;this.animate=!b.hasOwnProperty("animate")||b.animate}return d&&(a.__proto__=d),a.prototype=Object.create(d&&d.prototype),a.prototype.constructor=a,a.prototype.load=function(){if(this.canvas=this.canvas||b.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",Error("Canvas dimensions cannot be less than or equal to zero."));
var a;this.play=function(){a=this.map.style.animationLoop.set(1/0);this.map._rerender()};this.pause=function(){this.map.style.animationLoop.cancel(a)};this._finishLoading()},a.prototype.getCanvas=function(){return this.canvas},a.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.canvas&&this.animate&&this.play())},a.prototype.prepare=function(){var a=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0);this.canvas.height!==this.height&&(this.height=this.canvas.height,
a=!0);this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,a)},a.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},a.prototype._hasInvalidDimensions=function(){for(var a=0,b=[this.canvas.width,this.canvas.height];a<b.length;a+=1){var f=b[a];if(isNaN(f)||0>=f)return!0}return!1},a}(d);l.exports=g},{"../util/window":196,"./image_source":86}],83:[function(g,l,d){function b(b){var c=a.document.createElement("a");
return c.href=b,c.href}d=g("../util/evented");var h=g("../util/util"),a=g("../util/window"),c=g("../data/extent");g=function(a){function e(b,e,f,d){a.call(this);e=e||{};this.id=b;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this.dispatcher=f;this.setEventedParent(d);this._data=e.data;void 0!==e.maxzoom&&(this.maxzoom=e.maxzoom);e.type&&(this.type=e.type);b=c/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:e.cluster||
!1,geojsonVtOptions:{buffer:(void 0!==e.buffer?e.buffer:128)*b,tolerance:(void 0!==e.tolerance?e.tolerance:.375)*b,extent:c,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(e.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:c,radius:(e.clusterRadius||50)*b,log:!1}},e.workerOptions)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.load=function(){var a=this;this.fire("dataloading",{dataType:"source"});this._updateWorkerData(function(b){return b?
void a.fire("error",{error:b}):void a.fire("data",{dataType:"source",sourceDataType:"metadata"})})},e.prototype.onAdd=function(a){this.load();this.map=a},e.prototype.setData=function(a){var b=this;return this._data=a,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(a){return a?b.fire("error",{error:a}):void b.fire("data",{dataType:"source",sourceDataType:"content"})}),this},e.prototype._updateWorkerData=function(a){var c=this,e=h.extend({},this.workerOptions),f=this._data;
"string"==typeof f?e.url=b(f):e.data=JSON.stringify(f);this.workerID=this.dispatcher.send(this.type+".loadData",e,function(b){c._loaded=!0;a(b)})},e.prototype.loadTile=function(a,b){var c=this;a.workerID=this.dispatcher.send("loadTile",{type:this.type,uid:a.uid,coord:a.coord,zoom:a.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes},
function(e,f){if(a.unloadVectorData(),!a.aborted)return e?b(e):(a.loadVectorData(f,c.map.painter),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(c)),b(null))},this.workerID)},e.prototype.abortTile=function(a){a.aborted=!0},e.prototype.unloadTile=function(a){a.unloadVectorData();this.dispatcher.send("removeTile",{uid:a.uid,type:this.type,source:this.id},function(){},a.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},
e.prototype.serialize=function(){return{type:this.type,data:this._data}},e}(d);l.exports=g},{"../data/extent":54,"../util/evented":202,"../util/util":214,"../util/window":196}],84:[function(g,l,d){var b=g("../util/ajax"),h=g("geojson-rewind"),a=g("./geojson_wrapper"),c=g("vt-pbf"),e=g("supercluster"),f=g("geojson-vt");g=function(d){function k(a,b,c){d.call(this,a,b);c&&(this.loadGeoJSON=c);this._geoJSONIndexes={}}return d&&(k.__proto__=d),k.prototype=Object.create(d&&d.prototype),k.prototype.constructor=
k,k.prototype.loadVectorData=function(b,e){var f=b.source,d=b.coord;if(!this._geoJSONIndexes[f])return e(null,null);f=this._geoJSONIndexes[f].getTile(Math.min(d.z,b.maxZoom),d.x,d.y);if(!f)return e(null,null);f=new a(f.features);f.name="_geojsonTileLayer";d=c({layers:{_geojsonTileLayer:f}});0===d.byteOffset&&d.byteLength===d.buffer.byteLength||(d=new Uint8Array(d));f.rawData=d.buffer;e(null,f)},k.prototype.loadData=function(a,b){var c=function(c,e){var f=this;return c?b(c):"object"!=typeof e?b(Error("Input data is not a valid GeoJSON object.")):
(h(e,!0),void this._indexData(e,a,function(c,e){return c?b(c):(f._geoJSONIndexes[a.source]=e,void b(null))}))}.bind(this);this.loadGeoJSON(a,c)},k.prototype.loadGeoJSON=function(a,c){if(a.url)b.getJSON(a.url,c);else{if("string"!=typeof a.data)return c(Error("Input data is not a valid GeoJSON object."));try{return c(null,JSON.parse(a.data))}catch(u){return c(Error("Input data is not a valid GeoJSON object."))}}},k.prototype.removeSource=function(a){this._geoJSONIndexes[a.source]&&delete this._geoJSONIndexes[a.source]},
k.prototype._indexData=function(a,b,c){try{b.cluster?c(null,e(b.superclusterOptions).load(a.features)):c(null,f(a,b.geojsonVtOptions))}catch(q){return c(q)}},k}(g("./vector_tile_worker_source"));l.exports=g},{"../util/ajax":193,"./geojson_wrapper":85,"./vector_tile_worker_source":98,"geojson-rewind":7,"geojson-vt":11,supercluster:29,"vt-pbf":38}],85:[function(g,l,d){var b=g("point-geometry"),h=g("vector-tile").VectorTileFeature,a=g("../data/extent"),c=function(b){if(this.type=b.type,1===b.type){this.rawGeometry=
[];for(var c=0;c<b.geometry.length;c++)this.rawGeometry.push([b.geometry[c]])}else this.rawGeometry=b.geometry;this.properties=b.tags;"id"in b&&!isNaN(b.id)&&(this.id=parseInt(b.id,10));this.extent=a};c.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var c=0;c<a.length;c++){for(var d=a[c],h=[],g=0;g<d.length;g++)h.push(new b(d[g][0],d[g][1]));this.geometry.push(h)}return this.geometry};c.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,
b=1/0,c=-(1/0),d=1/0,h=-(1/0),g=0;g<a.length;g++)for(var u=a[g],q=0;q<u.length;q++)var t=u[q],b=Math.min(b,t.x),c=Math.max(c,t.x),d=Math.min(d,t.y),h=Math.max(h,t.y);return[b,d,c,h]};c.prototype.toGeoJSON=function(){h.prototype.toGeoJSON.call(this)};g=function(b){this.features=b;this.length=b.length;this.extent=a};g.prototype.feature=function(a){return new c(this.features[a])};l.exports=g},{"../data/extent":54,"point-geometry":26,"vector-tile":34}],86:[function(g,l,d){var b=g("../util/util"),h=g("../util/window"),
a=g("./tile_coord"),c=g("../geo/lng_lat"),e=g("point-geometry");d=g("../util/evented");var f=g("../util/ajax"),k=g("../data/extent"),n=g("../data/raster_bounds_array"),m=g("../data/buffer"),r=g("../render/vertex_array_object");g=function(d){function g(a,b,c,e){d.call(this);this.id=a;this.dispatcher=c;this.coordinates=b.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.setEventedParent(e);this.options=b}return d&&(g.__proto__=d),g.prototype=Object.create(d&&d.prototype),
g.prototype.constructor=g,g.prototype.load=function(){var a=this;this.fire("dataloading",{dataType:"source"});this.url=this.options.url;f.getImage(this.options.url,function(b,c){return b?a.fire("error",{error:b}):(a.image=c,void a._finishLoading())})},g.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},g.prototype.onAdd=function(a){this.load();this.map=a;this.image&&this.setCoordinates(this.coordinates)},
g.prototype.setCoordinates=function(f){this.coordinates=f;var d=this.map;f=f.map(function(a){return d.transform.locationCoordinate(c.convert(a)).zoomTo(0)});var h=this.centerCoord=b.getCoordinatesCenter(f);return h.column=Math.floor(h.column),h.row=Math.floor(h.row),this.coord=new a(h.zoom,h.column,h.row),this.minzoom=this.maxzoom=h.zoom,this._tileCoords=f.map(function(a){a=a.zoomTo(h.zoom);return new e(Math.round((a.column-h.column)*k),Math.round((a.row-h.row)*k))}),this.fire("data",{dataType:"source",
sourceDataType:"content"}),this},g.prototype._setTile=function(a){this.tile=a;a=new n;a.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0);a.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,32767,0);a.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,32767);a.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,32767,32767);this.tile.buckets={};this.tile.boundsBuffer=m.fromStructArray(a,m.BufferType.VERTEX);this.tile.boundsVAO=new r},g.prototype.prepare=function(){this.tile&&
this.image&&this._prepareImage(this.map.painter.gl,this.image)},g.prototype._prepareImage=function(a,b,c){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b)):c?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b):(b instanceof h.HTMLVideoElement||b instanceof h.ImageData||b instanceof h.HTMLCanvasElement)&&(a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,b))},g.prototype.loadTile=function(a,b){this.coord&&this.coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},g.prototype.serialize=function(){return{type:"image",
urls:this.url,coordinates:this.coordinates}},g}(d);l.exports=g},{"../data/buffer":51,"../data/extent":54,"../data/raster_bounds_array":59,"../geo/lng_lat":62,"../render/vertex_array_object":80,"../util/ajax":193,"../util/evented":202,"../util/util":214,"../util/window":196,"./tile_coord":96,"point-geometry":26}],87:[function(g,l,d){var b=g("../util/util"),h=g("../util/ajax"),a=g("../util/browser"),c=g("../util/mapbox").normalizeSourceURL;l.exports=function(e,f){var d=function(a,c){if(a)return f(a);
var e=b.pick(c,"tiles minzoom maxzoom attribution mapbox_logo bounds".split(" "));c.vector_layers&&(e.vectorLayers=c.vector_layers,e.vectorLayerIds=e.vectorLayers.map(function(a){return a.id}));f(null,e)};e.url?h.getJSON(c(e.url),d):a.frame(d.bind(null,null,e))}},{"../util/ajax":193,"../util/browser":194,"../util/mapbox":210,"../util/util":214}],88:[function(g,l,d){var b=g("../data/extent");l.exports=function(d,a,c){return b/(d.tileSize*Math.pow(2,c-d.coord.z))*a}},{"../data/extent":54}],89:[function(g,
l,d){function b(a,b){var c=a.coord,f=b.coord;return c.z-f.z||c.y-f.y||c.w-f.w||c.x-f.x}var h=g("./tile_coord");d.rendered=function(a,c,e,f,d,h){e=a.tilesIn(e);e.sort(b);a=[];for(d=0;d<e.length;d++){var k=e[d];k.tile.featureIndex&&a.push(k.tile.featureIndex.query({queryGeometry:k.queryGeometry,scale:k.scale,tileSize:k.tile.tileSize,bearing:h,params:f},c))}c=a[0]||{};for(f=1;f<a.length;f++){h=a[f];for(var g in h)if(e=h[g],d=c[g],void 0===d)c[g]=e;else for(k=0;k<e.length;k++)d.push(e[k])}return c};d.source=
function(a,b){for(var c=a.getRenderableIds().map(function(b){return a.getTileByID(b)}),f=[],d={},g=0;g<c.length;g++){var m=c[g],r=(new h(Math.min(m.sourceMaxZoom,m.coord.z),m.coord.x,m.coord.y,0)).id;d[r]||(d[r]=!0,m.querySourceFeatures(f,b))}return f}},{"./tile_coord":96}],90:[function(g,l,d){var b=g("../util/util"),h=g("../util/ajax");d=g("../util/evented");var a=g("./load_tilejson"),c=g("../util/mapbox").normalizeTileURL,e=g("./tile_bounds");g=function(f){function d(a,c,e,d){f.call(this);this.id=
a;this.dispatcher=e;this.setEventedParent(d);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this.options=c;b.extend(this,b.pick(c,["url","scheme","tileSize"]))}return f&&(d.__proto__=f),d.prototype=Object.create(f&&f.prototype),d.prototype.constructor=d,d.prototype.load=function(){var c=this;this.fire("dataloading",{dataType:"source"});a(this.options,function(a,e){return a?c.fire("error",a):(b.extend(c,e),c.setBounds(e.bounds),
c.fire("data",{dataType:"source",sourceDataType:"metadata"}),void c.fire("data",{dataType:"source",sourceDataType:"content"}))})},d.prototype.onAdd=function(a){this.load();this.map=a},d.prototype.setBounds=function(a){(this.bounds=a)&&(this.tileBounds=new e(a,this.minzoom,this.maxzoom))},d.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},d.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a,this.maxzoom)},
d.prototype.loadTile=function(a,b){var e=c(a.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);a.request=h.getImage(e,function(c,e){if(delete a.request,a.aborted)return this.state="unloaded",b(null);if(c)return this.state="errored",b(c);this.map._refreshExpiredTiles&&a.setExpiryData(e);delete e.cacheControl;delete e.expires;var f=this.map.painter.gl;a.texture=this.map.painter.getTileTexture(e.width);a.texture?(f.bindTexture(f.TEXTURE_2D,a.texture),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,
f.UNSIGNED_BYTE,e)):(a.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,a.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR_MIPMAP_NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),this.map.painter.extTextureFilterAnisotropic&&f.texParameterf(f.TEXTURE_2D,this.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this.map.painter.extTextureFilterAnisotropicMax),
f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e),a.texture.size=e.width);f.generateMipmap(f.TEXTURE_2D);a.state="loaded";b(null)}.bind(this))},d.prototype.abortTile=function(a){a.request&&(a.request.abort(),delete a.request)},d.prototype.unloadTile=function(a){a.texture&&this.map.painter.saveTileTexture(a.texture)},d}(d);l.exports=g},{"../util/ajax":193,"../util/evented":202,"../util/mapbox":210,"../util/util":214,"./load_tilejson":87,"./tile_bounds":95}],91:[function(g,l,d){var b=g("../util/ajax");
d=g("../util/evented");var h=g("../util/window"),a=!1,c=null;l.exports.evented=new d;l.exports.registerForPluginAvailability=function(a){return c?a(c,l.exports.errorCallback):l.exports.evented.once("pluginAvailable",a),a};l.exports.setRTLTextPlugin=function(e,f){if(a)throw Error("setRTLTextPlugin cannot be called multiple times.");a=!0;l.exports.errorCallback=f;b.getArrayBuffer(e,function(a,b){a?f(a):(c=h.URL.createObjectURL(new h.Blob([b.data]),{type:"text/javascript"}),l.exports.evented.fire("pluginAvailable",
{pluginBlobURL:c,errorCallback:f}))})}},{"../util/ajax":193,"../util/evented":202,"../util/window":196}],92:[function(g,l,d){var b=g("../util/util"),h={vector:g("../source/vector_tile_source"),raster:g("../source/raster_tile_source"),geojson:g("../source/geojson_source"),video:g("../source/video_source"),image:g("../source/image_source"),canvas:g("../source/canvas_source")};d.create=function(a,c,e,f){if(c=new h[c.type](a,c,e,f),c.id!==a)throw Error("Expected Source id to be "+a+" instead of "+c.id);
return b.bindAll(["load","abort","unload","serialize","prepare"],c),c};d.getType=function(a){return h[a]};d.setType=function(a,b){h[a]=b}},{"../source/canvas_source":82,"../source/geojson_source":83,"../source/image_source":86,"../source/raster_tile_source":90,"../source/vector_tile_source":97,"../source/video_source":99,"../util/util":214}],93:[function(g,l,d){function b(a,b,c){b=c.zoomTo(Math.min(a.z,b));return{x:(b.column-(a.x+a.w*Math.pow(2,a.z)))*r,y:(b.row-a.y)*r}}function h(a,b){return a%32-
b%32}function a(a){return"raster"===a||"image"===a||"video"===a}var c=g("./source"),e=g("./tile");d=g("../util/evented");var f=g("./tile_coord"),k=g("../util/lru_cache"),n=g("../geo/coordinate"),m=g("../util/util"),r=g("../data/extent");g=function(d){function g(a,b,e){d.call(this);this.id=a;this.dispatcher=e;this.on("data",function(a){"source"===a.dataType&&"metadata"===a.sourceDataType&&(this._sourceLoaded=!0);this._sourceLoaded&&"source"===a.dataType&&"content"===a.sourceDataType&&(this.reload(),
this.transform&&this.update(this.transform))});this.on("error",function(){this._sourceErrored=!0});this._source=c.create(a,b,e,this);this._tiles={};this._cache=new k(0,this.unloadTile.bind(this));this._timers={};this._cacheTimers={};this._isIdRenderable=this._isIdRenderable.bind(this)}return d&&(g.__proto__=d),g.prototype=Object.create(d&&d.prototype),g.prototype.constructor=g,g.prototype.onAdd=function(a){this.map=a;this._source&&this._source.onAdd&&this._source.onAdd(a)},g.prototype.onRemove=function(a){this._source&&
this._source.onRemove&&this._source.onRemove(a)},g.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var b=this._tiles[a];if("loaded"!==b.state&&"errored"!==b.state)return!1}return!0},g.prototype.getSource=function(){return this._source},g.prototype.loadTile=function(a,b){return this._source.loadTile(a,b)},g.prototype.unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a)},g.prototype.abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a)},
g.prototype.serialize=function(){return this._source.serialize()},g.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},g.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(h)},g.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},g.prototype._isIdRenderable=function(a){return this._tiles[a].hasData()&&!this._coveredTiles[a]},g.prototype.reload=function(){this._cache.reset();for(var a in this._tiles)this.reloadTile(a,
"reloading")},g.prototype.reloadTile=function(a,b){var c=this._tiles[a];c&&("loading"!==c.state&&(c.state=b),this.loadTile(c,this._tileLoaded.bind(this,c,a,b)))},g.prototype._tileLoaded=function(a,b,c,e){return e?(a.state="errored",void(404!==e.status&&this._source.fire("error",{tile:a,error:e}))):(a.sourceCache=this,a.timeAdded=(new Date).getTime(),"expired"===c&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(b,a),this._source.fire("data",{dataType:"source",tile:a,coord:a.coord}),void(this.map&&
(this.map.painter.tileExtentVAO.vao=null)))},g.prototype.getTile=function(a){return this.getTileByID(a.id)},g.prototype.getTileByID=function(a){return this._tiles[a]},g.prototype.getZoom=function(a){return a.zoom+a.scaleZoom(a.tileSize/this._source.tileSize)},g.prototype.findLoadedChildren=function(a,b,c){var e=!1,f;for(f in this._tiles){var d=this._tiles[f];if(!(c[f]||!d.hasData()||d.coord.z<=a.z||d.coord.z>b)){var k=Math.pow(2,Math.min(d.coord.z,this._source.maxzoom)-Math.min(a.z,this._source.maxzoom));
if(Math.floor(d.coord.x/k)===a.x&&Math.floor(d.coord.y/k)===a.y)for(e=c[f]=!0;d&&d.coord.z-1>a.z;)k=d.coord.parent(this._source.maxzoom).id,(d=this._tiles[k])&&d.hasData()&&(delete c[f],c[k]=!0)}}return e},g.prototype.findLoadedParent=function(a,b,c){for(var e=a.z-1;e>=b;e--){a=a.parent(this._source.maxzoom);var f=this._tiles[a.id];if(f&&f.hasData())return c[a.id]=!0,f;if(this._cache.has(a.id))return c[a.id]=!0,this._cache.getWithoutRemoving(a.id)}},g.prototype.updateCacheSize=function(a){this._cache.setMaxSize(Math.floor((Math.ceil(a.width/
a.tileSize)+1)*(Math.ceil(a.height/a.tileSize)+1)*5))},g.prototype.update=function(b){var c=this;if(this.transform=b,this._sourceLoaded){var e,d;this.updateCacheSize(b);var k=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(b)),h=Math.max(k-g.maxOverzooming,this._source.minzoom),k=Math.max(k+g.maxUnderzooming,this._source.minzoom),n={};this._coveredTiles={};var r;this.used?this._source.coord?r=b.getVisibleWrappedCoordinates(this._source.coord):(r=b.coveringTiles({tileSize:this._source.tileSize,
minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(a){return c._source.hasTile(a)}))):r=[];for(e=0;e<r.length;e++){b=r[e];var q=c.addTile(b);n[b.id]=!0;q.hasData()||c.findLoadedChildren(b,k,n)||(d=c.findLoadedParent(b,h,n),d&&c.addTile(d.coord))}r={};if(a(this._source.type)){e=Object.keys(n);for(var t=0;t<e.length;t++){var l=e[t];b=f.fromID(l);(q=c._tiles[l])&&("undefined"==
typeof q.fadeEndTime||q.fadeEndTime>=Date.now())&&(c.findLoadedChildren(b,k,n)&&(n[l]=!0),d=c.findLoadedParent(b,h,r),d&&c.addTile(d.coord))}}for(var u in r)n[u]||(c._coveredTiles[u]=!0);for(u in r)n[u]=!0;d=m.keysDifference(this._tiles,n);for(e=0;e<d.length;e++)c.removeTile(+d[e])}},g.prototype.addTile=function(a){var b=this._tiles[a.id];if(b)return b;var c=a.wrapped();(b=this._tiles[c.id])||(b=this._cache.get(c.id),b&&(b.redoPlacement(this._source),this._cacheTimers[c.id]&&(clearTimeout(this._cacheTimers[c.id]),
this._cacheTimers[c.id]=void 0,this._setTileReloadTimer(c.id,b))));var f=!!b;f||(b=a.z,b=new e(c,this._source.tileSize*(b>this._source.maxzoom?Math.pow(2,b-this._source.maxzoom):1),this._source.maxzoom),this.loadTile(b,this._tileLoaded.bind(this,b,a.id,b.state)));return b.uses++,this._tiles[a.id]=b,f||this._source.fire("dataloading",{tile:b,coord:b.coord,dataType:"source"}),b},g.prototype._setTileReloadTimer=function(a,b){var c=this,e=b.getExpiryTimeout();e&&(this._timers[a]=setTimeout(function(){c.reloadTile(a,
"expired");c._timers[a]=void 0},e))},g.prototype._setCacheInvalidationTimer=function(a,b){var c=this,e=b.getExpiryTimeout();e&&(this._cacheTimers[a]=setTimeout(function(){c._cache.remove(a);c._cacheTimers[a]=void 0},e))},g.prototype.removeTile=function(a){var b=this._tiles[a];!b||(b.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),this._timers[a]=void 0),0<b.uses)||(b.hasData()?(a=b.coord.wrapped().id,this._cache.add(a,b),this._setCacheInvalidationTimer(a,b)):(b.aborted=
!0,this.abortTile(b),this.unloadTile(b)))},g.prototype.clearTiles=function(){for(var a in this._tiles)this.removeTile(a);this._cache.reset()},g.prototype.tilesIn=function(a){for(var c={},e=this.getIds(),d=1/0,k=1/0,h=-(1/0),g=-(1/0),m=a[0].zoom,q=0;q<a.length;q++)var l=a[q],d=Math.min(d,l.column),k=Math.min(k,l.row),h=Math.max(h,l.column),g=Math.max(g,l.row);for(q=0;q<e.length;q++){var l=this._tiles[e[q]],u=f.fromID(e[q]),t=[b(u,l.sourceMaxZoom,new n(d,k,m)),b(u,l.sourceMaxZoom,new n(h,g,m))];if(t[0].x<
r&&t[0].y<r&&0<=t[1].x&&0<=t[1].y){for(var t=[],H=0;H<a.length;H++)t.push(b(u,l.sourceMaxZoom,a[H]));H=c[l.coord.id];void 0===H&&(H=c[l.coord.id]={tile:l,coord:u,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-l.coord.z)});H.queryGeometry.push(t)}}a=[];for(var K in c)a.push(c[K]);return a},g.prototype.redoPlacement=function(){for(var a=this.getIds(),b=0;b<a.length;b++)this.getTileByID(a[b]).redoPlacement(this._source)},g.prototype.getVisibleCoordinates=function(){for(var a=this.getRenderableIds().map(f.fromID),
b=0;b<a.length;b+=1){var c=a[b];c.posMatrix=this.transform.calculatePosMatrix(c,this._source.maxzoom)}return a},g}(d);g.maxOverzooming=10;g.maxUnderzooming=3;l.exports=g},{"../data/extent":54,"../geo/coordinate":61,"../util/evented":202,"../util/lru_cache":209,"../util/util":214,"./source":92,"./tile":94,"./tile_coord":96}],94:[function(g,l,d){var b=g("../util/util"),h=g("../data/bucket"),a=g("../data/feature_index"),c=g("vector-tile"),e=g("pbf"),f=g("../util/vectortile_to_geojson"),k=g("../style-spec/feature_filter"),
n=g("../symbol/collision_tile"),m=g("../symbol/collision_box");g=function(a,c,e){this.coord=a;this.uid=b.uniqueId();this.uses=0;this.tileSize=c;this.sourceMaxZoom=e;this.buckets={};this.expirationTime=null;this.expiredRequestCount=0;this.state="loading"};g.prototype.registerFadeDuration=function(a,b){var c=b+this.timeAdded;c<Date.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c,a.set(this.fadeEndTime-Date.now()))};g.prototype.loadVectorData=function(b,c){this.hasData()&&this.unloadVectorData();
this.state="loaded";b&&(b.rawTileData&&(this.rawTileData=b.rawTileData),this.collisionBoxArray=new m(b.collisionBoxArray),this.collisionTile=new n(b.collisionTile,this.collisionBoxArray),this.featureIndex=new a(b.featureIndex,this.rawTileData,this.collisionTile),this.buckets=h.deserialize(b.buckets,c.style))};g.prototype.reloadSymbolData=function(a,c){if("unloaded"!==this.state){this.collisionTile=new n(a.collisionTile,this.collisionBoxArray);this.featureIndex.setCollisionTile(this.collisionTile);
for(var e in this.buckets){var f=this.buckets[e];"symbol"===f.layers[0].type&&(f.destroy(),delete this.buckets[e])}b.extend(this.buckets,h.deserialize(a.buckets,c))}};g.prototype.unloadVectorData=function(){for(var a in this.buckets)this.buckets[a].destroy();this.buckets={};this.featureIndex=this.collisionTile=this.collisionBoxArray=null;this.state="unloaded"};g.prototype.redoPlacement=function(a){var b=this;if("vector"===a.type||"geojson"===a.type)return"loaded"!==this.state?void(this.redoWhenDone=
!0):void(this.collisionTile&&(this.state="reloading",a.dispatcher.send("redoPlacement",{type:a.type,uid:this.uid,source:a.id,angle:a.map.transform.angle,pitch:a.map.transform.pitch,showCollisionBoxes:a.map.showCollisionBoxes},function(c,e){b.reloadSymbolData(e,a.map.style);a.map&&(a.map.painter.tileExtentVAO.vao=null);b.state="loaded";b.redoWhenDone&&(b.redoWhenDone=!1,b.redoPlacement(a))},this.workerID)))};g.prototype.getBucket=function(a){return this.buckets[a.id]};g.prototype.querySourceFeatures=
function(a,b){if(this.rawTileData){this.vtLayers||(this.vtLayers=(new c.VectorTile(new e(this.rawTileData))).layers);var d=this.vtLayers._geojsonTileLayer||this.vtLayers[b.sourceLayer];if(d)for(var h=k(b&&b.filter),g={z:this.coord.z,x:this.coord.x,y:this.coord.y},m=0;m<d.length;m++){var n=d.feature(m);h(n)&&(n=new f(n,this.coord.z,this.coord.x,this.coord.y),n.tile=g,a.push(n))}}};g.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};g.prototype.setExpiryData=
function(a){var c=this.expirationTime;a.cacheControl?(a=b.parseCacheControl(a.cacheControl),a["max-age"]&&(this.expirationTime=Date.now()+1E3*a["max-age"])):a.expires&&(this.expirationTime=(new Date(a.expires)).getTime());if(this.expirationTime){a=Date.now();var e=!1;this.expirationTime>a?e=!1:c?this.expirationTime<c?e=!0:(c=this.expirationTime-c)?this.expirationTime=a+Math.max(c,3E4):e=!0:e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};g.prototype.getExpiryTimeout=
function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};l.exports=g},{"../data/bucket":45,"../data/feature_index":55,"../style-spec/feature_filter":105,"../symbol/collision_box":162,"../symbol/collision_tile":164,"../util/util":214,"../util/vectortile_to_geojson":215,pbf:25,"vector-tile":34}],95:[function(g,l,d){var b=g("../geo/lng_lat_bounds"),h=g("../util/util").clamp;
g=function(a,c,e){this.bounds=b.convert(a);this.minzoom=c||0;this.maxzoom=e||24};g.prototype.contains=function(a,b){var c=b?Math.min(a.z,b):a.z,f=Math.floor(this.lngX(this.bounds.getWest(),c)),d=Math.floor(this.latY(this.bounds.getNorth(),c)),h=Math.ceil(this.lngX(this.bounds.getEast(),c)),c=Math.ceil(this.latY(this.bounds.getSouth(),c));return a.x>=f&&a.x<h&&a.y>=d&&a.y<c};g.prototype.lngX=function(a,b){return Math.pow(2,b)/360*(a+180)};g.prototype.latY=function(a,b){var c=h(Math.sin(Math.PI/180*
a),-.9999,.9999);return Math.pow(2,b-1)+.5*Math.log((1+c)/(1-c))*-(Math.pow(2,b)/(2*Math.PI))};l.exports=g},{"../geo/lng_lat_bounds":63,"../util/util":214}],96:[function(g,l,d){function b(a,b){a.row>b.row&&(b=a=b);return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function h(a,b,c,e,f){c=Math.max(c,Math.floor(b.y0));e=Math.min(e,Math.ceil(b.y1));if(a.x0===b.x0&&a.y0===b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0)b=a=b;for(var d=a.dx/a.dy,k=b.dx/b.dy,h=
0<a.dx,g=0>b.dx;c<e;c++)f(Math.floor(k*Math.max(0,Math.min(b.dy,c+g-b.y0))+b.x0),Math.ceil(d*Math.max(0,Math.min(a.dy,c+h-a.y0))+a.x0),c)}function a(a,c,e,f,d,g){var k,m=b(a,c);c=b(c,e);a=b(e,a);m.dy>c.dy&&(k=m,m=c,c=k);m.dy>a.dy&&(k=m,m=a,a=k);c.dy>a.dy&&(k=c,c=a,a=k);m.dy&&h(a,m,f,d,g);c.dy&&h(a,c,f,d,g)}var c=g("@mapbox/whoots-js"),e=g("../geo/coordinate"),f=function(a,b,c,e){isNaN(e)&&(e=0);this.z=+a;this.x=+b;this.y=+c;this.w=+e;e*=2;0>e&&(e=-1*e-1);a=1<<this.z;this.id=32*(a*a*e+a*this.y+this.x)+
this.z;this.posMatrix=null};f.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};f.prototype.toCoordinate=function(a){a=Math.min(this.z,void 0===a?this.z:a);return new e(this.x+Math.pow(2,a)*this.w,this.y,a)};f.prototype.url=function(a,b,e){for(var f=c.getTileBBox(this.x,this.y,this.z),d,k="",h=this.z;0<h;h--)d=1<<h-1,k+=(this.x&d?1:0)+(this.y&d?2:0);d=k;return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,
b||this.z)).replace("{x}",this.x).replace("{y}","tms"===e?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",d).replace("{bbox-epsg-3857}",f)};f.prototype.parent=function(a){return 0===this.z?null:this.z>a?new f(this.z-1,this.x,this.y,this.w):new f(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)};f.prototype.wrapped=function(){return new f(this.z,this.x,this.y,0)};f.prototype.children=function(a){if(this.z>=a)return[new f(this.z+1,this.x,this.y,this.w)];a=this.z+1;var b=2*this.x,c=
2*this.y;return[new f(a,b,c,this.w),new f(a,b+1,c,this.w),new f(a,b,c+1,this.w),new f(a,b+1,c+1,this.w)]};f.cover=function(b,c,e,d){function h(a,b,c){var h;if(0<=c&&c<=k)for(;a<b;a++){var m=Math.floor(a/k);var n=(a%k+k)%k;0!==m&&!0!==d||(h=new f(e,n,c,m),g[h.id]=h)}}void 0===d&&(d=!0);var k=1<<b,g={};return a(c[0],c[1],c[2],0,k,h),a(c[2],c[3],c[0],0,k,h),Object.keys(g).map(function(a){return g[a]})};f.fromID=function(a){var b=a%32,c=1<<b;a=(a-b)/32;var e=a%c,d=Math.floor(a/(c*c));return 0!==d%2&&
(d=-1*d-1),d/=2,new f(b,e,(a-e)/c%c,d)};l.exports=f},{"../geo/coordinate":61,"@mapbox/whoots-js":4}],97:[function(g,l,d){d=g("../util/evented");var b=g("../util/util"),h=g("./load_tilejson"),a=g("../util/mapbox").normalizeTileURL,c=g("./tile_bounds");g=function(e){function f(a,c,f,d){if(e.call(this),this.id=a,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,b.extend(this,b.pick(c,["url","scheme",
"tileSize"])),this._options=b.extend({type:"vector"},c),512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}return e&&(f.__proto__=e),f.prototype=Object.create(e&&e.prototype),f.prototype.constructor=f,f.prototype.load=function(){var a=this;this.fire("dataloading",{dataType:"source"});h(this._options,function(c,e){return c?void a.fire("error",c):(b.extend(a,e),a.setBounds(e.bounds),a.fire("data",{dataType:"source",sourceDataType:"metadata"}),
void a.fire("data",{dataType:"source",sourceDataType:"content"}))})},f.prototype.setBounds=function(a){(this.bounds=a)&&(this.tileBounds=new c(a,this.minzoom,this.maxzoom))},f.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a,this.maxzoom)},f.prototype.onAdd=function(a){this.load();this.map=a},f.prototype.serialize=function(){return b.extend({},this._options)},f.prototype.loadTile=function(b,c){function e(a,e){if(!b.aborted){if(a)return c(a);this.map._refreshExpiredTiles&&
b.setExpiryData(e);b.loadVectorData(e,this.map.painter);b.redoWhenDone&&(b.redoWhenDone=!1,b.redoPlacement(this));c(null);b.reloadCallback&&(this.loadTile(b,b.reloadCallback),b.reloadCallback=null)}}var f=b.coord.z>this.maxzoom?Math.pow(2,b.coord.z-this.maxzoom):1,f={url:a(b.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:b.uid,coord:b.coord,zoom:b.coord.z,tileSize:this.tileSize*f,type:this.type,source:this.id,overscaling:f,angle:this.map.transform.angle,pitch:this.map.transform.pitch,
showCollisionBoxes:this.map.showCollisionBoxes};b.workerID&&"expired"!==b.state?"loading"===b.state?b.reloadCallback=c:this.dispatcher.send("reloadTile",f,e.bind(this),b.workerID):b.workerID=this.dispatcher.send("loadTile",f,e.bind(this))},f.prototype.abortTile=function(a){this.dispatcher.send("abortTile",{uid:a.uid,type:this.type,source:this.id},null,a.workerID)},f.prototype.unloadTile=function(a){a.unloadVectorData();this.dispatcher.send("removeTile",{uid:a.uid,type:this.type,source:this.id},null,
a.workerID)},f}(d);l.exports=g},{"../util/evented":202,"../util/mapbox":210,"../util/util":214,"./load_tilejson":87,"./tile_bounds":95}],98:[function(g,l,d){var b=g("../util/ajax"),h=g("vector-tile"),a=g("pbf"),c=g("./worker_tile"),e=g("../util/util");g=function(a,b,c){this.actor=a;this.layerIndex=b;c&&(this.loadVectorData=c);this.loading={};this.loaded={}};g.prototype.loadTile=function(a,b){var f=a.source,d=a.uid;this.loading[f]||(this.loading[f]={});var h=this.loading[f][d]=new c(a);h.abort=this.loadVectorData(a,
function(a,c){return delete this.loading[f][d],a?b(a):c?(h.vectorTile=c,h.parse(c,this.layerIndex,this.actor,function(a,f,d){if(a)return b(a);a={};c.expires&&(a.expires=c.expires);c.cacheControl&&(a.cacheControl=c.cacheControl);b(null,e.extend({rawTileData:c.rawData},f,a),d)}),this.loaded[f]=this.loaded[f]||{},void(this.loaded[f][d]=h)):b(null,null)}.bind(this))};g.prototype.reloadTile=function(a,b){function c(a,c){if(this.reloadCallback){var e=this.reloadCallback;delete this.reloadCallback;this.parse(this.vectorTile,
d.layerIndex,d.actor,e)}b(a,c)}var e=this.loaded[a.source],f=a.uid,d=this;e&&e[f]&&(e=e[f],"parsing"===e.status?e.reloadCallback=b:"done"===e.status&&e.parse(e.vectorTile,this.layerIndex,this.actor,c.bind(e)))};g.prototype.abortTile=function(a){var b=this.loading[a.source];a=a.uid;b&&b[a]&&b[a].abort&&(b[a].abort(),delete b[a])};g.prototype.removeTile=function(a){var b=this.loaded[a.source];a=a.uid;b&&b[a]&&delete b[a]};g.prototype.loadVectorData=function(c,e){var f=b.getArrayBuffer(c.url,function(b,
c){if(b)return e(b);var f=new h.VectorTile(new a(c.data));f.rawData=c.data;f.cacheControl=c.cacheControl;f.expires=c.expires;e(b,f)}.bind(this));return function(){f.abort()}};g.prototype.redoPlacement=function(a,b){var c=this.loaded[a.source],e=this.loading[a.source],f=a.uid;c&&c[f]?(c=c[f].redoPlacement(a.angle,a.pitch,a.showCollisionBoxes),c.result&&b(null,c.result,c.transferables)):e&&e[f]&&(e[f].angle=a.angle)};l.exports=g},{"../util/ajax":193,"../util/util":214,"./worker_tile":101,pbf:25,"vector-tile":34}],
99:[function(g,l,d){var b=g("../util/ajax");g=function(d){function a(a,b,f,h){d.call(this,a,b,f,h);this.roundZoom=!0;this.type="video";this.options=b}return d&&(a.__proto__=d),a.prototype=Object.create(d&&d.prototype),a.prototype.constructor=a,a.prototype.load=function(){var a=this,e=this.options;this.urls=e.urls;b.getVideo(e.urls,function(b,c){if(b)return a.fire("error",{error:b});a.video=c;a.video.loop=!0;var e;a.video.addEventListener("playing",function(){e=a.map.style.animationLoop.set(1/0);a.map._rerender()});
a.video.addEventListener("pause",function(){a.map.style.animationLoop.cancel(e)});a.map&&a.video.play();a._finishLoading()})},a.prototype.getVideo=function(){return this.video},a.prototype.onAdd=function(a){this.map||(this.load(),this.map=a,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},a.prototype.prepare=function(){!this.tile||2>this.video.readyState||this._prepareImage(this.map.painter.gl,this.video)},a.prototype.serialize=function(){return{type:"video",urls:this.urls,
coordinates:this.coordinates}},a}(g("./image_source"));l.exports=g},{"../util/ajax":193,"./image_source":86}],100:[function(g,l,d){var b=g("../util/actor"),h=g("../style/style_layer_index"),a=g("./vector_tile_worker_source"),c=g("./geojson_worker_source"),e=g("./rtl_text_plugin"),f=function(f){var d=this;this.self=f;this.actor=new b(f,this);this.layerIndexes={};this.workerSourceTypes={vector:a,geojson:c};this.workerSources={};this.self.registerWorkerSource=function(a,b){if(d.workerSourceTypes[a])throw Error('Worker source with name "'+
a+'" already registered.');d.workerSourceTypes[a]=b};this.self.registerRTLTextPlugin=function(a){if(e.applyArabicShaping||e.processBidirectionalText)throw Error("RTL text plugin already registered.");e.applyArabicShaping=a.applyArabicShaping;e.processBidirectionalText=a.processBidirectionalText}};f.prototype.setLayers=function(a,b){this.getLayerIndex(a).replace(b)};f.prototype.updateLayers=function(a,b){this.getLayerIndex(a).update(b.layers,b.removedIds,b.symbolOrder)};f.prototype.loadTile=function(a,
b,c){this.getWorkerSource(a,b.type).loadTile(b,c)};f.prototype.reloadTile=function(a,b,c){this.getWorkerSource(a,b.type).reloadTile(b,c)};f.prototype.abortTile=function(a,b){this.getWorkerSource(a,b.type).abortTile(b)};f.prototype.removeTile=function(a,b){this.getWorkerSource(a,b.type).removeTile(b)};f.prototype.removeSource=function(a,b){var c=this.getWorkerSource(a,b.type);void 0!==c.removeSource&&c.removeSource(b)};f.prototype.redoPlacement=function(a,b,c){this.getWorkerSource(a,b.type).redoPlacement(b,
c)};f.prototype.loadWorkerSource=function(a,b,c){try{this.self.importScripts(b.url),c()}catch(r){c(r)}};f.prototype.loadRTLTextPlugin=function(a,b,c){try{e.applyArabicShaping||e.processBidirectionalText||this.self.importScripts(b)}catch(r){c(r)}};f.prototype.getLayerIndex=function(a){var b=this.layerIndexes[a];return b||(b=this.layerIndexes[a]=new h),b};f.prototype.getWorkerSource=function(a,b){var c=this;(this.workerSources[a]||(this.workerSources[a]={}),this.workerSources[a][b])||(this.workerSources[a][b]=
new this.workerSourceTypes[b]({send:function(b,e,f,d){c.actor.send(b,e,f,d,a)}},this.getLayerIndex(a)));return this.workerSources[a][b]};l.exports=function(a){return new f(a)}},{"../style/style_layer_index":156,"../util/actor":192,"./geojson_worker_source":84,"./rtl_text_plugin":91,"./vector_tile_worker_source":98}],101:[function(g,l,d){function b(a,b){for(var c=0,e=a.layers;c<e.length;c+=1)e[c].recalculate(b)}function h(a,b){return a.filter(function(a){return!a.isEmpty()}).map(function(a){return a.serialize(b)})}
var a=g("../data/feature_index"),c=g("../symbol/collision_tile"),e=g("../symbol/collision_box"),f=g("../util/dictionary_coder"),k=g("../util/util");g=function(a){this.coord=a.coord;this.uid=a.uid;this.zoom=a.zoom;this.tileSize=a.tileSize;this.source=a.source;this.overscaling=a.overscaling;this.angle=a.angle;this.pitch=a.pitch;this.showCollisionBoxes=a.showCollisionBoxes};g.prototype.parse=function(d,g,r,l){var m=this;d.layers||(d={layers:{_geojsonTileLayer:d}});this.status="parsing";this.data=d;this.collisionBoxArray=
new e;var n=new f(Object.keys(d.layers).sort()),u=new a(this.coord,this.overscaling);u.bucketLayerIDs={};var v={},y=0,A={featureIndex:u,iconDependencies:{},glyphDependencies:{}},z=g.familiesBySource[this.source],B;for(B in z){var x=d.layers[B];if(x){1===x.version&&k.warnOnce('Vector tile source "'+m.source+'" layer "'+B+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var E=n.encode(B),C=[],D=0;D<x.length;D++){var G=x.feature(D);G.index=D;G.sourceLayerIndex=
E;C.push(G)}x=0;for(E=z[B];x<E.length;x+=1)if(D=E[x],G=D[0],!(G.minzoom&&m.zoom<G.minzoom||G.maxzoom&&m.zoom>=G.maxzoom||G.layout&&"none"===G.layout.visibility)){for(var H=0,K=D;H<K.length;H+=1)K[H].recalculate(m.zoom);(v[G.id]=G.createBucket({index:y,layers:D,zoom:m.zoom,overscaling:m.overscaling,collisionBoxArray:m.collisionBoxArray})).populate(C,A);u.bucketLayerIDs[y]=D.map(function(a){return a.id});y++}}}var J=function(a){m.status="done";u.paintPropertyStatistics={};for(var b in v)k.extend(u.paintPropertyStatistics,
v[b].getPaintPropertyStatistics());b=[];l(null,{buckets:h(k.values(v),b),featureIndex:u.serialize(b),collisionTile:a.serialize(b),collisionBoxArray:m.collisionBoxArray.serialize()},b)};this.symbolBuckets=[];for(d=g.symbolOrder.length-1;0<=d;d--)(n=v[g.symbolOrder[d]])&&m.symbolBuckets.push(n);if(0===this.symbolBuckets.length)return J(new c(this.angle,this.pitch,this.collisionBoxArray));var I=0,N=Object.keys(A.iconDependencies),P=k.mapObject(A.glyphDependencies,function(a){return Object.keys(a).map(Number)}),
M=function(a){if(a)return l(a);if(I++,2===I){a=new c(m.angle,m.pitch,m.collisionBoxArray);for(var e=0,f=m.symbolBuckets;e<f.length;e+=1){var d=f[e];b(d,m.zoom);d.prepare(P,N);d.place(a,m.showCollisionBoxes)}J(a)}};Object.keys(P).length?r.send("getGlyphs",{uid:this.uid,stacks:P},function(a,b){P=b;M(a)}):M();N.length?r.send("getIcons",{icons:N},function(a,b){N=b;M(a)}):M()};g.prototype.redoPlacement=function(a,e,f){if(this.angle=a,this.pitch=e,"done"!==this.status)return{};a=new c(this.angle,this.pitch,
this.collisionBoxArray);e=0;for(var d=this.symbolBuckets;e<d.length;e+=1){var k=d[e];b(k,this.zoom);k.place(a,f)}f=[];return{result:{buckets:h(this.symbolBuckets,f),collisionTile:a.serialize(f)},transferables:f}};l.exports=g},{"../data/feature_index":55,"../symbol/collision_box":162,"../symbol/collision_tile":164,"../util/dictionary_coder":199,"../util/util":214}],102:[function(g,l,d){function b(a,b){var c={},f;for(f in a)"ref"!==f&&(c[f]=a[f]);return h.forEach(function(a){a in b&&(c[a]=b[a])}),c}
var h=g("./util/ref_properties");l.exports=function(a){a=a.slice();for(var c=Object.create(null),e=0;e<a.length;e++)c[a[e].id]=a[e];for(e=0;e<a.length;e++)"ref"in a[e]&&(a[e]=b(a[e],c[a[e].ref]));return a}},{"./util/ref_properties":124}],103:[function(g,l,d){function b(a,b,c,e){a=a||{};b=b||{};for(var d in a)a.hasOwnProperty(d)&&(b.hasOwnProperty(d)||(c.push({command:k.removeSource,args:[d]}),e[d]=!0));for(d in b)b.hasOwnProperty(d)&&(a.hasOwnProperty(d)?f(a[d],b[d])||(c.push({command:k.removeSource,
args:[d]}),c.push({command:k.addSource,args:[d,b[d]]}),e[d]=!0):c.push({command:k.addSource,args:[d,b[d]]}))}function h(a,b,c,e,d,h){a=a||{};b=b||{};for(var k in a)a.hasOwnProperty(k)&&(f(a[k],b[k])||c.push({command:h,args:[e,k,b[k],d]}));for(k in b)b.hasOwnProperty(k)&&!a.hasOwnProperty(k)&&(f(a[k],b[k])||c.push({command:h,args:[e,k,b[k],d]}))}function a(a){return a.id}function c(a,b){return a[b.id]=b,a}function e(b,e,d){b=b||[];e=e||[];var g,m,n,r,l,y=b.map(a),A=e.map(a);b=b.reduce(c,{});var z=
e.reduce(c,{}),B=y.slice(),x=Object.create(null);for(g=e=0;e<y.length;e++){var E=y[e];z.hasOwnProperty(E)?g++:(d.push({command:k.removeLayer,args:[E]}),B.splice(B.indexOf(E,g),1))}for(g=e=0;e<A.length;e++)E=A[A.length-1-e],B[B.length-1-e]!==E&&(b.hasOwnProperty(E)?(d.push({command:k.removeLayer,args:[E]}),B.splice(B.lastIndexOf(E,B.length-g),1)):g++,r=B[B.length-e],d.push({command:k.addLayer,args:[z[E],r]}),B.splice(B.length-e,0,E),x[E]=!0);for(e=0;e<A.length;e++)if(E=A[e],m=b[E],n=z[E],!x[E]&&!f(m,
n))if(f(m.source,n.source)&&f(m["source-layer"],n["source-layer"])&&f(m.type,n.type)){h(m.layout,n.layout,d,E,null,k.setLayoutProperty);h(m.paint,n.paint,d,E,null,k.setPaintProperty);f(m.filter,n.filter)||d.push({command:k.setFilter,args:[E,n.filter]});f(m.minzoom,n.minzoom)&&f(m.maxzoom,n.maxzoom)||d.push({command:k.setLayerZoomRange,args:[E,n.minzoom,n.maxzoom]});for(l in m)m.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?
h(m[l],n[l],d,E,l.slice(6),k.setPaintProperty):f(m[l],n[l])||d.push({command:k.setLayerProperty,args:[E,l,n[l]]}));for(l in n)n.hasOwnProperty(l)&&!m.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?h(m[l],n[l],d,E,l.slice(6),k.setPaintProperty):f(m[l],n[l])||d.push({command:k.setLayerProperty,args:[E,l,n[l]]}))}else d.push({command:k.removeLayer,args:[E]}),r=B[B.lastIndexOf(E)+1],d.push({command:k.addLayer,args:[n,
r]})}var f=g("lodash.isequal"),k={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};l.exports=
function(a,c){if(!a)return[{command:k.setStyle,args:[c]}];var d=[];try{if(!f(a.version,c.version))return[{command:k.setStyle,args:[c]}];f(a.center,c.center)||d.push({command:k.setCenter,args:[c.center]});f(a.zoom,c.zoom)||d.push({command:k.setZoom,args:[c.zoom]});f(a.bearing,c.bearing)||d.push({command:k.setBearing,args:[c.bearing]});f(a.pitch,c.pitch)||d.push({command:k.setPitch,args:[c.pitch]});f(a.sprite,c.sprite)||d.push({command:k.setSprite,args:[c.sprite]});f(a.glyphs,c.glyphs)||d.push({command:k.setGlyphs,
args:[c.glyphs]});f(a.transition,c.transition)||d.push({command:k.setTransition,args:[c.transition]});f(a.light,c.light)||d.push({command:k.setLight,args:[c.light]});var h={},g=[];b(a.sources,c.sources,g,h);var m=[];a.layers&&a.layers.forEach(function(a){h[a.source]?d.push({command:k.removeLayer,args:[a.id]}):m.push(a)});d=d.concat(g);e(m,c.layers,d)}catch(w){console.warn("Unable to compute style diff:",w),d=[{command:k.setStyle,args:[c]}]}return d};l.exports.operations=k},{"lodash.isequal":116}],
104:[function(g,l,d){var b=g("util").format;l.exports=function(d,a){this.message=(d?d+": ":"")+b.apply(b,Array.prototype.slice.call(arguments,2));null!==a&&void 0!==a&&a.__line__&&(this.line=a.__line__)}},{util:33}],105:[function(g,l,d){function b(b){if(!b)return"true";var d=b[0];return 1>=b.length?"any"===d?"false":"true":"("+("=="===d?a(b[1],b[2],"===",!1):"!="===d?a(b[1],b[2],"!==",!1):"<"===d||">"===d||"<="===d||">="===d?a(b[1],b[2],d,!0):"any"===d?c(b.slice(1),"||"):"all"===d?c(b.slice(1),"&&"):
"none"===d?"!("+c(b.slice(1),"||")+")":"in"===d?e(b[1],b.slice(2)):"!in"===d?"!("+e(b[1],b.slice(2))+")":"has"===d?f(b[1]):"!has"===d?"!("+f(b[1])+")":"true")+")"}function h(a){return"$type"===a?"f.type":"$id"===a?"f.id":"p["+JSON.stringify(a)+"]"}function a(a,b,c,e){var f=h(a);a="$type"===a?n.indexOf(b):JSON.stringify(b);return(e?"typeof "+f+"=== typeof "+a+"&&":"")+f+c+a}function c(a,c){return a.map(b).join(c)}function e(a,b){"$type"===a&&(b=b.map(function(a){return n.indexOf(a)}));var c=JSON.stringify(b.sort(k)),
e=h(a);return 200>=b.length?c+".indexOf("+e+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+e+", "+c+",0,"+(b.length-1)+")"}function f(a){return"$id"===a?'"id" in f':JSON.stringify(a)+" in p"}function k(a,b){return a<b?-1:a>b?1:0}l.exports=function(a){return new Function("f","var p = (f && f.properties || {}); return "+b(a))};var n=["Unknown","Point","LineString","Polygon"]},{}],106:[function(g,
l,d){function b(a){return a>t?Math.pow(a,1/3):a/q+r}function h(a){return a>u?a*a*a:q*(a-r)}function a(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function c(a){return a/=255,.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)}function e(a){var e=c(a[0]),f=c(a[1]),d=c(a[2]),h=b((.4124564*e+.3575761*f+.1804375*d)/k),g=b((.2126729*e+.7151522*f+.072175*d)/n),e=b((.0193339*e+.119192*f+.9503041*d)/m);return[116*g-16,500*(h-g),200*(g-e),a[3]]}function f(b){var c=(b[0]+16)/116,e=isNaN(b[1])?
c:c+b[1]/500,f=isNaN(b[2])?c:c-b[2]/200;return c=n*h(c),e=k*h(e),f=m*h(f),[a(3.2404542*e-1.5371385*c-.4985314*f),a(-.969266*e+1.8760108*c+.041556*f),a(.0556434*e-.2040259*c+1.0572252*f),b[3]]}var k=.95047,n=1,m=1.08883,r=4/29,u=6/29,q=3*u*u,t=u*u*u,w=Math.PI/180,v=180/Math.PI;l.exports={lab:{forward:e,reverse:f},hcl:{forward:function(a){var b=e(a),c=b[1],f=b[2],d=Math.atan2(f,c)*v;return[0>d?d+360:d,Math.sqrt(c*c+f*f),b[0],a[3]]},reverse:function(a){var b=a[0]*w,c=a[1];return f([a[2],Math.cos(b)*
c,Math.sin(b)*c,a[3]])}}}},{}],107:[function(g,l,d){function b(a){return a}function h(d,g){var m="color"===g.type;if(q(d)){var n=d.stops&&"object"==typeof d.stops[0][0],r=n||void 0!==d.property,r=n||!r,l=d.type||("interpolated"===g["function"]?"exponential":"interval");m&&(d=y({},d),d.stops&&(d.stops=d.stops.map(function(a){return[a[0],v(a[1])]})),d["default"]?d["default"]=v(d["default"]):d["default"]=v(g["default"]));if("exponential"===l)var u=f;else if("interval"===l)u=e;else if("categorical"===
l){u=c;var t=Object.create(null);m=0;for(l=d.stops;m<l.length;m+=1){var z=l[m];t[z[0]]=z[1]}var A=typeof d.stops[0][0]}else{if("identity"!==l)throw Error('Unknown function type "'+l+'"');u=k}if(d.colorSpace&&"rgb"!==d.colorSpace){if(!w[d.colorSpace])throw Error("Unknown color space: "+d.colorSpace);m=w[d.colorSpace];d=JSON.parse(JSON.stringify(d));for(l=0;l<d.stops.length;l++)d.stops[l]=[d.stops[l][0],m.forward(d.stops[l][1])];var B=m.reverse}else B=b;if(n){var N={};n=[];for(r=0;r<d.stops.length;r++)m=
d.stops[r],l=m[0].zoom,void 0===N[l]&&(N[l]={zoom:l,type:d.type,property:d.property,stops:[]},n.push(l)),N[l].stops.push([m[0].value,m[1]]);for(var P=[],r=0;r<n.length;r+=1)m=n[r],P.push([N[m].zoom,h(N[m],g)]);N=function(a,b){return B(f({stops:P,base:d.base},g,a)(a,b))};N.isFeatureConstant=!1;N.isZoomConstant=!1}else r?(N=function(a){return B(u(d,g,a,t,A))},N.isFeatureConstant=!0,N.isZoomConstant=!1):(N=function(b,c){var e=c[d.property];return void 0===e?a(d["default"],g["default"]):B(u(d,g,e,t,A))},
N.isFeatureConstant=!1,N.isZoomConstant=!0)}else m&&d&&(d=v(d)),N=function(){return d},N.isFeatureConstant=!0,N.isZoomConstant=!0;return N}function a(a,b,c){return void 0!==a?a:void 0!==b?b:void 0!==c?c:void 0}function c(b,c,e,f,d){return a(typeof e===d?f[e]:void 0,b["default"],c["default"])}function e(b,c,e){if("number"!==A(e))return a(b["default"],c["default"]);c=b.stops.length;if(1===c||e<=b.stops[0][0])return b.stops[0][1];if(e>=b.stops[c-1][0])return b.stops[c-1][1];e=n(b.stops,e);return b.stops[e][1]}
function f(b,c,e){var f=void 0!==b.base?b.base:1;if("number"!==A(e))return a(b["default"],c["default"]);c=b.stops.length;if(1===c||e<=b.stops[0][0])return b.stops[0][1];if(e>=b.stops[c-1][0])return b.stops[c-1][1];c=n(b.stops,e);return m(e,f,b.stops[c][0],b.stops[c+1][0],b.stops[c][1],b.stops[c+1][1])}function k(b,c,e){return"color"===c.type?e=v(e):A(e)!==c.type&&(e=void 0),a(e,b["default"],c["default"])}function n(a,b){for(var c,e,f=0,d=a.length-1,h=0;f<=d;){if(h=Math.floor((f+d)/2),c=a[h][0],e=
a[h+1][0],b===c||b>c&&b<e)return h;c<b?f=h+1:c>b&&(d=h-1)}return Math.max(h-1,0)}function m(a,b,c,e,f,d){return"function"==typeof f?function(){var h=f.apply(void 0,arguments),k=d.apply(void 0,arguments);if(void 0!==h&&void 0!==k)return m(a,b,c,e,h,k)}:f.length?u(a,b,c,e,f,d):r(a,b,c,e,f,d)}function r(a,b,c,e,f,d){a=t(a,b,c,e);return f+a*(d-f)}function u(a,b,c,e,f,d){for(var h=[],k=0;k<f.length;k++)h[k]=r(a,b,c,e,f[k],d[k]);return h}function q(a){return"object"==typeof a&&(a.stops||"identity"===a.type)}
function t(a,b,c,e){e-=c;a-=c;return 1===b?a/e:(Math.pow(b,a)-1)/(Math.pow(b,e)-1)}var w=g("./color_spaces"),v=g("../util/parse_color"),y=g("../util/extend"),A=g("../util/get_type");l.exports=h;l.exports.isFunctionDefinition=q;l.exports.interpolationFactor=t;l.exports.findStopLessThanOrEqualTo=n},{"../util/extend":121,"../util/get_type":122,"../util/parse_color":123,"./color_spaces":106}],108:[function(g,l,d){function b(b){return a(h.map(function(a){return b[a]}))}var h=g("./util/ref_properties"),
a=g("fast-stable-stringify");l.exports=function(a){for(var c={},f=0;f<a.length;f++){var d=b(a[f]),h=c[d];h||(h=c[d]=[]);h.push(a[f])}a=[];for(var g in c)a.push(c[g]);return a}},{"./util/ref_properties":124,"fast-stable-stringify":110}],109:[function(g,l,d){function b(a){return a=Math.round(a),0>a?0:255<a?255:a}function h(a){return b("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function a(a){a="%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a);return 0>a?0:1<a?1:a}function c(a,b,c){return 0>
c?c+=1:1<c&&--c,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function e(e){e=e.replace(/ /g,"").toLowerCase();if(e in f)return f[e].slice();if("#"===e[0])return 4===e.length?(e=parseInt(e.substr(1),16),0<=e&&4095>=e?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null):7===e.length?(e=parseInt(e.substr(1),16),0<=e&&16777215>=e?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null):null;var d=e.indexOf("("),k=e.indexOf(")");if(-1!==d&&k+1===e.length){var g=e.substr(0,d),d=e.substr(d+1,k-
(d+1)).split(",");e=1;switch(g){case "rgba":if(4!==d.length)break;e=a(d.pop());case "rgb":return 3!==d.length?null:[h(d[0]),h(d[1]),h(d[2]),e];case "hsla":if(4!==d.length)break;e=a(d.pop());case "hsl":if(3===d.length)return g=(parseFloat(d[0])%360+360)%360/360,k=a(d[1]),d=a(d[2]),k=.5>=d?d*(k+1):d+k-d*k,d=2*d-k,[b(255*c(d,k,g+1/3)),b(255*c(d,k,g)),b(255*c(d,k,g-1/3)),e]}}return null}var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,
255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,
1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,
144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,
252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,
50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,
230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,
69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,
245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{d.parseCSSColor=e}catch(k){}},{}],110:[function(g,l,d){function b(d){var h,k;switch(typeof d){case "object":if(null===d)return null;if(a(d)){var g="[";var l=d.length-1;for(h=0;h<l;h++)g+=b(d[h])+",";return-1<l&&(g+=b(d[h])),g+"]"}var q=c(d).sort();l=q.length;g="{";var t=q[h=0];for(k=0<l&&void 0!==d[t];h<l;)k?(g+='"'+t.replace(e,f)+'":'+b(d[t]),t=q[++h],k=h<l&&void 0!==d[t],k&&(g+=",")):(t=q[++h],k=h<l&&void 0!==d[t]);return g+"}";case "undefined":return null;
case "string":return'"'+d.replace(e,f)+'"';default:return d}}var h={}.toString,a=Array.isArray||function(a){return"[object Array]"===h.call(a)},c=Object.keys||function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},e=/[\u0000-\u001f"\\]/g,f=function(a){a=a.charCodeAt(0);switch(a){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return 15<a?"\\u00"+a.toString(16):"\\u000"+a.toString(16)}};
l.exports=function(a){if(void 0!==a)return""+b(a)};l.exports.stringSearch=e;l.exports.stringReplace=f},{}],111:[function(g,l,d){function b(a,b){for(var c=-1,e=a.length;++c<e;)if(b(a[c],c,a))return!0;return!1}function h(b,d,g,n,q,l){var t;if(!(t=b===d)){(t=null==b||null==d)||(t=typeof b,t=!(b&&("object"==t||"function"==t))&&!(d&&"object"==typeof d));if(t)b=b!==b&&d!==d;else a:{t=f(b);var u=f(d),w=r,C=r;t||(w=B.call(b),w==m?w=v:w!=v&&(t=k(b)));u||(C=B.call(d),C==m?C=v:C!=v&&k(d));var y=w==v,u=C==v,
C=w==C;if(!C||t||y){if(!n&&(w=y&&z.call(b,"__wrapped__"),u=u&&z.call(d,"__wrapped__"),w||u)){b=h(w?b.value():b,u?d.value():d,g,n,q,l);break a}if(C){q||(q=[]);l||(l=[]);for(w=q.length;w--;)if(q[w]==b){b=l[w]==d;break a}q.push(b);l.push(d);b=(t?a:e)(b,d,h,g,n,q,l);b=(q.pop(),l.pop(),b)}else b=!1}else b=c(b,d,w)}t=b}return t}function a(a,c,e,d,f,h,k){var g=-1,m=a.length,n=c.length;if(m!=n&&!(f&&n>m))return!1;for(;++g<m;){var r=a[g],n=c[g],q=d?d(f?n:r,f?r:n,g):void 0;if(void 0!==q){if(q)continue;return!1}if(f){if(!b(c,
function(a){return r===a||e(r,a,d,f,h,k)}))return!1}else if(r!==n&&!e(r,n,d,f,h,k))return!1}return!0}function c(a,b,c){switch(c){case u:case q:return+a==+b;case t:return a.name==b.name&&a.message==b.message;case w:return a!=+a?b!=+b:a==+b;case y:case A:return a==b+""}return!1}function e(a,b,c,e,d,f,h){var k=n(a),g=k.length;var m=n(b).length;if(g!=m&&!d)return!1;for(var r=g;r--;)if(m=k[r],!(d?m in b:z.call(b,m)))return!1;for(var q=d;++r<g;){m=k[r];var l=a[m],t=b[m],u=e?e(d?t:l,d?l:t,m):void 0;if(void 0===
u?!c(l,t,e,d,f,h):!u)return!1;q||(q="constructor"==m)}return q||(c=a.constructor,e=b.constructor,!(c!=e&&"constructor"in a&&"constructor"in b)||"function"==typeof c&&c instanceof c&&"function"==typeof e&&e instanceof e)?!0:!1}var f=g("lodash.isarray"),k=g("lodash.istypedarray"),n=g("lodash.keys"),m="[object Arguments]",r="[object Array]",u="[object Boolean]",q="[object Date]",t="[object Error]",w="[object Number]",v="[object Object]",y="[object RegExp]",A="[object String]";g=Object.prototype;var z=
g.hasOwnProperty,B=g.toString;l.exports=h},{"lodash.isarray":115,"lodash.istypedarray":117,"lodash.keys":118}],112:[function(g,l,d){function b(b){return b}l.exports=function(d,a,c){if("function"!=typeof d)return b;if(void 0===a)return d;switch(c){case 1:return function(b){return d.call(a,b)};case 3:return function(b,c,h){return d.call(a,b,c,h)};case 4:return function(b,c,h,g){return d.call(a,b,c,h,g)};case 5:return function(b,c,h,g,m){return d.call(a,b,c,h,g,m)}}return function(){return d.apply(a,
arguments)}}},{}],113:[function(g,l,d){var b=/^\[object .+?Constructor\]$/;g=Object.prototype;var h=Function.prototype.toString,a=g.toString,c=RegExp("^"+h.call(g.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");l.exports=function(e,d){var f=null==e?void 0:e[d],g;if(g=null!=f)g=typeof f,g=!f||"object"!=g&&"function"!=g||"[object Function]"!=a.call(f)?!!f&&"object"==typeof f&&b.test(f):c.test(h.call(f));return g?f:
void 0}},{}],114:[function(g,l,d){g=Object.prototype;var b=g.hasOwnProperty,h=g.toString,a=g.propertyIsEnumerable;l.exports=function(c){var e;if(e=!!c&&"object"==typeof c){if(e=null!=c)e=c.length,e="number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e;e&&(e=typeof c,e=!c||"object"!=e&&"function"!=e?"":h.call(c),e=!("[object Function]"==e||"[object GeneratorFunction]"==e))}return e&&b.call(c,"callee")&&(!a.call(c,"callee")||"[object Arguments]"==h.call(c))}},{}],115:[function(g,l,d){var b=/^\[object .+?Constructor\]$/;
g=Object.prototype;var h=Function.prototype.toString,a=g.toString,c=RegExp("^"+h.call(g.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");g=function(e,d){var f=null==e?void 0:e[d],g;if(g=null!=f)g=typeof f,g=!f||"object"!=g&&"function"!=g||"[object Function]"!=a.call(f)?!!f&&"object"==typeof f&&b.test(f):c.test(h.call(f));return g?f:void 0}(Array,"isArray")||function(b){var c;if(c=!!b&&"object"==typeof b)c=b.length,
c="number"==typeof c&&-1<c&&0==c%1&&9007199254740991>=c;return c&&"[object Array]"==a.call(b)};l.exports=g},{}],116:[function(g,l,d){var b=g("lodash._baseisequal"),h=g("lodash._bindcallback");l.exports=function(a,c,e,d){d=(e="function"==typeof e?h(e,d,3):void 0)?e(a,c):void 0;return void 0===d?b(a,c,e):!!d}},{"lodash._baseisequal":111,"lodash._bindcallback":112}],117:[function(g,l,d){var b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=
b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0;b["[object Arguments]"]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b["[object Map]"]=b["[object Number]"]=b["[object Object]"]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object WeakMap]"]=!1;var h=Object.prototype.toString;l.exports=function(a){var c;if(c=!!a&&
"object"==typeof a)c=a.length,c="number"==typeof c&&-1<c&&0==c%1&&9007199254740991>=c;return c&&!!b[h.call(a)]}},{}],118:[function(g,l,d){function b(a,b){return a="number"==typeof a||k.test(a)?+a:-1,b=null==b?r:b,-1<a&&0==a%1&&a<b}function h(a){return"number"==typeof a&&-1<a&&0==a%1&&a<=r}function a(a){var d=a;if(null==d)d=[];else{c(d)||(d=Object(d));for(var k=d.length,k=k&&h(k)&&(f(d)||e(d))&&k||0,g=d.constructor,m=-1,g="function"==typeof g&&g.prototype===d,r=Array(k),l=0<k;++m<k;)r[m]=m+"";for(var q in d)l&&
b(q,k)||"constructor"==q&&(g||!n.call(d,q))||r.push(q);d=r}m=(k=d.length)&&a.length;q=!!m&&h(m)&&(f(a)||e(a));g=-1;for(r=[];++g<k;)l=d[g],(q&&b(l,m)||n.call(a,l))&&r.push(l);return r}function c(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}d=g("lodash._getnative");var e=g("lodash.isarguments"),f=g("lodash.isarray"),k=/^\d+$/,n=Object.prototype.hasOwnProperty,m=d(Object,"keys"),r=9007199254740991,u=function(a){return function(b){return null==b?void 0:b[a]}}("length");l.exports=m?function(b){var e=
null==b?void 0:b.constructor;return"function"==typeof e&&e.prototype===b||"function"!=typeof b&&null!=b&&h(u(b))?a(b):c(b)?m(b):[]}:a},{"lodash._getnative":113,"lodash.isarguments":114,"lodash.isarray":115}],119:[function(g,l,d){l.exports=g("./v8.json")},{"./v8.json":120}],120:[function(g,l,d){l.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,
period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},
minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,
type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,
value:"number"}},animate:{type:"boolean","default":"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},
layout:"layout_fill layout_line layout_circle layout_fill-extrusion layout_symbol layout_raster layout_background".split(" "),layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_line:{"line-cap":{type:"enum",
"function":"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",
values:{visible:{},none:{}},"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant",
"zoom-function":!0,"default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"]},"icon-size":{type:"number",
"default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels","function":"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width",
"height"]}]},"icon-image":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,
"default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,
values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","zoom-function":!0,"default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,
requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant","zoom-function":!0,
values:{left:{},center:{},right:{}},"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",
"default":0,period:360,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant",
"zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated","zoom-function":!0,"property-function":!0,length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,
"default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},
geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},"function":{stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},
light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array","default":[1.15,210,30],length:3,value:"number",transition:!0,"function":"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color","default":"#ffffff","function":"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number","default":.5,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},
paint:"paint_fill paint_line paint_circle paint_fill-extrusion paint_symbol paint_raster paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!0},"fill-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,
requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"]},
"fill-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!1,"default":1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",
length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":0,
minimum:0,maximum:65535,units:"meters",transition:!0},"fill-extrusion-base":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":0,minimum:0,maximum:65535,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,
"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},
"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant",
"zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",
"default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},
"default":"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map"},"circle-stroke-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",
"default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",
"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",
length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000",
"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,
"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",
"default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","zoom-function":!0,"default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","zoom-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",
"default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},
"background-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],121:[function(g,l,d){l.exports=function(b){for(var d=arguments,a=1;a<arguments.length;a++){var c=d[a],e;for(e in c)b[e]=
c[e]}return b}},{}],122:[function(g,l,d){l.exports=function(b){return b instanceof Number?"number":b instanceof String?"string":b instanceof Boolean?"boolean":Array.isArray(b)?"array":null===b?"null":typeof b}},{}],123:[function(g,l,d){var b=g("csscolorparser").parseCSSColor;l.exports=function(d){return"string"==typeof d?(d=b(d))?[d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]]:void 0:Array.isArray(d)?d:void 0}},{csscolorparser:109}],124:[function(g,l,d){l.exports="type source source-layer minzoom maxzoom filter layout".split(" ")},
{}],125:[function(g,l,d){l.exports=function(b){return b instanceof Number||b instanceof String||b instanceof Boolean?b.valueOf():b}},{}],126:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/get_type"),a=g("../util/extend");l.exports=function(c){var e=g("./validate_function"),d=g("./validate_object"),k={"*":function(){return[]},array:g("./validate_array"),"boolean":g("./validate_boolean"),number:g("./validate_number"),color:g("./validate_color"),constants:g("./validate_constants"),
"enum":g("./validate_enum"),filter:g("./validate_filter"),"function":g("./validate_function"),layer:g("./validate_layer"),object:g("./validate_object"),source:g("./validate_source"),light:g("./validate_light"),string:g("./validate_string")},n=c.value,m=c.valueSpec,r=c.key,l=c.styleSpec,q=c.style;if("string"===h(n)&&"@"===n[0]){if(7<l.$version)return[new b(r,n,"constants have been deprecated as of v8")];if(!(n in q.constants))return[new b(r,n,'constant "%s" not found',n)];c=a({},c,{value:q.constants[n]})}return m["function"]&&
"object"===h(n)?e(c):m.type&&k[m.type]?k[m.type](c):d(a({},c,{valueSpec:m.type?l[m.type]:m}))}},{"../error/validation_error":104,"../util/extend":121,"../util/get_type":122,"./validate_array":127,"./validate_boolean":128,"./validate_color":129,"./validate_constants":130,"./validate_enum":131,"./validate_filter":132,"./validate_function":133,"./validate_layer":135,"./validate_light":137,"./validate_number":138,"./validate_object":139,"./validate_source":142,"./validate_string":143}],127:[function(g,
l,d){var b=g("../util/get_type"),h=g("./validate"),a=g("../error/validation_error");l.exports=function(c){var e=c.value,d=c.valueSpec,k=c.style,g=c.styleSpec,m=c.key;c=c.arrayElementValidator||h;if("array"!==b(e))return[new a(m,e,"array expected, %s found",b(e))];if(d.length&&e.length!==d.length)return[new a(m,e,"array length %d expected, length %d found",d.length,e.length)];if(d["min-length"]&&e.length<d["min-length"])return[new a(m,e,"array length at least %d expected, length %d found",d["min-length"],
e.length)];var r={type:d.value};7>g.$version&&(r["function"]=d["function"]);"object"===b(d.value)&&(r=d.value);for(var d=[],l=0;l<e.length;l++)d=d.concat(c({array:e,arrayIndex:l,value:e[l],valueSpec:r,style:k,styleSpec:g,key:m+"["+l+"]"}));return d}},{"../error/validation_error":104,"../util/get_type":122,"./validate":126}],128:[function(g,l,d){var b=g("../util/get_type"),h=g("../error/validation_error");l.exports=function(a){var c=a.value;a=a.key;var e=b(c);return"boolean"!==e?[new h(a,c,"boolean expected, %s found",
e)]:[]}},{"../error/validation_error":104,"../util/get_type":122}],129:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/get_type"),a=g("csscolorparser").parseCSSColor;l.exports=function(c){var e=c.key;c=c.value;var d=h(c);return"string"!==d?[new b(e,c,"color expected, %s found",d)]:null===a(c)?[new b(e,c,'color expected, "%s" found',c)]:[]}},{"../error/validation_error":104,"../util/get_type":122,csscolorparser:109}],130:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/get_type");
l.exports=function(a){var c=a.key,e=a.value;if(7<a.styleSpec.$version)return e?[new b(c,e,"constants have been deprecated as of v8")]:[];a=h(e);if("object"!==a)return[new b(c,e,"object expected, %s found",a)];a=[];for(var d in e)"@"!==d[0]&&a.push(new b(c+"."+d,e[d],'constants must start with "@"'));return a}},{"../error/validation_error":104,"../util/get_type":122}],131:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/unbundle_jsonlint");l.exports=function(a){var c=a.key,e=a.value;
a=a.valueSpec;var d=[];return Array.isArray(a.values)?-1===a.values.indexOf(h(e))&&d.push(new b(c,e,"expected one of [%s], %s found",a.values.join(", "),e)):-1===Object.keys(a.values).indexOf(h(e))&&d.push(new b(c,e,"expected one of [%s], %s found",Object.keys(a.values).join(", "),e)),d}},{"../error/validation_error":104,"../util/unbundle_jsonlint":125}],132:[function(g,l,d){var b=g("../error/validation_error"),h=g("./validate_enum"),a=g("../util/get_type"),c=g("../util/unbundle_jsonlint");l.exports=
function f(d){var k,g=d.value,r=d.key,l=d.styleSpec,q=[];if("array"!==a(g))return[new b(r,g,"array expected, %s found",a(g))];if(1>g.length)return[new b(r,g,"filter array must have at least 1 element")];switch(q=q.concat(h({key:r+"[0]",value:g[0],valueSpec:l.filter_operator,style:d.style,styleSpec:d.styleSpec})),c(g[0])){case "<":case "<=":case ">":case ">=":2<=g.length&&"$type"===c(g[1])&&q.push(new b(r,g,'"$type" cannot be use with operator "%s"',g[0]));case "==":case "!=":3!==g.length&&q.push(new b(r,
g,'filter array for operator "%s" must have 3 elements',g[0]));case "in":case "!in":2<=g.length&&(k=a(g[1]),"string"!==k&&q.push(new b(r+"[1]",g[1],"string expected, %s found",k)));for(var t=2;t<g.length;t++)k=a(g[t]),"$type"===c(g[1])?q=q.concat(h({key:r+"["+t+"]",value:g[t],valueSpec:l.geometry_type,style:d.style,styleSpec:d.styleSpec})):"string"!==k&&"number"!==k&&"boolean"!==k&&q.push(new b(r+"["+t+"]",g[t],"string, number, or boolean expected, %s found",k));break;case "any":case "all":case "none":for(k=
1;k<g.length;k++)q=q.concat(f({key:r+"["+k+"]",value:g[k],style:d.style,styleSpec:d.styleSpec}));break;case "has":case "!has":k=a(g[1]),2!==g.length?q.push(new b(r,g,'filter array for "%s" operator must have 2 elements',g[0])):"string"!==k&&q.push(new b(r+"[1]",g[1],"string expected, %s found",k))}return q}},{"../error/validation_error":104,"../util/get_type":122,"../util/unbundle_jsonlint":125,"./validate_enum":131}],133:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/get_type"),
a=g("./validate"),c=g("./validate_object"),e=g("./validate_array"),f=g("./validate_number"),k=g("../util/unbundle_jsonlint");l.exports=function(d){function g(e){var d=[],g=e.value,m=e.key;if("array"!==h(g))return[new b(m,g,"array expected, %s found",h(g))];if(2!==g.length)return[new b(m,g,"array length %d expected, length %d found",2,g.length)];if(B){if("object"!==h(g[0]))return[new b(m,g,"object expected, %s found",h(g[0]))];if(void 0===g[0].zoom)return[new b(m,g,"object stop key must have zoom")];
if(void 0===g[0].value)return[new b(m,g,"object stop key must have value")];if(t&&t>k(g[0].zoom))return[new b(m,g[0].zoom,"stop zoom values must appear in ascending order")];k(g[0].zoom)!==t&&(t=k(g[0].zoom),q=void 0,y={});d=d.concat(c({key:m+"[0]",value:g[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:f,value:n}}))}else d=d.concat(n({key:m+"[0]",value:g[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec}));return d.concat(a({key:m+"[1]",value:g[1],valueSpec:w,
style:e.style,styleSpec:e.styleSpec}))}function n(a){var c=h(a.value),e=k(a.value);if(l){if(c!==l)return[new b(a.key,a.value,"%s stop domain type must match previous stop domain type %s",c,l)]}else l=c;return"number"!==c&&"string"!==c&&"boolean"!==c?[new b(a.key,a.value,"stop domain value must be a number, string, or boolean")]:"number"!==c&&"categorical"!==v?(e="number expected, %s found",w["property-function"]&&void 0===v&&(e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),
[new b(a.key,a.value,e,c)]):"categorical"!==v||"number"!==c||isFinite(e)&&Math.floor(e)===e?"number"===c&&void 0!==q&&e<q?[new b(a.key,a.value,"stop domain values must appear in ascending order")]:(q=e,"categorical"===v&&e in y?[new b(a.key,a.value,"stop domain values must be unique")]:(y[e]=!0,[])):[new b(a.key,a.value,"integer expected, found %s",e)]}var l,q,t,w=d.valueSpec,v=k(d.value.type),y={},A="categorical"!==v&&void 0===d.value.property,z=!A,B="array"===h(d.value.stops)&&"array"===h(d.value.stops[0])&&
"object"===h(d.value.stops[0][0]),x=c({key:d.key,value:d.value,valueSpec:d.styleSpec["function"],style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(a){if("identity"===v)return[new b(a.key,a.value,'identity function may not have a "stops" property')];var c=[],d=a.value;return c=c.concat(e({key:a.key,value:d,valueSpec:a.valueSpec,style:a.style,styleSpec:a.styleSpec,arrayElementValidator:g})),"array"===h(d)&&0===d.length&&c.push(new b(a.key,d,"array must have at least one stop")),
c},"default":function(b){return a({key:b.key,value:b.value,valueSpec:w,style:b.style,styleSpec:b.styleSpec})}}});return"identity"===v&&A&&x.push(new b(d.key,d.value,'missing required property "property"')),"identity"===v||d.value.stops||x.push(new b(d.key,d.value,'missing required property "stops"')),"exponential"===v&&"piecewise-constant"===d.valueSpec["function"]&&x.push(new b(d.key,d.value,"exponential functions not supported")),8<=d.styleSpec.$version&&(z&&!d.valueSpec["property-function"]?x.push(new b(d.key,
d.value,"property functions not supported")):A&&!d.valueSpec["zoom-function"]&&x.push(new b(d.key,d.value,"zoom functions not supported"))),"categorical"!==v&&!B||void 0!==d.value.property||x.push(new b(d.key,d.value,'"property" property is required')),x}},{"../error/validation_error":104,"../util/get_type":122,"../util/unbundle_jsonlint":125,"./validate":126,"./validate_array":127,"./validate_number":138,"./validate_object":139}],134:[function(g,l,d){var b=g("../error/validation_error"),h=g("./validate_string");
l.exports=function(a){var c=a.value,e=a.key;a=h(a);return a.length?a:(-1===c.indexOf("{fontstack}")&&a.push(new b(e,c,'"glyphs" url must include a "{fontstack}" token')),-1===c.indexOf("{range}")&&a.push(new b(e,c,'"glyphs" url must include a "{range}" token')),a)}},{"../error/validation_error":104,"./validate_string":143}],135:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/unbundle_jsonlint"),a=g("./validate_object"),c=g("./validate_filter"),e=g("./validate_paint_property"),f=
g("./validate_layout_property"),k=g("../util/extend");l.exports=function(d){var g=[],n=d.value,l=d.key,q=d.style,t=d.styleSpec;n.type||n.ref||g.push(new b(l,n,'either "type" or "ref" is required'));var w=h(n.type),v=h(n.ref);if(n.id)for(var y=h(n.id),A=0;A<d.arrayIndex;A++){var z=q.layers[A];h(z.id)===y&&g.push(new b(l,n.id,'duplicate layer id "%s", previously used at line %d',n.id,z.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(a){a in n&&g.push(new b(l,
n[a],'"%s" is prohibited for ref layers',a))});var B;q.layers.forEach(function(a){h(a.id)===v&&(B=a)});B?B.ref?g.push(new b(l,n.ref,"ref cannot reference another ref layer")):w=h(B.type):g.push(new b(l,n.ref,'ref layer "%s" not found',v))}else"background"!==w&&(n.source?(y=(q=q.sources&&q.sources[n.source])&&h(q.type),q?"vector"===y&&"raster"===w?g.push(new b(l,n.source,'layer "%s" requires a raster source',n.id)):"raster"===y&&"raster"!==w?g.push(new b(l,n.source,'layer "%s" requires a vector source',
n.id)):"vector"!==y||n["source-layer"]||g.push(new b(l,n,'layer "%s" must specify a "source-layer"',n.id)):g.push(new b(l,n.source,'source "%s" not found',n.source))):g.push(new b(l,n,'missing required property "source"')));return g=g.concat(a({key:l,value:n,valueSpec:t.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},filter:c,layout:function(b){return a({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(a){return f(k({layerType:w},
a))}}})},paint:function(b){return a({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(a){return e(k({layerType:w},a))}}})}}}))}},{"../error/validation_error":104,"../util/extend":121,"../util/unbundle_jsonlint":125,"./validate_filter":132,"./validate_layout_property":136,"./validate_object":139,"./validate_paint_property":140}],136:[function(g,l,d){var b=g("./validate_property");l.exports=function(d){return b(d,"layout")}},{"./validate_property":141}],
137:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/get_type"),a=g("./validate");l.exports=function(c){var e=c.value,d=c.styleSpec,k=d.light;c=c.style;var g=[],m=h(e);if(void 0===e)return g;if("object"!==m)return g.concat([new b("light",e,"object expected, %s found",m)]);for(var r in e)g=(m=r.match(/^(.*)-transition$/))&&k[m[1]]&&k[m[1]].transition?g.concat(a({key:r,value:e[r],valueSpec:d.transition,style:c,styleSpec:d})):k[r]?g.concat(a({key:r,value:e[r],valueSpec:k[r],style:c,
styleSpec:d})):g.concat([new b(r,e[r],'unknown property "%s"',r)]);return g}},{"../error/validation_error":104,"../util/get_type":122,"./validate":126}],138:[function(g,l,d){var b=g("../util/get_type"),h=g("../error/validation_error");l.exports=function(a){var c=a.key,e=a.value;a=a.valueSpec;var d=b(e);return"number"!==d?[new h(c,e,"number expected, %s found",d)]:"minimum"in a&&e<a.minimum?[new h(c,e,"%s is less than the minimum value %s",e,a.minimum)]:"maximum"in a&&e>a.maximum?[new h(c,e,"%s is greater than the maximum value %s",
e,a.maximum)]:[]}},{"../error/validation_error":104,"../util/get_type":122}],139:[function(g,l,d){var b=g("../error/validation_error"),h=g("../util/get_type"),a=g("./validate");l.exports=function(c){var e=c.key,d=c.value,k=c.valueSpec||{},g=c.objectElementValidators||{},m=c.style;c=c.styleSpec;var r=[],l=h(d);if("object"!==l)return[new b(e,d,"object expected, %s found",l)];for(var q in d){var t=q.split(".")[0],l=k[t]||k["*"];if(g[t])t=g[t];else if(k[t])t=a;else if(g["*"])t=g["*"];else{if(!k["*"]){r.push(new b(e,
d[q],'unknown property "%s"',q));continue}t=a}r=r.concat(t({key:(e?e+".":e)+q,value:d[q],valueSpec:l,style:m,styleSpec:c,object:d,objectKey:q}))}for(var w in k)k[w].required&&void 0===k[w]["default"]&&void 0===d[w]&&r.push(new b(e,d,'missing required property "%s"',w));return r}},{"../error/validation_error":104,"../util/get_type":122,"./validate":126}],140:[function(g,l,d){var b=g("./validate_property");l.exports=function(d){return b(d,"paint")}},{"./validate_property":141}],141:[function(g,l,d){var b=
g("./validate"),h=g("../error/validation_error"),a=g("../util/get_type");l.exports=function(c,e){var d=c.key,k=c.style,g=c.styleSpec,m=c.value,r=c.objectKey,l=g[e+"_"+c.layerType];if(!l)return[];var q=r.match(/^(.*)-transition$/);if("paint"===e&&q&&l[q[1]]&&l[q[1]].transition)return b({key:d,value:m,valueSpec:g.transition,style:k,styleSpec:g});l=c.valueSpec||l[r];if(!l)return[new h(d,m,'unknown property "%s"',r)];var t;if("string"===a(m)&&l["property-function"]&&!l.tokens&&(t=/^{([^}]+)}$/.exec(m)))return[new h(d,
m,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',r,JSON.stringify(t[1]))];t=[];return"symbol"===c.layerType&&"text-field"===r&&k&&!k.glyphs&&t.push(new h(d,m,'use of "text-field" requires a style "glyphs" property')),t.concat(b({key:c.key,value:m,valueSpec:l,style:k,styleSpec:g}))}},{"../error/validation_error":104,"../util/get_type":122,"./validate":126}],142:[function(g,l,d){var b=g("../error/validation_error"),
h=g("../util/unbundle_jsonlint"),a=g("./validate_object"),c=g("./validate_enum");l.exports=function(e){var d=e.value,k=e.key,g=e.styleSpec,m=e.style;if(!d.type)return[new b(k,d,'"type" is required')];var r=[];switch(h(d.type)){case "vector":case "raster":if(r=r.concat(a({key:k,value:d,valueSpec:g.source_tile,style:e.style,styleSpec:g})),"url"in d)for(var l in d)0>["type","url","tileSize"].indexOf(l)&&r.push(new b(k+"."+l,d[l],'a source with a "url" property may not include a "%s" property',l));return r;
case "geojson":return a({key:k,value:d,valueSpec:g.source_geojson,style:m,styleSpec:g});case "video":return a({key:k,value:d,valueSpec:g.source_video,style:m,styleSpec:g});case "image":return a({key:k,value:d,valueSpec:g.source_image,style:m,styleSpec:g});case "canvas":return a({key:k,value:d,valueSpec:g.source_canvas,style:m,styleSpec:g});default:return c({key:k+".type",value:d.type,valueSpec:{values:"vector raster geojson video image canvas".split(" ")},style:m,styleSpec:g})}}},{"../error/validation_error":104,
"../util/unbundle_jsonlint":125,"./validate_enum":131,"./validate_object":139}],143:[function(g,l,d){var b=g("../util/get_type"),h=g("../error/validation_error");l.exports=function(a){var c=a.value;a=a.key;var e=b(c);return"string"!==e?[new h(a,c,"string expected, %s found",e)]:[]}},{"../error/validation_error":104,"../util/get_type":122}],144:[function(g,l,d){function b(a,b){b=b||f;var d=[];return d=d.concat(e({key:"",value:a,valueSpec:b.$root,styleSpec:b,style:a,objectElementValidators:{glyphs:k,
"*":function(){return[]}}})),7<b.$version&&a.constants&&(d=d.concat(c({key:"constants",value:a.constants,style:a,styleSpec:b}))),h(d)}function h(a){return[].concat(a).sort(function(a,b){return a.line-b.line})}function a(a){return function(){return h(a.apply(this,arguments))}}var c=g("./validate/validate_constants"),e=g("./validate/validate"),f=g("./reference/latest"),k=g("./validate/validate_glyphs_url");b.source=a(g("./validate/validate_source"));b.light=a(g("./validate/validate_light"));b.layer=
a(g("./validate/validate_layer"));b.filter=a(g("./validate/validate_filter"));b.paintProperty=a(g("./validate/validate_paint_property"));b.layoutProperty=a(g("./validate/validate_layout_property"));l.exports=b},{"./reference/latest":119,"./validate/validate":126,"./validate/validate_constants":130,"./validate/validate_filter":132,"./validate/validate_glyphs_url":134,"./validate/validate_layer":135,"./validate/validate_layout_property":136,"./validate/validate_light":137,"./validate/validate_paint_property":140,
"./validate/validate_source":142}],145:[function(g,l,d){g=function(){this.n=0;this.times=[]};g.prototype.stopped=function(){return this.times=this.times.filter(function(b){return b.time>=(new Date).getTime()}),!this.times.length};g.prototype.set=function(b){return this.times.push({id:this.n,time:b+(new Date).getTime()}),this.n++};g.prototype.cancel=function(b){this.times=this.times.filter(function(d){return d.id!==b})};l.exports=g},{}],146:[function(g,l,d){d=g("../util/evented");var b=g("../util/ajax"),
h=g("../util/browser"),a=g("../util/mapbox").normalizeSpriteURL,c=function(){this.height=this.width=this.y=this.x=0;this.pixelRatio=1;this.sdf=!1};g=function(e){function d(c,d){var f=this;e.call(this);this.base=c;this.retina=1<h.devicePixelRatio;this.setEventedParent(d);var g=this.retina?"@2x":"";b.getJSON(a(c,g,".json"),function(a,b){return a?void f.fire("error",{error:a}):(f.data=b,void(f.imgData&&f.fire("data",{dataType:"style"})))});b.getImage(a(c,g,".png"),function(a,b){if(a)return void f.fire("error",
{error:a});f.imgData=h.getImageData(b);for(var c=0;c<f.imgData.length;c+=4){var e=f.imgData[c+3]/255;f.imgData[c+0]*=e;f.imgData[c+1]*=e;f.imgData[c+2]*=e}f.width=b.width;f.data&&f.fire("data",{dataType:"style"})})}return e&&(d.__proto__=e),d.prototype=Object.create(e&&e.prototype),d.prototype.constructor=d,d.prototype.toJSON=function(){return this.base},d.prototype.loaded=function(){return!(!this.data||!this.imgData)},d.prototype.resize=function(){var a=this;if(1<h.devicePixelRatio!==this.retina){var b=
new d(this.base);b.on("data",function(){a.data=b.data;a.imgData=b.imgData;a.width=b.width;a.retina=b.retina})}},d.prototype.getSpritePosition=function(a){return this.loaded()?(a=this.data&&this.data[a])&&this.imgData?a:new c:new c},d}(d);l.exports=g},{"../util/ajax":193,"../util/browser":194,"../util/evented":202,"../util/mapbox":210}],147:[function(g,l,d){var b=g("../style-spec/reference/latest"),h=g("../util/util");d=g("../util/evented");var a=g("./validate_style"),c=g("./style_declaration"),e=
g("./style_transition");g=function(d){function f(a){d.call(this);this.properties=["anchor","color","position","intensity"];this._specifications=b.light;this.set(a)}return d&&(f.__proto__=d),f.prototype=Object.create(d&&d.prototype),f.prototype.constructor=f,f.prototype.set=function(b){if(!this._validate(a.light,b)){this._declarations={};this._transitions={};this._transitionOptions={};this.calculated={};b=h.extend({anchor:this._specifications.anchor["default"],color:this._specifications.color["default"],
position:this._specifications.position["default"],intensity:this._specifications.intensity["default"]},b);for(var e=0,d=this.properties;e<d.length;e+=1){var f=d[e];this._declarations[f]=new c(this._specifications[f],b[f])}return this}},f.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},f.prototype.getLightProperty=function(a){return h.endsWith(a,
"-transition")?this._transitionOptions[a]:this._declarations[a]&&this._declarations[a].value},f.prototype.getLightValue=function(a,b){if("position"===a){var c=this._transitions[a].calculate(b),c=h.sphericalToCartesian(c);return{x:c[0],y:c[1],z:c[2]}}return this._transitions[a].calculate(b)},f.prototype.setLight=function(b){if(!this._validate(a.light,b))for(var e in b){var d=b[e];h.endsWith(e,"-transition")?this._transitionOptions[e]=d:null===d||void 0===d?delete this._declarations[e]:this._declarations[e]=
new c(this._specifications[e],d)}},f.prototype.recalculate=function(a){for(var b in this._declarations)this.calculated[b]=this.getLightValue(b,{zoom:a})},f.prototype._applyLightDeclaration=function(a,b,d,f,g){d=d.transition?this._transitions[a]:void 0;var k=this._specifications[a];(null!==b&&void 0!==b||(b=new c(k,k["default"])),d&&d.declaration.json===b.json)||(f=h.extend({duration:300,delay:0},f,this.getLightProperty(a+"-transition")),a=this._transitions[a]=new e(k,b,d,f),a.instant()||(a.loopID=
g.set(a.endTime-Date.now())),d&&g.cancel(d.loopID))},f.prototype.updateLightTransitions=function(a,b,c){for(var e in this._declarations)this._applyLightDeclaration(e,this._declarations[e],a,b,c)},f.prototype._validate=function(c,e){return a.emitErrors(this,c.call(a,h.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:b})))},f}(d);l.exports=g},{"../style-spec/reference/latest":119,"../util/evented":202,"../util/util":214,"./style_declaration":149,"./style_transition":157,"./validate_style":158}],
148:[function(g,l,d){d=g("../util/evented");var b=g("./style_layer"),h=g("./image_sprite"),a=g("./light"),c=g("../symbol/glyph_source"),e=g("../symbol/sprite_atlas"),f=g("../render/line_atlas"),k=g("../util/util"),n=g("../util/ajax"),m=g("../util/mapbox"),r=g("../util/browser"),u=g("../util/dispatcher"),q=g("./animation_loop"),t=g("./validate_style"),w=g("../source/source"),v=g("../source/query_features"),y=g("../source/source_cache"),A=g("../style-spec/reference/latest"),z=g("../style-spec/function"),
B=g("../util/global_worker_pool"),x=g("../style-spec/deref"),E=g("../style-spec/diff"),C=g("../source/rtl_text_plugin"),D=k.pick(E.operations,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition".split(" ")),G=k.pick(E.operations,["setCenter","setZoom","setBearing","setPitch"]);g=function(d){function g(a,b,g){var l=this;d.call(this);this.animationLoop=(this.map=b)&&b.animationLoop||new q;this.dispatcher=new u(B(),this);
this.spriteAtlas=new e(1024,1024);this.spriteAtlas.setEventedParent(this);this.lineAtlas=new f(256,512);this._layers={};this._order=[];this.sourceCaches={};this.zoomHistory={};this._loaded=!1;k.bindAll(["_redoPlacement"],this);this._resetUpdates();g=k.extend({validate:"string"!=typeof a||!m.isMapboxURL(a)},g);this.setEventedParent(b);this.fire("dataloading",{dataType:"style"});var v=this;this._rtlTextPluginCallback=C.registerForPluginAvailability(function(a){v.dispatcher.broadcast("loadRTLTextPlugin",
a.pluginBlobURL,a.errorCallback);for(var b in v.sourceCaches)v.sourceCaches[b].reload()});b=function(a,b){if(a)return void l.fire("error",{error:a});if(!g.validate||!t.emitErrors(l,t(b))){l._loaded=!0;l.stylesheet=b;l.updateClasses();for(var e in b.sources)l.addSource(e,b.sources[e],g);b.sprite&&(l.sprite=new h(b.sprite,l));l.glyphSource=new c(b.glyphs);l._resolve();l.fire("data",{dataType:"style"});l.fire("style.load")}};"string"==typeof a?n.getJSON(m.normalizeStyleURL(a),b):r.frame(b.bind(this,
null,a));this.on("data",function(a){if("source"===a.dataType&&"metadata"===a.sourceDataType&&(a=l.sourceCaches[a.sourceId].getSource())&&a.vectorLayerIds)for(var b in l._layers){var c=l._layers[b];c.source===a.id&&l._validateLayer(c)}})}return d&&(g.__proto__=d),g.prototype=Object.create(d&&d.prototype),g.prototype.constructor=g,g.prototype._validateLayer=function(a){var b=this.sourceCaches[a.source];a.sourceLayer&&b&&(b=b.getSource(),("geojson"===b.type||b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(a.sourceLayer))&&
this.fire("error",{error:Error('Source layer "'+a.sourceLayer+'" does not exist on source "'+b.id+'" as specified by style layer "'+a.id+'"')}))},g.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},g.prototype._resolve=function(){var c=x(this.stylesheet.layers);this._order=c.map(function(a){return a.id});this._layers={};for(var e=0;e<
c.length;e+=1){var d=c[e],d=b.create(d);d.setEventedParent(this,{layer:{id:d.id}});this._layers[d.id]=d}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new a(this.stylesheet.light)},g.prototype._serializeLayers=function(a){var b=this;return a.map(function(a){return b._layers[a].serialize()})},g.prototype._applyClasses=function(a,b){if(this._loaded){a=a||[];b=b||{transition:!0};var c=this.stylesheet.transition||{},e=this._updatedAllPaintProps?this._layers:this._updatedPaintProps,
d;for(d in e){var e=this._layers[d],f=this._updatedPaintProps[d];if(this._updatedAllPaintProps||f.all)e.updatePaintTransitions(a,b,c,this.animationLoop,this.zoomHistory);else for(var h in f)this._layers[d].updatePaintTransition(h,a,b,c,this.animationLoop,this.zoomHistory)}this.light.updateLightTransitions(b,c,this.animationLoop)}},g.prototype._recalculate=function(a){if(this._loaded){for(var b in this.sourceCaches)this.sourceCaches[b].used=!1;this._updateZoomHistory(a);b=0;for(var c=this._order;b<
c.length;b+=1){var e=this._layers[c[b]];e.recalculate(a);!e.isHidden(a)&&e.source&&(this.sourceCaches[e.source].used=!0)}this.light.recalculate(a);Math.floor(this.z)!==Math.floor(a)&&this.animationLoop.set(300);this.z=a}},g.prototype._updateZoomHistory=function(a){var b=this.zoomHistory;void 0===b.lastIntegerZoom&&(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=0,b.lastZoom=a);Math.floor(b.lastZoom)<Math.floor(a)?(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=Date.now()):Math.floor(b.lastZoom)>
Math.floor(a)&&(b.lastIntegerZoom=Math.floor(a+1),b.lastIntegerZoomTime=Date.now());b.lastZoom=a},g.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},g.prototype.update=function(a,b){if(this._changed){var c=Object.keys(this._updatedLayers),e=Object.keys(this._removedLayers);(c.length||e.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(c,e);for(var d in this._updatedSources)c=this._updatedSources[d],"reload"===c?this._reloadSource(d):"clear"===
c&&this._clearSource(d);this._applyClasses(a,b);this._resetUpdates();this.fire("data",{dataType:"style"})}},g.prototype._updateWorkerLayers=function(a,b){var c=this,e=this._updatedSymbolOrder?this._order.filter(function(a){return"symbol"===c._layers[a].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:b,symbolOrder:e})},g.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSymbolOrder=!1;this._updatedSources=
{};this._updatedPaintProps={};this._updatedAllPaintProps=!1},g.prototype.setState=function(a){var b=this;if(this._checkLoaded(),t.emitErrors(this,t(a)))return!1;a=k.extend({},a);a.layers=x(a.layers);var c=E(this.serialize(),a).filter(function(a){return!(a.command in G)});if(0===c.length)return!1;var e=c.filter(function(a){return!(a.command in D)});if(0<e.length)throw Error("Unimplemented: "+e.map(function(a){return a.command}).join(", ")+".");return c.forEach(function(a){"setTransition"!==a.command&&
b[a.command].apply(b,a.args)}),this.stylesheet=a,!0},g.prototype.addSource=function(a,b,c){var e=this;if(this._checkLoaded(),void 0!==this.sourceCaches[a])throw Error("There is already a source with this ID");if(!b.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(b)+".");if(!(0<="vector raster geojson video image canvas".split(" ").indexOf(b.type)&&this._validate(t.source,"sources."+a,b,null,c))){var d=this.sourceCaches[a]=new y(a,
b,this.dispatcher);d.style=this;d.setEventedParent(this,function(){return{isSourceLoaded:e.loaded(),source:d.serialize(),sourceId:a}});d.onAdd(this.map);this._changed=!0}},g.prototype.removeSource=function(a){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw Error("There is no source with this ID");var b=this.sourceCaches[a];delete this.sourceCaches[a];delete this._updatedSources[a];b.setEventedParent(null);b.clearTiles();b.onRemove&&b.onRemove(this.map);this._changed=!0},g.prototype.getSource=
function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},g.prototype.addLayer=function(a,c,e){this._checkLoaded();var d=a.id;if("object"==typeof a.source&&(this.addSource(d,a.source),a=k.extend(a,{source:d})),!this._validate(t.layer,"layers."+d,a,{arrayIndex:-1},e)){a=b.create(a);this._validateLayer(a);a.setEventedParent(this,{layer:{id:d}});c=c?this._order.indexOf(c):this._order.length;if(this._order.splice(c,0,d),this._layers[d]=a,this._removedLayers[d]&&a.source)c=this._removedLayers[d],
delete this._removedLayers[d],this._updatedSources[a.source]=c.type!==a.type?"clear":"reload";this._updateLayer(a);"symbol"===a.type&&(this._updatedSymbolOrder=!0);this.updateClasses(d)}},g.prototype.moveLayer=function(a,b){this._checkLoaded();this._changed=!0;var c=this._layers[a];if(!c)return void this.fire("error",{error:Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")});var e=this._order.indexOf(a);this._order.splice(e,1);e=b?this._order.indexOf(b):this._order.length;
this._order.splice(e,0,a);"symbol"===c.type&&(this._updatedSymbolOrder=!0,c.source&&!this._updatedSources[c.source]&&(this._updatedSources[c.source]="reload"))},g.prototype.removeLayer=function(a){this._checkLoaded();var b=this._layers[a];if(!b)return void this.fire("error",{error:Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")});b.setEventedParent(null);var c=this._order.indexOf(a);this._order.splice(c,1);"symbol"===b.type&&(this._updatedSymbolOrder=!0);this._changed=
!0;this._removedLayers[a]=b;delete this._layers[a];delete this._updatedLayers[a];delete this._updatedPaintProps[a]},g.prototype.getLayer=function(a){return this._layers[a]},g.prototype.setLayerZoomRange=function(a,b,c){this._checkLoaded();var e=this.getLayer(a);return e?void(e.minzoom===b&&e.maxzoom===c||(null!=b&&(e.minzoom=b),null!=c&&(e.maxzoom=c),this._updateLayer(e))):void this.fire("error",{error:Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")})},g.prototype.setFilter=
function(a,b){this._checkLoaded();var c=this.getLayer(a);return c?void(null!==b&&void 0!==b&&this._validate(t.filter,"layers."+c.id+".filter",b)||k.deepEqual(c.filter,b)||(c.filter=k.clone(b),this._updateLayer(c))):void this.fire("error",{error:Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")})},g.prototype.getFilter=function(a){return k.clone(this.getLayer(a).filter)},g.prototype.setLayoutProperty=function(a,b,c){this._checkLoaded();var e=this.getLayer(a);return e?
void(k.deepEqual(e.getLayoutProperty(b),c)||(e.setLayoutProperty(b,c),this._updateLayer(e))):void this.fire("error",{error:Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")})},g.prototype.getLayoutProperty=function(a,b){return this.getLayer(a).getLayoutProperty(b)},g.prototype.setPaintProperty=function(a,b,c,e){this._checkLoaded();var d=this.getLayer(a);if(!d)return void this.fire("error",{error:Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")});
if(!k.deepEqual(d.getPaintProperty(b,e),c)){var f=d.isPaintValueFeatureConstant(b);d.setPaintProperty(b,c,e);(!c||!z.isFunctionDefinition(c)||"$zoom"===c.property||void 0===c.property)&&f||this._updateLayer(d);this.updateClasses(a,b)}},g.prototype.getPaintProperty=function(a,b,c){return this.getLayer(a).getPaintProperty(b,c)},g.prototype.getTransition=function(){return k.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},g.prototype.updateClasses=function(a,b){if(this._changed=
!0,a){var c=this._updatedPaintProps;c[a]||(c[a]={});c[a][b||"all"]=!0}else this._updatedAllPaintProps=!0},g.prototype.serialize=function(){var a=this;return k.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,
sources:k.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._order.map(function(b){return a._layers[b].serialize()})},function(a){return void 0!==a})},g.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0;a.source&&!this._updatedSources[a.source]&&(this._updatedSources[a.source]="reload");this._changed=!0},g.prototype._flattenRenderedFeatures=function(a){for(var b=[],c=this._order.length-1;0<=c;c--)for(var e=this._order[c],d=0,f=a;d<f.length;d+=1){var h=f[d][e];
if(h)for(var g=0;g<h.length;g+=1)b.push(h[g])}return b},g.prototype.queryRenderedFeatures=function(a,b,c,e){b&&b.filter&&this._validate(t.filter,"queryRenderedFeatures.filter",b.filter);var d={};if(b&&b.layers){if(!Array.isArray(b.layers))return void this.fire("error",{error:"parameters.layers must be an Array."});for(var f=0,h=b.layers;f<h.length;f+=1){var g=h[f],k=this._layers[g];if(!k)return void this.fire("error",{error:"The layer '"+g+"' does not exist in the map's style and cannot be queried for features."});
d[k.source]=!0}}var f=[],m;for(m in this.sourceCaches)if(!b.layers||d[m])h=v.rendered(this.sourceCaches[m],this._layers,a,b,c,e),f.push(h);return this._flattenRenderedFeatures(f)},g.prototype.querySourceFeatures=function(a,b){b&&b.filter&&this._validate(t.filter,"querySourceFeatures.filter",b.filter);var c=this.sourceCaches[a];return c?v.source(c,b):[]},g.prototype.addSourceType=function(a,b,c){return w.getType(a)?c(Error('A source type called "'+a+'" already exists.')):(w.setType(a,b),b.workerSourceURL?
void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:b.workerSourceURL},c):c(null,null))},g.prototype.getLight=function(){return this.light.getLight()},g.prototype.setLight=function(a,b){this._checkLoaded();var c=this.light.getLight(),e=!1,d;for(d in a)if(!k.deepEqual(a[d],c[d])){e=!0;break}e&&(c=this.stylesheet.transition||{},this.light.setLight(a),this.light.updateLightTransitions(b||{transition:!0},c,this.animationLoop))},g.prototype._validate=function(a,b,c,e,d){return(!d||!1!==d.validate)&&
t.emitErrors(this,a.call(t,k.extend({key:b,style:this.serialize(),value:c,styleSpec:A},e)))},g.prototype._remove=function(){C.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var a in this.sourceCaches)this.sourceCaches[a].clearTiles();this.dispatcher.remove()},g.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},g.prototype._reloadSource=function(a){this.sourceCaches[a].reload()},g.prototype._updateSources=function(a){for(var b in this.sourceCaches)this.sourceCaches[b].update(a)},
g.prototype._redoPlacement=function(){for(var a in this.sourceCaches)this.sourceCaches[a].redoPlacement()},g.prototype.getIcons=function(a,b,c){var e=this;a=function(){e.spriteAtlas.setSprite(e.sprite);e.spriteAtlas.addIcons(b.icons,c)};!this.sprite||this.sprite.loaded()?a():this.sprite.on("data",a)},g.prototype.getGlyphs=function(a,b,c){function e(a,b,e){a&&console.error(a);f[e]=b;d--;0===d&&c(null,f)}a=b.stacks;var d=Object.keys(a).length,f={},h;for(h in a)this.glyphSource.getSimpleGlyphs(h,a[h],
b.uid,e)},g}(d);l.exports=g},{"../render/line_atlas":76,"../source/query_features":89,"../source/rtl_text_plugin":91,"../source/source":92,"../source/source_cache":93,"../style-spec/deref":102,"../style-spec/diff":103,"../style-spec/function":107,"../style-spec/reference/latest":119,"../symbol/glyph_source":167,"../symbol/sprite_atlas":171,"../util/ajax":193,"../util/browser":194,"../util/dispatcher":200,"../util/evented":202,"../util/global_worker_pool":204,"../util/mapbox":210,"../util/util":214,
"./animation_loop":145,"./image_sprite":146,"./light":147,"./style_layer":150,"./validate_style":158}],149:[function(g,l,d){var b=g("../style-spec/function"),h=g("../util/util");g=function(a,c){if(this.value=h.clone(c),this.isFunction=b.isFunctionDefinition(c),this.json=JSON.stringify(this.value),this.minimum=a.minimum,this["function"]=b(this.value,a),this.isFeatureConstant=this["function"].isFeatureConstant,this.isZoomConstant=this["function"].isZoomConstant,this.isFeatureConstant||this.isZoomConstant){if(!this.isZoomConstant){this.stopZoomLevels=
[];for(var e=0,d=this.value.stops;e<d.length;e+=1){var g=d[e];0>this.stopZoomLevels.indexOf(g[0])&&this.stopZoomLevels.push(g[0])}}}else{this.stopZoomLevels=[];e=[];d=0;for(g=this.value.stops;d<g.length;d+=1){var n=g[d][0].zoom;0>this.stopZoomLevels.indexOf(n)&&(this.stopZoomLevels.push(n),e.push([n,e.length]))}this._functionInterpolationT=b({type:"exponential",stops:e,base:c.base},{type:"number"})}};g.prototype.calculate=function(a,b){var c=this["function"](a&&a.zoom,b||{});return void 0!==this.minimum&&
c<this.minimum?this.minimum:c};g.prototype.calculateInterpolationT=function(a){return this._functionInterpolationT(a&&a.zoom,{})};l.exports=g},{"../style-spec/function":107,"../util/util":214}],150:[function(g,l,d){function b(a){return a.value}var h=g("../util/util"),a=g("./style_transition"),c=g("./style_declaration"),e=g("../style-spec/reference/latest"),f=g("./validate_style"),k=g("./../style-spec/util/parse_color"),n=function(d){function g(a){d.call(this);this.id=a.id;this.metadata=a.metadata;
this.type=a.type;this.source=a.source;this.sourceLayer=a["source-layer"];this.minzoom=a.minzoom;this.maxzoom=a.maxzoom;this.filter=a.filter;this.paint={};this.layout={};this._paintSpecifications=e["paint_"+this.type];this._layoutSpecifications=e["layout_"+this.type];this._paintTransitions={};this._paintTransitionOptions={};this._paintDeclarations={};this._layoutDeclarations={};this._layoutFunctions={};var b,c,f={validate:!1},h;for(h in a){var g=h.match(/^paint(?:\.(.*))?$/);if(g)for(b in g=g[1]||
"",a[h])this.setPaintProperty(b,a[h][b],g,f)}for(c in a.layout)this.setLayoutProperty(c,a.layout[c],f);for(b in this._paintSpecifications)this.paint[b]=this.getPaintValue(b);for(c in this._layoutSpecifications)this._updateLayoutValue(c)}return d&&(g.__proto__=d),g.prototype=Object.create(d&&d.prototype),g.prototype.constructor=g,g.prototype.setLayoutProperty=function(a,b,e){if(null==b)delete this._layoutDeclarations[a];else{if(this._validate(f.layoutProperty,"layers."+this.id+".layout."+a,a,b,e))return;
this._layoutDeclarations[a]=new c(this._layoutSpecifications[a],b)}this._updateLayoutValue(a)},g.prototype.getLayoutProperty=function(a){return this._layoutDeclarations[a]&&this._layoutDeclarations[a].value},g.prototype.getLayoutValue=function(a,b,c){var e=this._layoutSpecifications[a];return(a=this._layoutDeclarations[a])?a.calculate(b,c):e["default"]},g.prototype.setPaintProperty=function(a,b,e,d){var g="layers."+this.id+(e?'["paint.'+e+'"].':".paint.")+a;h.endsWith(a,"-transition")?(this._paintTransitionOptions[e||
""]||(this._paintTransitionOptions[e||""]={}),null===b||void 0===b)?delete this._paintTransitionOptions[e||""][a]:this._validate(f.paintProperty,g,a,b,d)||(this._paintTransitionOptions[e||""][a]=b):(this._paintDeclarations[e||""]||(this._paintDeclarations[e||""]={}),null===b||void 0===b)?delete this._paintDeclarations[e||""][a]:this._validate(f.paintProperty,g,a,b,d)||(this._paintDeclarations[e||""][a]=new c(this._paintSpecifications[a],b))},g.prototype.getPaintProperty=function(a,b){return b=b||
"",h.endsWith(a,"-transition")?this._paintTransitionOptions[b]&&this._paintTransitionOptions[b][a]:this._paintDeclarations[b]&&this._paintDeclarations[b][a]&&this._paintDeclarations[b][a].value},g.prototype.getPaintValue=function(a,b,c){var e=this._paintSpecifications[a];return(a=this._paintTransitions[a])?a.calculate(b,c):"color"===e.type&&e["default"]?k(e["default"]):e["default"]},g.prototype.getPaintValueStopZoomLevels=function(a){return(a=this._paintTransitions[a])?a.declaration.stopZoomLevels:
[]},g.prototype.getLayoutValueStopZoomLevels=function(a){return(a=this._layoutDeclarations[a])?a.stopZoomLevels:[]},g.prototype.getPaintInterpolationT=function(a,b){return this._paintTransitions[a].declaration.calculateInterpolationT(b)},g.prototype.getLayoutInterpolationT=function(a,b){return this._layoutDeclarations[a].calculateInterpolationT(b)},g.prototype.isPaintValueFeatureConstant=function(a){a=this._paintTransitions[a];return!a||a.declaration.isFeatureConstant},g.prototype.isLayoutValueFeatureConstant=
function(a){a=this._layoutDeclarations[a];return!a||a.isFeatureConstant},g.prototype.isPaintValueZoomConstant=function(a){a=this._paintTransitions[a];return!a||a.declaration.isZoomConstant},g.prototype.isLayoutValueZoomConstant=function(a){a=this._layoutDeclarations[a];return!a||a.isZoomConstant},g.prototype.isHidden=function(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.layout.visibility},g.prototype.updatePaintTransitions=function(a,b,c,e,d){for(var f=
h.extend({},this._paintDeclarations[""]),g=0;g<a.length;g++)h.extend(f,this._paintDeclarations[a[g]]);for(var k in f)this._applyPaintDeclaration(k,f[k],b,c,e,d);for(k in this._paintTransitions)k in f||this._applyPaintDeclaration(k,null,b,c,e,d)},g.prototype.updatePaintTransition=function(a,b,c,e,d,f){for(var h=this._paintDeclarations[""][a],g=0;g<b.length;g++){var k=this._paintDeclarations[b[g]];k&&k[a]&&(h=k[a])}this._applyPaintDeclaration(a,h,c,e,d,f)},g.prototype.recalculate=function(a){for(var b in this._paintTransitions)this.paint[b]=
this.getPaintValue(b,{zoom:a});for(var c in this._layoutFunctions)this.layout[c]=this.getLayoutValue(c,{zoom:a})},g.prototype.serialize=function(){var a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:h.mapObject(this._layoutDeclarations,b)},c;for(c in this._paintDeclarations)a[""===c?"paint":"paint."+c]=h.mapObject(this._paintDeclarations[c],b);return h.filterObject(a,function(a,
b){return void 0!==a&&!("layout"===b&&!Object.keys(a).length)})},g.prototype._applyPaintDeclaration=function(b,e,d,f,g,k){d=d.transition?this._paintTransitions[b]:void 0;var m=this._paintSpecifications[b];(null!==e&&void 0!==e||(e=new c(m,m["default"])),d&&d.declaration.json===e.json)||(f=h.extend({duration:300,delay:0},f,this.getPaintProperty(b+"-transition")),b=this._paintTransitions[b]=new a(m,e,d,f,k),b.instant()||(b.loopID=g.set(b.endTime-Date.now())),d&&g.cancel(d.loopID))},g.prototype._updateLayoutValue=
function(a){var b=this._layoutDeclarations[a];b&&b.isFunction?this._layoutFunctions[a]=!0:(delete this._layoutFunctions[a],this.layout[a]=this.getLayoutValue(a))},g.prototype._validate=function(a,b,c,d,h){return(!h||!1!==h.validate)&&f.emitErrors(this,a.call(f,{key:b,layerType:this.type,objectKey:c,value:d,styleSpec:e,style:{glyphs:!0,sprite:!0}}))},g}(g("../util/evented"));l.exports=n;var m={circle:g("./style_layer/circle_style_layer"),fill:g("./style_layer/fill_style_layer"),"fill-extrusion":g("./style_layer/fill_extrusion_style_layer"),
line:g("./style_layer/line_style_layer"),symbol:g("./style_layer/symbol_style_layer")};n.create=function(a){return new (m[a.type]||n)(a)}},{"../style-spec/reference/latest":119,"../util/evented":202,"../util/util":214,"./../style-spec/util/parse_color":123,"./style_declaration":149,"./style_layer/circle_style_layer":151,"./style_layer/fill_extrusion_style_layer":152,"./style_layer/fill_style_layer":153,"./style_layer/line_style_layer":154,"./style_layer/symbol_style_layer":155,"./style_transition":157,
"./validate_style":158}],151:[function(g,l,d){d=g("../style_layer");var b=g("../../data/bucket/circle_bucket");g=function(d){function a(){d.apply(this,arguments)}return d&&(a.__proto__=d),a.prototype=Object.create(d&&d.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(a){return new b(a)},a}(d);l.exports=g},{"../../data/bucket/circle_bucket":46,"../style_layer":150}],152:[function(g,l,d){d=g("../style_layer");var b=g("../../data/bucket/fill_extrusion_bucket");g=function(d){function a(){d.apply(this,
arguments)}return d&&(a.__proto__=d),a.prototype=Object.create(d&&d.prototype),a.prototype.constructor=a,a.prototype.getPaintValue=function(a,b,f){b=d.prototype.getPaintValue.call(this,a,b,f);return"fill-extrusion-color"===a&&b&&(b[3]=1),b},a.prototype.createBucket=function(a){return new b(a)},a}(d);l.exports=g},{"../../data/bucket/fill_extrusion_bucket":48,"../style_layer":150}],153:[function(g,l,d){d=g("../style_layer");var b=g("../../data/bucket/fill_bucket");g=function(d){function a(){d.apply(this,
arguments)}return d&&(a.__proto__=d),a.prototype=Object.create(d&&d.prototype),a.prototype.constructor=a,a.prototype.getPaintValue=function(a,b,f){if("fill-outline-color"===a){if(void 0===this.getPaintProperty("fill-outline-color"))return d.prototype.getPaintValue.call(this,"fill-color",b,f);for(var c=this._paintTransitions["fill-outline-color"];c;){if(!(c&&c.declaration&&c.declaration.value))return d.prototype.getPaintValue.call(this,"fill-color",b,f);c=c.oldTransition}}return d.prototype.getPaintValue.call(this,
a,b,f)},a.prototype.getPaintValueStopZoomLevels=function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?d.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):d.prototype.getPaintValueStopZoomLevels.call(this,a)},a.prototype.getPaintInterpolationT=function(a,b){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?d.prototype.getPaintInterpolationT.call(this,"fill-color",b):d.prototype.getPaintInterpolationT.call(this,
a,b)},a.prototype.isPaintValueFeatureConstant=function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?d.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):d.prototype.isPaintValueFeatureConstant.call(this,a)},a.prototype.isPaintValueZoomConstant=function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?d.prototype.isPaintValueZoomConstant.call(this,"fill-color"):d.prototype.isPaintValueZoomConstant.call(this,
a)},a.prototype.createBucket=function(a){return new b(a)},a}(d);l.exports=g},{"../../data/bucket/fill_bucket":47,"../style_layer":150}],154:[function(g,l,d){d=g("../style_layer");var b=g("../../data/bucket/line_bucket"),h=g("../../util/util");g=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getPaintValue=function(b,c,d){var e=a.prototype.getPaintValue.call(this,b,c,d);e&&"line-dasharray"===
b&&(b=this.getPaintValue("line-width",h.extend({},c,{zoom:Math.floor(c.zoom)}),d),e.fromScale*=b,e.toScale*=b);return e},c.prototype.createBucket=function(a){return new b(a)},c}(d);l.exports=g},{"../../data/bucket/line_bucket":49,"../../util/util":214,"../style_layer":150}],155:[function(g,l,d){d=g("../style_layer");var b=g("../../data/bucket/symbol_bucket");g=function(d){function a(){d.apply(this,arguments)}return d&&(a.__proto__=d),a.prototype=Object.create(d&&d.prototype),a.prototype.constructor=
a,a.prototype.getLayoutValue=function(a,b,f){var c=d.prototype.getLayoutValue.call(this,a,b,f);if("auto"!==c)return c;switch(a){case "text-rotation-alignment":case "icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",b,f)?"map":"viewport";case "text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",b,f);default:return c}},a.prototype.createBucket=function(a){return new b(a)},a}(d);l.exports=g},{"../../data/bucket/symbol_bucket":50,"../style_layer":150}],
156:[function(g,l,d){var b=g("./style_layer"),h=g("../util/util"),a=g("../style-spec/feature_filter"),c=g("../style-spec/group_by_layout");g=function(a){a&&this.replace(a)};g.prototype.replace=function(a){this.symbolOrder=[];for(var b=0;b<a.length;b+=1){var c=a[b];"symbol"===c.type&&this.symbolOrder.push(c.id)}this._layerConfigs={};this._layers={};this.update(a,[])};g.prototype.update=function(e,d,g){for(var f=this,k=0;k<e.length;k+=1){var l=e[k];f._layerConfigs[l.id]=l;l=f._layers[l.id]=b.create(l);
l.updatePaintTransitions({},{transition:!1});l.filter=a(l.filter)}for(e=0;e<d.length;e+=1)k=d[e],delete f._layerConfigs[k],delete f._layers[k];g&&(this.symbolOrder=g);this.familiesBySource={};d=0;for(g=c(h.values(this._layerConfigs));d<g.length;d+=1)if(e=g[d].map(function(a){return f._layers[a.id]}),l=e[0],!l.layout||"none"!==l.layout.visibility){var u=l.source||"";(k=f.familiesBySource[u])||(k=f.familiesBySource[u]={});l=l.sourceLayer||"_geojsonTileLayer";(u=k[l])||(u=k[l]=[]);u.push(e)}};l.exports=
g},{"../style-spec/feature_filter":105,"../style-spec/group_by_layout":108,"../util/util":214,"./style_layer":150}],157:[function(g,l,d){function b(a,b,c){if(void 0!==a&&void 0!==b)return{from:a.to,fromScale:a.toScale,to:b.to,toScale:b.toScale,t:c}}var h=g("../util/util"),a=g("../util/interpolate"),c={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0};g=function(e,d,h,g,m){this.declaration=d;this.startTime=this.endTime=(new Date).getTime();this.oldTransition=h;this.duration=g.duration||0;this.delay=
g.delay||0;this.interp=(this.zoomTransitioned="piecewise-constant"===e["function"]&&e.transition)?b:a[e.type];this.zoomHistory=m||c;this.instant()||(this.endTime=this.startTime+this.duration+this.delay);h&&h.endTime<=this.startTime&&delete h.oldTransition};g.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay};g.prototype.calculate=function(a,b,c){var e=this._calculateTargetValue(a,b);if(this.instant()||(c=c||Date.now(),c>=this.endTime))return e;
a=this.oldTransition.calculate(a,b,this.startTime);c=h.easeCubicInOut((c-this.startTime-this.delay)/this.duration);return this.interp(a,e,c)};g.prototype._calculateTargetValue=function(b,c){if(!this.zoomTransitioned)return this.declaration.calculate(b,c);var e=b.zoom,d=this.zoomHistory.lastIntegerZoom,f=e>d?2:.5,h=this.declaration.calculate({zoom:e>d?e-1:e+1},c),g=this.declaration.calculate({zoom:e},c),l=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),e=a(l,1,Math.abs(e-
d));return void 0!==h&&void 0!==g?{from:h,fromScale:f,to:g,toScale:1,t:e}:void 0};l.exports=g},{"../util/interpolate":206,"../util/util":214}],158:[function(g,l,d){l.exports=g("../style-spec/validate_style.min");l.exports.emitErrors=function(b,d){if(d&&d.length){for(var a=0;a<d.length;a++)b.fire("error",{error:Error(d[a].message)});return!0}return!1}},{"../style-spec/validate_style.min":144}],159:[function(g,l,d){g=function(b){function d(a,c,e,d){b.call(this,a,c);this.angle=e;void 0!==d&&(this.segment=
d)}return b&&(d.__proto__=b),d.prototype=Object.create(b&&b.prototype),d.prototype.constructor=d,d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)},d}(g("point-geometry"));l.exports=g},{"point-geometry":26}],160:[function(g,l,d){l.exports=function(b,d,a,c,e){if(void 0===d.segment)return!0;var f=d;d=d.segment+1;for(var h=0;h>-a/2;){if(d--,0>d)return!1;h-=b[d].dist(f);f=b[d]}h+=b[d].dist(b[d+1]);d++;for(var f=[],g=0;h<a/2;){var m=b[d],l=b[d+1];if(!l)return!1;var u=b[d-
1].angleTo(m)-m.angleTo(l),u=Math.abs((u+3*Math.PI)%(2*Math.PI)-Math.PI);f.push({distance:h,angleDelta:u});for(g+=u;h-f[0].distance>c;)g-=f.shift().angleDelta;if(g>e)return!1;d++;h+=m.dist(l)}return!0}},{}],161:[function(g,l,d){var b=g("point-geometry");l.exports=function(d,a,c,e,f){for(var h=[],g=0;g<d.length;g++)for(var m=d[g],l=void 0,u=0;u<m.length-1;u++){var q=m[u],t=m[u+1];q.x<a&&t.x<a||(q.x<a?q=(new b(a,q.y+(a-q.x)/(t.x-q.x)*(t.y-q.y)))._round():t.x<a&&(t=(new b(a,q.y+(a-q.x)/(t.x-q.x)*(t.y-
q.y)))._round()),q.y<c&&t.y<c||(q.y<c?q=(new b(q.x+(c-q.y)/(t.y-q.y)*(t.x-q.x),c))._round():t.y<c&&(t=(new b(q.x+(c-q.y)/(t.y-q.y)*(t.x-q.x),c))._round()),q.x>=e&&t.x>=e||(q.x>=e?q=(new b(e,q.y+(e-q.x)/(t.x-q.x)*(t.y-q.y)))._round():t.x>=e&&(t=(new b(e,q.y+(e-q.x)/(t.x-q.x)*(t.y-q.y)))._round()),q.y>=f&&t.y>=f||(q.y>=f?q=(new b(q.x+(f-q.y)/(t.y-q.y)*(t.x-q.x),f))._round():t.y>=f&&(t=(new b(q.x+(f-q.y)/(t.y-q.y)*(t.x-q.x),f))._round()),l&&q.equals(l[l.length-1])||(l=[q],h.push(l)),l.push(t)))))}return h}},
{"point-geometry":26}],162:[function(g,l,d){d=g("../util/struct_array");var b=g("point-geometry");g=d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},
{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(g.prototype.StructType.prototype,"anchorPoint",{get:function(){return new b(this.anchorPointX,this.anchorPointY)}});l.exports=g},{"../util/struct_array":212,"point-geometry":26}],163:[function(g,l,d){g=function(b,d,a,c,e,f,g,n,m,l,u){var h=g.top*n-m,k=g.bottom*n+m,r=g.left*n-m;g=g.right*n+m;(this.boxStartIndex=b.length,l)?(l=k-h,r=g-r,0<l&&((l=Math.max(10*n,l),u)?(d=d[a.segment+1].sub(d[a.segment])._unit()._mult(r),
d=[a.sub(d),a.add(d)],this._addLineCollisionBoxes(b,d,a,0,r,l,c,e,f)):this._addLineCollisionBoxes(b,d,a,a.segment,r,l,c,e,f))):b.emplaceBack(a.x,a.y,r,h,g,k,1/0,c,e,f,0,0,0,0,0);this.boxEndIndex=b.length};g.prototype._addLineCollisionBoxes=function(b,d,a,c,e,f,g,n,m){var h=f/2,k=Math.floor(e/h),l=-f/2,t=this.boxes,w=a;c+=1;a=l;do{if(c--,0>c)return t;a-=d[c].dist(w);w=d[c]}while(a>-e/2);for(var w=d[c].dist(d[c+1]),v=0;v<k;v++){for(var y=-e/2+v*h;a+w<y;){if(a+=w,c++,c+1>=d.length)return t;w=d[c].dist(d[c+
1])}var A=y-a,z=d[c],A=d[c+1].sub(z)._unit()._mult(A)._add(z)._round();b.emplaceBack(A.x,A.y,-f/2,-f/2,f/2,f/2,e/2/Math.max(Math.abs(y-l)-h/2,0),g,n,m,0,0,0,0,0)}return t};l.exports=g},{}],164:[function(g,l,d){var b=g("point-geometry"),h=g("../data/extent"),a=g("grid-index"),c=g("../util/intersection_tests");g=function(b,c,d){if("object"==typeof b){var e=b;d=c;b=e.angle;c=e.pitch;this.grid=new a(e.grid);this.ignoredGrid=new a(e.ignoredGrid)}else this.grid=new a(h,12,6),this.ignoredGrid=new a(h,12,
0);this.minScale=.5;this.maxScale=2;this.angle=b;this.pitch=c;e=Math.sin(b);b=Math.cos(b);if(this.rotationMatrix=[b,-e,e,b],this.reverseRotationMatrix=[b,e,-e,b],this.yStretch=1/Math.cos(c/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=d,0===d.length)d.emplaceBack(),d.emplaceBack(0,0,0,-32767,0,32767,32767,0,0,0,0,0,0,0,0,0),d.emplaceBack(h,0,0,-32767,0,32767,32767,0,0,0,0,0,0,0,0,0),d.emplaceBack(0,0,-32767,0,32767,0,32767,0,0,0,0,0,0,0,0,0),d.emplaceBack(0,h,-32767,
0,32767,0,32767,0,0,0,0,0,0,0,0,0);this.tempCollisionBox=d.get(0);this.edges=[d.get(1),d.get(2),d.get(3),d.get(4)]};g.prototype.serialize=function(a){var b=this.grid.toArrayBuffer(),c=this.ignoredGrid.toArrayBuffer();return a&&(a.push(b),a.push(c)),{angle:this.angle,pitch:this.pitch,grid:b,ignoredGrid:c}};g.prototype.placeCollisionFeature=function(a,c,d){for(var e=this.collisionBoxArray,f=this.minScale,h=this.rotationMatrix,g=this.yStretch,k=a.boxStartIndex;k<a.boxEndIndex;k++){var l=e.get(k),w=l.anchorPoint._matMult(h),
v=w.x,y=w.y,A=v+l.x1,z=y+l.y1*g,v=v+l.x2,y=y+l.y2*g;if(l.bbox0=A,l.bbox1=z,l.bbox2=v,l.bbox3=y,!c)for(A=this.grid.query(A,z,v,y),z=0;z<A.length;z++)if(y=e.get(A[z]),v=y.anchorPoint._matMult(h),f=this.getPlacementScale(f,w,l,v,y),f>=this.maxScale)return f;if(d)for(this.angle?(w=this.reverseRotationMatrix,A=(new b(l.x1,l.y1)).matMult(w),z=(new b(l.x2,l.y1)).matMult(w),y=(new b(l.x1,l.y2)).matMult(w),v=(new b(l.x2,l.y2)).matMult(w),w=this.tempCollisionBox,w.anchorPointX=l.anchorPoint.x,w.anchorPointY=
l.anchorPoint.y,w.x1=Math.min(A.x,z.x,y.x,v.x),w.y1=Math.min(A.y,z.x,y.x,v.x),w.x2=Math.max(A.x,z.x,y.x,v.x),w.y2=Math.max(A.y,z.x,y.x,v.x),w.maxScale=l.maxScale):w=l,A=0;A<this.edges.length;A++)if(z=this.edges[A],f=this.getPlacementScale(f,l.anchorPoint,w,z.anchorPoint,z),f>=this.maxScale)return f}return f};g.prototype.queryRenderedSymbols=function(a,d){var e={},f=[];if(0===a.length||0===this.grid.length&&0===this.ignoredGrid.length)return f;for(var h=this.collisionBoxArray,g=this.rotationMatrix,
l=this.yStretch,q=[],t=1/0,w=1/0,v=-(1/0),y=-(1/0),A=0;A<a.length;A++)for(var z=a[A],B=0;B<z.length;B++){var x=z[B].matMult(g),t=Math.min(t,x.x),w=Math.min(w,x.y),v=Math.max(v,x.x),y=Math.max(y,x.y);q.push(x)}A=this.grid.query(t,w,v,y);t=this.ignoredGrid.query(t,w,v,y);for(w=0;w<t.length;w++)A.push(t[w]);t=Math.pow(2,Math.ceil(Math.log(d)/Math.LN2*10)/10);for(w=0;w<A.length;w++){var E=h.get(A[w]),v=E.sourceLayerIndex,y=E.featureIndex;if(void 0===e[v]&&(e[v]={}),!(e[v][y]||t<E.placementScale||t>E.maxScale)){var C=
E.anchorPoint.matMult(g),z=C.x+E.x1/d,B=C.y+E.y1/d*l,x=C.x+E.x2/d,E=C.y+E.y2/d*l,z=[new b(z,B),new b(x,B),new b(x,E),new b(z,E)];c.polygonIntersectsPolygon(q,z)&&(e[v][y]=!0,f.push(A[w]))}}return f};g.prototype.getPlacementScale=function(a,b,c,d,g){var e=b.x-d.x;d=b.y-d.y;b=(g.x1-c.x2)/e;var e=(g.x2-c.x1)/e,f=(g.y1-c.y2)*this.yStretch/d;d=(g.y2-c.y1)*this.yStretch/d;(isNaN(b)||isNaN(e))&&(b=e=1);(isNaN(f)||isNaN(d))&&(f=d=1);b=Math.min(Math.max(b,e),Math.max(f,d));e=g.maxScale;c=c.maxScale;return b>
e&&(b=e),b>c&&(b=c),b>a&&b>=g.placementScale&&(a=b),a};g.prototype.insertCollisionFeature=function(a,b,c){c=c?this.ignoredGrid:this.grid;for(var e=this.collisionBoxArray,d=a.boxStartIndex;d<a.boxEndIndex;d++){var f=e.get(d);f.placementScale=b;b<this.maxScale&&c.insert(d,f.bbox0,f.bbox1,f.bbox2,f.bbox3)}};l.exports=g},{"../data/extent":54,"../util/intersection_tests":207,"grid-index":16,"point-geometry":26}],165:[function(g,l,d){function b(e,d,g,n,m,l,u,q,t){for(var f=l/2,k=0,r=0;r<e.length-1;r++)k+=
e[r].dist(e[r+1]);r=0;d-=g;for(var A=[],z=0;z<e.length-1;z++){for(var B=e[z],x=e[z+1],E=B.dist(x),C=x.angleTo(B);d+g<r+E;){d+=g;var D=(d-r)/E,G=h(B.x,x.x,D),D=h(B.y,x.y,D);0<=G&&G<t&&0<=D&&D<t&&0<=d-f&&d+f<=k&&(G=(new a(G,D,C,z))._round(),n&&!c(e,G,l,n,m)||A.push(G))}r+=E}return q||A.length||u||(A=b(e,r/2,g,n,m,l,u,!0,t)),A}var h=g("../util/interpolate"),a=g("../symbol/anchor"),c=g("./check_max_angle");l.exports=function(a,c,d,g,h,l,u,q,t){h=Math.max(g?g.right-g.left:0,h?h.right-h.left:0);var e=0===
a[0].x||a[0].x===t||0===a[0].y||a[0].y===t;c-h*u<c/4&&(c=h*u+c/4);return b(a,e?c/2*q%c:(h/2+2*l)*u*q%c,c,g?.6*l*u:0,d,h*u,e,!1,t)}},{"../symbol/anchor":159,"../util/interpolate":206,"./check_max_angle":160}],166:[function(g,l,d){var b=g("@mapbox/shelf-pack"),h=g("../util/util");g=function(){this.height=this.width=128;this.atlas=new b(this.width,this.height);this.index={};this.ids={};this.data=new Uint8Array(this.width*this.height)};g.prototype.getGlyphs=function(){var a={},b;for(b in this.ids){var e=
b.split("#");var d=e[0];e=e[1];a[d]||(a[d]=[]);a[d].push(e)}return a};g.prototype.getRects=function(){var a={},b;for(b in this.ids){var e=b.split("#");var d=e[0];e=e[1];a[d]||(a[d]={});a[d][e]=this.index[b]}return a};g.prototype.addGlyph=function(a,b,e,d){if(!e)return null;var c=b+"#"+e.id;if(this.index[c])return 0>this.ids[c].indexOf(a)&&this.ids[c].push(a),this.index[c];if(!e.bitmap)return null;b=e.width+2*d;d=e.height+2*d;var f=b+2,g=d+2,f=f+(4-f%4),g=g+(4-g%4),l=this.atlas.packOne(f,g);if(l||
(this.resize(),l=this.atlas.packOne(f,g)),!l)return h.warnOnce("glyph bitmap overflow"),null;this.index[c]=l;this.ids[c]=[a];a=this.data;e=e.bitmap;for(c=0;c<d;c++)for(var f=this.width*(l.y+c+1)+l.x+1,g=b*c,u=0;u<b;u++)a[f+u]=e[g+u];return this.dirty=!0,l};g.prototype.resize=function(){var a=this.width,b=this.height;if(!(2048<=a||2048<=b)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null);this.width*=4;this.height*=4;this.atlas.resize(this.width,this.height);for(var e=
new ArrayBuffer(this.width*this.height),d=0;d<b;d++){var g=new Uint8Array(this.data.buffer,b*d,a);(new Uint8Array(e,b*d*4,a)).set(g)}this.data=new Uint8Array(e)}};g.prototype.bind=function(a){this.gl=a;this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,null))};g.prototype.updateTexture=function(a){this.bind(a);this.dirty&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data),this.dirty=!1)};l.exports=g},{"../util/util":214,"@mapbox/shelf-pack":2}],167:[function(g,l,d){function b(a,b,c,e){return e=e||"abc",c.replace("{s}",e[a.length%e.length]).replace("{fontstack}",
a).replace("{range}",b)}var h=g("../util/mapbox").normalizeGlyphsURL,a=g("../util/ajax"),c=g("../util/verticalize_punctuation"),e=g("../util/glyphs"),f=g("../symbol/glyph_atlas"),k=g("pbf"),n=function(a,b,c){this.advance=a.advance;this.left=a.left-c-1;this.top=a.top+c+1;this.rect=b};g=function(a){this.url=a&&h(a);this.atlases={};this.stacks={};this.loading={}};g.prototype.getSimpleGlyphs=function(a,b,e,d){var g=this;void 0===this.stacks[a]&&(this.stacks[a]={});void 0===this.atlases[a]&&(this.atlases[a]=
new f);for(var h={},k=this.stacks[a],m=this.atlases[a],l={},r=0,q=function(b){var c=Math.floor(b/256);if(k[c]){var c=k[c].glyphs[b],d=m.addGlyph(e,a,c,3);c&&(h[b]=new n(c,d,3))}else void 0===l[c]&&(l[c]=[],r++),l[c].push(b)},u=0;u<b.length;u++){var E=b[u],C=String.fromCharCode(E);q(E);c.lookup[C]&&q(c.lookup[C].charCodeAt(0))}r||d(void 0,h,a);b=function(b,c,f){if(!b)for(b=g.stacks[a][c]=f.stacks[0],f=0;f<l[c].length;f++){var k=l[c][f],q=b.glyphs[k],u=m.addGlyph(e,a,q,3);q&&(h[k]=new n(q,u,3))}r--;
r||d(void 0,h,a)};for(var D in l)g.loadRange(a,D,b)};g.prototype.loadRange=function(c,d,f){if(65535<256*d)return f("glyphs > 65535 not supported");void 0===this.loading[c]&&(this.loading[c]={});var g=this.loading[c];g[d]?g[d].push(f):(g[d]=[f],c=b(c,256*d+"-"+(256*d+255),this.url),a.getArrayBuffer(c,function(a,b){for(var c=!a&&new e(new k(b.data)),f=0;f<g[d].length;f++)g[d][f](a,d,c);delete g[d]}))};g.prototype.getGlyphAtlas=function(a){return this.atlases[a]};l.exports=g},{"../symbol/glyph_atlas":166,
"../util/ajax":193,"../util/glyphs":205,"../util/mapbox":210,"../util/verticalize_punctuation":216,pbf:25}],168:[function(g,l,d){l.exports=function(b){function d(a,b,c){var e=f[a];return delete f[a],f[b]=e,g[e].geometry[0].pop(),g[e].geometry[0]=g[e].geometry[0].concat(c[0]),e}function a(a,b,c){var d=e[b];return delete e[b],e[a]=d,g[d].geometry[0].shift(),g[d].geometry[0]=c[0].concat(g[d].geometry[0]),d}function c(a,b,c){b=c?b[0][b[0].length-1]:b[0][0];return a+":"+b.x+":"+b.y}for(var e={},f={},g=
[],l=0,m=0;m<b.length;m++){var r=b[m],u=r.geometry;if(r=r.text){var q=c(r,u),t=c(r,u,!0);if(q in f&&t in e&&f[q]!==e[t]){var u=a(q,t,u),w=d(q,t,g[u].geometry);delete e[q];delete f[t];f[c(r,g[w].geometry,!0)]=w;g[u].geometry=null}else q in f?d(q,t,u):t in e?a(q,t,u):(g.push(b[m]),l++,e[q]=l-1,f[t]=l-1)}else g.push(b[m]),l++}return g.filter(function(a){return a.geometry})}},{}],169:[function(g,l,d){function b(a,b,c,d,g,h,l,q,t,w,v){this.anchorPoint=a;this.tl=b;this.tr=c;this.bl=d;this.br=g;this.tex=
h;this.anchorAngle=l;this.glyphAngle=q;this.minScale=t;this.maxScale=w;this.writingMode=v}function h(b,c,d,g,h,l){var e=0<=d^l;d=Math.abs(d);var f=new a(c.x,c.y),k=e?g[h+1]:g[h],m=f.dist(k);for(h={anchor:f,end:k,index:h,minScale:d/m,maxScale:1/0};;){f=Math.atan2(h.end.y-h.anchor.y,h.end.x-h.anchor.x);b.push({anchorPoint:h.anchor,upsideDown:l,minScale:h.minScale,maxScale:h.maxScale,angle:((e?f:f+Math.PI)+2*Math.PI)%(2*Math.PI)});if(h.minScale<=c.scale)return c.scale;a:{for(var f=h,n=g,m=d,r=e,A=f.end,
k=A,z=f.index;k.equals(A);){if(r&&z+2<n.length)z+=1;else{if(r||0===z){f=null;break a}--z}k=r?n[z+1]:n[z]}n=A;r=f.anchor.dist(f.end);A=k.sub(n)._unit();n=n.sub(A._mult(r));r=k;k=n.dist(k);f={anchor:n,end:r,index:z,minScale:m/k,maxScale:f.minScale}}if(!f)return h.minScale;h=f}}var a=g("point-geometry");l.exports={getIconQuads:function(e,d,g,h,m,l,u,q,t){var f=d.image.rect;g=m.layout;var k=d.left-1;var n=k+f.w/d.image.pixelRatio,r=d.top-1,z=r+f.h/d.image.pixelRatio;if("none"!==g["icon-text-fit"]&&u){f=
n-k;var B=z-r,n=g["text-size"]/24;k=u.left*n;var z=u.top*n,x=u.right*n-k,E=u.bottom*n-z,C=g["icon-text-fit-padding"][0];u=g["icon-text-fit-padding"][1];var n=g["icon-text-fit-padding"][2],r=g["icon-text-fit-padding"][3],D="width"===g["icon-text-fit"]?.5*(E-B):0,G="height"===g["icon-text-fit"]?.5*(x-f):0,x="width"===g["icon-text-fit"]||"both"===g["icon-text-fit"]?x:f,B="height"===g["icon-text-fit"]||"both"===g["icon-text-fit"]?E:B;g=new a(k+G-r,z+D-C);f=new a(k+G+u+x,z+D-C);u=new a(k+G+u+x,z+D+n+B);
k=new a(k+G-r,z+D+n+B)}else g=new a(k,r),f=new a(n,r),u=new a(n,z),k=new a(k,z);m=m.getLayoutValue("icon-rotate",q,t)*Math.PI/180;l&&(l=h[e.segment],e.y===l.y&&e.x===l.x&&e.segment+1<h.length?(h=h[e.segment+1],m+=Math.atan2(e.y-h.y,e.x-h.x)+Math.PI):m+=Math.atan2(e.y-l.y,e.x-l.x));m&&(h=Math.sin(m),l=Math.cos(m),h=[l,-h,h,l],g=g.matMult(h),f=f.matMult(h),k=k.matMult(h),u=u.matMult(h));return[new b(new a(e.x,e.y),g,f,k,u,d.image.rect,0,0,c,1/0)]},getGlyphQuads:function(e,d,g,l,m,r,u,q){u=m.getLayoutValue("text-rotate",
u,q)*Math.PI/180;m=m.layout["text-keep-upright"];q=d.positionedGlyphs;for(var f=[],k=0;k<q.length;k++){var n=q[k],y=n.glyph;if(y){var A=y.rect;if(A){var z=(n.x+y.advance/2)*g,B=void 0,x=c;r?(B=[],x=h(B,e,z,l,e.segment,!1),m&&(x=Math.min(x,h(B,e,z,l,e.segment,!0)))):B=[{anchorPoint:new a(e.x,e.y),upsideDown:!1,angle:0,maxScale:1/0,minScale:c}];var E=n.x+y.left,z=n.y-y.top,C=E+A.w,D=z+A.h,G=new a(n.x,y.advance/2),y=new a(E,z),z=new a(C,z),E=new a(E,D),C=new a(C,D);0!==n.angle&&(y._sub(G)._rotate(n.angle)._add(G),
z._sub(G)._rotate(n.angle)._add(G),E._sub(G)._rotate(n.angle)._add(G),C._sub(G)._rotate(n.angle)._add(G));for(n=0;n<B.length;n++){var D=B[n],G=y,H=z,K=E,J=C;if(u)var I=Math.sin(u),N=Math.cos(u),I=[N,-I,I,N],G=G.matMult(I),H=H.matMult(I),K=K.matMult(I),J=J.matMult(I);f.push(new b(D.anchorPoint,G,H,K,J,A,(e.angle+(D.upsideDown?Math.PI:0)+2*Math.PI)%(2*Math.PI),(D.angle+(D.upsideDown?Math.PI:0)+2*Math.PI)%(2*Math.PI),Math.max(D.minScale,x),D.maxScale,d.writingMode))}}}}return f},SymbolQuad:b};var c=
.5},{"point-geometry":26}],170:[function(g,l,d){function b(a,b,c,e,d){this.codePoint=a;this.x=b;this.y=c;this.glyph=e||null;this.angle=d}function h(a,b,c,e,d,f,g){this.positionedGlyphs=a;this.text=b;this.top=c;this.bottom=e;this.left=d;this.right=f;this.writingMode=g}function a(a,b,c,e){var d=Math.pow(a-b,2);return e?a<b?d/2:2*d:d+Math.abs(c)*c}function c(a,b){var c=0;return 10===a&&(c-=1E4),40!==a&&65288!==a||(c+=50),41!==b&&65289!==b||(c+=50),c}function e(b,c,e,d,f,g){for(var h=null,k=a(c,e,f,g),
m=0;m<d.length;m+=1){var l=d[m],n=a(c-l.x,e,f,g)+l.badness;n<=k&&(h=l,k=n)}return{index:b,x:c,priorBreak:h,badness:k}}function f(a){return a?f(a.priorBreak).concat(a.index):[]}function k(a,b,d,g){if(!d||!a)return[];var h=[],k=0,l;for(l in a){var n=g[a.charCodeAt(l)];n&&(k+=n.advance+b)}d=k/Math.max(1,Math.ceil(k/d));for(l=k=0;l<a.length;l++){var n=a.charCodeAt(l),r=g[n];r&&!t[n]&&(k+=r.advance+b);l<a.length-1&&(w[n]||m.charAllowsIdeographicBreaking(n))&&h.push(e(l+1,k,d,h,c(n,a.charCodeAt(l+1)),!1))}return f(e(a.length,
k,d,h,0,!0))}function n(a,b,c,e,d){this.image=a;this.top=b;this.bottom=c;this.left=e;this.right=d}var m=g("../util/script_detection"),r=g("../util/verticalize_punctuation"),u=g("../source/rtl_text_plugin"),q={horizontal:1,vertical:2};l.exports={shapeText:function(a,c,e,d,f,g,l,n,t,w,H){var v=a.trim();H===q.vertical&&(v=r(v));a=[];var C=new h(a,v,t[1],t[1],t[0],t[0],H);if(u.processBidirectionalText)var x=u.processBidirectionalText(v,k(v,n,e,c));else{x=v;var y=[];var D=0,A=0;for(e=k(v,n,e,c);A<e.length;A+=
1)v=e[A],y.push(x.substring(D,v)),D=v;x=(D<x.length&&y.push(x.substring(D,x.length)),y)}y=x;v=0;A=-17;x=0;var D=C.positionedGlyphs,z;for(z in y){var B=y[z].trim();if(B.length){e=D.length;for(var E=0;E<B.length;E++){var G=B.charCodeAt(E),W=c[G];W&&(m.charHasUprightVerticalOrientation(G)&&H!==q.horizontal?(D.push(new b(G,v,0,W,-Math.PI/2)),v+=w+n):(D.push(new b(G,v,A,W,0)),v+=W.advance+n))}if(D.length!==e&&(x=Math.max(v-n,x),v=D,B=D.length-1,l))for(E=(v[B].x+c[v[B].codePoint].advance)*l;e<=B;e++)v[e].x-=
E;v=0}A+=d}c=(l-f)*x+t[0];t=(-g*y.length+.5)*d+t[1];for(l=0;l<D.length;l++)D[l].x+=c,D[l].y+=t;d*=y.length;C.top+=-g*d;C.bottom=C.top+d;C.left+=-f*x;C.right=C.left+x;return!!a.length&&C},shapeIcon:function(a,b){if(!a||!a.rect)return null;var c=b[0]-a.width/2,e=b[1]-a.height/2;return new n(a,e,e+a.height,c,c+a.width)},WritingMode:q};var t={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},w={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":91,
"../util/script_detection":211,"../util/verticalize_punctuation":216}],171:[function(g,l,d){var b=g("@mapbox/shelf-pack"),h=g("../util/browser"),a=g("../util/util"),c=g("../util/window");g=function(e){function d(a,c){e.call(this);this.width=a;this.height=c;this.shelfPack=new b(a,c);this.images={};this.data=!1;this.filter=this.texture=0;this.pixelRatio=1;this.dirty=!0}return e&&(d.__proto__=e),d.prototype=Object.create(e&&e.prototype),d.prototype.constructor=d,d.prototype.allocateImage=function(b,
c){b/=this.pixelRatio;c/=this.pixelRatio;var e=this.shelfPack.packOne(b+2+(4-(b+2)%4),c+2+(4-(c+2)%4));return e?e:(a.warnOnce("SpriteAtlas out of space."),null)},d.prototype.addImage=function(a,b,e){var d,f,g;if(b instanceof c.HTMLImageElement?(d=b.width,f=b.height,b=h.getImageData(b),g=this.pixelRatio):(d=e.width,f=e.height,g=e.pixelRatio||this.pixelRatio),ArrayBuffer.isView(b)&&(b=new Uint32Array(b.buffer)),!(b instanceof Uint32Array))return this.fire("error",{error:Error("Image provided in an invalid format. Supported formats are HTMLImageElement, ImageData, and ArrayBufferView.")});
if(this.images[a])return this.fire("error",{error:Error("An image with this name already exists.")});e=this.allocateImage(d,f);if(!e)return this.fire("error",{error:Error("There is not enough space to add this image.")});this.images[a]={rect:e,width:d/g,height:f/g,sdf:!1,pixelRatio:1};this.copy(b,d,e,{pixelRatio:g,x:0,y:0,width:d,height:f},!1);this.fire("data",{dataType:"style"})},d.prototype.removeImage=function(a){var b=this.images[a];return delete this.images[a],b?(this.shelfPack.unref(b.rect),
void this.fire("data",{dataType:"style"})):this.fire("error",{error:Error("No image with this name exists.")})},d.prototype.getImage=function(a,b){if(this.images[a])return this.images[a];if(!this.sprite)return null;var c=this.sprite.getSpritePosition(a);if(!c.width||!c.height)return null;var e=this.allocateImage(c.width,c.height);if(!e)return null;var d={rect:e,width:c.width/c.pixelRatio,height:c.height/c.pixelRatio,sdf:c.sdf,pixelRatio:c.pixelRatio/this.pixelRatio};if(this.images[a]=d,!this.sprite.imgData)return null;
var f=new Uint32Array(this.sprite.imgData.buffer);return this.copy(f,this.sprite.width,e,c,b),d},d.prototype.getPosition=function(a,b){var c=this.getImage(a,b),e=c&&c.rect;return e?{size:[c.width,c.height],tl:[(e.x+1)/this.width,(e.y+1)/this.height],br:[(e.x+1+c.width*c.pixelRatio)/this.width,(e.y+1+c.height*c.pixelRatio)/this.height]}:null},d.prototype.allocate=function(){if(!this.data){this.data=new Uint32Array(Math.floor(this.width*this.pixelRatio)*Math.floor(this.height*this.pixelRatio));for(var a=
0;a<this.data.length;a++)this.data[a]=0}},d.prototype.copy=function(a,b,c,e,d){this.allocate();var f=e.x,g=e.y,h=this.data,k=this.width*this.pixelRatio,m=e.width;e=e.height;var l,n=g*b+f;c=(c.y+1)*this.pixelRatio*k+(c.x+1)*this.pixelRatio;if(d)for(c-=k,l=-1;l<=e;l++,c+=k)for(n=((l+e)%e+g)*b+f,d=-1;d<=m;d++)h[c+d]=a[n+(d+m)%m];else for(l=0;l<e;l++,n+=b,c+=k)for(d=0;d<m;d++)h[c+d]=a[n+d];this.dirty=!0},d.prototype.setSprite=function(a){a&&(this.pixelRatio=1<h.devicePixelRatio?2:1,this.canvas&&(this.canvas.width=
this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio));this.sprite=a},d.prototype.addIcons=function(a,b){for(var c=0;c<a.length;c++)this.getImage(a[c]);b(null,this.images)},d.prototype.bind=function(a,b){var c=!1;this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),c=!0);var e=b?
a.LINEAR:a.NEAREST;e!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),this.filter=e);this.dirty&&(this.allocate(),c?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)},
d}(g("../util/evented"));l.exports=g},{"../util/browser":194,"../util/evented":202,"../util/util":214,"../util/window":196,"@mapbox/shelf-pack":2}],172:[function(g,l,d){var b=g("../source/rtl_text_plugin");l.exports=function(d,a,c,e){a=a.getLayoutValue("text-transform",c,e);return"uppercase"===a?d=d.toLocaleUpperCase():"lowercase"===a&&(d=d.toLocaleLowerCase()),b.applyArabicShaping&&(d=b.applyArabicShaping(d)),d}},{"../source/rtl_text_plugin":91}],173:[function(g,l,d){var b=g("../util/dom"),h=g("point-geometry"),
a={scrollZoom:g("./handler/scroll_zoom"),boxZoom:g("./handler/box_zoom"),dragRotate:g("./handler/drag_rotate"),dragPan:g("./handler/drag_pan"),keyboard:g("./handler/keyboard"),doubleClickZoom:g("./handler/dblclick_zoom"),touchZoomRotate:g("./handler/touch_zoom_rotate")};l.exports=function(c,e){function d(){t=null}function g(a,e){var d=b.mousePos(m,e);return c.fire(a,{lngLat:c.unproject(d),point:d,originalEvent:e})}function l(a,e){var d=b.touchPos(m,e),f=d.reduce(function(a,b,c,e){return a.add(b.div(e.length))},
new h(0,0));return c.fire(a,{lngLat:c.unproject(f),point:f,lngLats:d.map(function(a){return c.unproject(a)},this),points:d,originalEvent:e})}var m=c.getCanvasContainer(),r=null,u=!1,q=null,t=null,w;for(w in a)c[w]=new a[w](c,e),e.interactive&&e[w]&&c[w].enable(e[w]);m.addEventListener("mouseout",function(a){g("mouseout",a)},!1);m.addEventListener("mousedown",function(a){c.stop();q=b.mousePos(m,a);g("mousedown",a);u=!0},!1);m.addEventListener("mouseup",function(a){var b=c.dragRotate&&c.dragRotate.isActive();
r&&!b&&g("contextmenu",r);r=null;u=!1;g("mouseup",a)},!1);m.addEventListener("mousemove",function(a){if(!(c.dragPan&&c.dragPan.isActive()||c.dragRotate&&c.dragRotate.isActive())){for(var b=a.toElement||a.target;b&&b!==m;)b=b.parentNode;b===m&&g("mousemove",a)}},!1);m.addEventListener("touchstart",function(a){c.stop();l("touchstart",a);!a.touches||1<a.touches.length||(t?(clearTimeout(t),t=null,g("dblclick",a)):t=setTimeout(d,300))},!1);m.addEventListener("touchend",function(a){l("touchend",a)},!1);
m.addEventListener("touchmove",function(a){l("touchmove",a)},!1);m.addEventListener("touchcancel",function(a){l("touchcancel",a)},!1);m.addEventListener("click",function(a){b.mousePos(m,a).equals(q)&&g("click",a)},!1);m.addEventListener("dblclick",function(a){g("dblclick",a);a.preventDefault()},!1);m.addEventListener("contextmenu",function(a){var b=c.dragRotate&&c.dragRotate.isActive();u||b?u&&(r=a):g("contextmenu",a);a.preventDefault()},!1)}},{"../util/dom":201,"./handler/box_zoom":181,"./handler/dblclick_zoom":182,
"./handler/drag_pan":183,"./handler/drag_rotate":184,"./handler/keyboard":185,"./handler/scroll_zoom":186,"./handler/touch_zoom_rotate":187,"point-geometry":26}],174:[function(g,l,d){var b=g("../util/util"),h=g("../util/interpolate"),a=g("../util/browser"),c=g("../geo/lng_lat"),e=g("../geo/lng_lat_bounds"),f=g("point-geometry");g=function(d){function g(a,b){d.call(this);this.moving=!1;this.transform=a;this._bearingSnap=b.bearingSnap}return d&&(g.__proto__=d),g.prototype=Object.create(d&&d.prototype),
g.prototype.constructor=g,g.prototype.getCenter=function(){return this.transform.center},g.prototype.setCenter=function(a,b){return this.jumpTo({center:a},b),this},g.prototype.panBy=function(a,c,e){return this.panTo(this.transform.center,b.extend({offset:f.convert(a).mult(-1)},c),e),this},g.prototype.panTo=function(a,c,e){return this.easeTo(b.extend({center:a},c),e)},g.prototype.getZoom=function(){return this.transform.zoom},g.prototype.setZoom=function(a,b){return this.jumpTo({zoom:a},b),this},g.prototype.zoomTo=
function(a,c,e){return this.easeTo(b.extend({zoom:a},c),e)},g.prototype.zoomIn=function(a,b){return this.zoomTo(this.getZoom()+1,a,b),this},g.prototype.zoomOut=function(a,b){return this.zoomTo(this.getZoom()-1,a,b),this},g.prototype.getBearing=function(){return this.transform.bearing},g.prototype.setBearing=function(a,b){return this.jumpTo({bearing:a},b),this},g.prototype.rotateTo=function(a,c,e){return this.easeTo(b.extend({bearing:a},c),e)},g.prototype.resetNorth=function(a,c){return this.rotateTo(0,
b.extend({duration:1E3},a),c),this},g.prototype.snapToNorth=function(a,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,b):this},g.prototype.getPitch=function(){return this.transform.pitch},g.prototype.setPitch=function(a,b){return this.jumpTo({pitch:a},b),this},g.prototype.fitBounds=function(a,c,d){if(c=b.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},c),"number"==typeof c.padding){var g=c.padding;c.padding={top:g,bottom:g,right:g,
left:g}}if(!b.deepEqual(Object.keys(c.padding).sort(function(a,b){return a<b?-1:a>b?1:0}),["bottom","left","right","top"]))return void b.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");a=e.convert(a);var h=[c.padding.left-c.padding.right,c.padding.top-c.padding.bottom],k=Math.min(c.padding.right,c.padding.left),g=Math.min(c.padding.top,c.padding.bottom);c.offset=[c.offset[0]+h[0],c.offset[1]+h[1]];var m=f.convert(c.offset),h=this.transform,
l=h.project(a.getNorthWest());a=h.project(a.getSouthEast());var n=a.sub(l),k=(h.width-2*k-2*Math.abs(m.x))/n.x,g=(h.height-2*g-2*Math.abs(m.y))/n.y;return 0>g||0>k?void b.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."):(c.center=h.unproject(l.add(a).div(2)),c.zoom=Math.min(h.scaleZoom(h.scale*Math.min(k,g)),c.maxZoom),c.bearing=0,c.linear?this.easeTo(c,d):this.flyTo(c,d))},g.prototype.jumpTo=function(a,b){this.stop();var e=this.transform,d=!1,f=!1,g=!1;return"zoom"in
a&&e.zoom!==+a.zoom&&(d=!0,e.zoom=+a.zoom),"center"in a&&(e.center=c.convert(a.center)),"bearing"in a&&e.bearing!==+a.bearing&&(f=!0,e.bearing=+a.bearing),"pitch"in a&&e.pitch!==+a.pitch&&(g=!0,e.pitch=+a.pitch),this.fire("movestart",b).fire("move",b),d&&this.fire("zoomstart",b).fire("zoom",b).fire("zoomend",b),f&&this.fire("rotate",b),g&&this.fire("pitchstart",b).fire("pitch",b).fire("pitchend",b),this.fire("moveend",b)},g.prototype.easeTo=function(a,e){var d=this;this.stop();a=b.extend({offset:[0,
0],duration:500,easing:b.ease},a);var g,k,m=this.transform,l=f.convert(a.offset),n=this.getZoom(),r=this.getBearing(),z=this.getPitch(),B="zoom"in a?+a.zoom:n,x="bearing"in a?this._normalizeBearing(a.bearing,r):r,E="pitch"in a?+a.pitch:z;"center"in a?(g=c.convert(a.center),k=m.centerPoint.add(l)):"around"in a?(g=c.convert(a.around),k=m.locationPoint(g)):(k=m.centerPoint.add(l),g=m.pointLocation(k));var C=m.locationPoint(g);return!1===a.animate&&(a.duration=0),this.zooming=B!==n,this.rotating=r!==
x,this.pitching=E!==z,a.smoothEasing&&0!==a.duration&&(a.easing=this._smoothOutEasing(a.duration)),a.noMoveStart||(this.moving=!0,this.fire("movestart",e)),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e),clearTimeout(this._onEaseEnd),this._ease(function(a){this.zooming&&(m.zoom=h(n,B,a));this.rotating&&(m.bearing=h(r,x,a));this.pitching&&(m.pitch=h(z,E,a));m.setLocationAtPoint(g,C.add(k.sub(C)._mult(a)));this.fire("move",e);this.zooming&&this.fire("zoom",e);this.rotating&&
this.fire("rotate",e);this.pitching&&this.fire("pitch",e)},function(){a.delayEndEvents?d._onEaseEnd=setTimeout(d._easeToEnd.bind(d,e),a.delayEndEvents):d._easeToEnd(e)},a),this},g.prototype._easeToEnd=function(a){var b=this.zooming,c=this.pitching;this.pitching=this.rotating=this.zooming=this.moving=!1;b&&this.fire("zoomend",a);c&&this.fire("pitchend",a);this.fire("moveend",a)},g.prototype.flyTo=function(a,e){function d(a){a=(J*J-K*K+(a?-1:1)*N*N*I*I)/(2*(a?J:K)*N*I);return Math.log(Math.sqrt(a*a+
1)-a)}function g(a){return(Math.exp(a)+Math.exp(-a))/2}this.stop();a=b.extend({offset:[0,0],speed:1.2,curve:1.42,easing:b.ease},a);var k=this.transform,m=f.convert(a.offset),l=this.getZoom(),n=this.getBearing(),r=this.getPitch(),z="center"in a?c.convert(a.center):this.getCenter(),B="zoom"in a?+a.zoom:l,x="bearing"in a?this._normalizeBearing(a.bearing,n):n,E="pitch"in a?+a.pitch:r;k.renderWorldCopies&&180<Math.abs(k.center.lng)+Math.abs(z.lng)&&(0<k.center.lng&&0>z.lng?z.lng+=360:0>k.center.lng&&0<
z.lng&&(z.lng-=360));var C=k.zoomScale(B-l),D=k.point,G="center"in a?k.project(z).sub(m.div(C)):D,H=a.curve,K=Math.max(k.width,k.height),J=K/C,I=G.sub(D).mag();"minZoom"in a&&(m=b.clamp(Math.min(a.minZoom,l,B),k.minZoom,k.maxZoom),m=K/k.zoomScale(m-l),H=Math.sqrt(m/I*2));var N=H*H,P=d(0),M=function(a){return g(P)/g(P+H*a)},S=function(a){var b=K,c=g(P);a=P+H*a;a=(Math.exp(a)-Math.exp(-a))/2/g(a);return(c*a-(Math.exp(P)-Math.exp(-P))/2)/N*b/I},U=(d(1)-P)/H;if(1E-6>Math.abs(I)){if(1E-6>Math.abs(K-J))return this.easeTo(a,
e);var T=J<K?-1:1,U=Math.abs(Math.log(J/K))/H,S=function(){return 0},M=function(a){return Math.exp(T*H*a)}}a.duration="duration"in a?+a.duration:1E3*U/("screenSpeed"in a?+a.screenSpeed/H:+a.speed);return this.moving=!0,this.zooming=!0,n!==x&&(this.rotating=!0),r!==E&&(this.pitching=!0),this.fire("movestart",e),this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e),this._ease(function(a){var b=a*U,c=S(b),b=1/M(b);k.zoom=l+k.scaleZoom(b);k.center=k.unproject(D.add(G.sub(D).mult(c)).mult(b));
k.renderWorldCopies&&(k.center=k.center.wrap());this.rotating&&(k.bearing=h(n,x,a));this.pitching&&(k.pitch=h(r,E,a));this.fire("move",e);this.fire("zoom",e);this.rotating&&this.fire("rotate",e);this.pitching&&this.fire("pitch",e)},function(){var a=this.pitching;this.pitching=this.rotating=this.zooming=this.moving=!1;a&&this.fire("pitchend",e);this.fire("zoomend",e);this.fire("moveend",e)},a),this},g.prototype.isEasing=function(){return!!this._abortFn},g.prototype.isMoving=function(){return this.moving},
g.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},g.prototype._ease=function(b,c,e){this._finishFn=c;this._abortFn=a.timed(function(a){b.call(this,e.easing(a));1===a&&this._finishEase()},!1===e.animate?0:e.duration,this)},g.prototype._finishEase=function(){delete this._abortFn;var a=this._finishFn;delete this._finishFn;a.call(this)},g.prototype._normalizeBearing=function(a,c){a=b.wrap(a,-180,180);var e=Math.abs(a-c);return Math.abs(a-360-c)<e&&(a-=360),Math.abs(a+
360-c)<e&&(a+=360),a},g.prototype._smoothOutEasing=function(a){var c=b.ease;if(this._prevEase)var c=this._prevEase,e=(Date.now()-c.start)/c.duration,c=c.easing(e+.01)-c.easing(e),c=.27/Math.sqrt(c*c+1E-4)*.01,c=b.bezier(c,Math.sqrt(.0729-c*c),.25,1);return this._prevEase={start:(new Date).getTime(),duration:a,easing:c},c},g}(g("../util/evented"));l.exports=g},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../util/browser":194,"../util/evented":202,"../util/interpolate":206,"../util/util":214,"point-geometry":26}],
175:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util");g=function(a){this.options=a;h.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};g.prototype.getDefaultPosition=function(){return"bottom-right"};g.prototype.onAdd=function(a){var c=this.options&&this.options.compact;return this._map=a,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),c&&this._container.classList.add("compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",
this._updateData),this._map.on("moveend",this._updateEditLink),void 0===c&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};g.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=void 0};g.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapbox-improve-map")),
this._editLink){var a=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+a.lng+"/"+a.lat+"/"+Math.round(this._map.getZoom()+1)}};g.prototype._updateData=function(a){a&&"metadata"===a.sourceDataType&&(this._updateAttributions(),this._updateEditLink())};g.prototype._updateAttributions=function(){if(this._map.style){var a=[],b=this._map.style.sourceCaches,e;for(e in b){var d=b[e].getSource();d.attribution&&0>a.indexOf(d.attribution)&&a.push(d.attribution)}a.sort(function(a,
b){return a.length-b.length});a=a.filter(function(b,c){for(var e=c+1;e<a.length;e++)if(0<=a[e].indexOf(b))return!1;return!0});this._container.innerHTML=a.join(" | ");this._editLink=null}};g.prototype._updateCompact=function(){var a=640>=this._map.getCanvasContainer().offsetWidth;this._container.classList[a?"add":"remove"]("compact")};l.exports=g},{"../../util/dom":201,"../../util/util":214}],176:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util"),a=g("../../util/window");g=function(){this._fullscreen=
!1;h.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.document&&(this._fullscreenchange="MSFullscreenChange")};g.prototype.onAdd=function(c){var e=this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._fullscreenButton=
b.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-fullscreen",this._container);return d.setAttribute("aria-label","Toggle fullscreen"),d.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),this._mapContainer=c.getContainer(),a.document.addEventListener(this._fullscreenchange,this._changeIcon),e};g.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=null;a.document.removeEventListener(this._fullscreenchange,this._changeIcon)};
g.prototype._isFullscreen=function(){return this._fullscreen};g.prototype._changeIcon=function(a){a.target===this._mapContainer&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"))};g.prototype._onClickFullscreen=function(){this._isFullscreen()?a.document.exitFullscreen?a.document.exitFullscreen():a.document.mozCancelFullScreen?a.document.mozCancelFullScreen():a.document.msExitFullscreen?
a.document.msExitFullscreen():a.document.webkitCancelFullScreen&&a.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};l.exports=g},{"../../util/dom":201,"../../util/util":214,"../../util/window":196}],
177:[function(g,l,d){function b(b){void 0!==f?b(f):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then(function(a){f="denied"!==a.state;b(f)}):(f=!!a.navigator.geolocation,b(f))}d=g("../../util/evented");var h=g("../../util/dom"),a=g("../../util/window"),c=g("../../util/util"),e={enableHighAccuracy:!1,timeout:6E3},f;g=function(d){function f(a){d.call(this);this.options=a||{};c.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return d&&(f.__proto__=
d),f.prototype=Object.create(d&&d.prototype),f.prototype.constructor=f,f.prototype.onAdd=function(a){return this._map=a,this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),b(this._setupUI),this._container},f.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=void 0},f.prototype._onSuccess=function(a){this._map.jumpTo({center:[a.coords.longitude,a.coords.latitude],zoom:17,bearing:0,pitch:0});this.fire("geolocate",a);this._finish()},f.prototype._onError=
function(a){this.fire("error",a);this._finish()},f.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},f.prototype._setupUI=function(a){!1!==a&&(this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this._geolocateButton=h.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&
this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},f.prototype._onClickGeolocate=function(){var b=c.extend(e,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("watching"),this._geolocateButton.setAttribute("aria-pressed",!1),a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):
(this._geolocateButton.classList.add("watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)):(a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,b),this._timeoutId=setTimeout(this._finish,1E4))},f}(d);l.exports=g},{"../../util/dom":201,"../../util/evented":202,"../../util/util":214,"../../util/window":196}],178:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util");
g=function(){h.bindAll(["_updateLogo"],this)};g.prototype.onAdd=function(a){return this._map=a,this._container=b.create("div","mapboxgl-ctrl"),this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container};g.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("sourcedata",this._updateLogo)};g.prototype.getDefaultPosition=function(){return"bottom-left"};g.prototype._updateLogo=function(a){a&&"metadata"===a.sourceDataType&&(!this._container.childNodes.length&&
this._logoRequired()?(a=b.create("a","mapboxgl-ctrl-logo"),a.target="_blank",a.href="https://www.mapbox.com/",a.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(a),this._map.off("data",this._updateLogo)):this._container.childNodes.length&&!this._logoRequired()&&this.onRemove())};g.prototype._logoRequired=function(){if(this._map.style){var a=this._map.style.sourceCaches,b;for(b in a)if(a[b].getSource().mapbox_logo)return!0;return!1}};l.exports=g},{"../../util/dom":201,"../../util/util":214}],
179:[function(g,l,d){function b(b){return new a.MouseEvent(b.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:b.detail,view:b.view,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY,movementX:b.movementX,movementY:b.movementY,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,altKey:b.altKey,metaKey:b.metaKey})}var h=g("../../util/dom"),a=g("../../util/window"),c=g("../../util/util");g=function(){c.bindAll(["_rotateCompassArrow"],this)};g.prototype._rotateCompassArrow=function(){this._compassArrow.style.transform=
"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};g.prototype.onAdd=function(a){return this._map=a,this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-group",a.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",a.zoomIn.bind(a)),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",a.zoomOut.bind(a)),this._compass=
this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",a.resetNorth.bind(a)),this._compassArrow=h.create("span","mapboxgl-ctrl-compass-arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container};g.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);
this._map.off("rotate",this._rotateCompassArrow);this._map=void 0};g.prototype._onContextMenu=function(a){a.preventDefault()};g.prototype._onCompassDown=function(c){0===c.button&&(h.disableDrag(),a.document.addEventListener("mousemove",this._onCompassMove),a.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(b(c)),c.stopPropagation())};g.prototype._onCompassMove=function(a){0===a.button&&(this._map.getCanvasContainer().dispatchEvent(b(a)),a.stopPropagation())};
g.prototype._onCompassUp=function(c){0===c.button&&(a.document.removeEventListener("mousemove",this._onCompassMove),a.document.removeEventListener("mouseup",this._onCompassUp),h.enableDrag(),this._map.getCanvasContainer().dispatchEvent(b(c)),c.stopPropagation())};g.prototype._createButton=function(a,b,c){a=h.create("button",a,this._container);return a.type="button",a.setAttribute("aria-label",b),a.addEventListener("click",function(){c()}),a};l.exports=g},{"../../util/dom":201,"../../util/util":214,
"../../util/window":196}],180:[function(g,l,d){function b(a,b,d,g){var c=Math.pow(10,(""+Math.floor(d)).length-1);var e=d/c;c=(e=10<=e?10:5<=e?5:3<=e?3:2<=e?2:1,c*e);"m"===g&&1E3<=c&&(c/=1E3,g="km");a.style.width=c/d*b+"px";a.innerHTML=c+g}var h=g("../../util/dom"),a=g("../../util/util");g=function(b){this.options=b;a.bindAll(["_onMove"],this)};g.prototype.getDefaultPosition=function(){return"bottom-left"};g.prototype._onMove=function(){var a=this._map,e=this._container,d=this.options,g=d&&d.maxWidth||
100,h=a._container.clientHeight/2;var m=a.unproject([0,h]);var a=a.unproject([g,h]),h=Math.PI/180,l=m.lat*h,u=a.lat*h;m=6371E3*Math.acos(Math.min(Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos((a.lng-m.lng)*h),1));d&&"imperial"===d.unit?(d=3.2808*m,5280<d?b(e,g,d/5280,"mi"):b(e,g,d,"ft")):b(e,g,m,"m")};g.prototype.onAdd=function(a){return this._map=a,this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",a.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};
g.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("move",this._onMove);this._map=void 0};l.exports=g},{"../../util/dom":201,"../../util/util":214}],181:[function(g,l,d){var b=g("../../util/dom"),h=g("../../geo/lng_lat_bounds"),a=g("../../util/util"),c=g("../../util/window");g=function(b){this._map=b;this._el=b.getCanvasContainer();this._container=b.getContainer();a.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};g.prototype.isEnabled=
function(){return!!this._enabled};g.prototype.isActive=function(){return!!this._active};g.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)};g.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)};g.prototype._onMouseDown=function(a){a.shiftKey&&0===a.button&&(c.document.addEventListener("mousemove",this._onMouseMove,!1),c.document.addEventListener("keydown",
this._onKeyDown,!1),c.document.addEventListener("mouseup",this._onMouseUp,!1),b.disableDrag(),this._startPos=b.mousePos(this._el,a),this._active=!0)};g.prototype._onMouseMove=function(a){var c=this._startPos,e=b.mousePos(this._el,a);this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));a=Math.min(c.x,e.x);var d=Math.max(c.x,e.x),g=Math.min(c.y,e.y),c=Math.max(c.y,e.y);b.setTransform(this._box,
"translate("+a+"px,"+g+"px)");this._box.style.width=d-a+"px";this._box.style.height=c-g+"px"};g.prototype._onMouseUp=function(a){if(0===a.button){var c=this._startPos,e=b.mousePos(this._el,a),d=(new h).extend(this._map.unproject(c)).extend(this._map.unproject(e));this._finish();c.x===e.x&&c.y===e.y?this._fireEvent("boxzoomcancel",a):this._map.fitBounds(d,{linear:!0}).fire("boxzoomend",{originalEvent:a,boxZoomBounds:d})}};g.prototype._onKeyDown=function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",
a))};g.prototype._finish=function(){this._active=!1;c.document.removeEventListener("mousemove",this._onMouseMove,!1);c.document.removeEventListener("keydown",this._onKeyDown,!1);c.document.removeEventListener("mouseup",this._onMouseUp,!1);this._container.classList.remove("mapboxgl-crosshair");this._box&&(this._box.parentNode.removeChild(this._box),this._box=null);b.enableDrag()};g.prototype._fireEvent=function(a,b){return this._map.fire(a,{originalEvent:b})};l.exports=g},{"../../geo/lng_lat_bounds":63,
"../../util/dom":201,"../../util/util":214,"../../util/window":196}],182:[function(g,l,d){g=function(b){this._map=b;this._onDblClick=this._onDblClick.bind(this)};g.prototype.isEnabled=function(){return!!this._enabled};g.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)};g.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)};g.prototype._onDblClick=function(b){this._map.zoomTo(this._map.getZoom()+
(b.originalEvent.shiftKey?-1:1),{around:b.lngLat},b)};l.exports=g},{}],183:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util"),a=g("../../util/window"),c=h.bezier(0,0,.3,1);g=function(a){this._map=a;this._el=a.getCanvasContainer();h.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};g.prototype.isEnabled=function(){return!!this._enabled};g.prototype.isActive=function(){return!!this._active};g.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),
this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)};g.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)};g.prototype._onDown=function(c){this._ignoreEvent(c)||this.isActive()||(c.touches?(a.document.addEventListener("touchmove",this._onMove),a.document.addEventListener("touchend",
this._onTouchEnd)):(a.document.addEventListener("mousemove",this._onMove),a.document.addEventListener("mouseup",this._onMouseUp)),a.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=b.mousePos(this._el,c),this._inertia=[[Date.now(),this._pos]])};g.prototype._onMove=function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",a),this._fireEvent("movestart",a));var c=b.mousePos(this._el,a),e=this._map;e.stop();
this._drainInertiaBuffer();this._inertia.push([Date.now(),c]);e.transform.setLocationAtPoint(e.transform.pointLocation(this._pos),c);this._fireEvent("drag",a);this._fireEvent("move",a);this._pos=c;a.preventDefault()}};g.prototype._onUp=function(a){var b=this;if(this.isActive()){this._active=!1;this._fireEvent("dragend",a);this._drainInertiaBuffer();var e=function(){b._map.moving=!1;b._fireEvent("moveend",a)},d=this._inertia;if(2>d.length)return void e();var g=d[d.length-1],d=d[0],h=g[1].sub(d[1]),
l=(g[0]-d[0])/1E3;if(0===l||g[1].equals(d[1]))return void e();e=h.mult(.3/l);g=e.mag();1400<g&&(g=1400,e._unit()._mult(g));g/=750;e=e.mult(-g/2);this._map.panBy(e,{duration:1E3*g,easing:c,noMoveStart:!0},{originalEvent:a})}};g.prototype._onMouseUp=function(b){this._ignoreEvent(b)||(this._onUp(b),a.document.removeEventListener("mousemove",this._onMove),a.document.removeEventListener("mouseup",this._onMouseUp),a.removeEventListener("blur",this._onMouseUp))};g.prototype._onTouchEnd=function(b){this._ignoreEvent(b)||
(this._onUp(b),a.document.removeEventListener("touchmove",this._onMove),a.document.removeEventListener("touchend",this._onTouchEnd))};g.prototype._fireEvent=function(a,b){return this._map.fire(a,{originalEvent:b})};g.prototype._ignoreEvent=function(a){var b=this._map;return b.boxZoom&&b.boxZoom.isActive()||b.dragRotate&&b.dragRotate.isActive()?!0:a.touches?1<a.touches.length:a.ctrlKey?!0:"mousemove"===a.type?a.buttons&0:a.button&&0!==a.button};g.prototype._drainInertiaBuffer=function(){for(var a=
this._inertia,b=Date.now();0<a.length&&160<b-a[0][0];)a.shift()};l.exports=g},{"../../util/dom":201,"../../util/util":214,"../../util/window":196}],184:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util"),a=g("../../util/window"),c=h.bezier(0,0,.25,1);g=function(a,b){this._map=a;this._el=a.getCanvasContainer();this._bearingSnap=b.bearingSnap;this._pitchWithRotate=!1!==b.pitchWithRotate;h.bindAll(["_onDown","_onMove","_onUp"],this)};g.prototype.isEnabled=function(){return!!this._enabled};
g.prototype.isActive=function(){return!!this._active};g.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)};g.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)};g.prototype._onDown=function(c){this._ignoreEvent(c)||this.isActive()||(a.document.addEventListener("mousemove",this._onMove),a.document.addEventListener("mouseup",this._onUp),a.addEventListener("blur",this._onUp),
this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=b.mousePos(this._el,c),this._center=this._map.transform.centerPoint,c.preventDefault())};g.prototype._onMove=function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",a),this._fireEvent("movestart",a),this._pitchWithRotate&&this._fireEvent("pitchstart",a));var c=this._map;c.stop();var e=this._pos,d=b.mousePos(this._el,a),g=.8*(e.x-d.x),e=-.5*
(e.y-d.y),g=c.getBearing()-g,e=c.getPitch()-e,h=this._inertia,l=h[h.length-1];this._drainInertiaBuffer();h.push([Date.now(),c._normalizeBearing(g,l[1])]);c.transform.bearing=g;this._pitchWithRotate&&(this._fireEvent("pitch",a),c.transform.pitch=e);this._fireEvent("rotate",a);this._fireEvent("move",a);this._pos=d}};g.prototype._onUp=function(b){var e=this;if(!this._ignoreEvent(b)&&(a.document.removeEventListener("mousemove",this._onMove),a.document.removeEventListener("mouseup",this._onUp),a.removeEventListener("blur",
this._onUp),this.isActive())){this._active=!1;this._fireEvent("rotateend",b);this._drainInertiaBuffer();var d=this._map,g=d.getBearing(),h=this._inertia,l=function(){Math.abs(g)<e._bearingSnap?d.resetNorth({noMoveStart:!0},{originalEvent:b}):(e._map.moving=!1,e._fireEvent("moveend",b));e._pitchWithRotate&&e._fireEvent("pitchend",b)};if(2>h.length)return void l();var u=h[0],q=h[h.length-1],h=d._normalizeBearing(g,h[h.length-2][1]),t=q[1]-u[1],w=0>t?-1:1,u=(q[0]-u[0])/1E3;if(0===t||0===u)return void l();
l=Math.abs(.25/u*t);180<l&&(l=180);u=l/180;h+=u/2*l*w;Math.abs(d._normalizeBearing(h,0))<this._bearingSnap&&(h=d._normalizeBearing(0,h));d.rotateTo(h,{duration:1E3*u,easing:c,noMoveStart:!0},{originalEvent:b})}};g.prototype._fireEvent=function(a,b){return this._map.fire(a,{originalEvent:b})};g.prototype._ignoreEvent=function(b){var c=this._map;if(c.boxZoom&&c.boxZoom.isActive()||c.dragPan&&c.dragPan.isActive())return!0;if(b.touches)return 1<b.touches.length;var c=b.ctrlKey?1:2,e=b.ctrlKey?0:2,d=b.button;
return"undefined"!=typeof InstallTrigger&&2===b.button&&b.ctrlKey&&0<=a.navigator.platform.toUpperCase().indexOf("MAC")&&(d=0),"mousemove"===b.type?b.buttons&0===c:!this.isActive()&&d!==e};g.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,b=Date.now();0<a.length&&160<b-a[0][0];)a.shift()};l.exports=g},{"../../util/dom":201,"../../util/util":214,"../../util/window":196}],185:[function(g,l,d){function b(b){return b*(2-b)}g=function(b){this._map=b;this._el=b.getCanvasContainer();this._onKeyDown=
this._onKeyDown.bind(this)};g.prototype.isEnabled=function(){return!!this._enabled};g.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)};g.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)};g.prototype._onKeyDown=function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var a=0,c=0,e=0,f=0,g=0;switch(d.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=
-1;break;case 37:d.shiftKey?c=-1:(d.preventDefault(),f=-1);break;case 39:d.shiftKey?c=1:(d.preventDefault(),f=1);break;case 38:d.shiftKey?e=1:(d.preventDefault(),g=-1);break;case 40:d.shiftKey?e=-1:(g=1,d.preventDefault());break;default:return}var h=this._map,m=h.getZoom(),a={duration:300,delayEndEvents:500,easing:b,zoom:a?Math.round(m)+a*(d.shiftKey?2:1):m,bearing:h.getBearing()+15*c,pitch:h.getPitch()+10*e,offset:[100*-f,100*-g],center:h.getCenter()};h.easeTo(a,{originalEvent:d})}};l.exports=g},
{}],186:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util"),a=g("../../util/browser"),c=g("../../util/window");g=c.navigator.userAgent.toLowerCase();var e=-1!==g.indexOf("firefox"),f=-1!==g.indexOf("safari")&&-1===g.indexOf("chrom");g=function(a){this._map=a;this._el=a.getCanvasContainer();h.bindAll(["_onWheel","_onTimeout"],this)};g.prototype.isEnabled=function(){return!!this._enabled};g.prototype.enable=function(a){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,
!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=a&&"center"===a.around)};g.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)};g.prototype._onWheel=function(d){var g;"wheel"===d.type?(g=d.deltaY,e&&d.deltaMode===c.WheelEvent.DOM_DELTA_PIXEL&&(g/=a.devicePixelRatio),d.deltaMode===c.WheelEvent.DOM_DELTA_LINE&&(g*=40)):"mousewheel"===
d.type&&(g=-d.wheelDeltaY,f&&(g/=3));var h=a.now(),k=h-(this._time||0);this._pos=b.mousePos(this._el,d);this._time=h;0!==g&&0===g%4.000244140625?this._type="wheel":0!==g&&4>Math.abs(g)?this._type="trackpad":400<k?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=200>Math.abs(k*g)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue));d.shiftKey&&g&&(g/=4);this._type&&this._zoom(-g,d);d.preventDefault()};
g.prototype._onTimeout=function(){this._type="wheel";this._zoom(-this._lastValue)};g.prototype._zoom=function(a,b){if(0!==a){var c=this._map,e=2/(1+Math.exp(-Math.abs(a/100)));0>a&&0!==e&&(e=1/e);e=c.transform.scaleZoom((c.ease?c.ease.to:c.transform.scale)*e);c.zoomTo(e,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?c.getCenter():c.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:b})}};l.exports=g},{"../../util/browser":194,"../../util/dom":201,"../../util/util":214,
"../../util/window":196}],187:[function(g,l,d){var b=g("../../util/dom"),h=g("../../util/util"),a=g("../../util/window"),c=h.bezier(0,0,.15,1);g=function(a){this._map=a;this._el=a.getCanvasContainer();h.bindAll(["_onStart","_onMove","_onEnd"],this)};g.prototype.isEnabled=function(){return!!this._enabled};g.prototype.enable=function(a){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=
a&&"center"===a.around)};g.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)};g.prototype.disableRotation=function(){this._rotationDisabled=!0};g.prototype.enableRotation=function(){this._rotationDisabled=!1};g.prototype._onStart=function(c){if(2===c.touches.length){var e=b.mousePos(this._el,c.touches[0]);c=b.mousePos(this._el,c.touches[1]);this._startVec=e.sub(c);this._startScale=
this._map.transform.scale;this._startBearing=this._map.transform.bearing;this._gestureIntent=void 0;this._inertia=[];a.document.addEventListener("touchmove",this._onMove,!1);a.document.addEventListener("touchend",this._onEnd,!1)}};g.prototype._onMove=function(a){if(2===a.touches.length){var c=b.mousePos(this._el,a.touches[0]),e=b.mousePos(this._el,a.touches[1]),d=c.add(e).div(2),g=c.sub(e),h=g.mag()/this._startVec.mag(),c=this._rotationDisabled?0:180*g.angleWith(this._startVec)/Math.PI,e=this._map;
this._gestureIntent?(g={duration:0,around:e.unproject(d)},"rotate"===this._gestureIntent&&(g.bearing=this._startBearing+c),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(g.zoom=e.transform.scaleZoom(this._startScale*h)),e.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),h,d]),e.easeTo(g,{originalEvent:a})):(d=.15<Math.abs(1-h),4<Math.abs(c)?this._gestureIntent="rotate":d&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=g,this._startScale=e.transform.scale,
this._startBearing=e.transform.bearing));a.preventDefault()}};g.prototype._onEnd=function(b){a.document.removeEventListener("touchmove",this._onMove);a.document.removeEventListener("touchend",this._onEnd);this._drainInertiaBuffer();var e=this._inertia,d=this._map;if(2>e.length)return void d.snapToNorth({},{originalEvent:b});var g=e[e.length-1],h=e[0],e=d.transform.scaleZoom(this._startScale*g[1]),l=d.transform.scaleZoom(this._startScale*h[1]),u=e-l,h=(g[0]-h[0])/1E3,g=g[2];if(0===h||e===l)return void d.snapToNorth({},
{originalEvent:b});u=.15*u/h;2.5<Math.abs(u)&&(u=0<u?2.5:-2.5);l=1E3*Math.abs(u/(12*.15));e+=u*l/2E3;0>e&&(e=0);d.easeTo({zoom:e,duration:l,easing:c,around:this._aroundCenter?d.getCenter():d.unproject(g)},{originalEvent:b})};g.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,b=Date.now();2<a.length&&160<b-a[0][0];)a.shift()};l.exports=g},{"../../util/dom":201,"../../util/util":214,"../../util/window":196}],188:[function(g,l,d){var b=g("../util/util"),h=g("../util/window");g=function(){b.bindAll(["_onHashChange",
"_updateHash"],this)};g.prototype.addTo=function(a){return this._map=a,h.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};g.prototype.remove=function(){return h.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this};g.prototype._onHashChange=function(){var a=h.location.hash.replace("#","").split("/");return 3<=a.length&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||
0),pitch:+(a[4]||0)}),!0)};g.prototype._updateHash=function(){var a=this._map.getCenter(),b=this._map.getZoom(),e=this._map.getBearing(),d=this._map.getPitch(),g=Math.max(0,Math.ceil(Math.log(b)/Math.LN2)),a="#"+Math.round(100*b)/100+"/"+a.lat.toFixed(g)+"/"+a.lng.toFixed(g);(e||d)&&(a+="/"+Math.round(10*e)/10);d&&(a+="/"+Math.round(d));h.history.replaceState("","",a)};l.exports=g},{"../util/util":214,"../util/window":196}],189:[function(g,l,d){var b=g("../util/util"),h=g("../util/browser"),a=g("../util/window"),
c=g("../util/dom"),e=g("../util/ajax"),f=g("../style/style"),k=g("../style/animation_loop"),n=g("../render/painter"),m=g("../geo/transform"),r=g("./hash"),u=g("./bind_handlers");d=g("./camera");var q=g("../geo/lng_lat"),t=g("../geo/lng_lat_bounds"),w=g("point-geometry"),v=g("./control/attribution_control"),y=g("./control/logo_control"),A=g("mapbox-gl-supported"),z={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,
doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0};g=function(d){function g(c){var e=this;if(c=b.extend({},z,c),null!=c.minZoom&&null!=c.maxZoom&&c.minZoom>c.maxZoom)throw Error("maxZoom must be greater than minZoom");var f=new m(c.minZoom,c.maxZoom,c.renderWorldCopies);if(d.call(this,f,c),this._interactive=c.interactive,this._failIfMajorPerformanceCaveat=
c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,"string"==typeof c.container){if(this._container=a.document.getElementById(c.container),!this._container)throw Error("Container '"+c.container+"' not found.");}else this._container=c.container;this.animationLoop=new k;c.maxBounds&&this.setMaxBounds(c.maxBounds);b.bindAll("_onWindowOnline _onWindowResize _contextLost _contextRestored _update _render _onData _onDataLoading".split(" "),
this);this._setupContainer();this._setupPainter();this.on("move",this._update.bind(this,!1));this.on("zoom",this._update.bind(this,!0));this.on("moveend",function(){e.animationLoop.set(300);e._rerender()});"undefined"!=typeof a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1));u(this,c);(this._hash=c.hash&&(new r).addTo(this))&&this._hash._onHashChange()||this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch});this._classes=
[];this.resize();c.classes&&this.setClasses(c.classes);c.style&&this.setStyle(c.style);c.attributionControl&&this.addControl(new v);this.addControl(new y,c.logoPosition);this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet);this.style.update(this._classes,{transition:!1})});this.on("data",this._onData);this.on("dataloading",this._onDataLoading)}d&&(g.__proto__=d);g.prototype=Object.create(d&&d.prototype);g.prototype.constructor=g;var l={showTileBoundaries:{},
showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return g.prototype.addControl=function(a,b){void 0===b&&a.getDefaultPosition&&(b=a.getDefaultPosition());void 0===b&&(b="top-right");var c=a.onAdd(this),e=this._controlPositions[b];return-1!==b.indexOf("bottom")?e.insertBefore(c,e.firstChild):e.appendChild(c),this},g.prototype.removeControl=function(a){return a.onRemove(this),this},g.prototype.addClass=function(a,c){return b.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),
0<=this._classes.indexOf(a)||""===a?this:(this._classes.push(a),this._classOptions=c,this.style&&this.style.updateClasses(),this._update(!0))},g.prototype.removeClass=function(a,c){b.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var e=this._classes.indexOf(a);return 0>e||""===a?this:(this._classes.splice(e,1),this._classOptions=c,this.style&&this.style.updateClasses(),this._update(!0))},g.prototype.setClasses=function(a,c){b.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");
for(var e={},d=0;d<a.length;d++)""!==a[d]&&(e[a[d]]=!0);return this._classes=Object.keys(e),this._classOptions=c,this.style&&this.style.updateClasses(),this._update(!0)},g.prototype.hasClass=function(a){return b.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),0<=this._classes.indexOf(a)},g.prototype.getClasses=function(){return b.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},
g.prototype.resize=function(){var a=this._containerDimensions(),b=a[0],a=a[1];return this._resizeCanvas(b,a),this.transform.resize(b,a),this.painter.resize(b,a),this.fire("movestart").fire("move").fire("resize").fire("moveend")},g.prototype.getBounds=function(){var a=new t(this.transform.pointLocation(new w(0,this.transform.height)),this.transform.pointLocation(new w(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(a.extend(this.transform.pointLocation(new w(this.transform.size.x,
0))),a.extend(this.transform.pointLocation(new w(0,this.transform.size.y)))),a},g.prototype.setMaxBounds=function(a){a?(a=t.convert(a),this.transform.lngRange=[a.getWest(),a.getEast()],this.transform.latRange=[a.getSouth(),a.getNorth()],this.transform._constrain(),this._update()):null!==a&&void 0!==a||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},g.prototype.setMinZoom=function(a){if(a=null===a||void 0===a?0:a,0<=a&&a<=this.transform.maxZoom)return this.transform.minZoom=
a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw Error("minZoom must be between 0 and the current maxZoom, inclusive");},g.prototype.getMinZoom=function(){return this.transform.minZoom},g.prototype.setMaxZoom=function(a){if(a=null===a||void 0===a?22:a,a>=this.transform.minZoom)return this.transform.maxZoom=a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw Error("maxZoom must be greater than the current minZoom");},g.prototype.getMaxZoom=function(){return this.transform.maxZoom},
g.prototype.project=function(a){return this.transform.locationPoint(q.convert(a))},g.prototype.unproject=function(a){return this.transform.pointLocation(w.convert(a))},g.prototype.on=function(a,c,e){var f=this;if(void 0===e)return d.prototype.on.call(this,a,c);var g=function(){if("mouseenter"===a||"mouseover"===a){var d=!1;return{layer:c,listener:e,delegates:{mousemove:function(g){var h=f.queryRenderedFeatures(g.point,{layers:[c]});h.length?d||(d=!0,e.call(f,b.extend({features:h},g,{type:a}))):d=
!1},mouseout:function(){d=!1}}}}if("mouseleave"===a||"mouseout"===a){var g=!1;return{layer:c,listener:e,delegates:{mousemove:function(d){f.queryRenderedFeatures(d.point,{layers:[c]}).length?g=!0:g&&(g=!1,e.call(f,b.extend({},d,{type:a})))},mouseout:function(c){g&&(g=!1,e.call(f,b.extend({},c,{type:a})))}}}}return{layer:c,listener:e,delegates:(h={},h[a]=function(a){var d=f.queryRenderedFeatures(a.point,{layers:[c]});d.length&&e.call(f,b.extend({features:d},a))},h)};var h}();this._delegatedListeners=
this._delegatedListeners||{};this._delegatedListeners[a]=this._delegatedListeners[a]||[];this._delegatedListeners[a].push(g);for(var h in g.delegates)f.on(h,g.delegates[h]);return this},g.prototype.off=function(a,b,c){if(void 0===c)return d.prototype.off.call(this,a,b);if(this._delegatedListeners&&this._delegatedListeners[a]){a=this._delegatedListeners[a];for(var e=0;e<a.length;e++){var f=a[e];if(f.layer===b&&f.listener===c){for(var g in f.delegates)this.off(g,f.delegates[g]);return a.splice(e,1),
this}}}},g.prototype.queryRenderedFeatures=function(){var a={};if(2===arguments.length){var b=arguments[0];a=arguments[1]}else{var c;if(c=1===arguments.length)c=arguments[0],c=c instanceof w||Array.isArray(c);c?b=arguments[0]:1===arguments.length&&(a=arguments[0])}return this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(b),a,this.transform.zoom,this.transform.angle):[]},g.prototype._makeQueryGeometry=function(a){var b=this;void 0===a&&(a=[w.convert([0,0]),w.convert([this.transform.width,
this.transform.height])]);a instanceof w||"number"==typeof a[0]?a=[w.convert(a)]:(a=[w.convert(a[0]),w.convert(a[1])],a=[a[0],new w(a[1].x,a[0].y),a[1],new w(a[0].x,a[1].y),a[0]]);return a=a.map(function(a){return b.transform.pointCoordinate(a)})},g.prototype.querySourceFeatures=function(a,b){return this.style.querySourceFeatures(a,b)},g.prototype.setStyle=function(a,c){if(!(c&&!1===c.diff||!this.style||!a||a instanceof f)&&"string"!=typeof a)try{return this.style.setState(a)&&this._update(!0),this}catch(G){b.warnOnce("Unable to perform style diff: "+
(G.message||G.error||G)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),a?(a instanceof f?this.style=a:this.style=new f(a,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},g.prototype.getStyle=function(){if(this.style)return this.style.serialize()},
g.prototype.addSource=function(a,b){return this.style.addSource(a,b),this._update(!0),this},g.prototype.isSourceLoaded=function(a){var b=this.style&&this.style.sourceCaches[a];return void 0===b?void this.fire("error",{error:Error("There is no source with ID '"+a+"'")}):b.loaded()},g.prototype.addSourceType=function(a,b,c){return this.style.addSourceType(a,b,c)},g.prototype.removeSource=function(a){return this.style.removeSource(a),this._update(!0),this},g.prototype.getSource=function(a){return this.style.getSource(a)},
g.prototype.addImage=function(a,b,c){this.style.spriteAtlas.addImage(a,b,c)},g.prototype.removeImage=function(a){this.style.spriteAtlas.removeImage(a)},g.prototype.loadImage=function(a,b){e.getImage(a,b)},g.prototype.addLayer=function(a,b){return this.style.addLayer(a,b),this._update(!0),this},g.prototype.moveLayer=function(a,b){return this.style.moveLayer(a,b),this._update(!0),this},g.prototype.removeLayer=function(a){return this.style.removeLayer(a),this._update(!0),this},g.prototype.getLayer=function(a){return this.style.getLayer(a)},
g.prototype.setFilter=function(a,b){return this.style.setFilter(a,b),this._update(!0),this},g.prototype.setLayerZoomRange=function(a,b,c){return this.style.setLayerZoomRange(a,b,c),this._update(!0),this},g.prototype.getFilter=function(a){return this.style.getFilter(a)},g.prototype.setPaintProperty=function(a,b,c,e){return this.style.setPaintProperty(a,b,c,e),this._update(!0),this},g.prototype.getPaintProperty=function(a,b,c){return this.style.getPaintProperty(a,b,c)},g.prototype.setLayoutProperty=
function(a,b,c){return this.style.setLayoutProperty(a,b,c),this._update(!0),this},g.prototype.getLayoutProperty=function(a,b){return this.style.getLayoutProperty(a,b)},g.prototype.setLight=function(a){return this.style.setLight(a),this._update(!0),this},g.prototype.getLight=function(){return this.style.getLight()},g.prototype.getContainer=function(){return this._container},g.prototype.getCanvasContainer=function(){return this._canvasContainer},g.prototype.getCanvas=function(){return this._canvas},
g.prototype._containerDimensions=function(){var a=0,b=0;return this._container&&(a=this._container.offsetWidth||400,b=this._container.offsetHeight||300),[a,b]},g.prototype._setupContainer=function(){var a=this._container;a.classList.add("mapboxgl-map");var b=this._canvasContainer=c.create("div","mapboxgl-canvas-container",a);this._interactive&&b.classList.add("mapboxgl-interactive");this._canvas=c.create("canvas","mapboxgl-canvas",b);this._canvas.style.position="absolute";this._canvas.addEventListener("webglcontextlost",
this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex",0);this._canvas.setAttribute("aria-label","Map");b=this._containerDimensions();this._resizeCanvas(b[0],b[1]);var e=this._controlContainer=c.create("div","mapboxgl-control-container",a),d=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){d[a]=c.create("div","mapboxgl-ctrl-"+a,e)})},g.prototype._resizeCanvas=function(b,
c){var e=a.devicePixelRatio||1;this._canvas.width=e*b;this._canvas.height=e*c;this._canvas.style.width=b+"px";this._canvas.style.height=c+"px"},g.prototype._setupPainter=function(){var a=b.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},A.webGLContextAttributes);return(a=this._canvas.getContext("webgl",a)||this._canvas.getContext("experimental-webgl",a))?void(this.painter=new n(a,this.transform)):void this.fire("error",{error:Error("Failed to initialize WebGL")})},
g.prototype._contextLost=function(a){a.preventDefault();this._frameId&&h.cancelFrame(this._frameId);this.fire("webglcontextlost",{originalEvent:a})},g.prototype._contextRestored=function(a){this._setupPainter();this.resize();this._update();this.fire("webglcontextrestored",{originalEvent:a})},g.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},g.prototype._update=function(a){return this.style?(this._styleDirty=this._styleDirty||a,this._sourcesDirty=
!0,this._rerender(),this):this},g.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),
this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},g.prototype.remove=function(){this._hash&&this._hash.remove();h.cancelFrame(this._frameId);this.setStyle(null);"undefined"!=typeof a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var b=this.painter.gl.getExtension("WEBGL_lose_context");
b&&b.loseContext();b=this._canvasContainer;b.parentNode&&b.parentNode.removeChild(b);b=this._controlContainer;b.parentNode&&b.parentNode.removeChild(b);this._container.classList.remove("mapboxgl-map");this.fire("remove")},g.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=h.frame(this._render))},g.prototype._onWindowOnline=function(){this._update()},g.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},l.showTileBoundaries.get=function(){return!!this._showTileBoundaries},
l.showTileBoundaries.set=function(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},l.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},l.showCollisionBoxes.set=function(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,this.style._redoPlacement())},l.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},l.showOverdrawInspector.set=function(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},
l.repaint.get=function(){return!!this._repaint},l.repaint.set=function(a){this._repaint=a;this._update()},l.vertices.get=function(){return!!this._vertices},l.vertices.set=function(a){this._vertices=a;this._update()},g.prototype._onData=function(a){this._update("style"===a.dataType);this.fire(a.dataType+"data",a)},g.prototype._onDataLoading=function(a){this.fire(a.dataType+"dataloading",a)},Object.defineProperties(g.prototype,l),g}(d);l.exports=g},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,
"../render/painter":77,"../style/animation_loop":145,"../style/style":148,"../util/ajax":193,"../util/browser":194,"../util/dom":201,"../util/util":214,"../util/window":196,"./bind_handlers":173,"./camera":174,"./control/attribution_control":175,"./control/logo_control":178,"./hash":188,"mapbox-gl-supported":22,"point-geometry":26}],190:[function(g,l,d){var b=g("../util/dom"),h=g("../geo/lng_lat"),a=g("point-geometry");g=function(c,e){this._offset=a.convert(e&&e.offset||[0,0]);this._update=this._update.bind(this);
this._onMapClick=this._onMapClick.bind(this);c||(c=b.create("div"));c.classList.add("mapboxgl-marker");this._element=c;this._popup=null};g.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this};g.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",
this._update),this._map=null),b.remove(this._element),this._popup&&this._popup.remove(),this};g.prototype.getLngLat=function(){return this._lngLat};g.prototype.setLngLat=function(a){return this._lngLat=h.convert(a),this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this};g.prototype.getElement=function(){return this._element};g.prototype.setPopup=function(a){return this._popup&&(this._popup.remove(),this._popup=null),a&&(this._popup=a,this._popup.setLngLat(this._lngLat)),this};g.prototype._onMapClick=
function(a){a=a.originalEvent.target;var b=this._element;this._popup&&(a===b||b.contains(a))&&this.togglePopup()};g.prototype.getPopup=function(){return this._popup};g.prototype.togglePopup=function(){var a=this._popup;a&&(a.isOpen()?a.remove():a.addTo(this._map))};g.prototype._update=function(a){if(this._map){var c=this._map.project(this._map.transform.renderWorldCopies?this._lngLat.wrapToBestWorld(this._map.getCenter()):this._lngLat)._add(this._offset);a&&"moveend"!==a.type||(c=c.round());b.setTransform(this._element,
"translate("+c.x+"px, "+c.y+"px)")}};l.exports=g},{"../geo/lng_lat":62,"../util/dom":201,"point-geometry":26}],191:[function(g,l,d){function b(a){if(a){if("number"==typeof a){var c=Math.round(Math.sqrt(.5*Math.pow(a,2)));return{top:new e(0,a),"top-left":new e(c,c),"top-right":new e(-c,c),bottom:new e(0,-a),"bottom-left":new e(c,-c),"bottom-right":new e(-c,-c),left:new e(a,0),right:new e(-a,0)}}return a instanceof e||Array.isArray(a)?(a=e.convert(a),{top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,
"bottom-right":a,left:a,right:a}):{top:e.convert(a.top||[0,0]),"top-left":e.convert(a["top-left"]||[0,0]),"top-right":e.convert(a["top-right"]||[0,0]),bottom:e.convert(a.bottom||[0,0]),"bottom-left":e.convert(a["bottom-left"]||[0,0]),"bottom-right":e.convert(a["bottom-right"]||[0,0]),left:e.convert(a.left||[0,0]),right:e.convert(a.right||[0,0])}}return b(new e(0,0))}var h=g("../util/util");d=g("../util/evented");var a=g("../util/dom"),c=g("../geo/lng_lat"),e=g("point-geometry"),f=g("../util/window"),
k={closeButton:!0,closeOnClick:!0};g=function(e){function d(a){e.call(this);this.options=h.extend(Object.create(k),a);h.bindAll(["_update","_onClickClose"],this)}return e&&(d.__proto__=e),d.prototype=Object.create(e&&e.prototype),d.prototype.constructor=d,d.prototype.addTo=function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},d.prototype.isOpen=function(){return!!this._map},d.prototype.remove=function(){return this._content&&
this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},d.prototype.getLngLat=function(){return this._lngLat},d.prototype.setLngLat=function(a){return this._lngLat=c.convert(a),this._update(),this},d.prototype.setText=function(a){return this.setDOMContent(f.document.createTextNode(a))},
d.prototype.setHTML=function(a){var b,c=f.document.createDocumentFragment(),e=f.document.createElement("body");for(e.innerHTML=a;b=e.firstChild,b;)c.appendChild(b);return this.setDOMContent(c)},d.prototype.setDOMContent=function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},d.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content);this._content=a.create("div","mapboxgl-popup-content",this._container);
this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},d.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));
var c=this.options.anchor,e=b(this.options.offset),d=this._map.project(this._map.transform.renderWorldCopies?this._lngLat.wrapToBestWorld(this._map.getCenter()):this._lngLat).round();if(!c){var f=this._container.offsetWidth,c=this._container.offsetHeight,c=d.y+e.bottom.y<c?["top"]:d.y>this._map.transform.height-c?["bottom"]:[];d.x<f/2?c.push("left"):d.x>this._map.transform.width-f/2&&c.push("right");c=0===c.length?"bottom":c.join("-")}var e=d.add(e[c]),d={top:"translate(-50%,0)","top-left":"translate(0,0)",
"top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},f=this._container.classList,g;for(g in d)f.remove("mapboxgl-popup-anchor-"+g);f.add("mapboxgl-popup-anchor-"+c);a.setTransform(this._container,d[c]+" translate("+e.x+"px,"+e.y+"px)")}},d.prototype._onClickClose=function(){this.remove()},d}(d);l.exports=g},{"../geo/lng_lat":62,"../util/dom":201,"../util/evented":202,
"../util/util":214,"../util/window":196,"point-geometry":26}],192:[function(g,l,d){g=function(b,d,a){this.target=b;this.parent=d;this.mapId=a;this.callbacks={};this.callbackID=0;this.receive=this.receive.bind(this);this.target.addEventListener("message",this.receive,!1)};g.prototype.send=function(b,d,a,c,e){var f=a?this.mapId+":"+this.callbackID++:null;a&&(this.callbacks[f]=a);this.target.postMessage({targetMapId:e,sourceMapId:this.mapId,type:b,id:String(f),data:d},c)};g.prototype.receive=function(b){var d=
this;b=b.data;var a=b.id;if(!b.targetMapId||this.mapId===b.targetMapId){var c=function(b,c,e){d.target.postMessage({sourceMapId:d.mapId,type:"<response>",id:String(a),error:b?String(b):null,data:c},e)};if("<response>"===b.type)c=this.callbacks[b.id],delete this.callbacks[b.id],c&&c(b.error||null,b.data);else if("undefined"!=typeof b.id&&this.parent[b.type])this.parent[b.type](b.sourceMapId,b.data,c);else if("undefined"!=typeof b.id&&this.parent.getWorkerSource){var e=b.type.split(".");this.parent.getWorkerSource(b.sourceMapId,
e[0])[e[1]](b.data,c)}else this.parent[b.type](b.data)}};g.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};l.exports=g},{}],193:[function(g,l,d){function b(a){var b=h.document.createElement("a");return b.href=a,b.protocol===h.document.location.protocol&&b.host===h.document.location.host}var h=g("./window"),a=function(a){function b(b,c){a.call(this,b);this.status=c}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,
b}(Error);d.getJSON=function(b,e){var c=new h.XMLHttpRequest;return c.open("GET",b,!0),c.setRequestHeader("Accept","application/json"),c.onerror=function(a){e(a)},c.onload=function(){if(200<=c.status&&300>c.status&&c.response){try{var b=JSON.parse(c.response)}catch(n){return e(n)}e(null,b)}else e(new a(c.statusText,c.status))},c.send(),c};d.getArrayBuffer=function(b,e){var c=new h.XMLHttpRequest;return c.open("GET",b,!0),c.responseType="arraybuffer",c.onerror=function(a){e(a)},c.onload=function(){return 0===
c.response.byteLength&&200===c.status?e(Error("http status 200 returned without content.")):void(200<=c.status&&300>c.status&&c.response?e(null,{data:c.response,cacheControl:c.getResponseHeader("Cache-Control"),expires:c.getResponseHeader("Expires")}):e(new a(c.statusText,c.status)))},c.send(),c};d.getImage=function(a,b){return d.getArrayBuffer(a,function(a,c){if(a)return b(a);var e=new h.Image,d=h.URL||h.webkitURL;e.onload=function(){b(null,e);d.revokeObjectURL(e.src)};var f=new h.Blob([new Uint8Array(c.data)],
{type:"image/png"});e.cacheControl=c.cacheControl;e.expires=c.expires;e.src=c.data.byteLength?d.createObjectURL(f):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="})};d.getVideo=function(a,e){var c=h.document.createElement("video");c.onloadstart=function(){e(null,c)};for(var d=0;d<a.length;d++){var g=h.document.createElement("source");b(a[d])||(c.crossOrigin="Anonymous");g.src=a[d];c.appendChild(g)}return c}},{"./window":196}],194:[function(g,
l,d){var b=g("./window");l.exports.now=b.performance&&b.performance.now?b.performance.now.bind(b.performance):Date.now.bind(Date);var h=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame;d.frame=function(a){return h(a)};var a=b.cancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelAnimationFrame||b.msCancelAnimationFrame;d.cancelFrame=function(b){a(b)};d.timed=function(a,b,f){function c(h){e||(h=l.exports.now(),h>=g+b?a.call(f,1):
(a.call(f,(h-g)/b),d.frame(c)))}if(!b)return a.call(f,1),null;var e=!1,g=l.exports.now();return d.frame(c),function(){e=!0}};d.getImageData=function(a){var c=b.document.createElement("canvas"),d=c.getContext("2d");return c.width=a.width,c.height=a.height,d.drawImage(a,0,0,a.width,a.height),d.getImageData(0,0,a.width,a.height).data};d.supported=g("mapbox-gl-supported");d.hardwareConcurrency=b.navigator.hardwareConcurrency||4;Object.defineProperty(d,"devicePixelRatio",{get:function(){return b.devicePixelRatio}});
d.supportsWebp=!1;g=b.document.createElement("img");g.onload=function(){d.supportsWebp=!0};g.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":196,"mapbox-gl-supported":22}],195:[function(g,l,d){d=g("webworkify");var b=g("../window"),h=b.URL.createObjectURL(new d(g("../../source/worker"),{bare:!0}));l.exports=function(){return new b.Worker(h)}},{"../../source/worker":100,"../window":196,webworkify:41}],196:[function(g,l,d){l.exports=self},{}],197:[function(g,
l,d){function b(a,b){return b.area-a.area}var h=g("quickselect"),a=g("./util").calculateSignedArea;l.exports=function(c,e){var d=c.length;if(1>=d)return[c];for(var g,l,m=[],r=0;r<d;r++){var u=a(c[r]);0!==u&&(c[r].area=Math.abs(u),void 0===l&&(l=0>u),l===0>u?(g&&m.push(g),g=[c[r]]):g.push(c[r]))}if(g&&m.push(g),1<e)for(d=0;d<m.length;d++)m[d].length<=e||(h(m[d],e,1,m[d].length-1,b),m[d]=m[d].slice(0,e));return m}},{"./util":214,quickselect:28}],198:[function(g,l,d){l.exports={API_URL:"https://api.mapbox.com",
REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],199:[function(g,l,d){g=function(b){this._stringToNumber={};this._numberToString=[];for(var d=0;d<b.length;d++){var a=b[d];this._stringToNumber[a]=d;this._numberToString[d]=a}};g.prototype.encode=function(b){return this._stringToNumber[b]};g.prototype.decode=function(b){return this._numberToString[b]};l.exports=g},{}],200:[function(g,l,d){var b=g("./util"),h=g("./actor");g=function(a,c){this.workerPool=a;this.actors=[];this.currentActor=0;this.id=b.uniqueId();
for(var e=this.workerPool.acquire(this.id),d=0;d<e.length;d++){var g=new h(e[d],c,this.id);g.name="Worker "+d;this.actors.push(g)}};g.prototype.broadcast=function(a,c,e){b.asyncAll(this.actors,function(b,e){b.send(a,c,e)},e||function(){})};g.prototype.send=function(a,b,e,d,g){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(a,b,e,g),d};g.prototype.remove=function(){this.actors.forEach(function(a){a.remove()});this.actors=[];this.workerPool.release(this.id)};
l.exports=g},{"./actor":192,"./util":214}],201:[function(g,l,d){function b(a){for(var b=0;b<a.length;b++)if(a[b]in e)return a[b];return a[0]}function h(a){a.preventDefault();a.stopPropagation();c.removeEventListener("click",h,!0)}var a=g("point-geometry"),c=g("./window");d.create=function(a,b,e){a=c.document.createElement(a);return b&&(a.className=b),e&&e.appendChild(a),a};var e=c.document.documentElement.style,f=b(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k;d.disableDrag=
function(){f&&(k=e[f],e[f]="none")};d.enableDrag=function(){f&&(e[f]=k)};var n=b(["transform","WebkitTransform"]);d.setTransform=function(a,b){a.style[n]=b};d.suppressClick=function(){c.addEventListener("click",h,!0);c.setTimeout(function(){c.removeEventListener("click",h,!0)},0)};d.mousePos=function(b,c){var e=b.getBoundingClientRect();return c=c.touches?c.touches[0]:c,new a(c.clientX-e.left-b.clientLeft,c.clientY-e.top-b.clientTop)};d.touchPos=function(b,c){for(var e=b.getBoundingClientRect(),d=
[],f="touchend"===c.type?c.changedTouches:c.touches,g=0;g<f.length;g++)d.push(new a(f[g].clientX-e.left-b.clientLeft,f[g].clientY-e.top-b.clientTop));return d};d.remove=function(a){a.parentNode&&a.parentNode.removeChild(a)}},{"./window":196,"point-geometry":26}],202:[function(g,l,d){function b(a,b,e){e&&e[a]&&(b=e[a].indexOf(b),-1!==b&&e[a].splice(b,1))}var h=g("./util");g=function(){};g.prototype.on=function(a,b){var c=this._listeners=this._listeners||{};c[a]=c[a]||[];c[a].push(b);return this};g.prototype.off=
function(a,c){return b(a,c,this._listeners),b(a,c,this._oneTimeListeners),this};g.prototype.once=function(a,b){var c=this._oneTimeListeners=this._oneTimeListeners||{};c[a]=c[a]||[];c[a].push(b);return this};g.prototype.fire=function(a,c){if(this.listens(a)){c=h.extend({},c,{type:a,target:this});for(var e=this._listeners&&this._listeners[a]?this._listeners[a].slice():[],d=0;d<e.length;d++)e[d].call(this,c);e=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(d=
0;d<e.length;d++)e[d].call(this,c),b(a,e[d],this._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(a,h.extend({},c,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else h.endsWith(a,"error")&&console.error(c&&c.error||c||"Empty error event");return this};g.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&0<this._listeners[a].length||this._oneTimeListeners&&this._oneTimeListeners[a]&&0<this._oneTimeListeners[a].length||
this._eventedParent&&this._eventedParent.listens(a)};g.prototype.setEventedParent=function(a,b){return this._eventedParent=a,this._eventedParentData=b,this};l.exports=g},{"./util":214}],203:[function(g,l,d){function b(a,b){return b.max-a.max}function h(a,b,d,g){this.p=new c(a,b);this.h=d;a=this.p;b=!1;d=1/0;for(var f=0;f<g.length;f++)for(var h=g[f],k=0,l=h.length,m=l-1;k<l;m=k++){var n=h[k],m=h[m];n.y>a.y!=m.y>a.y&&a.x<(m.x-n.x)*(a.y-n.y)/(m.y-n.y)+n.x&&(b=!b);d=Math.min(d,e(a,n,m))}this.d=(b?1:-1)*
Math.sqrt(d);this.max=this.d+this.h*Math.SQRT2}var a=g("tinyqueue"),c=g("point-geometry"),e=g("./intersection_tests").distToSegmentSquared;l.exports=function(c,e,d){e=e||1;for(var f,g,k,l,n=c[0],w=0;w<n.length;w++){var v=n[w];(!w||v.x<f)&&(f=v.x);(!w||v.y<g)&&(g=v.y);(!w||v.x>k)&&(k=v.x);(!w||v.y>l)&&(l=v.y)}v=Math.min(k-f,l-g);n=v/2;w=new a(null,b);if(0===v)return[f,g];for(;f<k;f+=v)for(var y=g;y<l;y+=v)w.push(new h(f+n,y+n,n,c));l=k=g=0;f=c[0];for(var v=0,y=f.length,A=y-1;v<y;A=v++){var z=f[v],
A=f[A],B=z.x*A.y-A.x*z.y;k+=(z.x+A.x)*B;l+=(z.y+A.y)*B;g+=3*B}g=new h(k/g,l/g,0,c);for(k=w.length;w.length;)l=w.pop(),(l.d>g.d||!g.d)&&(g=l,d&&console.log("found best %d after %d probes",Math.round(1E4*l.d)/1E4,k)),l.max-g.d<=e||(n=l.h/2,w.push(new h(l.p.x-n,l.p.y-n,n,c)),w.push(new h(l.p.x+n,l.p.y-n,n,c)),w.push(new h(l.p.x-n,l.p.y+n,n,c)),w.push(new h(l.p.x+n,l.p.y+n,n,c)),k+=4);return d&&(console.log("num probes: "+k),console.log("best distance: "+g.d)),g.p}},{"./intersection_tests":207,"point-geometry":26,
tinyqueue:30}],204:[function(g,l,d){var b=g("./worker_pool"),h;l.exports=function(){return h||(h=new b),h}},{"./worker_pool":217}],205:[function(g,l,d){function b(a,b,d){1===a&&(a=d.readMessage(h,{glyphs:{}}),b.push(a))}function h(b,e,d){1===b?e.name=d.readString():2===b?e.range=d.readString():3===b&&(b=d.readMessage(a,{}),e.glyphs[b.id]=b)}function a(a,b,d){1===a?b.id=d.readVarint():2===a?b.bitmap=d.readBytes():3===a?b.width=d.readVarint():4===a?b.height=d.readVarint():5===a?b.left=d.readSVarint():
6===a?b.top=d.readSVarint():7===a&&(b.advance=d.readVarint())}l.exports=function(a,e){this.stacks=a.readFields(b,[],e)}},{}],206:[function(g,l,d){function b(b,a,c){return b*(1-c)+a*c}l.exports=b;b.number=b;b.vec2=function(d,a,c){return[b(d[0],a[0],c),b(d[1],a[1],c)]};b.color=function(d,a,c){return[b(d[0],a[0],c),b(d[1],a[1],c),b(d[2],a[2],c),b(d[3],a[3],c)]};b.array=function(d,a,c){return d.map(function(e,d){return b(e,a[d],c)})}},{}],207:[function(g,l,d){function b(a,b){if(0===a.length||0===b.length)return!1;
for(var c=0;c<a.length-1;c++)for(var e=a[c],d=a[c+1],g=0;g<b.length-1;g++){var h=e,k=d,l=b[g],n=b[g+1];if(f(h,l,n)!==f(k,l,n)&&f(h,k,l)!==f(h,k,n))return!0}return!1}function h(b,c,e){e*=e;if(1===c.length)return b.distSqr(c[0])<e;for(var d=1;d<c.length;d++)if(a(b,c[d-1],c[d])<e)return!0;return!1}function a(a,b,c){var e=b.distSqr(c);if(0===e)return a.distSqr(b);e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/e;return 0>e?a.distSqr(b):1<e?a.distSqr(c):a.distSqr(c.sub(b)._mult(e)._add(b))}function c(a,b){for(var c,
e,d,f=!1,g=0;g<a.length;g++){c=a[g];var h=0;for(d=c.length-1;h<c.length;d=h++)e=c[h],d=c[d],e.y>b.y!=d.y>b.y&&b.x<(d.x-e.x)*(b.y-e.y)/(d.y-e.y)+e.x&&(f=!f)}return f}function e(a,b){for(var c=!1,e=0,d=a.length-1;e<a.length;d=e++){var f=a[e],d=a[d];f.y>b.y!=d.y>b.y&&b.x<(d.x-f.x)*(b.y-f.y)/(d.y-f.y)+f.x&&(c=!c)}return c}var f=g("./util").isCounterClockwise;l.exports={multiPolygonIntersectsBufferedMultiPoint:function(a,b,c){for(var d=0;d<a.length;d++)for(var f=a[d],g=0;g<b.length;g++)for(var k=b[g],
l=0;l<k.length;l++){var m=k[l];if(e(f,m)||h(m,f,c))return!0}return!1},multiPolygonIntersectsMultiPolygon:function(a,e){if(1===a.length&&1===a[0].length)return c(e,a[0][0]);for(var d=0;d<e.length;d++)for(var f=e[d],g=0;g<f.length;g++)if(c(a,f[g]))return!0;for(d=0;d<a.length;d++){f=a[d];for(g=0;g<f.length;g++)if(c(e,f[g]))return!0;for(g=0;g<e.length;g++)if(b(f,e[g]))return!0}return!1},multiPolygonIntersectsBufferedMultiLine:function(a,c,d){for(var f=0;f<c.length;f++)for(var g=c[f],k=0;k<a.length;k++){var l=
a[k];if(3<=l.length)for(var m=0;m<g.length;m++)if(e(l,g[m]))return!0;a:{var m=g,n=d;if(1<l.length){if(b(l,m)){l=!0;break a}for(var y=0;y<m.length;y++)if(h(m[y],l,n)){l=!0;break a}}for(y=0;y<l.length;y++)if(h(l[y],m,n)){l=!0;break a}l=!1}if(l)return!0}return!1},polygonIntersectsPolygon:function(a,c){for(var d=0;d<a.length;d++)if(e(c,a[d]))return!0;for(d=0;d<c.length;d++)if(e(a,c[d]))return!0;return!!b(a,c)},distToSegmentSquared:a}},{"./util":214}],208:[function(g,l,d){l.exports={"Latin-1 Supplement":function(b){return 128<=
b&&255>=b},"Hangul Jamo":function(b){return 4352<=b&&4607>=b},"Unified Canadian Aboriginal Syllabics":function(b){return 5120<=b&&5759>=b},"Unified Canadian Aboriginal Syllabics Extended":function(b){return 6320<=b&&6399>=b},"General Punctuation":function(b){return 8192<=b&&8303>=b},"Letterlike Symbols":function(b){return 8448<=b&&8527>=b},"Number Forms":function(b){return 8528<=b&&8591>=b},"Miscellaneous Technical":function(b){return 8960<=b&&9215>=b},"Control Pictures":function(b){return 9216<=
b&&9279>=b},"Optical Character Recognition":function(b){return 9280<=b&&9311>=b},"Enclosed Alphanumerics":function(b){return 9312<=b&&9471>=b},"Geometric Shapes":function(b){return 9632<=b&&9727>=b},"Miscellaneous Symbols":function(b){return 9728<=b&&9983>=b},"Miscellaneous Symbols and Arrows":function(b){return 11008<=b&&11263>=b},"CJK Radicals Supplement":function(b){return 11904<=b&&12031>=b},"Kangxi Radicals":function(b){return 12032<=b&&12255>=b},"Ideographic Description Characters":function(b){return 12272<=
b&&12287>=b},"CJK Symbols and Punctuation":function(b){return 12288<=b&&12351>=b},Hiragana:function(b){return 12352<=b&&12447>=b},Katakana:function(b){return 12448<=b&&12543>=b},Bopomofo:function(b){return 12544<=b&&12591>=b},"Hangul Compatibility Jamo":function(b){return 12592<=b&&12687>=b},Kanbun:function(b){return 12688<=b&&12703>=b},"Bopomofo Extended":function(b){return 12704<=b&&12735>=b},"CJK Strokes":function(b){return 12736<=b&&12783>=b},"Katakana Phonetic Extensions":function(b){return 12784<=
b&&12799>=b},"Enclosed CJK Letters and Months":function(b){return 12800<=b&&13055>=b},"CJK Compatibility":function(b){return 13056<=b&&13311>=b},"CJK Unified Ideographs Extension A":function(b){return 13312<=b&&19903>=b},"Yijing Hexagram Symbols":function(b){return 19904<=b&&19967>=b},"CJK Unified Ideographs":function(b){return 19968<=b&&40959>=b},"Yi Syllables":function(b){return 40960<=b&&42127>=b},"Yi Radicals":function(b){return 42128<=b&&42191>=b},"Hangul Jamo Extended-A":function(b){return 43360<=
b&&43391>=b},"Hangul Syllables":function(b){return 44032<=b&&55215>=b},"Hangul Jamo Extended-B":function(b){return 55216<=b&&55295>=b},"Private Use Area":function(b){return 57344<=b&&63743>=b},"CJK Compatibility Ideographs":function(b){return 63744<=b&&64255>=b},"Vertical Forms":function(b){return 65040<=b&&65055>=b},"CJK Compatibility Forms":function(b){return 65072<=b&&65103>=b},"Small Form Variants":function(b){return 65104<=b&&65135>=b},"Halfwidth and Fullwidth Forms":function(b){return 65280<=
b&&65519>=b}}},{}],209:[function(g,l,d){g=function(b,d){this.max=b;this.onRemove=d;this.reset()};g.prototype.reset=function(){for(var b in this.data)this.onRemove(this.data[b]);return this.data={},this.order=[],this};g.prototype.add=function(b,d){if(this.has(b))this.order.splice(this.order.indexOf(b),1),this.data[b]=d,this.order.push(b);else if(this.data[b]=d,this.order.push(b),this.order.length>this.max){var a=this.get(this.order[0]);a&&this.onRemove(a)}return this};g.prototype.has=function(b){return b in
this.data};g.prototype.keys=function(){return this.order};g.prototype.get=function(b){if(!this.has(b))return null;var d=this.data[b];return delete this.data[b],this.order.splice(this.order.indexOf(b),1),d};g.prototype.getWithoutRemoving=function(b){return this.has(b)?this.data[b]:null};g.prototype.remove=function(b){if(!this.has(b))return this;var d=this.data[b];return delete this.data[b],this.onRemove(d),this.order.splice(this.order.indexOf(b),1),this};g.prototype.setMaxSize=function(b){for(this.max=
b;this.order.length>this.max;)(b=this.get(this.order[0]))&&this.onRemove(b);return this};l.exports=g},{}],210:[function(g,l,d){function b(b,d){var f=a(e.API_URL);if(b.protocol=f.protocol,b.authority=f.authority,!e.REQUIRE_ACCESS_TOKEN)return c(b);if(d=d||e.ACCESS_TOKEN,!d)throw Error("An API access token is required to use Mapbox GL. "+k);if("s"===d[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+k);return b.params.push("access_token="+d),c(b)}
function h(a){return 0===a.indexOf("mapbox:")}function a(a){a=a.match(m);if(!a)throw Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function c(a){var b=a.params.length?"?"+a.params.join("&"):"";return a.protocol+"://"+a.authority+a.path+b}var e=g("./config"),f=g("./browser"),k="See https://www.mapbox.com/api-documentation/#access-tokens";d.isMapboxURL=h;d.normalizeStyleURL=function(c,e){if(!h(c))return c;var d=a(c);return d.path=
"/styles/v1"+d.path,b(d,e)};d.normalizeGlyphsURL=function(c,e){if(!h(c))return c;var d=a(c);return d.path="/fonts/v1"+d.path,b(d,e)};d.normalizeSourceURL=function(c,e){if(!h(c))return c;var d=a(c);return d.path="/v4/"+d.authority+".json",d.params.push("secure"),b(d,e)};d.normalizeSpriteURL=function(e,d,f,g){var k=a(e);return h(e)?(k.path="/styles/v1"+k.path+"/sprite"+d+f,b(k,g)):(k.path+=""+d+f,c(k))};var n=/(\.(png|jpg)\d*)(?=$)/;d.normalizeTileURL=function(b,d,g){if(!d||!h(d))return b;b=a(b);b.path=
b.path.replace(n,""+(2<=f.devicePixelRatio||512===g?"@2x":"")+(f.supportsWebp?".webp":"$1"));g=b.params;for(d=0;d<g.length;d++)0===g[d].indexOf("access_token=tk.")&&(g[d]="access_token="+(e.ACCESS_TOKEN||""));return c(b)};var m=/^(\w+):\/\/([^\/?]+)(\/[^?]+)?\??(.+)?/},{"./browser":194,"./config":198}],211:[function(g,l,d){var b=g("./is_char_in_unicode_block");l.exports.allowsIdeographicBreaking=function(b){for(var a=0;a<b.length;a+=1)if(!d.charAllowsIdeographicBreaking(b[a].charCodeAt(0)))return!1;
return!0};l.exports.allowsVerticalWritingMode=function(b){for(var a=0;a<b.length;a+=1)if(d.charHasUprightVerticalOrientation(b[a].charCodeAt(0)))return!0;return!1};l.exports.charAllowsIdeographicBreaking=function(d){return!(11904>d)&&(!!b["Bopomofo Extended"](d)||!!b.Bopomofo(d)||!!b["CJK Compatibility Forms"](d)||!!b["CJK Compatibility Ideographs"](d)||!!b["CJK Compatibility"](d)||!!b["CJK Radicals Supplement"](d)||!!b["CJK Strokes"](d)||!!b["CJK Symbols and Punctuation"](d)||!!b["CJK Unified Ideographs Extension A"](d)||
!!b["CJK Unified Ideographs"](d)||!!b["Enclosed CJK Letters and Months"](d)||!!b["Halfwidth and Fullwidth Forms"](d)||!!b.Hiragana(d)||!!b["Ideographic Description Characters"](d)||!!b["Kangxi Radicals"](d)||!!b["Katakana Phonetic Extensions"](d)||!!b.Katakana(d)||!!b["Vertical Forms"](d)||!!b["Yi Radicals"](d)||!!b["Yi Syllables"](d))};d.charHasUprightVerticalOrientation=function(d){return 746===d||747===d||!(4352>d)&&(!!b["Bopomofo Extended"](d)||!!b.Bopomofo(d)||!(!b["CJK Compatibility Forms"](d)||
65097<=d&&65103>=d)||!!b["CJK Compatibility Ideographs"](d)||!!b["CJK Compatibility"](d)||!!b["CJK Radicals Supplement"](d)||!!b["CJK Strokes"](d)||!(!b["CJK Symbols and Punctuation"](d)||12296<=d&&12305>=d||12308<=d&&12319>=d||12336===d)||!!b["CJK Unified Ideographs Extension A"](d)||!!b["CJK Unified Ideographs"](d)||!!b["Enclosed CJK Letters and Months"](d)||!!b["Hangul Compatibility Jamo"](d)||!!b["Hangul Jamo Extended-A"](d)||!!b["Hangul Jamo Extended-B"](d)||!!b["Hangul Jamo"](d)||!!b["Hangul Syllables"](d)||
!!b.Hiragana(d)||!!b["Ideographic Description Characters"](d)||!!b.Kanbun(d)||!!b["Kangxi Radicals"](d)||!!b["Katakana Phonetic Extensions"](d)||!(!b.Katakana(d)||12540===d)||!(!b["Halfwidth and Fullwidth Forms"](d)||65288===d||65289===d||65293===d||65306<=d&&65310>=d||65339===d||65341===d||65343===d||65371<=d&&65503>=d||65507===d||65512<=d&&65519>=d)||!(!b["Small Form Variants"](d)||65112<=d&&65118>=d||65123<=d&&65126>=d)||!!b["Unified Canadian Aboriginal Syllabics"](d)||!!b["Unified Canadian Aboriginal Syllabics Extended"](d)||
!!b["Vertical Forms"](d)||!!b["Yijing Hexagram Symbols"](d)||!!b["Yi Syllables"](d)||!!b["Yi Radicals"](d))};d.charHasNeutralVerticalOrientation=function(d){return!(!b["Latin-1 Supplement"](d)||167!==d&&169!==d&&174!==d&&177!==d&&188!==d&&189!==d&&190!==d&&215!==d&&247!==d)||!(!b["General Punctuation"](d)||8214!==d&&8224!==d&&8225!==d&&8240!==d&&8241!==d&&8251!==d&&8252!==d&&8258!==d&&8263!==d&&8264!==d&&8265!==d&&8273!==d)||!!b["Letterlike Symbols"](d)||!!b["Number Forms"](d)||!(!b["Miscellaneous Technical"](d)||
!(8960<=d&&8967>=d||8972<=d&&8991>=d||8996<=d&&9E3>=d||9003===d||9085<=d&&9114>=d||9150<=d&&9165>=d||9167===d||9169<=d&&9179>=d||9186<=d&&9215>=d))||!(!b["Control Pictures"](d)||9251===d)||!!b["Optical Character Recognition"](d)||!!b["Enclosed Alphanumerics"](d)||!!b["Geometric Shapes"](d)||!(!b["Miscellaneous Symbols"](d)||9754<=d&&9759>=d)||!(!b["Miscellaneous Symbols and Arrows"](d)||!(11026<=d&&11055>=d||11088<=d&&11097>=d||11192<=d&&11243>=d))||!!b["CJK Symbols and Punctuation"](d)||!!b.Katakana(d)||
!!b["Private Use Area"](d)||!!b["CJK Compatibility Forms"](d)||!!b["Small Form Variants"](d)||!!b["Halfwidth and Fullwidth Forms"](d)||8734===d||8756===d||8757===d||9984<=d&&10087>=d||10102<=d&&10131>=d||65532===d||65533===d};d.charHasRotatedVerticalOrientation=function(b){return!(d.charHasUprightVerticalOrientation(b)||d.charHasNeutralVerticalOrientation(b))}},{"./is_char_in_unicode_block":208}],212:[function(g,l,d){function b(a,b){return Math.ceil(a/b)*b}function h(a,b){for(var e=[],d=[],f="var i = this.length;\nthis.resize(this.length + 1);\n",
g=0;g<a.length;g+=1){var h=a[g],k=c[h.type].BYTES_PER_ELEMENT;0>e.indexOf(k)&&(e.push(k),f+="var o"+k.toFixed(0)+" = i * "+(b/k).toFixed(0)+";\n");for(var l=0;l<h.components;l++){var m="v"+d.length,n="o"+k.toFixed(0)+" + "+(h.offset/k+l).toFixed(0),f=f+("this."+h.type.toLowerCase()+"["+n+"] = "+m+";\n");d.push(m)}}return f+="return i;",new Function(d.toString(),f)}function a(a,b){var e="this._pos"+c[a.type].BYTES_PER_ELEMENT.toFixed(0),d=(a.offset/c[a.type].BYTES_PER_ELEMENT+b).toFixed(0),e=e+" + "+
d;return"this._structArray."+a.type.toLowerCase()+"["+e+"]"}l.exports=function(d){var g=JSON.stringify(d);if(k[g])return k[g];var l=void 0===d.alignment?1:d.alignment,n=0,q=0,t=["Uint8"];d=d.members.map(function(a){0>t.indexOf(a.type)&&t.push(a.type);var e=c[a.type].BYTES_PER_ELEMENT,d=n=b(n,Math.max(l,e)),f=a.components||1;return q=Math.max(q,e),n+=e*f,{name:a.name,type:a.type,components:f,offset:d}});var w=b(n,Math.max(q,l)),v=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=
a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(e);v.prototype.alignment=l;v.prototype.size=w;for(var y=0;y<d.length;y+=1)for(var A=d[y],z=0;z<A.components;z++)Object.defineProperty(v.prototype,A.name+(1===A.components?"":z),{get:new Function("return "+a(A,z)+";"),set:new Function("x",a(A,z)+" = x;")});y=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(f);return y.prototype.members=
d,y.prototype.StructType=v,y.prototype.bytesPerElement=w,y.prototype.emplaceBack=h(d,w),y.prototype._usedTypes=t,k[g]=y,y};var c={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},e=function(a,b){this._structArray=a;this._pos1=b*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},f=function(a){this.isTransferred=!1;void 0!==a?(this.arrayBuffer=
a.arrayBuffer,this.length=a.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};f.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}};f.prototype.serialize=function(a){return this._trim(),a&&(this.isTransferred=!0,a.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}};f.prototype.get=function(a){return new this.StructType(this,
a)};f.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};f.prototype.resize=function(a){if(this.length=a,a>this.capacity)this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),a=this.uint8,this._refreshViews(),a&&this.uint8.set(a)};f.prototype._refreshViews=function(){for(var a=0,b=this._usedTypes;a<
b.length;a+=1){var e=b[a];this[e.toLowerCase()]=new c[e](this.arrayBuffer)}};f.prototype.toArray=function(a,b){for(var c=[],e=a;e<b;e++){var d=this.get(e);c.push(d)}return c};var k={}},{}],213:[function(g,l,d){l.exports=function(b,d){return d.replace(/{([^{}]+)}/g,function(a,c){return c in b?b[c]:""})}},{}],214:[function(g,l,d){var b=g("@mapbox/unitbezier"),h=g("../geo/coordinate");g("point-geometry");d.easeCubicInOut=function(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:
3*(a-b)+c-.75)};d.bezier=function(a,c,d,g){var e=new b(a,c,d,g);return function(a){return e.solve(a)}};d.ease=d.bezier(.25,.1,.25,1);d.clamp=function(a,b,c){return Math.min(c,Math.max(b,a))};d.wrap=function(a,b,c){var e=c-b;a=((a-b)%e+e)%e+b;return a===b?c:a};d.asyncAll=function(a,b,c){if(!a.length)return c(null,[]);var e=a.length,d=Array(a.length),f=null;a.forEach(function(a,g){b(a,function(a,b){a&&(f=a);d[g]=b;0===--e&&c(f,d)})})};d.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};
d.keysDifference=function(a,b){var c=[],e;for(e in a)e in b||c.push(e);return c};d.extend=function(a,b,c,d){for(var e=arguments,f=1;f<arguments.length;f++){var g=e[f],h;for(h in g)a[h]=g[h]}return a};d.pick=function(a,b){for(var c={},e=0;e<b.length;e++){var d=b[e];d in a&&(c[d]=a[d])}return c};var a=1;d.uniqueId=function(){return a++};d.bindAll=function(a,b){a.forEach(function(a){b[a]&&(b[a]=b[a].bind(b))})};d.getCoordinatesCenter=function(a){for(var b=1/0,c=1/0,e=-(1/0),d=-(1/0),g=0;g<a.length;g++)b=
Math.min(b,a[g].column),c=Math.min(c,a[g].row),e=Math.max(e,a[g].column),d=Math.max(d,a[g].row);a=Math.max(0,Math.floor(-Math.log(Math.max(e-b,d-c))/Math.LN2));return(new h((b+e)/2,(c+d)/2,0)).zoomTo(a)};d.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)};d.mapObject=function(a,b,c){var e={},d;for(d in a)e[d]=b.call(c||this,a[d],d,a);return e};d.filterObject=function(a,b,c){var e={},d;for(d in a)b.call(c||this,a[d],d,a)&&(e[d]=a[d]);return e};d.deepEqual=function(a,b){if(Array.isArray(a)){if(!Array.isArray(b)||
a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!d.deepEqual(a[c],b[c]))return!1;return!0}if("object"==typeof a&&null!==a&&null!==b){if("object"!=typeof b||Object.keys(a).length!==Object.keys(b).length)return!1;for(c in a)if(!d.deepEqual(a[c],b[c]))return!1;return!0}return a===b};d.clone=function(a){return Array.isArray(a)?a.map(d.clone):"object"==typeof a&&a?d.mapObject(a,d.clone):a};d.arraysIntersect=function(a,b){for(var c=0;c<a.length;c++)if(0<=b.indexOf(a[c]))return!0;return!1};var c=
{};d.warnOnce=function(a){c[a]||("undefined"!=typeof console&&console.warn(a),c[a]=!0)};d.isCounterClockwise=function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)};d.calculateSignedArea=function(a){for(var b=0,c=0,d=a.length,e=d-1,g;c<d;e=c++)g=a[c],e=a[e],b+=(e.x-g.x)*(g.y+e.y);return b};d.isClosedPolygon=function(a){if(4>a.length)return!1;var b=a[0],c=a[a.length-1];return!(0<Math.abs(b.x-c.x)||0<Math.abs(b.y-c.y))&&.01<Math.abs(d.calculateSignedArea(a))};d.sphericalToCartesian=function(a){var b=
a[0],c=a[1];a=a[2];return c+=90,c*=Math.PI/180,a*=Math.PI/180,[b*Math.cos(c)*Math.sin(a),b*Math.sin(c)*Math.sin(a),b*Math.cos(a)]};d.parseCacheControl=function(a){var b={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(a,c,d,e){a=d||e;return b[c]=!a||a.toLowerCase(),""}),b["max-age"])a=parseInt(b["max-age"],10),isNaN(a)?delete b["max-age"]:b["max-age"]=a;return b}},{"../geo/coordinate":61,
"@mapbox/unitbezier":3,"point-geometry":26}],215:[function(g,l,d){g=function(b,d,a,c){this.type="Feature";this._vectorTileFeature=b;b._z=d;b._x=a;b._y=c;this.properties=b.properties;null!=b.id&&(this.id=b.id)};d={geometry:{}};d.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};d.geometry.set=function(b){this._geometry=b};g.prototype.toJSON=
function(){var b={geometry:this.geometry},d;for(d in this)"_geometry"!==d&&"_vectorTileFeature"!==d&&(b[d]=this[d]);return b};Object.defineProperties(g.prototype,d);l.exports=g},{}],216:[function(g,l,d){var b=g("./script_detection");l.exports=function(d){for(var a="",c=0;c<d.length;c++)var e=d.charCodeAt(c+1)||null,f=d.charCodeAt(c-1)||null,e=(!e||!b.charHasRotatedVerticalOrientation(e)||l.exports.lookup[d[c+1]])&&(!f||!b.charHasRotatedVerticalOrientation(f)||l.exports.lookup[d[c-1]]),a=a+(e&&l.exports.lookup[d[c]]?
l.exports.lookup[d[c]]:d[c]);return a};l.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\u00a2":"\uffe0","\u00a3":"\uffe1","\u00a5":"\uffe5","\u00a6":"\uffe4",
"\u00ac":"\uffe2","\u00af":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15",
"\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":211}],217:[function(g,l,d){var b=g("./web_worker");d=function(){this.active={}};d.prototype.acquire=
function(d){if(!this.workers){var a=g("../").workerCount;for(this.workers=[];this.workers.length<a;)this.workers.push(new b)}return this.active[d]=!0,this.workers.slice()};d.prototype.release=function(b){delete this.active[b];0===Object.keys(this.active).length&&(this.workers.forEach(function(a){a.terminate()}),this.workers=null)};l.exports=d},{"../":65,"./web_worker":195}]},{},[65])(65)});/*
 jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(F,g){"object"==typeof module&&"object"==typeof module.exports?module.exports=F.document?g(F,!0):function(l){if(!l.document)throw Error("jQuery requires a window with a document");return g(l)}:g(F)}("undefined"!=typeof window?window:this,function(F,g){function l(a){var b=a.length,c=p.type(a);return"function"===c||p.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&0<b&&b-1 in a}function d(a,b,c){if(p.isFunction(b))return p.grep(a,function(a,d){return!!b.call(a,d,
a)!==c});if(b.nodeType)return p.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(yb.test(b))return p.filter(b,a,c);b=p.filter(b,a)}return p.grep(a,function(a){return 0<=p.inArray(a,b)!==c})}function b(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function h(a){var b=ab[a]={};return p.each(a.match(la)||[],function(a,c){b[c]=!0}),b}function a(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",c,!1),F.removeEventListener("load",c,!1)):(Q.detachEvent("onreadystatechange",
c),F.detachEvent("onload",c))}function c(){(Q.addEventListener||"load"===event.type||"complete"===Q.readyState)&&(a(),p.ready())}function e(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(Eb,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Fb.test(c)?p.parseJSON(c):c}catch(Db){}p.data(a,b,c)}else c=void 0}return c}function f(a){for(var b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function k(a,b,c,d){if(p.acceptData(a)){var e,f,g=p.expando,h=a.nodeType,k=h?p.cache:a,O=h?a[g]:a[g]&&g;if(O&&k[O]&&(d||k[O].data)||void 0!==c||"string"!=typeof b)return O||(O=h?a[g]=ga.pop()||p.guid++:g),k[O]||(k[O]=h?{}:{toJSON:p.noop}),("object"==typeof b||"function"==typeof b)&&(d?k[O]=p.extend(k[O],b):k[O].data=p.extend(k[O].data,b)),f=k[O],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[p.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[p.camelCase(b)])):e=f,e}}function n(a,
b,c){if(p.acceptData(a)){var d,e,g=a.nodeType,h=g?p.cache:a,k=g?a[p.expando]:p.expando;if(h[k]){if(b&&(d=c?h[k]:h[k].data)){p.isArray(b)?b=b.concat(p.map(b,p.camelCase)):b in d?b=[b]:(b=p.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];if(c?!f(d):!p.isEmptyObject(d))return}(c||(delete h[k].data,f(h[k])))&&(g?p.cleanData([a],!0):L.deleteExpando||h!=h.window?delete h[k]:h[k]=null)}}}function m(){return!0}function r(){return!1}function u(){try{return Q.activeElement}catch(O){}}
function q(a){var b=bb.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function t(a,b){var c,d,e=0,f="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||p.nodeName(d,b)?f.push(d):p.merge(f,t(d,b));return void 0===b||b&&p.nodeName(a,b)?p.merge([a],f):f}function w(a){Oa.test(a.type)&&(a.defaultChecked=
a.checked)}function v(a,b){return p.nodeName(a,"table")&&p.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function y(a){return a.type=(null!==p.find.attr(a,"type"))+"/"+a.type,a}function A(a){var b=Gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function z(a,b){for(var c,d=0;null!=(c=a[d]);d++)p._data(c,"globalEval",!b||p._data(b[d],"globalEval"))}function B(a,b){if(1===b.nodeType&&p.hasData(a)){var c,
d;var e=p._data(a);var f=p._data(b,e),g=e.events;if(g)for(c in delete f.handle,f.events={},g)for(e=0,d=g[c].length;d>e;e++)p.event.add(b,c,g[c][e]);f.data&&(f.data=p.extend({},f.data))}}function x(a,b){var c,d=p(b.createElement(a)).appendTo(b.body),e=F.getDefaultComputedStyle&&(c=F.getDefaultComputedStyle(d[0]))?c.display:p.css(d[0],"display");return d.detach(),e}function E(a){var b=Q,c=cb[a];return c||(c=x(a,b),"none"!==c&&c||(Ca=(Ca||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),
b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=x(a,b),Ca.detach()),cb[a]=c),c}function C(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function D(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=db.length;e--;)if(b=db[e]+c,b in a)return b;return d}function G(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=p._data(d,"olddisplay"),c=d.style.display,b?(f[g]||
"none"!==c||(d.style.display=""),""===d.style.display&&Da(d)&&(f[g]=p._data(d,"olddisplay",E(d.nodeName)))):(e=Da(d),(c&&"none"!==c||!e)&&p._data(d,"olddisplay",e?c:p.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function H(a,b,c){return(a=Hb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function K(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=
p.css(a,c+ka[b],!0,e)),d?("content"===c&&(f-=p.css(a,"padding"+ka[b],!0,e)),"margin"!==c&&(f-=p.css(a,"border"+ka[b]+"Width",!0,e))):(f+=p.css(a,"padding"+ka[b],!0,e),"padding"!==c&&(f+=p.css(a,"border"+ka[b]+"Width",!0,e)));return f}function J(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ra(a),g=L.boxSizing&&"border-box"===p.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=sa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Fa.test(e))return e;d=g&&(L.boxSizingReliable()||e===a.style[b]);e=parseFloat(e)||
0}return e+K(a,b,c||(g?"border":"content"),d,f)+"px"}function I(a,b,c,d,e){return new I.prototype.init(a,b,c,d,e)}function N(){return setTimeout(function(){pa=void 0}),pa=p.now()}function P(a,b){var c={height:a},d=0;for(b=b?1:0;4>d;d+=2-b){var e=ka[d];c["margin"+e]=c["padding"+e]=a}return b&&(c.opacity=c.width=a),c}function M(a,b,c){for(var d,e=(Ea[b]||[]).concat(Ea["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function S(a,b){var c,d,e,f,g;for(c in a)if(d=p.camelCase(c),e=b[d],f=a[c],
p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d],g&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function U(a,b,c){var d,e=0,f=Ga.length,g=p.Deferred().always(function(){delete h.elem}),h=function(){if(d)return!1;for(var b=pa||N(),b=Math.max(0,k.startTime+k.duration-b),c=1-(b/k.duration||0),e=0,f=k.tweens.length;f>e;e++)k.tweens[e].run(c);return g.notifyWith(a,[k,c,b]),1>c&&f?b:(g.resolveWith(a,[k]),!1)},k=g.promise({elem:a,
props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:pa||N(),duration:c.duration,tweens:[],createTween:function(b,c){var d=p.Tween(a,k.opts,b,c,k.opts.specialEasing[b]||k.opts.easing);return k.tweens.push(d),d},stop:function(b){var c=0,e=b?k.tweens.length:0;if(d)return this;for(d=!0;e>c;c++)k.tweens[c].run(1);return b?g.resolveWith(a,[k,b]):g.rejectWith(a,[k,b]),this}});c=k.props;for(S(c,k.opts.specialEasing);f>e;e++)if(b=Ga[e].call(k,a,c,k.opts))return b;
return p.map(c,M,k),p.isFunction(k.opts.start)&&k.opts.start.call(a,k),p.fx.timer(p.extend(h,{elem:a,anim:k,queue:k.opts.queue})),k.progress(k.opts.progress).done(k.opts.done,k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function T(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(la)||[];if(p.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Y(a,b,c,d){function e(h){var k;
return f[h]=!0,p.each(a[h]||[],function(a,h){var l=h(b,c,d);return"string"!=typeof l||g||f[l]?g?!(k=l):void 0:(b.dataTypes.unshift(l),e(l),!1)}),k}var f={},g=a===Pa;return e(b.dataTypes[0])||!f["*"]&&e("*")}function W(a,b){var c,d,e=p.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&p.extend(!0,a,c),a}function Z(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||Jb.test(a)?d(a,e):Z(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==
p.type(b))d(a,b);else for(e in b)Z(a+"["+e+"]",b[e],c,d)}function X(){try{return new F.XMLHttpRequest}catch(O){}}function ba(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var ga=[],fa=ga.slice,oa=ga.concat,ua=ga.push,ia=ga.indexOf,da={},Aa=da.toString,ea=da.hasOwnProperty,L={},p=function(a,b){return new p.fn.init(a,b)},xb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ab=/^-ms-/,Bb=/-([\da-z])/gi,Cb=function(a,b){return b.toUpperCase()};p.fn=p.prototype={jquery:"1.11.1",constructor:p,
selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:fa.call(this)},pushStack:function(a){a=p.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,a},each:function(a,b){return p.each(this,a,b)},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&b>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ua,sort:ga.sort,splice:ga.splice};p.extend=p.fn.extend=function(){var a,b,c,d,e=arguments[0]||{},f=1,g=arguments.length,h=!1;"boolean"==typeof e&&(h=e,e=arguments[f]||{},f++);"object"==typeof e||p.isFunction(e)||(e={});for(f===g&&(e=this,f--);g>f;f++)if(null!=(c=arguments[f]))for(b in c){var k=e[b];var l=c[b];e!==l&&(h&&l&&(p.isPlainObject(l)||
(a=p.isArray(l)))?(a?(a=!1,d=k&&p.isArray(k)?k:[]):d=k&&p.isPlainObject(k)?k:{},e[b]=p.extend(h,d,l)):void 0!==l&&(e[b]=l))}return e};p.extend({expando:"jQuery"+("1.11.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray||function(a){return"array"===p.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!p.isArray(a)&&0<=a-parseFloat(a)},isEmptyObject:function(a){for(var b in a)return!1;
return!0},isPlainObject:function(a){var b;if(!a||"object"!==p.type(a)||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!ea.call(a,"constructor")&&!ea.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(ja){return!1}if(L.ownLast)for(b in a)return ea.call(a,b);for(b in a);return void 0===b||ea.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?da[Aa.call(a)]||"object":typeof a},globalEval:function(a){a&&p.trim(a)&&(F.execScript||function(a){F.eval.call(F,
a)})(a)},camelCase:function(a){return a.replace(Ab,"ms-").replace(Bb,Cb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=l(a);if(c)if(g)for(;f>e&&(d=b.apply(a[e],c),!1!==d);e++);else for(e in a){if(d=b.apply(a[e],c),!1===d)break}else if(g)for(;f>e&&(d=b.call(a[e],e,a[e]),!1!==d);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),!1===d)break;return a},trim:function(a){return null==a?"":(a+"").replace(xb,"")},makeArray:function(a,
b){var c=b||[];return null!=a&&(l(Object(a))?p.merge(c,"string"==typeof a?[a]:a):ua.call(c,a)),c},inArray:function(a,b,c){if(b){if(ia)return ia.call(b,a,c);var d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;f>e;e++)c=!b(a[e],e),c!==g&&d.push(a[e]);return d},map:function(a,
b,c){var d=0,e=a.length,f=[];if(l(a))for(;e>d;d++){var g=b(a[d],d,c);null!=g&&f.push(g)}else for(d in a)g=b(a[d],d,c),null!=g&&f.push(g);return oa.apply([],f)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),p.isFunction(a)?(c=fa.call(arguments,2),d=function(){return a.apply(b||this,c.concat(fa.call(arguments)))},d.guid=a.guid=a.guid||p.guid++,d):void 0},now:function(){return+new Date},support:L});p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){da["[object "+b+"]"]=b.toLowerCase()});var va=function(a){function b(a,b,c,d){var e,f,g,h,k;if((b?b.ownerDocument||b:K)!==C&&ya(b),b=b||C,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(E&&!d){if(e=ta.exec(a))if(g=e[1])if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&J(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return X.apply(c,b.getElementsByTagName(a)),
c;if((g=e[3])&&aa.getElementsByClassName&&b.getElementsByClassName)return X.apply(c,b.getElementsByClassName(g)),c}if(aa.qsa&&(!F||!F.test(a))){if(f=e=I,g=b,k=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){h=ma(a);(e=b.getAttribute("id"))?f=e.replace(ua,"\\$&"):b.setAttribute("id",f);f="[id='"+f+"'] ";for(g=h.length;g--;)h[g]=f+n(h[g]);g=na.test(a)&&m(b.parentNode)||b;k=h.join(",")}if(k)try{return X.apply(c,g.querySelectorAll(k)),c}catch(xc){}finally{e||b.removeAttribute("id")}}}return x(a.replace(ca,
"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>V.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[I]=!0,a}function e(a){var b=C.createElement("div");try{return!!a(b)}catch(vc){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)V.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function m(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function O(){}function n(a){for(var b=
0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function p(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=M++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,k,l=[L,f];if(g)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(k=b[I]||(b[I]={}),(h=k[d])&&h[0]===L&&h[1]===f)return l[2]=h[2];if(k[d]=l,l[2]=a(b,c,g))return!0}}}function q(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,
c,d))return!1;return!0}:a[0]}function r(a,b,c,d,e){for(var f,g=[],h=0,k=a.length,l=null!=b;k>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),l&&b.push(h));return g}function t(a,c,e,f,g,h){return f&&!f[I]&&(f=t(f)),g&&!g[I]&&(g=t(g,h)),d(function(d,h,k,l){var m,O=[],n=[],p=h.length,R;if(!(R=d)){R=c||"*";for(var q=k.nodeType?[k]:k,ja=[],t=0,u=q.length;u>t;t++)b(R,q[t],ja);R=ja}R=!a||!d&&c?R:r(R,O,a,k,l);q=e?g||(d?a:p||f)?[]:h:R;if(e&&e(R,q,k,l),f){var v=r(q,n);f(v,[],k,l);for(k=v.length;k--;)(m=v[k])&&(q[n[k]]=
!(R[n[k]]=m))}if(d){if(g||a){if(g){v=[];for(k=q.length;k--;)(m=q[k])&&v.push(R[k]=m);g(null,q=[],v,l)}for(k=q.length;k--;)(m=q[k])&&-1<(v=g?Z.call(d,m):O[k])&&(d[v]=!(h[v]=m))}}else q=r(q===h?q.splice(p,q.length):q),g?g(null,h,q,l):X.apply(h,q)})}function u(a){var b,c,d=a.length,e=V.relative[a[0].type];var f=e||V.relative[" "];for(var g=e?1:0,h=p(function(a){return a===b},f,!0),k=p(function(a){return-1<Z.call(b,a)},f,!0),l=[function(a,c,d){return!e&&(d||c!==z)||((b=c).nodeType?h(a,c,d):k(a,c,d))}];d>
g;g++)if(f=V.relative[a[g].type])l=[p(q(l),f)];else{if(f=V.filter[a[g].type].apply(null,a[g].matches),f[I]){for(c=++g;d>c&&!V.relative[a[c].type];c++);return t(1<g&&q(l),1<g&&n(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(ca,"$1"),f,c>g&&u(a.slice(g,c)),d>c&&u(a=a.slice(c)),d>c&&n(a))}l.push(f)}return q(l)}function v(a,c){var e=0<c.length,f=0<a.length,g=function(d,g,h,k,l){var m,O,n,p=0,R="0",q=d&&[],ja=[],t=z,u=d||f&&V.find.TAG("*",l),v=L+=null==t?1:Math.random()||.1,Ba=u.length;
for(l&&(z=g!==C&&g);R!==Ba&&null!=(m=u[R]);R++){if(f&&m){for(O=0;n=a[O++];)if(n(m,g,h)){k.push(m);break}l&&(L=v)}e&&((m=!n&&m)&&p--,d&&q.push(m))}if(p+=R,e&&R!==p){for(O=0;n=c[O++];)n(q,ja,g,h);if(d){if(0<p)for(;R--;)q[R]||ja[R]||(ja[R]=W.call(k));ja=r(ja)}X.apply(k,ja);l&&!d&&0<ja.length&&1<p+c.length&&b.uniqueSort(k)}return l&&(L=v,z=t),q};return e?d(g):g}var w,y,x,z,A,B,C,D,E,F,G,H,J,I="sizzle"+-new Date,K=a.document,L=0,M=0,N=c(),P=c(),Q=c(),S=function(a,b){return a===b&&(B=!0),0},U={}.hasOwnProperty,
T=[],W=T.pop,Y=T.push,X=T.push,ba=T.slice,Z=T.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),fa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)[\\x20\\t\\r\\n\\f]*\\]",ea=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
fa+")*)|.*)\\)|)",ca=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ga=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ia=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,la=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),oa=new RegExp(ea),qa=new RegExp("^"+da+"$"),ka={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+fa),
PSEUDO:new RegExp("^"+ea),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ra=/^(?:input|select|textarea|button)$/i,
sa=/^h\d$/i,ha=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,na=/[+~]/,ua=/'|\\/g,wa=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),xa=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)};try{X.apply(T=ba.call(K.childNodes),K.childNodes),T[K.childNodes.length].nodeType}catch(uc){X={apply:T.length?function(a,b){Y.apply(a,ba.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=
b[d++];);a.length=c-1}}}var aa=b.support={};var va=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var ya=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:K;a=c.defaultView;return c!==C&&9===c.nodeType&&c.documentElement?(C=c,D=c.documentElement,E=!va(c),a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){ya()},!1):a.attachEvent&&a.attachEvent("onunload",function(){ya()})),aa.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),
aa.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),aa.getElementsByClassName=ha.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),aa.getById=e(function(a){return D.appendChild(a).id=I,!c.getElementsByName||!c.getElementsByName(I).length}),aa.getById?(V.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&
E){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},V.filter.ID=function(a){var b=a.replace(wa,xa);return function(a){return a.getAttribute("id")===b}}):(delete V.find.ID,V.filter.ID=function(a){var b=a.replace(wa,xa);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}}),V.find.TAG=aa.getElementsByTagName?function(a,b){return"undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=
b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},V.find.CLASS=aa.getElementsByClassName&&function(a,b){return"undefined"!==typeof b.getElementsByClassName&&E?b.getElementsByClassName(a):void 0},G=[],F=[],(aa.qsa=ha.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&F.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||
F.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||F.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&F.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||F.push(":enabled",":disabled");a.querySelectorAll("*,:x");
F.push(",.*:")})),(aa.matchesSelector=ha.test(H=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&e(function(a){aa.disconnectedMatch=H.call(a,"div");H.call(a,"[s!='']:x");G.push("!=",ea)}),F=F.length&&new RegExp(F.join("|")),G=G.length&&new RegExp(G.join("|")),b=ha.test(D.compareDocumentPosition),J=b||ha.test(D.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):
a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},S=b?function(a,b){if(a===b)return B=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!aa.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===K&&J(K,a)?-1:b===c||b.ownerDocument===K&&J(K,b)?1:A?Z.call(A,a)-Z.call(A,b):0:4&d?-1:1)}:function(a,
b){if(a===b)return B=!0,0;var d=0;var e=a.parentNode;var f=b.parentNode,h=[a],k=[b];if(!e||!f)return a===c?-1:b===c?1:e?-1:f?1:A?Z.call(A,a)-Z.call(A,b):0;if(e===f)return g(a,b);for(e=a;e=e.parentNode;)h.unshift(e);for(e=b;e=e.parentNode;)k.unshift(e);for(;h[d]===k[d];)d++;return d?g(h[d],k[d]):h[d]===K?-1:k[d]===K?1:0},c):C};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==C&&ya(a),c=c.replace(la,"='$1']"),!(!aa.matchesSelector||!E||G&&G.test(c)||
F&&F.test(c)))try{var d=H.call(a,c);if(d||aa.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(wc){}return 0<b(c,C,null,[a]).length};b.contains=function(a,b){return(a.ownerDocument||a)!==C&&ya(a),J(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==C&&ya(a);var c=V.attrHandle[b.toLowerCase()],c=c&&U.call(V.attrHandle,b.toLowerCase())?c(a,b,!E):void 0;return void 0!==c?c:aa.attributes||!E?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(B=!aa.detectDuplicates,A=!aa.sortStable&&a.slice(0),a.sort(S),B){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return A=null,a};var pa=b.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=pa(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d++];)c+=pa(b);return c};var V=b.selectors={cacheLength:50,createPseudo:d,
match:ka,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(wa,xa),a[3]=(a[3]||a[4]||a[5]||"").replace(wa,xa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&
b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ka.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&oa.test(c)&&(b=ma(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(wa,xa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=N[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),
N(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,c,d){return function(e){e=b.attr(e,a);return null==e?"!="===c:c?(e+="","="===c?e===d:"!="===c?e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e+" ").indexOf(d):"|="===c?e===d||e.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==
a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,k){var l;c=f!==g?"nextSibling":"previousSibling";var m=b.parentNode,O=h&&b.nodeName.toLowerCase();k=!k&&!h;if(m){if(f){for(;c;){for(l=b;l=l[c];)if(h?l.nodeName.toLowerCase()===O:1===l.nodeType)return!1;var n=c="only"===a&&!n&&"nextSibling"}return!0}if(n=[g?m.firstChild:m.lastChild],g&&k){k=m[I]||(m[I]={});var p=k[a]||[];var R=p[0]===L&&p[1];var q=p[0]===L&&p[2];for(l=R&&m.childNodes[R];l=++R&&l&&l[c]||(q=
R=0)||n.pop();)if(1===l.nodeType&&++q&&l===b){k[a]=[L,R,q];break}}else if(k&&(p=(b[I]||(b[I]={}))[a])&&p[0]===L)q=p[1];else for(;(l=++R&&l&&l[c]||(q=R=0)||n.pop())&&((h?l.nodeName.toLowerCase()!==O:1!==l.nodeType)||!++q||(k&&((l[I]||(l[I]={}))[a]=[L,q]),l!==b)););return q-=e,q===d||0===q%d&&0<=q/d}}},PSEUDO:function(a,c){var e,f=V.pseudos[a]||V.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[I]?f(c):1<f.length?(e=[a,a,"",c],V.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,
b){for(var d,e=f(a,c),g=e.length;g--;)d=Z.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=y(a.replace(ca,"$1"));return e[I]?d(function(a,b,c,d){var f;c=e(a,null,d,[]);for(d=a.length;d--;)(f=c[d])&&(a[d]=!(b[d]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||pa(b)).indexOf(a)}}),lang:d(function(a){return qa.test(a||
"")||b.error("unsupported lang: "+a),a=a.replace(wa,xa).toLowerCase(),function(b){var c;do if(c=E?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===D},focus:function(a){return a===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===
a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!V.pseudos.empty(a)},header:function(a){return sa.test(a.nodeName)},input:function(a){return ra.test(a.nodeName)},button:function(a){var b=
a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);
return a}),gt:l(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};V.pseudos.nth=V.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})V.pseudos[w]=h(w);for(w in{submit:!0,reset:!0})V.pseudos[w]=k(w);O.prototype=V.filters=V.pseudos;V.setFilters=new O;var ma=b.tokenize=function(a,c){var d,e,f,g,h;if(g=P[a+" "])return c?0:g.slice(0);g=a;var k=[];for(h=V.preFilter;g;){l&&!(d=ga.exec(g))||(d&&(g=g.slice(d[0].length)||g),k.push(e=[]));var l=!1;(d=ia.exec(g))&&(l=d.shift(),
e.push({value:l,type:d[0].replace(ca," ")}),g=g.slice(l.length));for(f in V.filter)!(d=ka[f].exec(g))||h[f]&&!(d=h[f](d))||(l=d.shift(),e.push({value:l,type:f,matches:d}),g=g.slice(l.length));if(!l)break}return c?g.length:g?b.error(a):P(a,k).slice(0)};return y=b.compile=function(a,b){var c,d=[],e=[],f=Q[a+" "];if(!f){b||(b=ma(a));for(c=b.length;c--;)f=u(b[c]),f[I]?d.push(f):e.push(f);f=Q(a,v(e,d));f.selector=a}return f},x=b.select=function(a,b,c,d){var e,f,g,h,k,l="function"==typeof a&&a,O=!d&&ma(a=
l.selector||a);if(c=c||[],1===O.length){if(f=O[0]=O[0].slice(0),2<f.length&&"ID"===(g=f[0]).type&&aa.getById&&9===b.nodeType&&E&&V.relative[f[1].type]){if(b=(V.find.ID(g.matches[0].replace(wa,xa),b)||[])[0],!b)return c;l&&(b=b.parentNode);a=a.slice(f.shift().value.length)}for(e=ka.needsContext.test(a)?0:f.length;e--&&(g=f[e],!V.relative[h=g.type]);)if((k=V.find[h])&&(d=k(g.matches[0].replace(wa,xa),na.test(f[0].type)&&m(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return X.apply(c,d),
c;break}}return(l||y(a,O))(d,b,!E,c,na.test(a)&&m(b.parentNode)||b),c},aa.sortStable=I.split("").sort(S).join("")===I,aa.detectDuplicates=!!B,ya(),aa.sortDetached=e(function(a){return 1&a.compareDocumentPosition(C.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),aa.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",
""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(F);p.find=va;p.expr=va.selectors;p.expr[":"]=p.expr.pseudos;
p.unique=va.uniqueSort;p.text=va.getText;p.isXMLDoc=va.isXML;p.contains=va.contains;var Za=p.expr.match.needsContext,$a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,yb=/^.[^:#\[\.,]*$/;p.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?p.find.matchesSelector(d,a)?[d]:[]:p.find.matches(a,p.grep(b,function(a){return 1===a.nodeType}))};p.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(p(a).filter(function(){for(b=0;e>b;b++)if(p.contains(d[b],
this))return!0}));for(b=0;e>b;b++)p.find(a,d[b],c);return c=this.pushStack(1<e?p.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&Za.test(a)?p(a):a||[],!1).length}});var Q=F.document,zb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&
">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:zb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||Ha).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof p?b[0]:b,p.merge(this,p.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Q,!0)),$a.test(c[1])&&p.isPlainObject(b))for(c in b)p.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=Q.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return Ha.find(a);this.length=1;this[0]=d}return this.context=Q,this.selector=a,this}return a.nodeType?
(this.context=this[0]=a,this.length=1,this):p.isFunction(a)?"undefined"!=typeof Ha.ready?Ha.ready(a):a(p):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))}).prototype=p.fn;var Ha=p(Q);var Mb=/^(?:parents|prev(?:Until|All))/,Nb={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(a,b,c){var d=[];for(a=a[b];a&&9!==a.nodeType&&(void 0===c||1!==a.nodeType||!p(a).is(c));)1===a.nodeType&&d.push(a),a=a[b];return d},sibling:function(a,b){for(var c=[];a;a=
a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});p.fn.extend({has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(p.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Za.test(a)||"string"!=typeof a?p(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&p.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?p.unique(f):f)},
index:function(a){return a?"string"==typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(p.unique(p.merge(this.get(),p(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,
"parentNode",c)},next:function(a){return b(a,"nextSibling")},prev:function(a){return b(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,
"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=p.filter(d,e)),1<this.length&&(Nb[a]||(e=p.unique(e)),Mb.test(a)&&(e=e.reverse())),this.pushStack(e)}});var la=/\S+/g,ab={};p.Callbacks=function(a){a="string"==typeof a?ab[a]||h(a):p.extend({},a);var b,c,d,e,f,g,k=[],l=!a.once&&[],m=function(h){c=a.memory&&h;d=!0;f=g||0;g=0;e=k.length;for(b=!0;k&&e>f;f++)if(!1===
k[f].apply(h[0],h[1])&&a.stopOnFalse){c=!1;break}b=!1;k&&(l?l.length&&m(l.shift()):c?k=[]:O.disable())},O={add:function(){if(k){var d=k.length;!function Kb(b){p.each(b,function(b,c){var d=p.type(c);"function"===d?a.unique&&O.has(c)||k.push(c):c&&c.length&&"string"!==d&&Kb(c)})}(arguments);b?e=k.length:c&&(g=d,m(c))}return this},remove:function(){return k&&p.each(arguments,function(a,c){for(var d;-1<(d=p.inArray(c,k,d));)k.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?-1<p.inArray(a,
k):!(!k||!k.length)},empty:function(){return k=[],e=0,this},disable:function(){return k=l=c=void 0,this},disabled:function(){return!k},lock:function(){return l=void 0,c||O.disable(),this},locked:function(){return!l},fireWith:function(a,c){return!k||d&&!l||(c=c||[],c=[a,c.slice?c.slice():c],b?l.push(c):m(c)),this},fire:function(){return O.fireWith(this,arguments),this},fired:function(){return!!d}};return O};p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],
["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,f){var g=p.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():
this,g?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock);e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this};e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=fa.call(arguments),d=c.length,e=1!==d||a&&p.isFunction(a.promise)?d:0,f=1===e?a:p.Deferred(),g=function(a,
b,c){return function(d){b[a]=this;c[a]=1<arguments.length?fa.call(arguments):d;c===k?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h;if(1<d){var k=Array(d);var l=Array(d);for(h=Array(d);d>b;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,h,c)).fail(f.reject).progress(g(b,l,k)):--e}return e||f.resolveWith(h,c),f.promise()}});var Ia;p.fn.ready=function(a){return p.ready.promise().done(a),this};p.extend({isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(!0===
a?!--p.readyWait:!p.isReady){if(!Q.body)return setTimeout(p.ready);p.isReady=!0;!0!==a&&0<--p.readyWait||(Ia.resolveWith(Q,[p]),p.fn.triggerHandler&&(p(Q).triggerHandler("ready"),p(Q).off("ready")))}}});p.ready.promise=function(b){if(!Ia)if(Ia=p.Deferred(),"complete"===Q.readyState)setTimeout(p.ready);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",c,!1),F.addEventListener("load",c,!1);else{Q.attachEvent("onreadystatechange",c);F.attachEvent("onload",c);var d=!1;try{d=null==F.frameElement&&
Q.documentElement}catch(ja){}d&&d.doScroll&&!function Ba(){if(!p.isReady){try{d.doScroll("left")}catch(Db){return setTimeout(Ba,50)}a();p.ready()}}()}return Ia.promise(b)};for(var Ob in p(L))break;L.ownLast="0"!==Ob;L.inlineBlockNeedsLayout=!1;p(function(){var a,b,c,d;(c=Q.getElementsByTagName("body")[0])&&c.style&&(b=Q.createElement("div"),d=Q.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),"undefined"!==typeof b.style.zoom&&
(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",L.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))});(function(){var a=Q.createElement("div");if(null==L.deleteExpando){L.deleteExpando=!0;try{delete a.test}catch(R){L.deleteExpando=!1}}})();p.acceptData=function(a){var b=p.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||!0!==b&&a.getAttribute("classid")===b};var Fb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Eb=
/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!f(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return n(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return n(a,b,!0)}});p.fn.extend({data:function(a,b){var c,d,f,g=this[0],h=g&&g.attributes;if(void 0===a){if(this.length&&(f=p.data(g),1===g.nodeType&&
!p._data(g,"parsedAttrs"))){for(c=h.length;c--;)h[c]&&(d=h[c].name,0===d.indexOf("data-")&&(d=p.camelCase(d.slice(5)),e(g,d,f[d])));p._data(g,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){p.data(this,a)}):1<arguments.length?this.each(function(){p.data(this,a,b)}):g?e(g,a,p.data(g,a)):void 0},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?
d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f));!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p._removeData(a,b+"queue");p._removeData(a,c)})})}});p.fn.extend({queue:function(a,
b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?p.queue(this[0],a):void 0===b?this:this.each(function(){var c=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=p.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0);for(a=a||
"fx";g--;)(c=p._data(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Ja=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ka=["Top","Right","Bottom","Left"],Da=function(a,b){return a=b||a,"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)},ha=p.access=function(a,b,c,d,e,f,g){var h=0,k=a.length,l=null==c;if("object"===p.type(c))for(h in e=!0,c)p.access(a,b,h,c[h],!0,f,g);else if(void 0!==d&&(e=!0,p.isFunction(d)||(g=!0),l&&(g?(b.call(a,d),b=null):(l=b,b=function(a,
b,c){return l.call(p(a),c)})),b))for(;k>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:l?b.call(a):k?b(a[0],c):f},Oa=/^(?:checkbox|radio)$/i;!function(){var a=Q.createElement("input"),b=Q.createElement("div"),c=Q.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",L.leadingWhitespace=3===b.firstChild.nodeType,L.tbody=!b.getElementsByTagName("tbody").length,L.htmlSerialize=!!b.getElementsByTagName("link").length,L.html5Clone="<:nav></:nav>"!==
Q.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),L.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",L.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",L.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,L.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){L.noCloneEvent=!1}),b.cloneNode(!0).click()),null==L.deleteExpando){L.deleteExpando=
!0;try{delete b.test}catch(Ba){L.deleteExpando=!1}}}();(function(){var a,b=Q.createElement("div");for(a in{submit:!0,change:!0,focusin:!0}){var c="on"+a;(L[a+"Bubbles"]=c in F)||(b.setAttribute(c,"t"),L[a+"Bubbles"]=!1===b.attributes[c].expando)}})();var Qa=/^(?:input|select|textarea)$/i,Pb=/^key/,Qb=/^(?:mouse|pointer|contextmenu)|click/,fb=/^(?:focusinfocus|focusoutblur)$/,gb=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(a,b,c,d,e){var f,g,h,k,l,m,n,O;if(g=p._data(a)){c.handler&&(h=c,c=
h.handler,e=h.selector);c.guid||(c.guid=p.guid++);(f=g.events)||(f=g.events={});(l=g.handle)||(l=g.handle=function(a){return"undefined"===typeof p||a&&p.event.triggered===a.type?void 0:p.event.dispatch.apply(l.elem,arguments)},l.elem=a);b=(b||"").match(la)||[""];for(g=b.length;g--;){var q=gb.exec(b[g])||[];var r=O=q[1];q=(q[2]||"").split(".").sort();r&&(k=p.event.special[r]||{},r=(e?k.delegateType:k.bindType)||r,k=p.event.special[r]||{},m=p.extend({type:r,origType:O,data:d,handler:c,guid:c.guid,selector:e,
needsContext:e&&p.expr.match.needsContext.test(e),namespace:q.join(".")},h),(n=f[r])||(n=f[r]=[],n.delegateCount=0,k.setup&&!1!==k.setup.call(a,d,q,l)||(a.addEventListener?a.addEventListener(r,l,!1):a.attachEvent&&a.attachEvent("on"+r,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,m):n.push(m),p.event.global[r]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,k,l,m,n,O,q=p.hasData(a)&&p._data(a);if(q&&(l=q.events)){b=(b||"").match(la)||[""];for(k=
b.length;k--;)if(g=gb.exec(b[k])||[],m=O=g[1],n=(g[2]||"").split(".").sort(),m){var r=p.event.special[m]||{};m=(d?r.delegateType:r.bindType)||m;var R=l[m]||[];g=g[2]&&new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=f=R.length;f--;){var t=R[f];!e&&O!==t.origType||c&&c.guid!==t.guid||g&&!g.test(t.namespace)||d&&d!==t.selector&&("**"!==d||!t.selector)||(R.splice(f,1),t.selector&&R.delegateCount--,r.remove&&r.remove.call(a,t))}h&&!R.length&&(r.teardown&&!1!==r.teardown.call(a,n,q.handle)||
p.removeEvent(a,m,q.handle),delete l[m])}else for(m in l)p.event.remove(a,m+b[k],c,d,!0);p.isEmptyObject(l)&&(delete q.handle,p._removeData(a,"events"))}},trigger:function(a,b,c,d){var e,f,g,h,k=[c||Q],l=ea.call(a,"type")?a.type:a;var m=ea.call(a,"namespace")?a.namespace.split("."):[];if(g=e=c=c||Q,3!==c.nodeType&&8!==c.nodeType&&!fb.test(l+p.event.triggered)&&(0<=l.indexOf(".")&&(m=l.split("."),l=m.shift(),m.sort()),f=0>l.indexOf(":")&&"on"+l,a=a[p.expando]?a:new p.Event(l,"object"==typeof a&&a),
a.isTrigger=d?2:3,a.namespace=m.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=c),b=null==b?[a]:p.makeArray(b,[a]),h=p.event.special[l]||{},d||!h.trigger||!1!==h.trigger.apply(c,b))){if(!d&&!h.noBubble&&!p.isWindow(c)){var n=h.delegateType||l;for(fb.test(n+l)||(g=g.parentNode);g;g=g.parentNode)k.push(g),e=g;e===(c.ownerDocument||Q)&&k.push(e.defaultView||e.parentWindow||F)}for(m=0;(g=k[m++])&&!a.isPropagationStopped();)a.type=
1<m?n:h.bindType||l,(e=(p._data(g,"events")||{})[a.type]&&p._data(g,"handle"))&&e.apply(g,b),(e=f&&g[f])&&e.apply&&p.acceptData(g)&&(a.result=e.apply(g,b),!1===a.result&&a.preventDefault());if(a.type=l,!(d||a.isDefaultPrevented()||h._default&&!1!==h._default.apply(k.pop(),b))&&p.acceptData(c)&&f&&c[l]&&!p.isWindow(c)){(e=c[f])&&(c[f]=null);p.event.triggered=l;try{c[l]()}catch(Ib){}p.event.triggered=void 0;e&&(c[f]=e)}return a.result}},dispatch:function(a){a=p.event.fix(a);var b,c,d,e,f=fa.call(arguments);
var g=(p._data(this,"events")||{})[a.type]||[];var h=p.event.special[a.type]||{};if(f[0]=a,a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){var k=p.event.handlers.call(this,a,g);for(g=0;(d=k[g++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,e=0;(c=d.handlers[e++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(c.namespace)||(a.handleObj=c,a.data=c.data,b=((p.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,f),void 0===b||!1!==
(a.result=b)||(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d=[],e=b.delegateCount,f=a.target;if(e&&f.nodeType&&(!a.button||"click"!==a.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(!0!==f.disabled||"click"!==a.type)){var g=[];for(c=0;e>c;c++){var h=b[c];var k=h.selector+" ";void 0===g[k]&&(g[k]=h.needsContext?0<=p(k,this).index(f):p.find(k,this,null,[f]).length);g[k]&&g.push(h)}g.length&&d.push({elem:f,
handlers:g})}return e<b.length&&d.push({elem:this,handlers:b.slice(e)}),d},fix:function(a){if(a[p.expando])return a;var b=a.type;var c=a,d=this.fixHooks[b];d||(this.fixHooks[b]=d=Qb.test(b)?this.mouseHooks:Pb.test(b)?this.keyHooks:{});var e=d.props?this.props.concat(d.props):this.props;a=new p.Event(c);for(b=e.length;b--;){var f=e[b];a[f]=c[f]}return a.target||(a.target=c.srcElement||Q),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,d.filter?d.filter(a,c):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||Q,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&
e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(O){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return p.nodeName(this,
"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return p.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.removeEvent=Q.removeEventListener?function(a,b,c){a.removeEventListener&&
a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};p.Event=function(a,b){return this instanceof p.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?m:r):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(a,b)};p.Event.prototype={isDefaultPrevented:r,isPropagationStopped:r,
isImmediatePropagationStopped:r,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};p.each({mouseenter:"mouseover",
mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;return(!d||d!==this&&!p.contains(this,d))&&(a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b),c}}});L.submitBubbles||(p.event.special.submit={setup:function(){return p.nodeName(this,"form")?!1:void p.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=p.nodeName(a,"input")||
p.nodeName(a,"button")?a.form:void 0)&&!p._data(a,"submitBubbles")&&(p.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),p._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return p.nodeName(this,"form")?!1:void p.event.remove(this,"._submit")}});L.changeBubbles||(p.event.special.change={setup:function(){return Qa.test(this.nodeName)?(("checkbox"===
this.type||"radio"===this.type)&&(p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);p.event.simulate("change",this,a,!0)})),!1):void p.event.add(this,"beforeactivate._change",function(a){a=a.target;Qa.test(a.nodeName)&&!p._data(a,"changeBubbles")&&(p.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||
p.event.simulate("change",this.parentNode,a,!0)}),p._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return p.event.remove(this,"._change"),!Qa.test(this.nodeName)}});L.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){var d=
this.ownerDocument||this,e=p._data(d,b);e||d.addEventListener(a,c,!0);p._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=p._data(d,b)-1;e?p._data(d,b,e):(d.removeEventListener(a,c,!0),p._removeData(d,b))}}});p.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d)d=r;else if(!d)return this;
return 1===e&&(g=d,d=function(a){return p().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,p(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(!1===b||"function"==typeof b)&&(c=
b,b=void 0),!1===c&&(c=r),this.each(function(){p.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?p.event.trigger(a,b,c,!0):void 0}});var bb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Rb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+bb+")[\\s/>]","i"),Ra=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
jb=/<([\w:]+)/,kb=/<tbody/i,Sb=/<|&#?\w+;/,Tb=/<(?:script|style|link)/i,Ub=/checked\s*(?:[^=]|=\s*.checked.)/i,lb=/^$|\/(?:java|ecma)script/i,Gb=/^true\/(.*)/,Vb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ca={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,
"<table><tbody><tr>","</tr></tbody></table>"],_default:L.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Sa=q(Q).appendChild(Q.createElement("div"));ca.optgroup=ca.option;ca.tbody=ca.tfoot=ca.colgroup=ca.caption=ca.thead;ca.th=ca.td;p.extend({clone:function(a,b,c){var d,e,f,g=p.contains(a.ownerDocument,a);if(L.html5Clone||p.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?e=a.cloneNode(!0):(Sa.innerHTML=a.outerHTML,Sa.removeChild(e=Sa.firstChild)),!(L.noCloneEvent&&L.noCloneChecked||1!==a.nodeType&&11!==
a.nodeType||p.isXMLDoc(a))){var h=t(e);var k=t(a);for(f=0;null!=(d=k[f]);++f)if(h[f]){var l=void 0,m,n=d,q=h[f];if(1===q.nodeType){if(m=q.nodeName.toLowerCase(),!L.noCloneEvent&&q[p.expando]){d=p._data(q);for(l in d.events)p.removeEvent(q,l,d.handle);q.removeAttribute(p.expando)}"script"===m&&q.text!==n.text?(y(q).text=n.text,A(q)):"object"===m?(q.parentNode&&(q.outerHTML=n.outerHTML),L.html5Clone&&n.innerHTML&&!p.trim(q.innerHTML)&&(q.innerHTML=n.innerHTML)):"input"===m&&Oa.test(n.type)?(q.defaultChecked=
q.checked=n.checked,q.value!==n.value&&(q.value=n.value)):"option"===m?q.defaultSelected=q.selected=n.defaultSelected:("input"===m||"textarea"===m)&&(q.defaultValue=n.defaultValue)}}}if(b)if(c)for(k=k||t(a),h=h||t(e),f=0;null!=(d=k[f]);f++)B(d,h[f]);else B(a,e);return h=t(e,"script"),0<h.length&&z(h,!g&&t(a,"script")),e},buildFragment:function(a,b,c,d){for(var e,f,g,h,k,l,m,n=a.length,O=q(b),r=[],u=0;n>u;u++)if(f=a[u],f||0===f)if("object"===p.type(f))p.merge(r,f.nodeType?[f]:f);else if(Sb.test(f)){h=
h||O.appendChild(b.createElement("div"));k=(jb.exec(f)||["",""])[1].toLowerCase();m=ca[k]||ca._default;h.innerHTML=m[1]+f.replace(ib,"<$1></$2>")+m[2];for(e=m[0];e--;)h=h.lastChild;if(!L.leadingWhitespace&&Ra.test(f)&&r.push(b.createTextNode(Ra.exec(f)[0])),!L.tbody)for(e=(f="table"!==k||kb.test(f)?"<table>"!==m[1]||kb.test(f)?0:h:h.firstChild)&&f.childNodes.length;e--;)p.nodeName(l=f.childNodes[e],"tbody")&&!l.childNodes.length&&f.removeChild(l);p.merge(r,h.childNodes);for(h.textContent="";h.firstChild;)h.removeChild(h.firstChild);
h=O.lastChild}else r.push(b.createTextNode(f));h&&O.removeChild(h);L.appendChecked||p.grep(t(r,"input"),w);for(u=0;f=r[u++];)if((!d||-1===p.inArray(f,d))&&(g=p.contains(f.ownerDocument,f),h=t(O.appendChild(f),"script"),g&&z(h),c))for(e=0;f=h[e++];)lb.test(f.type||"")&&c.push(f);return O},cleanData:function(a,b){for(var c,d,e,f,g=0,h=p.expando,k=p.cache,l=L.deleteExpando,m=p.event.special;null!=(c=a[g]);g++)if((b||p.acceptData(c))&&(e=c[h],f=e&&k[e])){if(f.events)for(d in f.events)m[d]?p.event.remove(c,
d):p.removeEvent(c,d,f.handle);k[e]&&(delete k[e],l?delete c[h]:"undefined"!==typeof c.removeAttribute?c.removeAttribute(h):c[h]=null,ga.push(e))}}});p.fn.extend({text:function(a){return ha(this,function(a){return void 0===a?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||v(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,
function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=v(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?p.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||p.cleanData(t(c)),c.parentNode&&
(b&&p.contains(c.ownerDocument,c)&&z(t(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&p.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&p.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return ha(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===
b.nodeType?b.innerHTML.replace(Rb,""):void 0;if(!("string"!=typeof a||Tb.test(a)||!L.htmlSerialize&&hb.test(a)||!L.leadingWhitespace&&Ra.test(a)||ca[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(p.cleanData(t(b,!1)),b.innerHTML=a);b=0}catch(rc){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode;p.cleanData(t(this));a&&a.replaceChild(b,
this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=oa.apply([],a);var c,d,e,f=0,g=this.length,h=this,k=g-1,l=a[0],m=p.isFunction(l);if(m||1<g&&"string"==typeof l&&!L.checkClone&&Ub.test(l))return this.each(function(c){var d=h.eq(c);m&&(a[0]=l.call(this,c,d.html()));d.domManip(a,b)});if(g&&(e=p.buildFragment(a,this[0].ownerDocument,!1,this),c=e.firstChild,1===e.childNodes.length&&(e=c),c)){var n=p.map(t(e,"script"),y);for(d=n.length;g>
f;f++)c=e,f!==k&&(c=p.clone(c,!0,!0),d&&p.merge(n,t(c,"script"))),b.call(this[f],c,f);if(d)for(e=n[n.length-1].ownerDocument,p.map(n,A),f=0;d>f;f++)c=n[f],lb.test(c.type||"")&&!p._data(c,"globalEval")&&p.contains(e,c)&&(c.src?p._evalUrl&&p._evalUrl(c.src):p.globalEval((c.text||c.textContent||c.innerHTML||"").replace(Vb,"")));e=c=null}return this}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(a){for(var c=
0,d=[],e=p(a),f=e.length-1;f>=c;c++)a=c===f?this:this.clone(!0),p(e[c])[b](a),ua.apply(d,a.get());return this.pushStack(d)}});var Ca,cb={};!function(){var a;L.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=Q.getElementsByTagName("body")[0],c&&c.style?(b=Q.createElement("div"),d=Q.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),"undefined"!==typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",
b.appendChild(Q.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var mb=/^margin/,Fa=new RegExp("^("+Ja+")(?!px)[a-z%]+$","i"),ra,sa,Wb=/^(top|right|bottom|left)$/;F.getComputedStyle?(ra=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||p.contains(a.ownerDocument,a)||(g=p.style(a,b)),Fa.test(g)&&mb.test(b)&&(d=h.width,e=h.minWidth,
f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):Q.documentElement.currentStyle&&(ra=function(a){return a.currentStyle},sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Fa.test(g)&&!Wb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});!function(){var a,
b,c,d,e,f,g;if(a=Q.createElement("div"),a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=a.getElementsByTagName("a")[0],b=c&&c.style){var h=function(){var a,b,c,h;(b=Q.getElementsByTagName("body")[0])&&b.style&&(a=Q.createElement("div"),c=Q.createElement("div"),c.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",b.appendChild(c).appendChild(a),a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
d=e=!1,g=!0,F.getComputedStyle&&(d="1%"!==(F.getComputedStyle(a,null)||{}).top,e="4px"===(F.getComputedStyle(a,null)||{width:"4px"}).width,h=a.appendChild(Q.createElement("div")),h.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",h.style.marginRight=h.style.width="0",a.style.width="1px",g=!parseFloat((F.getComputedStyle(h,null)||{}).marginRight)),a.innerHTML="<table><tr><td></td><td>t</td></tr></table>",
h=a.getElementsByTagName("td"),h[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===h[0].offsetHeight,f&&(h[0].style.display="",h[1].style.display="none",f=0===h[0].offsetHeight),b.removeChild(c))};b.cssText="float:left;opacity:.5";L.opacity="0.5"===b.opacity;L.cssFloat=!!b.cssFloat;a.style.backgroundClip="content-box";a.cloneNode(!0).style.backgroundClip="";L.clearCloneStyle="content-box"===a.style.backgroundClip;L.boxSizing=""===b.boxSizing||""===b.MozBoxSizing||""===b.WebkitBoxSizing;
p.extend(L,{reliableHiddenOffsets:function(){return null==f&&h(),f},boxSizingReliable:function(){return null==e&&h(),e},pixelPosition:function(){return null==d&&h(),d},reliableMarginRight:function(){return null==g&&h(),g}})}}();p.swap=function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c};var Ta=/alpha\([^)]*\)/i,Xb=/opacity\s*=\s*([^)]*)/,Yb=/^(none|table(?!-c[ea]).+)/,Hb=new RegExp("^("+Ja+")(.*)$","i"),Zb=new RegExp("^([+-])=("+
Ja+")","i"),$b={position:"absolute",visibility:"hidden",display:"block"},nb={letterSpacing:"0",fontWeight:"400"},db=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":L.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&
a.style){var e,f,g,h=p.camelCase(b),k=a.style;if(b=p.cssProps[h]||(p.cssProps[h]=D(k,h)),g=p.cssHooks[b]||p.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:k[b];if(f=typeof c,"string"===f&&(e=Zb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(p.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||p.cssNumber[h]||(c+="px"),L.clearCloneStyle||""!==c||0!==b.indexOf("background")||(k[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{k[b]=c}catch(tc){}}},css:function(a,b,c,d){var e,
f,g,h=p.camelCase(b);return b=p.cssProps[h]||(p.cssProps[h]=D(a.style,h)),g=p.cssHooks[b]||p.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=sa(a,b,d)),"normal"===f&&b in nb&&(f=nb[b]),""===c||c?(e=parseFloat(f),!0===c||p.isNumeric(e)?e||0:f):f}});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){return c?Yb.test(p.css(a,"display"))&&0===a.offsetWidth?p.swap(a,$b,function(){return J(a,b,d)}):J(a,b,d):void 0},set:function(a,c,d){var e=d&&ra(a);return H(a,c,d?K(a,
b,d,L.boxSizing&&"border-box"===p.css(a,"boxSizing",!1,e),e):0)}}});L.opacity||(p.cssHooks.opacity={get:function(a,b){return Xb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;(1<=b||""===b)&&""===p.trim(f.replace(Ta,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ta.test(f)?
f.replace(Ta,e):f+" "+e)}});p.cssHooks.marginRight=C(L.reliableMarginRight,function(a,b){return b?p.swap(a,{display:"inline-block"},sa,[a,"marginRight"]):void 0});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+ka[d]+b]=c[d]||c[d-2]||c[0];return e}};mb.test(a)||(p.cssHooks[a+b].set=H)});p.fn.extend({css:function(a,b){return ha(this,function(a,b,c){var d,e={},f=0;if(p.isArray(b)){c=ra(a);
for(d=b.length;d>f;f++)e[b[f]]=p.css(a,b[f],!1,c);return e}return void 0!==c?p.style(a,b,c):p.css(a,b)},a,b,1<arguments.length)},show:function(){return G(this,!0)},hide:function(){return G(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Da(this)?p(this).show():p(this).hide()})}});p.Tween=I;I.prototype={constructor:I,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=
f||(p.cssNumber[c]?"":"px")},cur:function(){var a=I.propHooks[this.prop];return a&&a.get?a.get(this):I.propHooks._default.get(this)},run:function(a){var b,c=I.propHooks[this.prop];return this.pos=b=this.options.duration?p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):I.propHooks._default.set(this),this}};I.prototype.init.prototype=I.prototype;
I.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=p.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.easing={linear:function(a){return a},
swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.fx=I.prototype.init;p.fx.step={};var pa,Ka,ac=/^(?:toggle|show|hide)$/,ob=new RegExp("^(?:([+-])=|)("+Ja+")([a-z%]*)$","i"),bc=/queueHooks$/,Ga=[function(a,b,c){var d,e,f,g,h,k,l,m=this,n={},q=a.style,r=a.nodeType&&Da(a),t=p._data(a,"fxshow");c.queue||(g=p._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--;p.queue(a,"fx").length||
g.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[q.overflow,q.overflowX,q.overflowY],k=p.css(a,"display"),l="none"===k?p._data(a,"olddisplay")||E(a.nodeName):k,"inline"===l&&"none"===p.css(a,"float")&&(L.inlineBlockNeedsLayout&&"inline"!==E(a.nodeName)?q.zoom=1:q.display="inline-block"));c.overflow&&(q.overflow="hidden",L.shrinkWrapBlocks()||m.always(function(){q.overflow=c.overflow[0];q.overflowX=c.overflow[1];q.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],
f=f||"toggle"===e,e===(r?"hide":"show")){if("show"!==e||!t||void 0===t[d])continue;r=!0}n[d]=t&&t[d]||p.style(a,d)}else k=void 0;if(p.isEmptyObject(n))"inline"===("none"===k?E(a.nodeName):k)&&(q.display=k);else for(d in t?"hidden"in t&&(r=t.hidden):t=p._data(a,"fxshow",{}),f&&(t.hidden=!r),r?p(a).show():m.done(function(){p(a).hide()}),m.done(function(){var b;p._removeData(a,"fxshow");for(b in n)p.style(a,b,n[b])}),n)b=M(r?t[d]:0,d,m),d in t||(t[d]=b.start,r&&(b.end=b.start,b.start="width"===d||"height"===
d?1:0))}],Ea={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=ob.exec(b),f=e&&e[3]||(p.cssNumber[a]?"":"px"),g=(p.cssNumber[a]||"px"!==f&&+d)&&ob.exec(p.css(c.elem,a)),h=1,k=20;if(g&&g[3]!==f){f=f||g[3];e=e||[];g=+d||1;do h=h||".5",g/=h,p.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--k)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};p.Animation=p.extend(U,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>
d;d++)c=a[d],Ea[c]=Ea[c]||[],Ea[c].unshift(b)},prefilter:function(a,b){b?Ga.unshift(a):Ga.push(a)}});p.speed=function(a,b,c){var d=a&&"object"==typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};return d.duration=p.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default,(null==d.queue||!0===d.queue)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this);
d.queue&&p.dequeue(this,d.queue)},d};p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d);b=function(){var b=U(this,p.extend({},a),f);(e||p._data(this,"finish"))&&b.stop(!0)};return b.finish=b,e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==
a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=p.timers,g=p._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&bc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||p.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b=p._data(this),c=b[a+"queue"];var d=b[a+"queueHooks"];var e=p.timers,f=c?c.length:0;b.finish=!0;p.queue(this,
a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=e.length;d--;)e[d].elem===this&&e[d].queue===a&&(e[d].anim.stop(!0),e.splice(d,1));for(d=0;f>d;d++)c[d]&&c[d].finish&&c[d].finish.call(this);delete b.finish})}});p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(P(b,!0),a,d,e)}});p.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});p.timers=[];p.fx.tick=function(){var a=p.timers,b=0;for(pa=p.now();b<a.length;b++){var c=a[b];c()||a[b]!==c||a.splice(b--,1)}a.length||p.fx.stop();pa=void 0};p.fx.timer=function(a){p.timers.push(a);a()?p.fx.start():p.timers.pop()};p.fx.interval=13;p.fx.start=function(){Ka||(Ka=setInterval(p.fx.tick,p.fx.interval))};p.fx.stop=function(){clearInterval(Ka);Ka=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(a,
b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=Q.createElement("div");a.setAttribute("className","t");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";var b=a.getElementsByTagName("a")[0];var c=Q.createElement("select");var d=c.appendChild(Q.createElement("option"));var e=a.getElementsByTagName("input")[0];b.style.cssText="top:1px";L.getSetAttribute="t"!==a.className;
L.style=/top/.test(b.getAttribute("style"));L.hrefNormalized="/a"===b.getAttribute("href");L.checkOn=!!e.value;L.optSelected=d.selected;L.enctype=!!Q.createElement("form").enctype;c.disabled=!0;L.optDisabled=!d.disabled;e=Q.createElement("input");e.setAttribute("value","");L.input=""===e.getAttribute("value");e.value="t";e.setAttribute("type","radio");L.radioValue="t"===e.value})();var cc=/\r/g;p.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=p.isFunction(a),this.each(function(c){var e;
1===this.nodeType&&(e=d?a.call(this,c,p(this).val()):a,null==e?e="":"number"==typeof e?e+="":p.isArray(e)&&(e=p.map(e,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=p.valHooks[e.type]||p.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(cc,""):null==c?"":c)}});p.extend({valHooks:{option:{get:function(a){var b=
p.find.attr(a,"value");return null!=b?b:p.trim(p.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e="select-one"===a.type||0>d,f=e?null:[],g=e?d+1:c.length,h=0>d?g:e?d:0;g>h;h++)if(b=c[h],!(!b.selected&&h!==d||(L.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){if(a=p(b).val(),e)return a;f.push(a)}return f},set:function(a,b){for(var c,d,e=a.options,f=p.makeArray(b),g=e.length;g--;)if(d=e[g],0<=p.inArray(p.valHooks.option.get(d),
f))try{d.selected=c=!0}catch(sc){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,b){return p.isArray(b)?a.checked=0<=p.inArray(p(a).val(),b):void 0}};L.checkOn||(p.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ma,qa=p.expr.attrHandle,Ua=/^(?:checked|selected)$/i,ta=L.getSetAttribute,La=L.input;p.fn.extend({attr:function(a,b){return ha(this,p.attr,a,b,1<arguments.length)},
removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})}});p.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return"undefined"===typeof a.getAttribute?p.prop(a,b,c):(1===f&&p.isXMLDoc(a)||(b=b.toLowerCase(),d=p.attrHooks[b]||(p.expr.match.bool.test(b)?dc:ma)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=p.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void p.removeAttr(a,b))},removeAttr:function(a,
b){var c,d=0,e=b&&b.match(la);if(e&&1===a.nodeType)for(;c=e[d++];){var f=p.propFix[c]||c;p.expr.match.bool.test(c)?La&&ta||!Ua.test(c)?a[f]=!1:a[p.camelCase("default-"+c)]=a[f]=!1:p.attr(a,c,"");a.removeAttribute(ta?c:f)}},attrHooks:{type:{set:function(a,b){if(!L.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}});var dc={set:function(a,b,c){return!1===b?p.removeAttr(a,c):La&&ta||!Ua.test(c)?a.setAttribute(!ta&&p.propFix[c]||c,c):a[p.camelCase("default-"+
c)]=a[c]=!0,c}};p.each(p.expr.match.bool.source.match(/\w+/g),function(a,b){var c=qa[b]||p.find.attr;qa[b]=La&&ta||!Ua.test(b)?function(a,b,d){var e,f;return d||(f=qa[b],qa[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,qa[b]=f),e}:function(a,b,c){return c?void 0:a[p.camelCase("default-"+b)]?b.toLowerCase():null}});La&&ta||(p.attrHooks.value={set:function(a,b,c){return p.nodeName(a,"input")?void(a.defaultValue=b):ma&&ma.set(a,b,c)}});ta||(ma={set:function(a,b,c){var d=a.getAttributeNode(c);return d||
a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},qa.id=qa.name=qa.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},p.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:ma.set},p.attrHooks.contenteditable={set:function(a,b,c){ma.set(a,""===b?!1:b,c)}},p.each(["width","height"],function(a,b){p.attrHooks[b]={set:function(a,c){return""===
c?(a.setAttribute(b,"auto"),c):void 0}}}));L.style||(p.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var ec=/^(?:input|select|textarea|button|object)$/i,fc=/^(?:a|area)$/i;p.fn.extend({prop:function(a,b){return ha(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(R){}})}});p.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,
b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!p.isXMLDoc(a),f&&(b=p.propFix[b]||b,e=p.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=p.find.attr(a,"tabindex");return b?parseInt(b,10):ec.test(a.nodeName)||fc.test(a.nodeName)&&a.href?0:-1}}}});L.hrefNormalized||p.each(["href","src"],function(a,b){p.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});L.optSelected||
(p.propHooks.selected={get:function(a){a=a.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){p.propFix[this.toLowerCase()]=this});L.enctype||(p.propFix.enctype="encoding");var Va=/[\t\r\n\f]/g;p.fn.extend({addClass:function(a){var b,c,d,e,f=0,g=this.length;var h="string"==typeof a&&a;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,
b,this.className))});if(h)for(h=(a||"").match(la)||[];g>f;f++)if(b=this[f],c=1===b.nodeType&&(b.className?(" "+b.className+" ").replace(Va," "):" ")){for(e=0;d=h[e++];)0>c.indexOf(" "+d+" ")&&(c+=d+" ");c=p.trim(c);b.className!==c&&(b.className=c)}return this},removeClass:function(a){var b,c,d,e,f=0,g=this.length;var h=0===arguments.length||"string"==typeof a&&a;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(h)for(h=(a||"").match(la)||[];g>
f;f++)if(b=this[f],c=1===b.nodeType&&(b.className?(" "+b.className+" ").replace(Va," "):"")){for(e=0;d=h[e++];)for(;0<=c.indexOf(" "+d+" ");)c=c.replace(" "+d+" "," ");c=a?p.trim(c):"";b.className!==c&&(b.className=c)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(p.isFunction(a)?function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=p(this),f=a.match(la)||
[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else("undefined"===c||"boolean"===c)&&(this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||"")})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Va," ").indexOf(a))return!0;return!1}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){p.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});p.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Wa=p.now(),Xa=/\?/,gc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
p.parseJSON=function(a){if(F.JSON&&F.JSON.parse)return F.JSON.parse(a+"");var b,c=null,d=p.trim(a+"");return d&&!p.trim(d.replace(gc,function(a,d,e,f){return b&&d&&(c=0),0===c?a:(b=e||d,c+=!f-!e,"")}))?Function("return "+d)():p.error("Invalid JSON: "+a)};p.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{F.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(Ba){b=void 0}return b&&b.documentElement&&
!b.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+a),b};var hc=/#.*$/,pb=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jc=/^(?:GET|HEAD)$/,kc=/^\/\//,qb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,rb={},Pa={},sb="*/".concat("*");try{var na=location.href}catch(O){na=Q.createElement("a"),na.href="",na=na.href}var za=qb.exec(na.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:na,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(za[1]),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?W(W(a,
p.ajaxSettings),b):W(p.ajaxSettings,a)},ajaxPrefilter:T(rb),ajaxTransport:T(Pa),ajax:function(a,b){function c(a,b,c,d){var e,l,v,w=b;if(2!==y){y=2;g&&clearTimeout(g);k=void 0;f=d||"";z.readyState=0<a?4:0;d=200<=a&&300>a||304===a;if(c){var x=m;for(var B=z,C,D,E,O,F=x.contents,G=x.dataTypes;"*"===G[0];)G.shift(),void 0===D&&(D=x.mimeType||B.getResponseHeader("Content-Type"));if(D)for(O in F)if(F[O]&&F[O].test(D)){G.unshift(O);break}if(G[0]in c)E=G[0];else{for(O in c){if(!G[0]||x.converters[O+" "+G[0]]){E=
O;break}C||(C=O)}E=E||C}x=E?(E!==G[0]&&G.unshift(E),c[E]):void 0}a:{c=m;C=x;D=z;E=d;var H,R,I;x={};B=c.dataTypes.slice();if(B[1])for(H in c.converters)x[H.toLowerCase()]=c.converters[H];for(O=B.shift();O;)if(c.responseFields[O]&&(D[c.responseFields[O]]=C),!I&&E&&c.dataFilter&&(C=c.dataFilter(C,c.dataType)),I=O,O=B.shift())if("*"===O)O=I;else if("*"!==I&&I!==O){if(H=x[I+" "+O]||x["* "+O],!H)for(J in x)if(R=J.split(" "),R[1]===O&&(H=x[I+" "+R[0]]||x["* "+R[0]])){!0===H?H=x[J]:!0!==x[J]&&(O=R[0],B.unshift(R[1]));
break}if(!0!==H)if(H&&c["throws"])C=H(C);else try{C=H(C)}catch(Lb){var J={state:"parsererror",error:H?Lb:"No conversion from "+I+" to "+O};break a}}J={state:"success",data:C}}x=J;d?(m.ifModified&&(v=z.getResponseHeader("Last-Modified"),v&&(p.lastModified[A]=v),v=z.getResponseHeader("etag"),v&&(p.etag[A]=v)),204===a||"HEAD"===m.type?w="nocontent":304===a?w="notmodified":(w=x.state,e=x.data,l=x.error,d=!l)):(l=w,(a||!w)&&(w="error",0>a&&(a=0)));z.status=a;z.statusText=(b||w)+"";d?r.resolveWith(n,[e,
w,z]):r.rejectWith(n,[z,w,l]);z.statusCode(u);u=void 0;h&&q.trigger(d?"ajaxSuccess":"ajaxError",[z,m,d?e:l]);t.fireWith(n,[z,w]);h&&(q.trigger("ajaxComplete",[z,m]),--p.active||p.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=void 0);b=b||{};var d,e,f,g,h,k,l,m=p.ajaxSetup({},b),n=m.context||m,q=m.context&&(n.nodeType||n.jquery)?p(n):p.event,r=p.Deferred(),t=p.Callbacks("once memory"),u=m.statusCode||{},v={},w={},y=0,x="canceled",z={readyState:0,getResponseHeader:function(a){var b;if(2===
y){if(!l)for(l={};b=ic.exec(f);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===y?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return y||(a=w[c]=w[c]||a,v[a]=b),this},overrideMimeType:function(a){return y||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>y)for(b in a)u[b]=[u[b],a[b]];else z.always(a[z.status]);return this},abort:function(a){a=a||x;return k&&k.abort(a),c(0,a),this}};if(r.promise(z).complete=
t.add,z.success=z.done,z.error=z.fail,m.url=((a||m.url||na)+"").replace(hc,"").replace(kc,za[1]+"//"),m.type=b.method||b.type||m.method||m.type,m.dataTypes=p.trim(m.dataType||"*").toLowerCase().match(la)||[""],null==m.crossDomain&&(d=qb.exec(m.url.toLowerCase()),m.crossDomain=!(!d||d[1]===za[1]&&d[2]===za[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(za[3]||("http:"===za[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=p.param(m.data,m.traditional)),Y(rb,m,b,z),2===y)return z;
(h=m.global)&&0===p.active++&&p.event.trigger("ajaxStart");m.type=m.type.toUpperCase();m.hasContent=!jc.test(m.type);var A=m.url;m.hasContent||(m.data&&(A=m.url+=(Xa.test(A)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=pb.test(A)?A.replace(pb,"$1_="+Wa++):A+(Xa.test(A)?"&":"?")+"_="+Wa++));m.ifModified&&(p.lastModified[A]&&z.setRequestHeader("If-Modified-Since",p.lastModified[A]),p.etag[A]&&z.setRequestHeader("If-None-Match",p.etag[A]));(m.data&&m.hasContent&&!1!==m.contentType||b.contentType)&&
z.setRequestHeader("Content-Type",m.contentType);z.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+sb+"; q=0.01":""):m.accepts["*"]);for(e in m.headers)z.setRequestHeader(e,m.headers[e]);if(m.beforeSend&&(!1===m.beforeSend.call(n,z,m)||2===y))return z.abort();x="abort";for(e in{success:1,error:1,complete:1})z[e](m[e]);if(k=Y(Pa,m,b,z)){z.readyState=1;h&&q.trigger("ajaxSend",[z,m]);m.async&&0<m.timeout&&(g=setTimeout(function(){z.abort("timeout")},
m.timeout));try{y=1,k.send(v,c)}catch(eb){if(!(2>y))throw eb;c(-1,eb)}}else c(-1,"No Transport");return z},getJSON:function(a,b,c){return p.get(a,b,c,"json")},getScript:function(a,b){return p.get(a,void 0,b,"script")}});p.each(["get","post"],function(a,b){p[b]=function(a,c,d,e){return p.isFunction(c)&&(e=e||d,d=c,c=void 0),p.ajax({url:a,type:b,dataType:e,data:c,success:d})}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,
a)}});p._evalUrl=function(a){return p.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(p.isFunction(a)?
function(b){p(this).wrapInner(a.call(this,b))}:function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}});p.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!L.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||
p.css(a,"display"))};p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)};var lc=/%20/g,Jb=/\[\]$/,tb=/\r?\n/g,mc=/^(?:submit|button|image|reset|file)$/i,nc=/^(?:input|select|textarea|keygen)/i;p.param=function(a,b){var c,d=[],e=function(a,b){b=p.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){e(this.name,this.value)});
else for(c in a)Z(c,a[c],b,e);return d.join("&").replace(lc,"+")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&nc.test(this.nodeName)&&!mc.test(a)&&(this.checked||!Oa.test(a))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a){return{name:b.name,
value:a.replace(tb,"\r\n")}}):{name:b.name,value:c.replace(tb,"\r\n")}}).get()}});p.ajaxSettings.xhr=void 0!==F.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&X()))a:{try{a=new F.ActiveXObject("Microsoft.XMLHTTP");break a}catch(R){}a=void 0}return a}:X;var oc=0,Ma={},Na=p.ajaxSettings.xhr();F.ActiveXObject&&p(F).on("unload",function(){for(var a in Ma)Ma[a](void 0,!0)});L.cors=!!Na&&"withCredentials"in Na;(Na=L.ajax=!!Na)&&p.ajaxTransport(function(a){if(!a.crossDomain||
L.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++oc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null);b=function(c,e){if(b&&(e||4===f.readyState))if(delete Ma[g],b=void 0,f.onreadystatechange=p.noop,e)4!==
f.readyState&&f.abort();else{var h={};var k=f.status;"string"==typeof f.responseText&&(h.text=f.responseText);try{var l=f.statusText}catch(Ib){l=""}k||!a.isLocal||a.crossDomain?1223===k&&(k=204):k=h.text?200:404}h&&d(k,l,h,f.getAllResponseHeaders())};a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Ma[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},
converters:{"text script":function(a){return p.globalEval(a),a}}});p.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=Q.head||p("head")[0]||Q.documentElement;return{send:function(d,e){b=Q.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&
(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))};c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ub=[],Ya=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ub.pop()||p.expando+"_"+Wa++;return this[a]=!0,a}});p.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=!1!==a.jsonp&&(Ya.test(a.url)?"url":"string"==typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&
Ya.test(a.data)&&"data");return g||"jsonp"===a.dataTypes[0]?(d=a.jsonpCallback=p.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(Ya,"$1"+d):!1!==a.jsonp&&(a.url+=(Xa.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return f||p.error(d+" was not called"),f[0]},a.dataTypes[0]="json",e=F[d],F[d]=function(){f=arguments},c.always(function(){F[d]=e;a[d]&&(a.jsonpCallback=b.jsonpCallback,ub.push(d));f&&p.isFunction(e)&&e(f[0]);f=e=void 0}),"script"):
void 0});p.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1);b=b||Q;var d=$a.exec(a);c=!c&&[];return d?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c),c&&c.length&&p(c).remove(),p.merge([],d.childNodes))};var vb=p.fn.load;p.fn.load=function(a,b,c){if("string"!=typeof a&&vb)return vb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return 0<=h&&(d=p.trim(a.slice(h,a.length)),a=a.slice(0,h)),p.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&
(f="POST"),0<g.length&&p.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments;g.html(d?p("<div>").append(p.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this};p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length};var wb=F.document.documentElement;p.offset={setOffset:function(a,b,c){var d,e,f,g=p.css(a,"position"),h=p(a),k={};"static"===g&&(a.style.position="relative");var l=h.offset();var m=
p.css(a,"top");var n=p.css(a,"left");("absolute"===g||"fixed"===g)&&-1<p.inArray("auto",[m,n])?(d=h.position(),f=d.top,e=d.left):(f=parseFloat(m)||0,e=parseFloat(n)||0);p.isFunction(b)&&(b=b.call(a,c,l));null!=b.top&&(k.top=b.top-l.top+f);null!=b.left&&(k.left=b.left-l.left+e);"using"in b?b.using.call(a,k):h.css(k)}};p.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;
if(f)return b=f.documentElement,p.contains(b,e)?("undefined"!==typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=ba(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===p.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),p.nodeName(a[0],"html")||(c=a.offset()),c.top+=p.css(a[0],"borderTopWidth",!0),
c.left+=p.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-p.css(d,"marginTop",!0),left:b.left-c.left-p.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||wb;a&&!p.nodeName(a,"html")&&"static"===p.css(a,"position");)a=a.offsetParent;return a||wb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);p.fn[a]=function(d){return ha(this,function(a,d,e){var f=ba(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:
a[d]:void(f?f.scrollTo(c?p(f).scrollLeft():e,c?e:p(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}});p.each(["top","left"],function(a,b){p.cssHooks[b]=C(L.pixelPosition,function(a,c){return c?(c=sa(a,b),Fa.test(c)?p(a).position()[b]+"px":c):void 0})});p.each({Height:"height",Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){p.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return ha(this,function(b,
c,d){var e;return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?p.css(b,c,g):p.style(b,c,d,g)},b,f?d:void 0,f,null)}})});p.fn.size=function(){return this.length};p.fn.andSelf=p.fn.addBack;"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var pc=F.jQuery,qc=F.$;return p.noConflict=function(a){return F.$===p&&(F.$=qc),a&&F.jQuery===
p&&(F.jQuery=pc),p},"undefined"===typeof g&&(F.jQuery=F.$=p),p});